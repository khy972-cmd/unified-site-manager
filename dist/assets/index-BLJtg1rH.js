var Jm=e=>{throw TypeError(e)};var ku=(e,t,r)=>t.has(e)||Jm("Cannot "+r);var R=(e,t,r)=>(ku(e,t,"read from private field"),r?r.call(e):t.get(e)),we=(e,t,r)=>t.has(e)?Jm("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),se=(e,t,r,n)=>(ku(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),Me=(e,t,r)=>(ku(e,t,"access private method"),r);var Bl=(e,t,r,n)=>({set _(s){se(e,t,s,r)},get _(){return R(e,t,n)}});function a2(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const a=Object.getOwnPropertyDescriptor(n,s);a&&Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();function ab(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ib={exports:{}},Dd={},lb={exports:{}},Fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kl=Symbol.for("react.element"),i2=Symbol.for("react.portal"),l2=Symbol.for("react.fragment"),c2=Symbol.for("react.strict_mode"),d2=Symbol.for("react.profiler"),u2=Symbol.for("react.provider"),h2=Symbol.for("react.context"),f2=Symbol.for("react.forward_ref"),p2=Symbol.for("react.suspense"),m2=Symbol.for("react.memo"),x2=Symbol.for("react.lazy"),Xm=Symbol.iterator;function g2(e){return e===null||typeof e!="object"?null:(e=Xm&&e[Xm]||e["@@iterator"],typeof e=="function"?e:null)}var cb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},db=Object.assign,ub={};function Ja(e,t,r){this.props=e,this.context=t,this.refs=ub,this.updater=r||cb}Ja.prototype.isReactComponent={};Ja.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ja.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function hb(){}hb.prototype=Ja.prototype;function ip(e,t,r){this.props=e,this.context=t,this.refs=ub,this.updater=r||cb}var lp=ip.prototype=new hb;lp.constructor=ip;db(lp,Ja.prototype);lp.isPureReactComponent=!0;var Zm=Array.isArray,fb=Object.prototype.hasOwnProperty,cp={current:null},pb={key:!0,ref:!0,__self:!0,__source:!0};function mb(e,t,r){var n,s={},a=null,i=null;if(t!=null)for(n in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(a=""+t.key),t)fb.call(t,n)&&!pb.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:kl,type:e,key:a,ref:i,props:s,_owner:cp.current}}function b2(e,t){return{$$typeof:kl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function dp(e){return typeof e=="object"&&e!==null&&e.$$typeof===kl}function v2(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var ex=/\/+/g;function Nu(e,t){return typeof e=="object"&&e!==null&&e.key!=null?v2(""+e.key):t.toString(36)}function Tc(e,t,r,n,s){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(a){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case kl:case i2:i=!0}}if(i)return i=e,s=s(i),e=n===""?"."+Nu(i,0):n,Zm(s)?(r="",e!=null&&(r=e.replace(ex,"$&/")+"/"),Tc(s,t,r,"",function(d){return d})):s!=null&&(dp(s)&&(s=b2(s,r+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(ex,"$&/")+"/")+e)),t.push(s)),1;if(i=0,n=n===""?".":n+":",Zm(e))for(var l=0;l<e.length;l++){a=e[l];var c=n+Nu(a,l);i+=Tc(a,t,r,c,s)}else if(c=g2(e),typeof c=="function")for(e=c.call(e),l=0;!(a=e.next()).done;)a=a.value,c=n+Nu(a,l++),i+=Tc(a,t,r,c,s);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function zl(e,t,r){if(e==null)return e;var n=[],s=0;return Tc(e,n,"","",function(a){return t.call(r,a,s++)}),n}function y2(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ur={current:null},Rc={transition:null},w2={ReactCurrentDispatcher:ur,ReactCurrentBatchConfig:Rc,ReactCurrentOwner:cp};function xb(){throw Error("act(...) is not supported in production builds of React.")}Fe.Children={map:zl,forEach:function(e,t,r){zl(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return zl(e,function(){t++}),t},toArray:function(e){return zl(e,function(t){return t})||[]},only:function(e){if(!dp(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Fe.Component=Ja;Fe.Fragment=l2;Fe.Profiler=d2;Fe.PureComponent=ip;Fe.StrictMode=c2;Fe.Suspense=p2;Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=w2;Fe.act=xb;Fe.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=db({},e.props),s=e.key,a=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,i=cp.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)fb.call(t,c)&&!pb.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:kl,type:e.type,key:s,ref:a,props:n,_owner:i}};Fe.createContext=function(e){return e={$$typeof:h2,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:u2,_context:e},e.Consumer=e};Fe.createElement=mb;Fe.createFactory=function(e){var t=mb.bind(null,e);return t.type=e,t};Fe.createRef=function(){return{current:null}};Fe.forwardRef=function(e){return{$$typeof:f2,render:e}};Fe.isValidElement=dp;Fe.lazy=function(e){return{$$typeof:x2,_payload:{_status:-1,_result:e},_init:y2}};Fe.memo=function(e,t){return{$$typeof:m2,type:e,compare:t===void 0?null:t}};Fe.startTransition=function(e){var t=Rc.transition;Rc.transition={};try{e()}finally{Rc.transition=t}};Fe.unstable_act=xb;Fe.useCallback=function(e,t){return ur.current.useCallback(e,t)};Fe.useContext=function(e){return ur.current.useContext(e)};Fe.useDebugValue=function(){};Fe.useDeferredValue=function(e){return ur.current.useDeferredValue(e)};Fe.useEffect=function(e,t){return ur.current.useEffect(e,t)};Fe.useId=function(){return ur.current.useId()};Fe.useImperativeHandle=function(e,t,r){return ur.current.useImperativeHandle(e,t,r)};Fe.useInsertionEffect=function(e,t){return ur.current.useInsertionEffect(e,t)};Fe.useLayoutEffect=function(e,t){return ur.current.useLayoutEffect(e,t)};Fe.useMemo=function(e,t){return ur.current.useMemo(e,t)};Fe.useReducer=function(e,t,r){return ur.current.useReducer(e,t,r)};Fe.useRef=function(e){return ur.current.useRef(e)};Fe.useState=function(e){return ur.current.useState(e)};Fe.useSyncExternalStore=function(e,t,r){return ur.current.useSyncExternalStore(e,t,r)};Fe.useTransition=function(){return ur.current.useTransition()};Fe.version="18.3.1";lb.exports=Fe;var m=lb.exports;const B=ab(m),up=a2({__proto__:null,default:B},[m]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j2=m,k2=Symbol.for("react.element"),N2=Symbol.for("react.fragment"),_2=Object.prototype.hasOwnProperty,S2=j2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,C2={key:!0,ref:!0,__self:!0,__source:!0};function gb(e,t,r){var n,s={},a=null,i=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(i=t.ref);for(n in t)_2.call(t,n)&&!C2.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:k2,type:e,key:a,ref:i,props:s,_owner:S2.current}}Dd.Fragment=N2;Dd.jsx=gb;Dd.jsxs=gb;ib.exports=Dd;var o=ib.exports,bb={exports:{}},Lr={},vb={exports:{}},yb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(A,O){var L=A.length;A.push(O);e:for(;0<L;){var re=L-1>>>1,ee=A[re];if(0<s(ee,O))A[re]=O,A[L]=ee,L=re;else break e}}function r(A){return A.length===0?null:A[0]}function n(A){if(A.length===0)return null;var O=A[0],L=A.pop();if(L!==O){A[0]=L;e:for(var re=0,ee=A.length,G=ee>>>1;re<G;){var le=2*(re+1)-1,ve=A[le],Te=le+1,je=A[Te];if(0>s(ve,L))Te<ee&&0>s(je,ve)?(A[re]=je,A[Te]=L,re=Te):(A[re]=ve,A[le]=L,re=le);else if(Te<ee&&0>s(je,L))A[re]=je,A[Te]=L,re=Te;else break e}}return O}function s(A,O){var L=A.sortIndex-O.sortIndex;return L!==0?L:A.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var c=[],d=[],h=1,u=null,f=3,p=!1,b=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(A){for(var O=r(d);O!==null;){if(O.callback===null)n(d);else if(O.startTime<=A)n(d),O.sortIndex=O.expirationTime,t(c,O);else break;O=r(d)}}function k(A){if(g=!1,v(A),!b)if(r(c)!==null)b=!0,K(N);else{var O=r(d);O!==null&&ne(k,O.startTime-A)}}function N(A,O){b=!1,g&&(g=!1,x(P),P=-1),p=!0;var L=f;try{for(v(O),u=r(c);u!==null&&(!(u.expirationTime>O)||A&&!M());){var re=u.callback;if(typeof re=="function"){u.callback=null,f=u.priorityLevel;var ee=re(u.expirationTime<=O);O=e.unstable_now(),typeof ee=="function"?u.callback=ee:u===r(c)&&n(c),v(O)}else n(c);u=r(c)}if(u!==null)var G=!0;else{var le=r(d);le!==null&&ne(k,le.startTime-O),G=!1}return G}finally{u=null,f=L,p=!1}}var S=!1,_=null,P=-1,D=5,T=-1;function M(){return!(e.unstable_now()-T<D)}function z(){if(_!==null){var A=e.unstable_now();T=A;var O=!0;try{O=_(!0,A)}finally{O?F():(S=!1,_=null)}}else S=!1}var F;if(typeof y=="function")F=function(){y(z)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,Q=W.port2;W.port1.onmessage=z,F=function(){Q.postMessage(null)}}else F=function(){w(z,0)};function K(A){_=A,S||(S=!0,F())}function ne(A,O){P=w(function(){A(e.unstable_now())},O)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_continueExecution=function(){b||p||(b=!0,K(N))},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<A?Math.floor(1e3/A):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(A){switch(f){case 1:case 2:case 3:var O=3;break;default:O=f}var L=f;f=O;try{return A()}finally{f=L}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(A,O){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var L=f;f=A;try{return O()}finally{f=L}},e.unstable_scheduleCallback=function(A,O,L){var re=e.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?re+L:re):L=re,A){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=L+ee,A={id:h++,callback:O,priorityLevel:A,startTime:L,expirationTime:ee,sortIndex:-1},L>re?(A.sortIndex=L,t(d,A),r(c)===null&&A===r(d)&&(g?(x(P),P=-1):g=!0,ne(k,L-re))):(A.sortIndex=ee,t(c,A),b||p||(b=!0,K(N))),A},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(A){var O=f;return function(){var L=f;f=O;try{return A.apply(this,arguments)}finally{f=L}}}})(yb);vb.exports=yb;var E2=vb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P2=m,Dr=E2;function X(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var wb=new Set,Wi={};function Oo(e,t){Da(e,t),Da(e+"Capture",t)}function Da(e,t){for(Wi[e]=t,e=0;e<t.length;e++)wb.add(t[e])}var Wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Eh=Object.prototype.hasOwnProperty,T2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,tx={},rx={};function R2(e){return Eh.call(rx,e)?!0:Eh.call(tx,e)?!1:T2.test(e)?rx[e]=!0:(tx[e]=!0,!1)}function O2(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function A2(e,t,r,n){if(t===null||typeof t>"u"||O2(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function hr(e,t,r,n,s,a,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var Ht={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ht[e]=new hr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ht[t]=new hr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ht[e]=new hr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ht[e]=new hr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ht[e]=new hr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ht[e]=new hr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ht[e]=new hr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ht[e]=new hr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ht[e]=new hr(e,5,!1,e.toLowerCase(),null,!1,!1)});var hp=/[\-:]([a-z])/g;function fp(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(hp,fp);Ht[t]=new hr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(hp,fp);Ht[t]=new hr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(hp,fp);Ht[t]=new hr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ht[e]=new hr(e,1,!1,e.toLowerCase(),null,!1,!1)});Ht.xlinkHref=new hr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ht[e]=new hr(e,1,!1,e.toLowerCase(),null,!0,!0)});function pp(e,t,r,n){var s=Ht.hasOwnProperty(t)?Ht[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(A2(t,r,s,n)&&(r=null),n||s===null?R2(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Yn=P2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wl=Symbol.for("react.element"),Zo=Symbol.for("react.portal"),ea=Symbol.for("react.fragment"),mp=Symbol.for("react.strict_mode"),Ph=Symbol.for("react.profiler"),jb=Symbol.for("react.provider"),kb=Symbol.for("react.context"),xp=Symbol.for("react.forward_ref"),Th=Symbol.for("react.suspense"),Rh=Symbol.for("react.suspense_list"),gp=Symbol.for("react.memo"),ls=Symbol.for("react.lazy"),Nb=Symbol.for("react.offscreen"),nx=Symbol.iterator;function hi(e){return e===null||typeof e!="object"?null:(e=nx&&e[nx]||e["@@iterator"],typeof e=="function"?e:null)}var ft=Object.assign,_u;function Si(e){if(_u===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);_u=t&&t[1]||""}return`
`+_u+e}var Su=!1;function Cu(e,t){if(!e||Su)return"";Su=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),a=n.stack.split(`
`),i=s.length-1,l=a.length-1;1<=i&&0<=l&&s[i]!==a[l];)l--;for(;1<=i&&0<=l;i--,l--)if(s[i]!==a[l]){if(i!==1||l!==1)do if(i--,l--,0>l||s[i]!==a[l]){var c=`
`+s[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=l);break}}}finally{Su=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Si(e):""}function I2(e){switch(e.tag){case 5:return Si(e.type);case 16:return Si("Lazy");case 13:return Si("Suspense");case 19:return Si("SuspenseList");case 0:case 2:case 15:return e=Cu(e.type,!1),e;case 11:return e=Cu(e.type.render,!1),e;case 1:return e=Cu(e.type,!0),e;default:return""}}function Oh(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ea:return"Fragment";case Zo:return"Portal";case Ph:return"Profiler";case mp:return"StrictMode";case Th:return"Suspense";case Rh:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case kb:return(e.displayName||"Context")+".Consumer";case jb:return(e._context.displayName||"Context")+".Provider";case xp:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case gp:return t=e.displayName||null,t!==null?t:Oh(e.type)||"Memo";case ls:t=e._payload,e=e._init;try{return Oh(e(t))}catch{}}return null}function D2(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Oh(t);case 8:return t===mp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ms(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function _b(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function L2(e){var t=_b(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(i){n=""+i,a.call(this,i)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ql(e){e._valueTracker||(e._valueTracker=L2(e))}function Sb(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=_b(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Gc(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ah(e,t){var r=t.checked;return ft({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function sx(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Ms(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Cb(e,t){t=t.checked,t!=null&&pp(e,"checked",t,!1)}function Ih(e,t){Cb(e,t);var r=Ms(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Dh(e,t.type,r):t.hasOwnProperty("defaultValue")&&Dh(e,t.type,Ms(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ox(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Dh(e,t,r){(t!=="number"||Gc(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Ci=Array.isArray;function fa(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Ms(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Lh(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(X(91));return ft({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ax(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(X(92));if(Ci(r)){if(1<r.length)throw Error(X(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Ms(r)}}function Eb(e,t){var r=Ms(t.value),n=Ms(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function ix(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Pb(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mh(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Pb(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Hl,Tb=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Hl=Hl||document.createElement("div"),Hl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Hl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function qi(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Oi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},M2=["Webkit","ms","Moz","O"];Object.keys(Oi).forEach(function(e){M2.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Oi[t]=Oi[e]})});function Rb(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Oi.hasOwnProperty(e)&&Oi[e]?(""+t).trim():t+"px"}function Ob(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=Rb(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var $2=ft({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $h(e,t){if(t){if($2[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(X(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(X(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(X(61))}if(t.style!=null&&typeof t.style!="object")throw Error(X(62))}}function Fh(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uh=null;function bp(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Bh=null,pa=null,ma=null;function lx(e){if(e=Sl(e)){if(typeof Bh!="function")throw Error(X(280));var t=e.stateNode;t&&(t=Ud(t),Bh(e.stateNode,e.type,t))}}function Ab(e){pa?ma?ma.push(e):ma=[e]:pa=e}function Ib(){if(pa){var e=pa,t=ma;if(ma=pa=null,lx(e),t)for(e=0;e<t.length;e++)lx(t[e])}}function Db(e,t){return e(t)}function Lb(){}var Eu=!1;function Mb(e,t,r){if(Eu)return e(t,r);Eu=!0;try{return Db(e,t,r)}finally{Eu=!1,(pa!==null||ma!==null)&&(Lb(),Ib())}}function Hi(e,t){var r=e.stateNode;if(r===null)return null;var n=Ud(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(X(231,t,typeof r));return r}var zh=!1;if(Wn)try{var fi={};Object.defineProperty(fi,"passive",{get:function(){zh=!0}}),window.addEventListener("test",fi,fi),window.removeEventListener("test",fi,fi)}catch{zh=!1}function F2(e,t,r,n,s,a,i,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(h){this.onError(h)}}var Ai=!1,Qc=null,Yc=!1,Wh=null,U2={onError:function(e){Ai=!0,Qc=e}};function B2(e,t,r,n,s,a,i,l,c){Ai=!1,Qc=null,F2.apply(U2,arguments)}function z2(e,t,r,n,s,a,i,l,c){if(B2.apply(this,arguments),Ai){if(Ai){var d=Qc;Ai=!1,Qc=null}else throw Error(X(198));Yc||(Yc=!0,Wh=d)}}function Ao(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function $b(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function cx(e){if(Ao(e)!==e)throw Error(X(188))}function W2(e){var t=e.alternate;if(!t){if(t=Ao(e),t===null)throw Error(X(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var a=s.alternate;if(a===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===r)return cx(s),e;if(a===n)return cx(s),t;a=a.sibling}throw Error(X(188))}if(r.return!==n.return)r=s,n=a;else{for(var i=!1,l=s.child;l;){if(l===r){i=!0,r=s,n=a;break}if(l===n){i=!0,n=s,r=a;break}l=l.sibling}if(!i){for(l=a.child;l;){if(l===r){i=!0,r=a,n=s;break}if(l===n){i=!0,n=a,r=s;break}l=l.sibling}if(!i)throw Error(X(189))}}if(r.alternate!==n)throw Error(X(190))}if(r.tag!==3)throw Error(X(188));return r.stateNode.current===r?e:t}function Fb(e){return e=W2(e),e!==null?Ub(e):null}function Ub(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Ub(e);if(t!==null)return t;e=e.sibling}return null}var Bb=Dr.unstable_scheduleCallback,dx=Dr.unstable_cancelCallback,q2=Dr.unstable_shouldYield,H2=Dr.unstable_requestPaint,vt=Dr.unstable_now,V2=Dr.unstable_getCurrentPriorityLevel,vp=Dr.unstable_ImmediatePriority,zb=Dr.unstable_UserBlockingPriority,Jc=Dr.unstable_NormalPriority,K2=Dr.unstable_LowPriority,Wb=Dr.unstable_IdlePriority,Ld=null,_n=null;function G2(e){if(_n&&typeof _n.onCommitFiberRoot=="function")try{_n.onCommitFiberRoot(Ld,e,void 0,(e.current.flags&128)===128)}catch{}}var ln=Math.clz32?Math.clz32:J2,Q2=Math.log,Y2=Math.LN2;function J2(e){return e>>>=0,e===0?32:31-(Q2(e)/Y2|0)|0}var Vl=64,Kl=4194304;function Ei(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Xc(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,a=e.pingedLanes,i=r&268435455;if(i!==0){var l=i&~s;l!==0?n=Ei(l):(a&=i,a!==0&&(n=Ei(a)))}else i=r&~s,i!==0?n=Ei(i):a!==0&&(n=Ei(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,a=t&-t,s>=a||s===16&&(a&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-ln(t),s=1<<r,n|=e[r],t&=~s;return n}function X2(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Z2(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-ln(a),l=1<<i,c=s[i];c===-1?(!(l&r)||l&n)&&(s[i]=X2(l,t)):c<=t&&(e.expiredLanes|=l),a&=~l}}function qh(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function qb(){var e=Vl;return Vl<<=1,!(Vl&4194240)&&(Vl=64),e}function Pu(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Nl(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ln(t),e[t]=r}function ek(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-ln(r),a=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~a}}function yp(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-ln(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var Ke=0;function Hb(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Vb,wp,Kb,Gb,Qb,Hh=!1,Gl=[],Cs=null,Es=null,Ps=null,Vi=new Map,Ki=new Map,us=[],tk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ux(e,t){switch(e){case"focusin":case"focusout":Cs=null;break;case"dragenter":case"dragleave":Es=null;break;case"mouseover":case"mouseout":Ps=null;break;case"pointerover":case"pointerout":Vi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ki.delete(t.pointerId)}}function pi(e,t,r,n,s,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[s]},t!==null&&(t=Sl(t),t!==null&&wp(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function rk(e,t,r,n,s){switch(t){case"focusin":return Cs=pi(Cs,e,t,r,n,s),!0;case"dragenter":return Es=pi(Es,e,t,r,n,s),!0;case"mouseover":return Ps=pi(Ps,e,t,r,n,s),!0;case"pointerover":var a=s.pointerId;return Vi.set(a,pi(Vi.get(a)||null,e,t,r,n,s)),!0;case"gotpointercapture":return a=s.pointerId,Ki.set(a,pi(Ki.get(a)||null,e,t,r,n,s)),!0}return!1}function Yb(e){var t=so(e.target);if(t!==null){var r=Ao(t);if(r!==null){if(t=r.tag,t===13){if(t=$b(r),t!==null){e.blockedOn=t,Qb(e.priority,function(){Kb(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Oc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Vh(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Uh=n,r.target.dispatchEvent(n),Uh=null}else return t=Sl(r),t!==null&&wp(t),e.blockedOn=r,!1;t.shift()}return!0}function hx(e,t,r){Oc(e)&&r.delete(t)}function nk(){Hh=!1,Cs!==null&&Oc(Cs)&&(Cs=null),Es!==null&&Oc(Es)&&(Es=null),Ps!==null&&Oc(Ps)&&(Ps=null),Vi.forEach(hx),Ki.forEach(hx)}function mi(e,t){e.blockedOn===t&&(e.blockedOn=null,Hh||(Hh=!0,Dr.unstable_scheduleCallback(Dr.unstable_NormalPriority,nk)))}function Gi(e){function t(s){return mi(s,e)}if(0<Gl.length){mi(Gl[0],e);for(var r=1;r<Gl.length;r++){var n=Gl[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Cs!==null&&mi(Cs,e),Es!==null&&mi(Es,e),Ps!==null&&mi(Ps,e),Vi.forEach(t),Ki.forEach(t),r=0;r<us.length;r++)n=us[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<us.length&&(r=us[0],r.blockedOn===null);)Yb(r),r.blockedOn===null&&us.shift()}var xa=Yn.ReactCurrentBatchConfig,Zc=!0;function sk(e,t,r,n){var s=Ke,a=xa.transition;xa.transition=null;try{Ke=1,jp(e,t,r,n)}finally{Ke=s,xa.transition=a}}function ok(e,t,r,n){var s=Ke,a=xa.transition;xa.transition=null;try{Ke=4,jp(e,t,r,n)}finally{Ke=s,xa.transition=a}}function jp(e,t,r,n){if(Zc){var s=Vh(e,t,r,n);if(s===null)Fu(e,t,n,ed,r),ux(e,n);else if(rk(s,e,t,r,n))n.stopPropagation();else if(ux(e,n),t&4&&-1<tk.indexOf(e)){for(;s!==null;){var a=Sl(s);if(a!==null&&Vb(a),a=Vh(e,t,r,n),a===null&&Fu(e,t,n,ed,r),a===s)break;s=a}s!==null&&n.stopPropagation()}else Fu(e,t,n,null,r)}}var ed=null;function Vh(e,t,r,n){if(ed=null,e=bp(n),e=so(e),e!==null)if(t=Ao(e),t===null)e=null;else if(r=t.tag,r===13){if(e=$b(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ed=e,null}function Jb(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(V2()){case vp:return 1;case zb:return 4;case Jc:case K2:return 16;case Wb:return 536870912;default:return 16}default:return 16}}var Ns=null,kp=null,Ac=null;function Xb(){if(Ac)return Ac;var e,t=kp,r=t.length,n,s="value"in Ns?Ns.value:Ns.textContent,a=s.length;for(e=0;e<r&&t[e]===s[e];e++);var i=r-e;for(n=1;n<=i&&t[r-n]===s[a-n];n++);return Ac=s.slice(e,1<n?1-n:void 0)}function Ic(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ql(){return!0}function fx(){return!1}function Mr(e){function t(r,n,s,a,i){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Ql:fx,this.isPropagationStopped=fx,this}return ft(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ql)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ql)},persist:function(){},isPersistent:Ql}),t}var Xa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Np=Mr(Xa),_l=ft({},Xa,{view:0,detail:0}),ak=Mr(_l),Tu,Ru,xi,Md=ft({},_l,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_p,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==xi&&(xi&&e.type==="mousemove"?(Tu=e.screenX-xi.screenX,Ru=e.screenY-xi.screenY):Ru=Tu=0,xi=e),Tu)},movementY:function(e){return"movementY"in e?e.movementY:Ru}}),px=Mr(Md),ik=ft({},Md,{dataTransfer:0}),lk=Mr(ik),ck=ft({},_l,{relatedTarget:0}),Ou=Mr(ck),dk=ft({},Xa,{animationName:0,elapsedTime:0,pseudoElement:0}),uk=Mr(dk),hk=ft({},Xa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),fk=Mr(hk),pk=ft({},Xa,{data:0}),mx=Mr(pk),mk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bk(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=gk[e])?!!t[e]:!1}function _p(){return bk}var vk=ft({},_l,{key:function(e){if(e.key){var t=mk[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ic(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?xk[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_p,charCode:function(e){return e.type==="keypress"?Ic(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ic(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),yk=Mr(vk),wk=ft({},Md,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xx=Mr(wk),jk=ft({},_l,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_p}),kk=Mr(jk),Nk=ft({},Xa,{propertyName:0,elapsedTime:0,pseudoElement:0}),_k=Mr(Nk),Sk=ft({},Md,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ck=Mr(Sk),Ek=[9,13,27,32],Sp=Wn&&"CompositionEvent"in window,Ii=null;Wn&&"documentMode"in document&&(Ii=document.documentMode);var Pk=Wn&&"TextEvent"in window&&!Ii,Zb=Wn&&(!Sp||Ii&&8<Ii&&11>=Ii),gx=" ",bx=!1;function ev(e,t){switch(e){case"keyup":return Ek.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tv(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ta=!1;function Tk(e,t){switch(e){case"compositionend":return tv(t);case"keypress":return t.which!==32?null:(bx=!0,gx);case"textInput":return e=t.data,e===gx&&bx?null:e;default:return null}}function Rk(e,t){if(ta)return e==="compositionend"||!Sp&&ev(e,t)?(e=Xb(),Ac=kp=Ns=null,ta=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Zb&&t.locale!=="ko"?null:t.data;default:return null}}var Ok={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Ok[e.type]:t==="textarea"}function rv(e,t,r,n){Ab(n),t=td(t,"onChange"),0<t.length&&(r=new Np("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Di=null,Qi=null;function Ak(e){fv(e,0)}function $d(e){var t=sa(e);if(Sb(t))return e}function Ik(e,t){if(e==="change")return t}var nv=!1;if(Wn){var Au;if(Wn){var Iu="oninput"in document;if(!Iu){var yx=document.createElement("div");yx.setAttribute("oninput","return;"),Iu=typeof yx.oninput=="function"}Au=Iu}else Au=!1;nv=Au&&(!document.documentMode||9<document.documentMode)}function wx(){Di&&(Di.detachEvent("onpropertychange",sv),Qi=Di=null)}function sv(e){if(e.propertyName==="value"&&$d(Qi)){var t=[];rv(t,Qi,e,bp(e)),Mb(Ak,t)}}function Dk(e,t,r){e==="focusin"?(wx(),Di=t,Qi=r,Di.attachEvent("onpropertychange",sv)):e==="focusout"&&wx()}function Lk(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return $d(Qi)}function Mk(e,t){if(e==="click")return $d(t)}function $k(e,t){if(e==="input"||e==="change")return $d(t)}function Fk(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var dn=typeof Object.is=="function"?Object.is:Fk;function Yi(e,t){if(dn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Eh.call(t,s)||!dn(e[s],t[s]))return!1}return!0}function jx(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function kx(e,t){var r=jx(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=jx(r)}}function ov(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ov(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function av(){for(var e=window,t=Gc();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Gc(e.document)}return t}function Cp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Uk(e){var t=av(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&ov(r.ownerDocument.documentElement,r)){if(n!==null&&Cp(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,a=Math.min(n.start,s);n=n.end===void 0?a:Math.min(n.end,s),!e.extend&&a>n&&(s=n,n=a,a=s),s=kx(r,a);var i=kx(r,n);s&&i&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Bk=Wn&&"documentMode"in document&&11>=document.documentMode,ra=null,Kh=null,Li=null,Gh=!1;function Nx(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Gh||ra==null||ra!==Gc(n)||(n=ra,"selectionStart"in n&&Cp(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Li&&Yi(Li,n)||(Li=n,n=td(Kh,"onSelect"),0<n.length&&(t=new Np("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=ra)))}function Yl(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var na={animationend:Yl("Animation","AnimationEnd"),animationiteration:Yl("Animation","AnimationIteration"),animationstart:Yl("Animation","AnimationStart"),transitionend:Yl("Transition","TransitionEnd")},Du={},iv={};Wn&&(iv=document.createElement("div").style,"AnimationEvent"in window||(delete na.animationend.animation,delete na.animationiteration.animation,delete na.animationstart.animation),"TransitionEvent"in window||delete na.transitionend.transition);function Fd(e){if(Du[e])return Du[e];if(!na[e])return e;var t=na[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in iv)return Du[e]=t[r];return e}var lv=Fd("animationend"),cv=Fd("animationiteration"),dv=Fd("animationstart"),uv=Fd("transitionend"),hv=new Map,_x="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ws(e,t){hv.set(e,t),Oo(t,[e])}for(var Lu=0;Lu<_x.length;Lu++){var Mu=_x[Lu],zk=Mu.toLowerCase(),Wk=Mu[0].toUpperCase()+Mu.slice(1);Ws(zk,"on"+Wk)}Ws(lv,"onAnimationEnd");Ws(cv,"onAnimationIteration");Ws(dv,"onAnimationStart");Ws("dblclick","onDoubleClick");Ws("focusin","onFocus");Ws("focusout","onBlur");Ws(uv,"onTransitionEnd");Da("onMouseEnter",["mouseout","mouseover"]);Da("onMouseLeave",["mouseout","mouseover"]);Da("onPointerEnter",["pointerout","pointerover"]);Da("onPointerLeave",["pointerout","pointerover"]);Oo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Oo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Oo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Oo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Oo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Oo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pi));function Sx(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,z2(n,t,void 0,e),e.currentTarget=null}function fv(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var i=n.length-1;0<=i;i--){var l=n[i],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==a&&s.isPropagationStopped())break e;Sx(s,l,d),a=c}else for(i=0;i<n.length;i++){if(l=n[i],c=l.instance,d=l.currentTarget,l=l.listener,c!==a&&s.isPropagationStopped())break e;Sx(s,l,d),a=c}}}if(Yc)throw e=Wh,Yc=!1,Wh=null,e}function nt(e,t){var r=t[Zh];r===void 0&&(r=t[Zh]=new Set);var n=e+"__bubble";r.has(n)||(pv(t,e,2,!1),r.add(n))}function $u(e,t,r){var n=0;t&&(n|=4),pv(r,e,n,t)}var Jl="_reactListening"+Math.random().toString(36).slice(2);function Ji(e){if(!e[Jl]){e[Jl]=!0,wb.forEach(function(r){r!=="selectionchange"&&(qk.has(r)||$u(r,!1,e),$u(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Jl]||(t[Jl]=!0,$u("selectionchange",!1,t))}}function pv(e,t,r,n){switch(Jb(t)){case 1:var s=sk;break;case 4:s=ok;break;default:s=jp}r=s.bind(null,t,r,e),s=void 0,!zh||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Fu(e,t,r,n,s){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(i===4)for(i=n.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;i=i.return}for(;l!==null;){if(i=so(l),i===null)return;if(c=i.tag,c===5||c===6){n=a=i;continue e}l=l.parentNode}}n=n.return}Mb(function(){var d=a,h=bp(r),u=[];e:{var f=hv.get(e);if(f!==void 0){var p=Np,b=e;switch(e){case"keypress":if(Ic(r)===0)break e;case"keydown":case"keyup":p=yk;break;case"focusin":b="focus",p=Ou;break;case"focusout":b="blur",p=Ou;break;case"beforeblur":case"afterblur":p=Ou;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=px;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=lk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=kk;break;case lv:case cv:case dv:p=uk;break;case uv:p=_k;break;case"scroll":p=ak;break;case"wheel":p=Ck;break;case"copy":case"cut":case"paste":p=fk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=xx}var g=(t&4)!==0,w=!g&&e==="scroll",x=g?f!==null?f+"Capture":null:f;g=[];for(var y=d,v;y!==null;){v=y;var k=v.stateNode;if(v.tag===5&&k!==null&&(v=k,x!==null&&(k=Hi(y,x),k!=null&&g.push(Xi(y,k,v)))),w)break;y=y.return}0<g.length&&(f=new p(f,b,null,r,h),u.push({event:f,listeners:g}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",f&&r!==Uh&&(b=r.relatedTarget||r.fromElement)&&(so(b)||b[qn]))break e;if((p||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,p?(b=r.relatedTarget||r.toElement,p=d,b=b?so(b):null,b!==null&&(w=Ao(b),b!==w||b.tag!==5&&b.tag!==6)&&(b=null)):(p=null,b=d),p!==b)){if(g=px,k="onMouseLeave",x="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(g=xx,k="onPointerLeave",x="onPointerEnter",y="pointer"),w=p==null?f:sa(p),v=b==null?f:sa(b),f=new g(k,y+"leave",p,r,h),f.target=w,f.relatedTarget=v,k=null,so(h)===d&&(g=new g(x,y+"enter",b,r,h),g.target=v,g.relatedTarget=w,k=g),w=k,p&&b)t:{for(g=p,x=b,y=0,v=g;v;v=$o(v))y++;for(v=0,k=x;k;k=$o(k))v++;for(;0<y-v;)g=$o(g),y--;for(;0<v-y;)x=$o(x),v--;for(;y--;){if(g===x||x!==null&&g===x.alternate)break t;g=$o(g),x=$o(x)}g=null}else g=null;p!==null&&Cx(u,f,p,g,!1),b!==null&&w!==null&&Cx(u,w,b,g,!0)}}e:{if(f=d?sa(d):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var N=Ik;else if(vx(f))if(nv)N=$k;else{N=Lk;var S=Dk}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(N=Mk);if(N&&(N=N(e,d))){rv(u,N,r,h);break e}S&&S(e,f,d),e==="focusout"&&(S=f._wrapperState)&&S.controlled&&f.type==="number"&&Dh(f,"number",f.value)}switch(S=d?sa(d):window,e){case"focusin":(vx(S)||S.contentEditable==="true")&&(ra=S,Kh=d,Li=null);break;case"focusout":Li=Kh=ra=null;break;case"mousedown":Gh=!0;break;case"contextmenu":case"mouseup":case"dragend":Gh=!1,Nx(u,r,h);break;case"selectionchange":if(Bk)break;case"keydown":case"keyup":Nx(u,r,h)}var _;if(Sp)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else ta?ev(e,r)&&(P="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(P="onCompositionStart");P&&(Zb&&r.locale!=="ko"&&(ta||P!=="onCompositionStart"?P==="onCompositionEnd"&&ta&&(_=Xb()):(Ns=h,kp="value"in Ns?Ns.value:Ns.textContent,ta=!0)),S=td(d,P),0<S.length&&(P=new mx(P,e,null,r,h),u.push({event:P,listeners:S}),_?P.data=_:(_=tv(r),_!==null&&(P.data=_)))),(_=Pk?Tk(e,r):Rk(e,r))&&(d=td(d,"onBeforeInput"),0<d.length&&(h=new mx("onBeforeInput","beforeinput",null,r,h),u.push({event:h,listeners:d}),h.data=_))}fv(u,t)})}function Xi(e,t,r){return{instance:e,listener:t,currentTarget:r}}function td(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Hi(e,r),a!=null&&n.unshift(Xi(e,a,s)),a=Hi(e,t),a!=null&&n.push(Xi(e,a,s))),e=e.return}return n}function $o(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Cx(e,t,r,n,s){for(var a=t._reactName,i=[];r!==null&&r!==n;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,s?(c=Hi(r,a),c!=null&&i.unshift(Xi(r,c,l))):s||(c=Hi(r,a),c!=null&&i.push(Xi(r,c,l)))),r=r.return}i.length!==0&&e.push({event:t,listeners:i})}var Hk=/\r\n?/g,Vk=/\u0000|\uFFFD/g;function Ex(e){return(typeof e=="string"?e:""+e).replace(Hk,`
`).replace(Vk,"")}function Xl(e,t,r){if(t=Ex(t),Ex(e)!==t&&r)throw Error(X(425))}function rd(){}var Qh=null,Yh=null;function Jh(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Xh=typeof setTimeout=="function"?setTimeout:void 0,Kk=typeof clearTimeout=="function"?clearTimeout:void 0,Px=typeof Promise=="function"?Promise:void 0,Gk=typeof queueMicrotask=="function"?queueMicrotask:typeof Px<"u"?function(e){return Px.resolve(null).then(e).catch(Qk)}:Xh;function Qk(e){setTimeout(function(){throw e})}function Uu(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Gi(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Gi(t)}function Ts(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Tx(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Za=Math.random().toString(36).slice(2),jn="__reactFiber$"+Za,Zi="__reactProps$"+Za,qn="__reactContainer$"+Za,Zh="__reactEvents$"+Za,Yk="__reactListeners$"+Za,Jk="__reactHandles$"+Za;function so(e){var t=e[jn];if(t)return t;for(var r=e.parentNode;r;){if(t=r[qn]||r[jn]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Tx(e);e!==null;){if(r=e[jn])return r;e=Tx(e)}return t}e=r,r=e.parentNode}return null}function Sl(e){return e=e[jn]||e[qn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function sa(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(X(33))}function Ud(e){return e[Zi]||null}var ef=[],oa=-1;function qs(e){return{current:e}}function st(e){0>oa||(e.current=ef[oa],ef[oa]=null,oa--)}function Ze(e,t){oa++,ef[oa]=e.current,e.current=t}var $s={},rr=qs($s),yr=qs(!1),jo=$s;function La(e,t){var r=e.type.contextTypes;if(!r)return $s;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in r)s[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function wr(e){return e=e.childContextTypes,e!=null}function nd(){st(yr),st(rr)}function Rx(e,t,r){if(rr.current!==$s)throw Error(X(168));Ze(rr,t),Ze(yr,r)}function mv(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(X(108,D2(e)||"Unknown",s));return ft({},r,n)}function sd(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||$s,jo=rr.current,Ze(rr,e),Ze(yr,yr.current),!0}function Ox(e,t,r){var n=e.stateNode;if(!n)throw Error(X(169));r?(e=mv(e,t,jo),n.__reactInternalMemoizedMergedChildContext=e,st(yr),st(rr),Ze(rr,e)):st(yr),Ze(yr,r)}var Ln=null,Bd=!1,Bu=!1;function xv(e){Ln===null?Ln=[e]:Ln.push(e)}function Xk(e){Bd=!0,xv(e)}function Hs(){if(!Bu&&Ln!==null){Bu=!0;var e=0,t=Ke;try{var r=Ln;for(Ke=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Ln=null,Bd=!1}catch(s){throw Ln!==null&&(Ln=Ln.slice(e+1)),Bb(vp,Hs),s}finally{Ke=t,Bu=!1}}return null}var aa=[],ia=0,od=null,ad=0,zr=[],Wr=0,ko=null,Fn=1,Un="";function Zs(e,t){aa[ia++]=ad,aa[ia++]=od,od=e,ad=t}function gv(e,t,r){zr[Wr++]=Fn,zr[Wr++]=Un,zr[Wr++]=ko,ko=e;var n=Fn;e=Un;var s=32-ln(n)-1;n&=~(1<<s),r+=1;var a=32-ln(t)+s;if(30<a){var i=s-s%5;a=(n&(1<<i)-1).toString(32),n>>=i,s-=i,Fn=1<<32-ln(t)+s|r<<s|n,Un=a+e}else Fn=1<<a|r<<s|n,Un=e}function Ep(e){e.return!==null&&(Zs(e,1),gv(e,1,0))}function Pp(e){for(;e===od;)od=aa[--ia],aa[ia]=null,ad=aa[--ia],aa[ia]=null;for(;e===ko;)ko=zr[--Wr],zr[Wr]=null,Un=zr[--Wr],zr[Wr]=null,Fn=zr[--Wr],zr[Wr]=null}var Ar=null,Or=null,it=!1,an=null;function bv(e,t){var r=qr(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Ax(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ar=e,Or=Ts(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ar=e,Or=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=ko!==null?{id:Fn,overflow:Un}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=qr(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Ar=e,Or=null,!0):!1;default:return!1}}function tf(e){return(e.mode&1)!==0&&(e.flags&128)===0}function rf(e){if(it){var t=Or;if(t){var r=t;if(!Ax(e,t)){if(tf(e))throw Error(X(418));t=Ts(r.nextSibling);var n=Ar;t&&Ax(e,t)?bv(n,r):(e.flags=e.flags&-4097|2,it=!1,Ar=e)}}else{if(tf(e))throw Error(X(418));e.flags=e.flags&-4097|2,it=!1,Ar=e}}}function Ix(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ar=e}function Zl(e){if(e!==Ar)return!1;if(!it)return Ix(e),it=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Jh(e.type,e.memoizedProps)),t&&(t=Or)){if(tf(e))throw vv(),Error(X(418));for(;t;)bv(e,t),t=Ts(t.nextSibling)}if(Ix(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(X(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Or=Ts(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Or=null}}else Or=Ar?Ts(e.stateNode.nextSibling):null;return!0}function vv(){for(var e=Or;e;)e=Ts(e.nextSibling)}function Ma(){Or=Ar=null,it=!1}function Tp(e){an===null?an=[e]:an.push(e)}var Zk=Yn.ReactCurrentBatchConfig;function gi(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(X(309));var n=r.stateNode}if(!n)throw Error(X(147,e));var s=n,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(i){var l=s.refs;i===null?delete l[a]:l[a]=i},t._stringRef=a,t)}if(typeof e!="string")throw Error(X(284));if(!r._owner)throw Error(X(290,e))}return e}function ec(e,t){throw e=Object.prototype.toString.call(t),Error(X(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Dx(e){var t=e._init;return t(e._payload)}function yv(e){function t(x,y){if(e){var v=x.deletions;v===null?(x.deletions=[y],x.flags|=16):v.push(y)}}function r(x,y){if(!e)return null;for(;y!==null;)t(x,y),y=y.sibling;return null}function n(x,y){for(x=new Map;y!==null;)y.key!==null?x.set(y.key,y):x.set(y.index,y),y=y.sibling;return x}function s(x,y){return x=Is(x,y),x.index=0,x.sibling=null,x}function a(x,y,v){return x.index=v,e?(v=x.alternate,v!==null?(v=v.index,v<y?(x.flags|=2,y):v):(x.flags|=2,y)):(x.flags|=1048576,y)}function i(x){return e&&x.alternate===null&&(x.flags|=2),x}function l(x,y,v,k){return y===null||y.tag!==6?(y=Gu(v,x.mode,k),y.return=x,y):(y=s(y,v),y.return=x,y)}function c(x,y,v,k){var N=v.type;return N===ea?h(x,y,v.props.children,k,v.key):y!==null&&(y.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===ls&&Dx(N)===y.type)?(k=s(y,v.props),k.ref=gi(x,y,v),k.return=x,k):(k=Bc(v.type,v.key,v.props,null,x.mode,k),k.ref=gi(x,y,v),k.return=x,k)}function d(x,y,v,k){return y===null||y.tag!==4||y.stateNode.containerInfo!==v.containerInfo||y.stateNode.implementation!==v.implementation?(y=Qu(v,x.mode,k),y.return=x,y):(y=s(y,v.children||[]),y.return=x,y)}function h(x,y,v,k,N){return y===null||y.tag!==7?(y=vo(v,x.mode,k,N),y.return=x,y):(y=s(y,v),y.return=x,y)}function u(x,y,v){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Gu(""+y,x.mode,v),y.return=x,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Wl:return v=Bc(y.type,y.key,y.props,null,x.mode,v),v.ref=gi(x,null,y),v.return=x,v;case Zo:return y=Qu(y,x.mode,v),y.return=x,y;case ls:var k=y._init;return u(x,k(y._payload),v)}if(Ci(y)||hi(y))return y=vo(y,x.mode,v,null),y.return=x,y;ec(x,y)}return null}function f(x,y,v,k){var N=y!==null?y.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return N!==null?null:l(x,y,""+v,k);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Wl:return v.key===N?c(x,y,v,k):null;case Zo:return v.key===N?d(x,y,v,k):null;case ls:return N=v._init,f(x,y,N(v._payload),k)}if(Ci(v)||hi(v))return N!==null?null:h(x,y,v,k,null);ec(x,v)}return null}function p(x,y,v,k,N){if(typeof k=="string"&&k!==""||typeof k=="number")return x=x.get(v)||null,l(y,x,""+k,N);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Wl:return x=x.get(k.key===null?v:k.key)||null,c(y,x,k,N);case Zo:return x=x.get(k.key===null?v:k.key)||null,d(y,x,k,N);case ls:var S=k._init;return p(x,y,v,S(k._payload),N)}if(Ci(k)||hi(k))return x=x.get(v)||null,h(y,x,k,N,null);ec(y,k)}return null}function b(x,y,v,k){for(var N=null,S=null,_=y,P=y=0,D=null;_!==null&&P<v.length;P++){_.index>P?(D=_,_=null):D=_.sibling;var T=f(x,_,v[P],k);if(T===null){_===null&&(_=D);break}e&&_&&T.alternate===null&&t(x,_),y=a(T,y,P),S===null?N=T:S.sibling=T,S=T,_=D}if(P===v.length)return r(x,_),it&&Zs(x,P),N;if(_===null){for(;P<v.length;P++)_=u(x,v[P],k),_!==null&&(y=a(_,y,P),S===null?N=_:S.sibling=_,S=_);return it&&Zs(x,P),N}for(_=n(x,_);P<v.length;P++)D=p(_,x,P,v[P],k),D!==null&&(e&&D.alternate!==null&&_.delete(D.key===null?P:D.key),y=a(D,y,P),S===null?N=D:S.sibling=D,S=D);return e&&_.forEach(function(M){return t(x,M)}),it&&Zs(x,P),N}function g(x,y,v,k){var N=hi(v);if(typeof N!="function")throw Error(X(150));if(v=N.call(v),v==null)throw Error(X(151));for(var S=N=null,_=y,P=y=0,D=null,T=v.next();_!==null&&!T.done;P++,T=v.next()){_.index>P?(D=_,_=null):D=_.sibling;var M=f(x,_,T.value,k);if(M===null){_===null&&(_=D);break}e&&_&&M.alternate===null&&t(x,_),y=a(M,y,P),S===null?N=M:S.sibling=M,S=M,_=D}if(T.done)return r(x,_),it&&Zs(x,P),N;if(_===null){for(;!T.done;P++,T=v.next())T=u(x,T.value,k),T!==null&&(y=a(T,y,P),S===null?N=T:S.sibling=T,S=T);return it&&Zs(x,P),N}for(_=n(x,_);!T.done;P++,T=v.next())T=p(_,x,P,T.value,k),T!==null&&(e&&T.alternate!==null&&_.delete(T.key===null?P:T.key),y=a(T,y,P),S===null?N=T:S.sibling=T,S=T);return e&&_.forEach(function(z){return t(x,z)}),it&&Zs(x,P),N}function w(x,y,v,k){if(typeof v=="object"&&v!==null&&v.type===ea&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Wl:e:{for(var N=v.key,S=y;S!==null;){if(S.key===N){if(N=v.type,N===ea){if(S.tag===7){r(x,S.sibling),y=s(S,v.props.children),y.return=x,x=y;break e}}else if(S.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===ls&&Dx(N)===S.type){r(x,S.sibling),y=s(S,v.props),y.ref=gi(x,S,v),y.return=x,x=y;break e}r(x,S);break}else t(x,S);S=S.sibling}v.type===ea?(y=vo(v.props.children,x.mode,k,v.key),y.return=x,x=y):(k=Bc(v.type,v.key,v.props,null,x.mode,k),k.ref=gi(x,y,v),k.return=x,x=k)}return i(x);case Zo:e:{for(S=v.key;y!==null;){if(y.key===S)if(y.tag===4&&y.stateNode.containerInfo===v.containerInfo&&y.stateNode.implementation===v.implementation){r(x,y.sibling),y=s(y,v.children||[]),y.return=x,x=y;break e}else{r(x,y);break}else t(x,y);y=y.sibling}y=Qu(v,x.mode,k),y.return=x,x=y}return i(x);case ls:return S=v._init,w(x,y,S(v._payload),k)}if(Ci(v))return b(x,y,v,k);if(hi(v))return g(x,y,v,k);ec(x,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,y!==null&&y.tag===6?(r(x,y.sibling),y=s(y,v),y.return=x,x=y):(r(x,y),y=Gu(v,x.mode,k),y.return=x,x=y),i(x)):r(x,y)}return w}var $a=yv(!0),wv=yv(!1),id=qs(null),ld=null,la=null,Rp=null;function Op(){Rp=la=ld=null}function Ap(e){var t=id.current;st(id),e._currentValue=t}function nf(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function ga(e,t){ld=e,Rp=la=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(vr=!0),e.firstContext=null)}function Vr(e){var t=e._currentValue;if(Rp!==e)if(e={context:e,memoizedValue:t,next:null},la===null){if(ld===null)throw Error(X(308));la=e,ld.dependencies={lanes:0,firstContext:e}}else la=la.next=e;return t}var oo=null;function Ip(e){oo===null?oo=[e]:oo.push(e)}function jv(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,Ip(t)):(r.next=s.next,s.next=r),t.interleaved=r,Hn(e,n)}function Hn(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var cs=!1;function Dp(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kv(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Bn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Rs(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,We&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Hn(e,r)}return s=n.interleaved,s===null?(t.next=t,Ip(n)):(t.next=s.next,s.next=t),n.interleaved=t,Hn(e,r)}function Dc(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,yp(e,r)}}function Lx(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?s=a=i:a=a.next=i,r=r.next}while(r!==null);a===null?s=a=t:a=a.next=t}else s=a=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function cd(e,t,r,n){var s=e.updateQueue;cs=!1;var a=s.firstBaseUpdate,i=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,i===null?a=d:i.next=d,i=c;var h=e.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==i&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(a!==null){var u=s.baseState;i=0,h=d=c=null,l=a;do{var f=l.lane,p=l.eventTime;if((n&f)===f){h!==null&&(h=h.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=e,g=l;switch(f=t,p=r,g.tag){case 1:if(b=g.payload,typeof b=="function"){u=b.call(p,u,f);break e}u=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=g.payload,f=typeof b=="function"?b.call(p,u,f):b,f==null)break e;u=ft({},u,f);break e;case 2:cs=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=p,c=u):h=h.next=p,i|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(h===null&&(c=u),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=h,t=s.shared.interleaved,t!==null){s=t;do i|=s.lane,s=s.next;while(s!==t)}else a===null&&(s.shared.lanes=0);_o|=i,e.lanes=i,e.memoizedState=u}}function Mx(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(X(191,s));s.call(n)}}}var Cl={},Sn=qs(Cl),el=qs(Cl),tl=qs(Cl);function ao(e){if(e===Cl)throw Error(X(174));return e}function Lp(e,t){switch(Ze(tl,t),Ze(el,e),Ze(Sn,Cl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Mh(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Mh(t,e)}st(Sn),Ze(Sn,t)}function Fa(){st(Sn),st(el),st(tl)}function Nv(e){ao(tl.current);var t=ao(Sn.current),r=Mh(t,e.type);t!==r&&(Ze(el,e),Ze(Sn,r))}function Mp(e){el.current===e&&(st(Sn),st(el))}var ut=qs(0);function dd(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var zu=[];function $p(){for(var e=0;e<zu.length;e++)zu[e]._workInProgressVersionPrimary=null;zu.length=0}var Lc=Yn.ReactCurrentDispatcher,Wu=Yn.ReactCurrentBatchConfig,No=0,ht=null,Tt=null,Lt=null,ud=!1,Mi=!1,rl=0,eN=0;function Jt(){throw Error(X(321))}function Fp(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!dn(e[r],t[r]))return!1;return!0}function Up(e,t,r,n,s,a){if(No=a,ht=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Lc.current=e===null||e.memoizedState===null?sN:oN,e=r(n,s),Mi){a=0;do{if(Mi=!1,rl=0,25<=a)throw Error(X(301));a+=1,Lt=Tt=null,t.updateQueue=null,Lc.current=aN,e=r(n,s)}while(Mi)}if(Lc.current=hd,t=Tt!==null&&Tt.next!==null,No=0,Lt=Tt=ht=null,ud=!1,t)throw Error(X(300));return e}function Bp(){var e=rl!==0;return rl=0,e}function bn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?ht.memoizedState=Lt=e:Lt=Lt.next=e,Lt}function Kr(){if(Tt===null){var e=ht.alternate;e=e!==null?e.memoizedState:null}else e=Tt.next;var t=Lt===null?ht.memoizedState:Lt.next;if(t!==null)Lt=t,Tt=e;else{if(e===null)throw Error(X(310));Tt=e,e={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},Lt===null?ht.memoizedState=Lt=e:Lt=Lt.next=e}return Lt}function nl(e,t){return typeof t=="function"?t(e):t}function qu(e){var t=Kr(),r=t.queue;if(r===null)throw Error(X(311));r.lastRenderedReducer=e;var n=Tt,s=n.baseQueue,a=r.pending;if(a!==null){if(s!==null){var i=s.next;s.next=a.next,a.next=i}n.baseQueue=s=a,r.pending=null}if(s!==null){a=s.next,n=n.baseState;var l=i=null,c=null,d=a;do{var h=d.lane;if((No&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var u={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=u,i=n):c=c.next=u,ht.lanes|=h,_o|=h}d=d.next}while(d!==null&&d!==a);c===null?i=n:c.next=l,dn(n,t.memoizedState)||(vr=!0),t.memoizedState=n,t.baseState=i,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do a=s.lane,ht.lanes|=a,_o|=a,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Hu(e){var t=Kr(),r=t.queue;if(r===null)throw Error(X(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,a=t.memoizedState;if(s!==null){r.pending=null;var i=s=s.next;do a=e(a,i.action),i=i.next;while(i!==s);dn(a,t.memoizedState)||(vr=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function _v(){}function Sv(e,t){var r=ht,n=Kr(),s=t(),a=!dn(n.memoizedState,s);if(a&&(n.memoizedState=s,vr=!0),n=n.queue,zp(Pv.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||Lt!==null&&Lt.memoizedState.tag&1){if(r.flags|=2048,sl(9,Ev.bind(null,r,n,s,t),void 0,null),Mt===null)throw Error(X(349));No&30||Cv(r,t,s)}return s}function Cv(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ht.updateQueue,t===null?(t={lastEffect:null,stores:null},ht.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Ev(e,t,r,n){t.value=r,t.getSnapshot=n,Tv(t)&&Rv(e)}function Pv(e,t,r){return r(function(){Tv(t)&&Rv(e)})}function Tv(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!dn(e,r)}catch{return!0}}function Rv(e){var t=Hn(e,1);t!==null&&cn(t,e,1,-1)}function $x(e){var t=bn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:nl,lastRenderedState:e},t.queue=e,e=e.dispatch=nN.bind(null,ht,e),[t.memoizedState,e]}function sl(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=ht.updateQueue,t===null?(t={lastEffect:null,stores:null},ht.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Ov(){return Kr().memoizedState}function Mc(e,t,r,n){var s=bn();ht.flags|=e,s.memoizedState=sl(1|t,r,void 0,n===void 0?null:n)}function zd(e,t,r,n){var s=Kr();n=n===void 0?null:n;var a=void 0;if(Tt!==null){var i=Tt.memoizedState;if(a=i.destroy,n!==null&&Fp(n,i.deps)){s.memoizedState=sl(t,r,a,n);return}}ht.flags|=e,s.memoizedState=sl(1|t,r,a,n)}function Fx(e,t){return Mc(8390656,8,e,t)}function zp(e,t){return zd(2048,8,e,t)}function Av(e,t){return zd(4,2,e,t)}function Iv(e,t){return zd(4,4,e,t)}function Dv(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Lv(e,t,r){return r=r!=null?r.concat([e]):null,zd(4,4,Dv.bind(null,t,e),r)}function Wp(){}function Mv(e,t){var r=Kr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Fp(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function $v(e,t){var r=Kr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Fp(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Fv(e,t,r){return No&21?(dn(r,t)||(r=qb(),ht.lanes|=r,_o|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,vr=!0),e.memoizedState=r)}function tN(e,t){var r=Ke;Ke=r!==0&&4>r?r:4,e(!0);var n=Wu.transition;Wu.transition={};try{e(!1),t()}finally{Ke=r,Wu.transition=n}}function Uv(){return Kr().memoizedState}function rN(e,t,r){var n=As(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Bv(e))zv(t,r);else if(r=jv(e,t,r,n),r!==null){var s=dr();cn(r,e,n,s),Wv(r,t,n)}}function nN(e,t,r){var n=As(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Bv(e))zv(t,s);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var i=t.lastRenderedState,l=a(i,r);if(s.hasEagerState=!0,s.eagerState=l,dn(l,i)){var c=t.interleaved;c===null?(s.next=s,Ip(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=jv(e,t,s,n),r!==null&&(s=dr(),cn(r,e,n,s),Wv(r,t,n))}}function Bv(e){var t=e.alternate;return e===ht||t!==null&&t===ht}function zv(e,t){Mi=ud=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Wv(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,yp(e,r)}}var hd={readContext:Vr,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useInsertionEffect:Jt,useLayoutEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useMutableSource:Jt,useSyncExternalStore:Jt,useId:Jt,unstable_isNewReconciler:!1},sN={readContext:Vr,useCallback:function(e,t){return bn().memoizedState=[e,t===void 0?null:t],e},useContext:Vr,useEffect:Fx,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Mc(4194308,4,Dv.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Mc(4194308,4,e,t)},useInsertionEffect:function(e,t){return Mc(4,2,e,t)},useMemo:function(e,t){var r=bn();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=bn();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=rN.bind(null,ht,e),[n.memoizedState,e]},useRef:function(e){var t=bn();return e={current:e},t.memoizedState=e},useState:$x,useDebugValue:Wp,useDeferredValue:function(e){return bn().memoizedState=e},useTransition:function(){var e=$x(!1),t=e[0];return e=tN.bind(null,e[1]),bn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ht,s=bn();if(it){if(r===void 0)throw Error(X(407));r=r()}else{if(r=t(),Mt===null)throw Error(X(349));No&30||Cv(n,t,r)}s.memoizedState=r;var a={value:r,getSnapshot:t};return s.queue=a,Fx(Pv.bind(null,n,a,e),[e]),n.flags|=2048,sl(9,Ev.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=bn(),t=Mt.identifierPrefix;if(it){var r=Un,n=Fn;r=(n&~(1<<32-ln(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=rl++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=eN++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},oN={readContext:Vr,useCallback:Mv,useContext:Vr,useEffect:zp,useImperativeHandle:Lv,useInsertionEffect:Av,useLayoutEffect:Iv,useMemo:$v,useReducer:qu,useRef:Ov,useState:function(){return qu(nl)},useDebugValue:Wp,useDeferredValue:function(e){var t=Kr();return Fv(t,Tt.memoizedState,e)},useTransition:function(){var e=qu(nl)[0],t=Kr().memoizedState;return[e,t]},useMutableSource:_v,useSyncExternalStore:Sv,useId:Uv,unstable_isNewReconciler:!1},aN={readContext:Vr,useCallback:Mv,useContext:Vr,useEffect:zp,useImperativeHandle:Lv,useInsertionEffect:Av,useLayoutEffect:Iv,useMemo:$v,useReducer:Hu,useRef:Ov,useState:function(){return Hu(nl)},useDebugValue:Wp,useDeferredValue:function(e){var t=Kr();return Tt===null?t.memoizedState=e:Fv(t,Tt.memoizedState,e)},useTransition:function(){var e=Hu(nl)[0],t=Kr().memoizedState;return[e,t]},useMutableSource:_v,useSyncExternalStore:Sv,useId:Uv,unstable_isNewReconciler:!1};function en(e,t){if(e&&e.defaultProps){t=ft({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function sf(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:ft({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Wd={isMounted:function(e){return(e=e._reactInternals)?Ao(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=dr(),s=As(e),a=Bn(n,s);a.payload=t,r!=null&&(a.callback=r),t=Rs(e,a,s),t!==null&&(cn(t,e,s,n),Dc(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=dr(),s=As(e),a=Bn(n,s);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=Rs(e,a,s),t!==null&&(cn(t,e,s,n),Dc(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=dr(),n=As(e),s=Bn(r,n);s.tag=2,t!=null&&(s.callback=t),t=Rs(e,s,n),t!==null&&(cn(t,e,n,r),Dc(t,e,n))}};function Ux(e,t,r,n,s,a,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,i):t.prototype&&t.prototype.isPureReactComponent?!Yi(r,n)||!Yi(s,a):!0}function qv(e,t,r){var n=!1,s=$s,a=t.contextType;return typeof a=="object"&&a!==null?a=Vr(a):(s=wr(t)?jo:rr.current,n=t.contextTypes,a=(n=n!=null)?La(e,s):$s),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Wd,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function Bx(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Wd.enqueueReplaceState(t,t.state,null)}function of(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},Dp(e);var a=t.contextType;typeof a=="object"&&a!==null?s.context=Vr(a):(a=wr(t)?jo:rr.current,s.context=La(e,a)),s.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(sf(e,t,a,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Wd.enqueueReplaceState(s,s.state,null),cd(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Ua(e,t){try{var r="",n=t;do r+=I2(n),n=n.return;while(n);var s=r}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:s,digest:null}}function Vu(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function af(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var iN=typeof WeakMap=="function"?WeakMap:Map;function Hv(e,t,r){r=Bn(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){pd||(pd=!0,gf=n),af(e,t)},r}function Vv(e,t,r){r=Bn(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){af(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){af(e,t),typeof n!="function"&&(Os===null?Os=new Set([this]):Os.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),r}function zx(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new iN;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=wN.bind(null,e,t,r),t.then(e,e))}function Wx(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function qx(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Bn(-1,1),t.tag=2,Rs(r,t,1))),r.lanes|=1),e)}var lN=Yn.ReactCurrentOwner,vr=!1;function lr(e,t,r,n){t.child=e===null?wv(t,null,r,n):$a(t,e.child,r,n)}function Hx(e,t,r,n,s){r=r.render;var a=t.ref;return ga(t,s),n=Up(e,t,r,n,a,s),r=Bp(),e!==null&&!vr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Vn(e,t,s)):(it&&r&&Ep(t),t.flags|=1,lr(e,t,n,s),t.child)}function Vx(e,t,r,n,s){if(e===null){var a=r.type;return typeof a=="function"&&!Jp(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,Kv(e,t,a,n,s)):(e=Bc(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&s)){var i=a.memoizedProps;if(r=r.compare,r=r!==null?r:Yi,r(i,n)&&e.ref===t.ref)return Vn(e,t,s)}return t.flags|=1,e=Is(a,n),e.ref=t.ref,e.return=t,t.child=e}function Kv(e,t,r,n,s){if(e!==null){var a=e.memoizedProps;if(Yi(a,n)&&e.ref===t.ref)if(vr=!1,t.pendingProps=n=a,(e.lanes&s)!==0)e.flags&131072&&(vr=!0);else return t.lanes=e.lanes,Vn(e,t,s)}return lf(e,t,r,n,s)}function Gv(e,t,r){var n=t.pendingProps,s=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ze(da,Pr),Pr|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ze(da,Pr),Pr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,Ze(da,Pr),Pr|=n}else a!==null?(n=a.baseLanes|r,t.memoizedState=null):n=r,Ze(da,Pr),Pr|=n;return lr(e,t,s,r),t.child}function Qv(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function lf(e,t,r,n,s){var a=wr(r)?jo:rr.current;return a=La(t,a),ga(t,s),r=Up(e,t,r,n,a,s),n=Bp(),e!==null&&!vr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Vn(e,t,s)):(it&&n&&Ep(t),t.flags|=1,lr(e,t,r,s),t.child)}function Kx(e,t,r,n,s){if(wr(r)){var a=!0;sd(t)}else a=!1;if(ga(t,s),t.stateNode===null)$c(e,t),qv(t,r,n),of(t,r,n,s),n=!0;else if(e===null){var i=t.stateNode,l=t.memoizedProps;i.props=l;var c=i.context,d=r.contextType;typeof d=="object"&&d!==null?d=Vr(d):(d=wr(r)?jo:rr.current,d=La(t,d));var h=r.getDerivedStateFromProps,u=typeof h=="function"||typeof i.getSnapshotBeforeUpdate=="function";u||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==n||c!==d)&&Bx(t,i,n,d),cs=!1;var f=t.memoizedState;i.state=f,cd(t,n,i,s),c=t.memoizedState,l!==n||f!==c||yr.current||cs?(typeof h=="function"&&(sf(t,r,h,n),c=t.memoizedState),(l=cs||Ux(t,r,l,n,f,c,d))?(u||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),i.props=n,i.state=c,i.context=d,n=l):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,kv(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:en(t.type,l),i.props=d,u=t.pendingProps,f=i.context,c=r.contextType,typeof c=="object"&&c!==null?c=Vr(c):(c=wr(r)?jo:rr.current,c=La(t,c));var p=r.getDerivedStateFromProps;(h=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==u||f!==c)&&Bx(t,i,n,c),cs=!1,f=t.memoizedState,i.state=f,cd(t,n,i,s);var b=t.memoizedState;l!==u||f!==b||yr.current||cs?(typeof p=="function"&&(sf(t,r,p,n),b=t.memoizedState),(d=cs||Ux(t,r,d,n,f,b,c)||!1)?(h||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,b,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,b,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=b),i.props=n,i.state=b,i.context=c,n=d):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return cf(e,t,r,n,a,s)}function cf(e,t,r,n,s,a){Qv(e,t);var i=(t.flags&128)!==0;if(!n&&!i)return s&&Ox(t,r,!1),Vn(e,t,a);n=t.stateNode,lN.current=t;var l=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&i?(t.child=$a(t,e.child,null,a),t.child=$a(t,null,l,a)):lr(e,t,l,a),t.memoizedState=n.state,s&&Ox(t,r,!0),t.child}function Yv(e){var t=e.stateNode;t.pendingContext?Rx(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Rx(e,t.context,!1),Lp(e,t.containerInfo)}function Gx(e,t,r,n,s){return Ma(),Tp(s),t.flags|=256,lr(e,t,r,n),t.child}var df={dehydrated:null,treeContext:null,retryLane:0};function uf(e){return{baseLanes:e,cachePool:null,transitions:null}}function Jv(e,t,r){var n=t.pendingProps,s=ut.current,a=!1,i=(t.flags&128)!==0,l;if((l=i)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Ze(ut,s&1),e===null)return rf(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=n.children,e=n.fallback,a?(n=t.mode,a=t.child,i={mode:"hidden",children:i},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=i):a=Vd(i,n,0,null),e=vo(e,n,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=uf(r),t.memoizedState=df,e):qp(t,i));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return cN(e,t,i,n,l,s,r);if(a){a=n.fallback,i=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(i&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Is(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=Is(l,a):(a=vo(a,i,r,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,i=e.child.memoizedState,i=i===null?uf(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},a.memoizedState=i,a.childLanes=e.childLanes&~r,t.memoizedState=df,n}return a=e.child,e=a.sibling,n=Is(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function qp(e,t){return t=Vd({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function tc(e,t,r,n){return n!==null&&Tp(n),$a(t,e.child,null,r),e=qp(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function cN(e,t,r,n,s,a,i){if(r)return t.flags&256?(t.flags&=-257,n=Vu(Error(X(422))),tc(e,t,i,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=n.fallback,s=t.mode,n=Vd({mode:"visible",children:n.children},s,0,null),a=vo(a,s,i,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&$a(t,e.child,null,i),t.child.memoizedState=uf(i),t.memoizedState=df,a);if(!(t.mode&1))return tc(e,t,i,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,a=Error(X(419)),n=Vu(a,n,void 0),tc(e,t,i,n)}if(l=(i&e.childLanes)!==0,vr||l){if(n=Mt,n!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|i)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,Hn(e,s),cn(n,e,s,-1))}return Yp(),n=Vu(Error(X(421))),tc(e,t,i,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=jN.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,Or=Ts(s.nextSibling),Ar=t,it=!0,an=null,e!==null&&(zr[Wr++]=Fn,zr[Wr++]=Un,zr[Wr++]=ko,Fn=e.id,Un=e.overflow,ko=t),t=qp(t,n.children),t.flags|=4096,t)}function Qx(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),nf(e.return,t,r)}function Ku(e,t,r,n,s){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=s)}function Xv(e,t,r){var n=t.pendingProps,s=n.revealOrder,a=n.tail;if(lr(e,t,n.children,r),n=ut.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Qx(e,r,t);else if(e.tag===19)Qx(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ze(ut,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&dd(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Ku(t,!1,s,r,a);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&dd(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Ku(t,!0,r,null,a);break;case"together":Ku(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function $c(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Vn(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),_o|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(X(153));if(t.child!==null){for(e=t.child,r=Is(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Is(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function dN(e,t,r){switch(t.tag){case 3:Yv(t),Ma();break;case 5:Nv(t);break;case 1:wr(t.type)&&sd(t);break;case 4:Lp(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;Ze(id,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Ze(ut,ut.current&1),t.flags|=128,null):r&t.child.childLanes?Jv(e,t,r):(Ze(ut,ut.current&1),e=Vn(e,t,r),e!==null?e.sibling:null);Ze(ut,ut.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Xv(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ze(ut,ut.current),n)break;return null;case 22:case 23:return t.lanes=0,Gv(e,t,r)}return Vn(e,t,r)}var Zv,hf,ey,ty;Zv=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};hf=function(){};ey=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,ao(Sn.current);var a=null;switch(r){case"input":s=Ah(e,s),n=Ah(e,n),a=[];break;case"select":s=ft({},s,{value:void 0}),n=ft({},n,{value:void 0}),a=[];break;case"textarea":s=Lh(e,s),n=Lh(e,n),a=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=rd)}$h(r,n);var i;r=null;for(d in s)if(!n.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(i in l)l.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Wi.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in n){var c=n[d];if(l=s!=null?s[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(a||(a=[]),a.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Wi.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&nt("scroll",e),a||l===c||(a=[])):(a=a||[]).push(d,c))}r&&(a=a||[]).push("style",r);var d=a;(t.updateQueue=d)&&(t.flags|=4)}};ty=function(e,t,r,n){r!==n&&(t.flags|=4)};function bi(e,t){if(!it)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Xt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function uN(e,t,r){var n=t.pendingProps;switch(Pp(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xt(t),null;case 1:return wr(t.type)&&nd(),Xt(t),null;case 3:return n=t.stateNode,Fa(),st(yr),st(rr),$p(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Zl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,an!==null&&(yf(an),an=null))),hf(e,t),Xt(t),null;case 5:Mp(t);var s=ao(tl.current);if(r=t.type,e!==null&&t.stateNode!=null)ey(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(X(166));return Xt(t),null}if(e=ao(Sn.current),Zl(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[jn]=t,n[Zi]=a,e=(t.mode&1)!==0,r){case"dialog":nt("cancel",n),nt("close",n);break;case"iframe":case"object":case"embed":nt("load",n);break;case"video":case"audio":for(s=0;s<Pi.length;s++)nt(Pi[s],n);break;case"source":nt("error",n);break;case"img":case"image":case"link":nt("error",n),nt("load",n);break;case"details":nt("toggle",n);break;case"input":sx(n,a),nt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},nt("invalid",n);break;case"textarea":ax(n,a),nt("invalid",n)}$h(r,a),s=null;for(var i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="children"?typeof l=="string"?n.textContent!==l&&(a.suppressHydrationWarning!==!0&&Xl(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Xl(n.textContent,l,e),s=["children",""+l]):Wi.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&nt("scroll",n)}switch(r){case"input":ql(n),ox(n,a,!0);break;case"textarea":ql(n),ix(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=rd)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Pb(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=i.createElement(r,{is:n.is}):(e=i.createElement(r),r==="select"&&(i=e,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):e=i.createElementNS(e,r),e[jn]=t,e[Zi]=n,Zv(e,t,!1,!1),t.stateNode=e;e:{switch(i=Fh(r,n),r){case"dialog":nt("cancel",e),nt("close",e),s=n;break;case"iframe":case"object":case"embed":nt("load",e),s=n;break;case"video":case"audio":for(s=0;s<Pi.length;s++)nt(Pi[s],e);s=n;break;case"source":nt("error",e),s=n;break;case"img":case"image":case"link":nt("error",e),nt("load",e),s=n;break;case"details":nt("toggle",e),s=n;break;case"input":sx(e,n),s=Ah(e,n),nt("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=ft({},n,{value:void 0}),nt("invalid",e);break;case"textarea":ax(e,n),s=Lh(e,n),nt("invalid",e);break;default:s=n}$h(r,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?Ob(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Tb(e,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&qi(e,c):typeof c=="number"&&qi(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Wi.hasOwnProperty(a)?c!=null&&a==="onScroll"&&nt("scroll",e):c!=null&&pp(e,a,c,i))}switch(r){case"input":ql(e),ox(e,n,!1);break;case"textarea":ql(e),ix(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Ms(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?fa(e,!!n.multiple,a,!1):n.defaultValue!=null&&fa(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=rd)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Xt(t),null;case 6:if(e&&t.stateNode!=null)ty(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(X(166));if(r=ao(tl.current),ao(Sn.current),Zl(t)){if(n=t.stateNode,r=t.memoizedProps,n[jn]=t,(a=n.nodeValue!==r)&&(e=Ar,e!==null))switch(e.tag){case 3:Xl(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Xl(n.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[jn]=t,t.stateNode=n}return Xt(t),null;case 13:if(st(ut),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(it&&Or!==null&&t.mode&1&&!(t.flags&128))vv(),Ma(),t.flags|=98560,a=!1;else if(a=Zl(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(X(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(X(317));a[jn]=t}else Ma(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Xt(t),a=!1}else an!==null&&(yf(an),an=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||ut.current&1?Ot===0&&(Ot=3):Yp())),t.updateQueue!==null&&(t.flags|=4),Xt(t),null);case 4:return Fa(),hf(e,t),e===null&&Ji(t.stateNode.containerInfo),Xt(t),null;case 10:return Ap(t.type._context),Xt(t),null;case 17:return wr(t.type)&&nd(),Xt(t),null;case 19:if(st(ut),a=t.memoizedState,a===null)return Xt(t),null;if(n=(t.flags&128)!==0,i=a.rendering,i===null)if(n)bi(a,!1);else{if(Ot!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=dd(e),i!==null){for(t.flags|=128,bi(a,!1),n=i.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)a=r,e=n,a.flags&=14680066,i=a.alternate,i===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,a.type=i.type,e=i.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ze(ut,ut.current&1|2),t.child}e=e.sibling}a.tail!==null&&vt()>Ba&&(t.flags|=128,n=!0,bi(a,!1),t.lanes=4194304)}else{if(!n)if(e=dd(i),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),bi(a,!0),a.tail===null&&a.tailMode==="hidden"&&!i.alternate&&!it)return Xt(t),null}else 2*vt()-a.renderingStartTime>Ba&&r!==1073741824&&(t.flags|=128,n=!0,bi(a,!1),t.lanes=4194304);a.isBackwards?(i.sibling=t.child,t.child=i):(r=a.last,r!==null?r.sibling=i:t.child=i,a.last=i)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=vt(),t.sibling=null,r=ut.current,Ze(ut,n?r&1|2:r&1),t):(Xt(t),null);case 22:case 23:return Qp(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Pr&1073741824&&(Xt(t),t.subtreeFlags&6&&(t.flags|=8192)):Xt(t),null;case 24:return null;case 25:return null}throw Error(X(156,t.tag))}function hN(e,t){switch(Pp(t),t.tag){case 1:return wr(t.type)&&nd(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Fa(),st(yr),st(rr),$p(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Mp(t),null;case 13:if(st(ut),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(X(340));Ma()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return st(ut),null;case 4:return Fa(),null;case 10:return Ap(t.type._context),null;case 22:case 23:return Qp(),null;case 24:return null;default:return null}}var rc=!1,er=!1,fN=typeof WeakSet=="function"?WeakSet:Set,de=null;function ca(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){xt(e,t,n)}else r.current=null}function ff(e,t,r){try{r()}catch(n){xt(e,t,n)}}var Yx=!1;function pN(e,t){if(Qh=Zc,e=av(),Cp(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var i=0,l=-1,c=-1,d=0,h=0,u=e,f=null;t:for(;;){for(var p;u!==r||s!==0&&u.nodeType!==3||(l=i+s),u!==a||n!==0&&u.nodeType!==3||(c=i+n),u.nodeType===3&&(i+=u.nodeValue.length),(p=u.firstChild)!==null;)f=u,u=p;for(;;){if(u===e)break t;if(f===r&&++d===s&&(l=i),f===a&&++h===n&&(c=i),(p=u.nextSibling)!==null)break;u=f,f=u.parentNode}u=p}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Yh={focusedElem:e,selectionRange:r},Zc=!1,de=t;de!==null;)if(t=de,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,de=e;else for(;de!==null;){t=de;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var g=b.memoizedProps,w=b.memoizedState,x=t.stateNode,y=x.getSnapshotBeforeUpdate(t.elementType===t.type?g:en(t.type,g),w);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(k){xt(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,de=e;break}de=t.return}return b=Yx,Yx=!1,b}function $i(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,a!==void 0&&ff(t,r,a)}s=s.next}while(s!==n)}}function qd(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function pf(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function ry(e){var t=e.alternate;t!==null&&(e.alternate=null,ry(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[jn],delete t[Zi],delete t[Zh],delete t[Yk],delete t[Jk])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ny(e){return e.tag===5||e.tag===3||e.tag===4}function Jx(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||ny(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function mf(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=rd));else if(n!==4&&(e=e.child,e!==null))for(mf(e,t,r),e=e.sibling;e!==null;)mf(e,t,r),e=e.sibling}function xf(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(xf(e,t,r),e=e.sibling;e!==null;)xf(e,t,r),e=e.sibling}var Wt=null,sn=!1;function ns(e,t,r){for(r=r.child;r!==null;)sy(e,t,r),r=r.sibling}function sy(e,t,r){if(_n&&typeof _n.onCommitFiberUnmount=="function")try{_n.onCommitFiberUnmount(Ld,r)}catch{}switch(r.tag){case 5:er||ca(r,t);case 6:var n=Wt,s=sn;Wt=null,ns(e,t,r),Wt=n,sn=s,Wt!==null&&(sn?(e=Wt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Wt.removeChild(r.stateNode));break;case 18:Wt!==null&&(sn?(e=Wt,r=r.stateNode,e.nodeType===8?Uu(e.parentNode,r):e.nodeType===1&&Uu(e,r),Gi(e)):Uu(Wt,r.stateNode));break;case 4:n=Wt,s=sn,Wt=r.stateNode.containerInfo,sn=!0,ns(e,t,r),Wt=n,sn=s;break;case 0:case 11:case 14:case 15:if(!er&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var a=s,i=a.destroy;a=a.tag,i!==void 0&&(a&2||a&4)&&ff(r,t,i),s=s.next}while(s!==n)}ns(e,t,r);break;case 1:if(!er&&(ca(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){xt(r,t,l)}ns(e,t,r);break;case 21:ns(e,t,r);break;case 22:r.mode&1?(er=(n=er)||r.memoizedState!==null,ns(e,t,r),er=n):ns(e,t,r);break;default:ns(e,t,r)}}function Xx(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new fN),t.forEach(function(n){var s=kN.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Jr(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var a=e,i=t,l=i;e:for(;l!==null;){switch(l.tag){case 5:Wt=l.stateNode,sn=!1;break e;case 3:Wt=l.stateNode.containerInfo,sn=!0;break e;case 4:Wt=l.stateNode.containerInfo,sn=!0;break e}l=l.return}if(Wt===null)throw Error(X(160));sy(a,i,s),Wt=null,sn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){xt(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)oy(t,e),t=t.sibling}function oy(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Jr(t,e),xn(e),n&4){try{$i(3,e,e.return),qd(3,e)}catch(g){xt(e,e.return,g)}try{$i(5,e,e.return)}catch(g){xt(e,e.return,g)}}break;case 1:Jr(t,e),xn(e),n&512&&r!==null&&ca(r,r.return);break;case 5:if(Jr(t,e),xn(e),n&512&&r!==null&&ca(r,r.return),e.flags&32){var s=e.stateNode;try{qi(s,"")}catch(g){xt(e,e.return,g)}}if(n&4&&(s=e.stateNode,s!=null)){var a=e.memoizedProps,i=r!==null?r.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&Cb(s,a),Fh(l,i);var d=Fh(l,a);for(i=0;i<c.length;i+=2){var h=c[i],u=c[i+1];h==="style"?Ob(s,u):h==="dangerouslySetInnerHTML"?Tb(s,u):h==="children"?qi(s,u):pp(s,h,u,d)}switch(l){case"input":Ih(s,a);break;case"textarea":Eb(s,a);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var p=a.value;p!=null?fa(s,!!a.multiple,p,!1):f!==!!a.multiple&&(a.defaultValue!=null?fa(s,!!a.multiple,a.defaultValue,!0):fa(s,!!a.multiple,a.multiple?[]:"",!1))}s[Zi]=a}catch(g){xt(e,e.return,g)}}break;case 6:if(Jr(t,e),xn(e),n&4){if(e.stateNode===null)throw Error(X(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(g){xt(e,e.return,g)}}break;case 3:if(Jr(t,e),xn(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Gi(t.containerInfo)}catch(g){xt(e,e.return,g)}break;case 4:Jr(t,e),xn(e);break;case 13:Jr(t,e),xn(e),s=e.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(Kp=vt())),n&4&&Xx(e);break;case 22:if(h=r!==null&&r.memoizedState!==null,e.mode&1?(er=(d=er)||h,Jr(t,e),er=d):Jr(t,e),xn(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!h&&e.mode&1)for(de=e,h=e.child;h!==null;){for(u=de=h;de!==null;){switch(f=de,p=f.child,f.tag){case 0:case 11:case 14:case 15:$i(4,f,f.return);break;case 1:ca(f,f.return);var b=f.stateNode;if(typeof b.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(g){xt(n,r,g)}}break;case 5:ca(f,f.return);break;case 22:if(f.memoizedState!==null){eg(u);continue}}p!==null?(p.return=f,de=p):eg(u)}h=h.sibling}e:for(h=null,u=e;;){if(u.tag===5){if(h===null){h=u;try{s=u.stateNode,d?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=u.stateNode,c=u.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Rb("display",i))}catch(g){xt(e,e.return,g)}}}else if(u.tag===6){if(h===null)try{u.stateNode.nodeValue=d?"":u.memoizedProps}catch(g){xt(e,e.return,g)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===e)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;u.sibling===null;){if(u.return===null||u.return===e)break e;h===u&&(h=null),u=u.return}h===u&&(h=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:Jr(t,e),xn(e),n&4&&Xx(e);break;case 21:break;default:Jr(t,e),xn(e)}}function xn(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(ny(r)){var n=r;break e}r=r.return}throw Error(X(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(qi(s,""),n.flags&=-33);var a=Jx(e);xf(e,a,s);break;case 3:case 4:var i=n.stateNode.containerInfo,l=Jx(e);mf(e,l,i);break;default:throw Error(X(161))}}catch(c){xt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function mN(e,t,r){de=e,ay(e)}function ay(e,t,r){for(var n=(e.mode&1)!==0;de!==null;){var s=de,a=s.child;if(s.tag===22&&n){var i=s.memoizedState!==null||rc;if(!i){var l=s.alternate,c=l!==null&&l.memoizedState!==null||er;l=rc;var d=er;if(rc=i,(er=c)&&!d)for(de=s;de!==null;)i=de,c=i.child,i.tag===22&&i.memoizedState!==null?tg(s):c!==null?(c.return=i,de=c):tg(s);for(;a!==null;)de=a,ay(a),a=a.sibling;de=s,rc=l,er=d}Zx(e)}else s.subtreeFlags&8772&&a!==null?(a.return=s,de=a):Zx(e)}}function Zx(e){for(;de!==null;){var t=de;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:er||qd(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!er)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:en(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&Mx(t,a,n);break;case 3:var i=t.updateQueue;if(i!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Mx(t,i,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var u=h.dehydrated;u!==null&&Gi(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}er||t.flags&512&&pf(t)}catch(f){xt(t,t.return,f)}}if(t===e){de=null;break}if(r=t.sibling,r!==null){r.return=t.return,de=r;break}de=t.return}}function eg(e){for(;de!==null;){var t=de;if(t===e){de=null;break}var r=t.sibling;if(r!==null){r.return=t.return,de=r;break}de=t.return}}function tg(e){for(;de!==null;){var t=de;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{qd(4,t)}catch(c){xt(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){xt(t,s,c)}}var a=t.return;try{pf(t)}catch(c){xt(t,a,c)}break;case 5:var i=t.return;try{pf(t)}catch(c){xt(t,i,c)}}}catch(c){xt(t,t.return,c)}if(t===e){de=null;break}var l=t.sibling;if(l!==null){l.return=t.return,de=l;break}de=t.return}}var xN=Math.ceil,fd=Yn.ReactCurrentDispatcher,Hp=Yn.ReactCurrentOwner,Hr=Yn.ReactCurrentBatchConfig,We=0,Mt=null,kt=null,qt=0,Pr=0,da=qs(0),Ot=0,ol=null,_o=0,Hd=0,Vp=0,Fi=null,gr=null,Kp=0,Ba=1/0,In=null,pd=!1,gf=null,Os=null,nc=!1,_s=null,md=0,Ui=0,bf=null,Fc=-1,Uc=0;function dr(){return We&6?vt():Fc!==-1?Fc:Fc=vt()}function As(e){return e.mode&1?We&2&&qt!==0?qt&-qt:Zk.transition!==null?(Uc===0&&(Uc=qb()),Uc):(e=Ke,e!==0||(e=window.event,e=e===void 0?16:Jb(e.type)),e):1}function cn(e,t,r,n){if(50<Ui)throw Ui=0,bf=null,Error(X(185));Nl(e,r,n),(!(We&2)||e!==Mt)&&(e===Mt&&(!(We&2)&&(Hd|=r),Ot===4&&hs(e,qt)),jr(e,n),r===1&&We===0&&!(t.mode&1)&&(Ba=vt()+500,Bd&&Hs()))}function jr(e,t){var r=e.callbackNode;Z2(e,t);var n=Xc(e,e===Mt?qt:0);if(n===0)r!==null&&dx(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&dx(r),t===1)e.tag===0?Xk(rg.bind(null,e)):xv(rg.bind(null,e)),Gk(function(){!(We&6)&&Hs()}),r=null;else{switch(Hb(n)){case 1:r=vp;break;case 4:r=zb;break;case 16:r=Jc;break;case 536870912:r=Wb;break;default:r=Jc}r=py(r,iy.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function iy(e,t){if(Fc=-1,Uc=0,We&6)throw Error(X(327));var r=e.callbackNode;if(ba()&&e.callbackNode!==r)return null;var n=Xc(e,e===Mt?qt:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=xd(e,n);else{t=n;var s=We;We|=2;var a=cy();(Mt!==e||qt!==t)&&(In=null,Ba=vt()+500,bo(e,t));do try{vN();break}catch(l){ly(e,l)}while(!0);Op(),fd.current=a,We=s,kt!==null?t=0:(Mt=null,qt=0,t=Ot)}if(t!==0){if(t===2&&(s=qh(e),s!==0&&(n=s,t=vf(e,s))),t===1)throw r=ol,bo(e,0),hs(e,n),jr(e,vt()),r;if(t===6)hs(e,n);else{if(s=e.current.alternate,!(n&30)&&!gN(s)&&(t=xd(e,n),t===2&&(a=qh(e),a!==0&&(n=a,t=vf(e,a))),t===1))throw r=ol,bo(e,0),hs(e,n),jr(e,vt()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(X(345));case 2:eo(e,gr,In);break;case 3:if(hs(e,n),(n&130023424)===n&&(t=Kp+500-vt(),10<t)){if(Xc(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){dr(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Xh(eo.bind(null,e,gr,In),t);break}eo(e,gr,In);break;case 4:if(hs(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var i=31-ln(n);a=1<<i,i=t[i],i>s&&(s=i),n&=~a}if(n=s,n=vt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*xN(n/1960))-n,10<n){e.timeoutHandle=Xh(eo.bind(null,e,gr,In),n);break}eo(e,gr,In);break;case 5:eo(e,gr,In);break;default:throw Error(X(329))}}}return jr(e,vt()),e.callbackNode===r?iy.bind(null,e):null}function vf(e,t){var r=Fi;return e.current.memoizedState.isDehydrated&&(bo(e,t).flags|=256),e=xd(e,t),e!==2&&(t=gr,gr=r,t!==null&&yf(t)),e}function yf(e){gr===null?gr=e:gr.push.apply(gr,e)}function gN(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],a=s.getSnapshot;s=s.value;try{if(!dn(a(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function hs(e,t){for(t&=~Vp,t&=~Hd,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ln(t),n=1<<r;e[r]=-1,t&=~n}}function rg(e){if(We&6)throw Error(X(327));ba();var t=Xc(e,0);if(!(t&1))return jr(e,vt()),null;var r=xd(e,t);if(e.tag!==0&&r===2){var n=qh(e);n!==0&&(t=n,r=vf(e,n))}if(r===1)throw r=ol,bo(e,0),hs(e,t),jr(e,vt()),r;if(r===6)throw Error(X(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,eo(e,gr,In),jr(e,vt()),null}function Gp(e,t){var r=We;We|=1;try{return e(t)}finally{We=r,We===0&&(Ba=vt()+500,Bd&&Hs())}}function So(e){_s!==null&&_s.tag===0&&!(We&6)&&ba();var t=We;We|=1;var r=Hr.transition,n=Ke;try{if(Hr.transition=null,Ke=1,e)return e()}finally{Ke=n,Hr.transition=r,We=t,!(We&6)&&Hs()}}function Qp(){Pr=da.current,st(da)}function bo(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Kk(r)),kt!==null)for(r=kt.return;r!==null;){var n=r;switch(Pp(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&nd();break;case 3:Fa(),st(yr),st(rr),$p();break;case 5:Mp(n);break;case 4:Fa();break;case 13:st(ut);break;case 19:st(ut);break;case 10:Ap(n.type._context);break;case 22:case 23:Qp()}r=r.return}if(Mt=e,kt=e=Is(e.current,null),qt=Pr=t,Ot=0,ol=null,Vp=Hd=_o=0,gr=Fi=null,oo!==null){for(t=0;t<oo.length;t++)if(r=oo[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,a=r.pending;if(a!==null){var i=a.next;a.next=s,n.next=i}r.pending=n}oo=null}return e}function ly(e,t){do{var r=kt;try{if(Op(),Lc.current=hd,ud){for(var n=ht.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}ud=!1}if(No=0,Lt=Tt=ht=null,Mi=!1,rl=0,Hp.current=null,r===null||r.return===null){Ot=1,ol=t,kt=null;break}e:{var a=e,i=r.return,l=r,c=t;if(t=qt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=l,u=h.tag;if(!(h.mode&1)&&(u===0||u===11||u===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=Wx(i);if(p!==null){p.flags&=-257,qx(p,i,l,a,t),p.mode&1&&zx(a,d,t),t=p,c=d;var b=t.updateQueue;if(b===null){var g=new Set;g.add(c),t.updateQueue=g}else b.add(c);break e}else{if(!(t&1)){zx(a,d,t),Yp();break e}c=Error(X(426))}}else if(it&&l.mode&1){var w=Wx(i);if(w!==null){!(w.flags&65536)&&(w.flags|=256),qx(w,i,l,a,t),Tp(Ua(c,l));break e}}a=c=Ua(c,l),Ot!==4&&(Ot=2),Fi===null?Fi=[a]:Fi.push(a),a=i;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var x=Hv(a,c,t);Lx(a,x);break e;case 1:l=c;var y=a.type,v=a.stateNode;if(!(a.flags&128)&&(typeof y.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Os===null||!Os.has(v)))){a.flags|=65536,t&=-t,a.lanes|=t;var k=Vv(a,l,t);Lx(a,k);break e}}a=a.return}while(a!==null)}uy(r)}catch(N){t=N,kt===r&&r!==null&&(kt=r=r.return);continue}break}while(!0)}function cy(){var e=fd.current;return fd.current=hd,e===null?hd:e}function Yp(){(Ot===0||Ot===3||Ot===2)&&(Ot=4),Mt===null||!(_o&268435455)&&!(Hd&268435455)||hs(Mt,qt)}function xd(e,t){var r=We;We|=2;var n=cy();(Mt!==e||qt!==t)&&(In=null,bo(e,t));do try{bN();break}catch(s){ly(e,s)}while(!0);if(Op(),We=r,fd.current=n,kt!==null)throw Error(X(261));return Mt=null,qt=0,Ot}function bN(){for(;kt!==null;)dy(kt)}function vN(){for(;kt!==null&&!q2();)dy(kt)}function dy(e){var t=fy(e.alternate,e,Pr);e.memoizedProps=e.pendingProps,t===null?uy(e):kt=t,Hp.current=null}function uy(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=hN(r,t),r!==null){r.flags&=32767,kt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ot=6,kt=null;return}}else if(r=uN(r,t,Pr),r!==null){kt=r;return}if(t=t.sibling,t!==null){kt=t;return}kt=t=e}while(t!==null);Ot===0&&(Ot=5)}function eo(e,t,r){var n=Ke,s=Hr.transition;try{Hr.transition=null,Ke=1,yN(e,t,r,n)}finally{Hr.transition=s,Ke=n}return null}function yN(e,t,r,n){do ba();while(_s!==null);if(We&6)throw Error(X(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(X(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(ek(e,a),e===Mt&&(kt=Mt=null,qt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||nc||(nc=!0,py(Jc,function(){return ba(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=Hr.transition,Hr.transition=null;var i=Ke;Ke=1;var l=We;We|=4,Hp.current=null,pN(e,r),oy(r,e),Uk(Yh),Zc=!!Qh,Yh=Qh=null,e.current=r,mN(r),H2(),We=l,Ke=i,Hr.transition=a}else e.current=r;if(nc&&(nc=!1,_s=e,md=s),a=e.pendingLanes,a===0&&(Os=null),G2(r.stateNode),jr(e,vt()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(pd)throw pd=!1,e=gf,gf=null,e;return md&1&&e.tag!==0&&ba(),a=e.pendingLanes,a&1?e===bf?Ui++:(Ui=0,bf=e):Ui=0,Hs(),null}function ba(){if(_s!==null){var e=Hb(md),t=Hr.transition,r=Ke;try{if(Hr.transition=null,Ke=16>e?16:e,_s===null)var n=!1;else{if(e=_s,_s=null,md=0,We&6)throw Error(X(331));var s=We;for(We|=4,de=e.current;de!==null;){var a=de,i=a.child;if(de.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(de=d;de!==null;){var h=de;switch(h.tag){case 0:case 11:case 15:$i(8,h,a)}var u=h.child;if(u!==null)u.return=h,de=u;else for(;de!==null;){h=de;var f=h.sibling,p=h.return;if(ry(h),h===d){de=null;break}if(f!==null){f.return=p,de=f;break}de=p}}}var b=a.alternate;if(b!==null){var g=b.child;if(g!==null){b.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}de=a}}if(a.subtreeFlags&2064&&i!==null)i.return=a,de=i;else e:for(;de!==null;){if(a=de,a.flags&2048)switch(a.tag){case 0:case 11:case 15:$i(9,a,a.return)}var x=a.sibling;if(x!==null){x.return=a.return,de=x;break e}de=a.return}}var y=e.current;for(de=y;de!==null;){i=de;var v=i.child;if(i.subtreeFlags&2064&&v!==null)v.return=i,de=v;else e:for(i=y;de!==null;){if(l=de,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:qd(9,l)}}catch(N){xt(l,l.return,N)}if(l===i){de=null;break e}var k=l.sibling;if(k!==null){k.return=l.return,de=k;break e}de=l.return}}if(We=s,Hs(),_n&&typeof _n.onPostCommitFiberRoot=="function")try{_n.onPostCommitFiberRoot(Ld,e)}catch{}n=!0}return n}finally{Ke=r,Hr.transition=t}}return!1}function ng(e,t,r){t=Ua(r,t),t=Hv(e,t,1),e=Rs(e,t,1),t=dr(),e!==null&&(Nl(e,1,t),jr(e,t))}function xt(e,t,r){if(e.tag===3)ng(e,e,r);else for(;t!==null;){if(t.tag===3){ng(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Os===null||!Os.has(n))){e=Ua(r,e),e=Vv(t,e,1),t=Rs(t,e,1),e=dr(),t!==null&&(Nl(t,1,e),jr(t,e));break}}t=t.return}}function wN(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=dr(),e.pingedLanes|=e.suspendedLanes&r,Mt===e&&(qt&r)===r&&(Ot===4||Ot===3&&(qt&130023424)===qt&&500>vt()-Kp?bo(e,0):Vp|=r),jr(e,t)}function hy(e,t){t===0&&(e.mode&1?(t=Kl,Kl<<=1,!(Kl&130023424)&&(Kl=4194304)):t=1);var r=dr();e=Hn(e,t),e!==null&&(Nl(e,t,r),jr(e,r))}function jN(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),hy(e,r)}function kN(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(X(314))}n!==null&&n.delete(t),hy(e,r)}var fy;fy=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||yr.current)vr=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return vr=!1,dN(e,t,r);vr=!!(e.flags&131072)}else vr=!1,it&&t.flags&1048576&&gv(t,ad,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;$c(e,t),e=t.pendingProps;var s=La(t,rr.current);ga(t,r),s=Up(null,t,n,e,s,r);var a=Bp();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,wr(n)?(a=!0,sd(t)):a=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Dp(t),s.updater=Wd,t.stateNode=s,s._reactInternals=t,of(t,n,e,r),t=cf(null,t,n,!0,a,r)):(t.tag=0,it&&a&&Ep(t),lr(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch($c(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=_N(n),e=en(n,e),s){case 0:t=lf(null,t,n,e,r);break e;case 1:t=Kx(null,t,n,e,r);break e;case 11:t=Hx(null,t,n,e,r);break e;case 14:t=Vx(null,t,n,en(n.type,e),r);break e}throw Error(X(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:en(n,s),lf(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:en(n,s),Kx(e,t,n,s,r);case 3:e:{if(Yv(t),e===null)throw Error(X(387));n=t.pendingProps,a=t.memoizedState,s=a.element,kv(e,t),cd(t,n,null,r);var i=t.memoizedState;if(n=i.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){s=Ua(Error(X(423)),t),t=Gx(e,t,n,r,s);break e}else if(n!==s){s=Ua(Error(X(424)),t),t=Gx(e,t,n,r,s);break e}else for(Or=Ts(t.stateNode.containerInfo.firstChild),Ar=t,it=!0,an=null,r=wv(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ma(),n===s){t=Vn(e,t,r);break e}lr(e,t,n,r)}t=t.child}return t;case 5:return Nv(t),e===null&&rf(t),n=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,i=s.children,Jh(n,s)?i=null:a!==null&&Jh(n,a)&&(t.flags|=32),Qv(e,t),lr(e,t,i,r),t.child;case 6:return e===null&&rf(t),null;case 13:return Jv(e,t,r);case 4:return Lp(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=$a(t,null,n,r):lr(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:en(n,s),Hx(e,t,n,s,r);case 7:return lr(e,t,t.pendingProps,r),t.child;case 8:return lr(e,t,t.pendingProps.children,r),t.child;case 12:return lr(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,a=t.memoizedProps,i=s.value,Ze(id,n._currentValue),n._currentValue=i,a!==null)if(dn(a.value,i)){if(a.children===s.children&&!yr.current){t=Vn(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){i=a.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=Bn(-1,r&-r),c.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),nf(a.return,r,t),l.lanes|=r;break}c=c.next}}else if(a.tag===10)i=a.type===t.type?null:a.child;else if(a.tag===18){if(i=a.return,i===null)throw Error(X(341));i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),nf(i,r,t),i=a.sibling}else i=a.child;if(i!==null)i.return=a;else for(i=a;i!==null;){if(i===t){i=null;break}if(a=i.sibling,a!==null){a.return=i.return,i=a;break}i=i.return}a=i}lr(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,ga(t,r),s=Vr(s),n=n(s),t.flags|=1,lr(e,t,n,r),t.child;case 14:return n=t.type,s=en(n,t.pendingProps),s=en(n.type,s),Vx(e,t,n,s,r);case 15:return Kv(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:en(n,s),$c(e,t),t.tag=1,wr(n)?(e=!0,sd(t)):e=!1,ga(t,r),qv(t,n,s),of(t,n,s,r),cf(null,t,n,!0,e,r);case 19:return Xv(e,t,r);case 22:return Gv(e,t,r)}throw Error(X(156,t.tag))};function py(e,t){return Bb(e,t)}function NN(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qr(e,t,r,n){return new NN(e,t,r,n)}function Jp(e){return e=e.prototype,!(!e||!e.isReactComponent)}function _N(e){if(typeof e=="function")return Jp(e)?1:0;if(e!=null){if(e=e.$$typeof,e===xp)return 11;if(e===gp)return 14}return 2}function Is(e,t){var r=e.alternate;return r===null?(r=qr(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Bc(e,t,r,n,s,a){var i=2;if(n=e,typeof e=="function")Jp(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case ea:return vo(r.children,s,a,t);case mp:i=8,s|=8;break;case Ph:return e=qr(12,r,t,s|2),e.elementType=Ph,e.lanes=a,e;case Th:return e=qr(13,r,t,s),e.elementType=Th,e.lanes=a,e;case Rh:return e=qr(19,r,t,s),e.elementType=Rh,e.lanes=a,e;case Nb:return Vd(r,s,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case jb:i=10;break e;case kb:i=9;break e;case xp:i=11;break e;case gp:i=14;break e;case ls:i=16,n=null;break e}throw Error(X(130,e==null?e:typeof e,""))}return t=qr(i,r,t,s),t.elementType=e,t.type=n,t.lanes=a,t}function vo(e,t,r,n){return e=qr(7,e,n,t),e.lanes=r,e}function Vd(e,t,r,n){return e=qr(22,e,n,t),e.elementType=Nb,e.lanes=r,e.stateNode={isHidden:!1},e}function Gu(e,t,r){return e=qr(6,e,null,t),e.lanes=r,e}function Qu(e,t,r){return t=qr(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function SN(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pu(0),this.expirationTimes=Pu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pu(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Xp(e,t,r,n,s,a,i,l,c){return e=new SN(e,t,r,l,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=qr(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Dp(a),e}function CN(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zo,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function my(e){if(!e)return $s;e=e._reactInternals;e:{if(Ao(e)!==e||e.tag!==1)throw Error(X(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(wr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(X(171))}if(e.tag===1){var r=e.type;if(wr(r))return mv(e,r,t)}return t}function xy(e,t,r,n,s,a,i,l,c){return e=Xp(r,n,!0,e,s,a,i,l,c),e.context=my(null),r=e.current,n=dr(),s=As(r),a=Bn(n,s),a.callback=t??null,Rs(r,a,s),e.current.lanes=s,Nl(e,s,n),jr(e,n),e}function Kd(e,t,r,n){var s=t.current,a=dr(),i=As(s);return r=my(r),t.context===null?t.context=r:t.pendingContext=r,t=Bn(a,i),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Rs(s,t,i),e!==null&&(cn(e,s,i,a),Dc(e,s,i)),i}function gd(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function sg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Zp(e,t){sg(e,t),(e=e.alternate)&&sg(e,t)}function EN(){return null}var gy=typeof reportError=="function"?reportError:function(e){console.error(e)};function em(e){this._internalRoot=e}Gd.prototype.render=em.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(X(409));Kd(e,t,null,null)};Gd.prototype.unmount=em.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;So(function(){Kd(null,e,null,null)}),t[qn]=null}};function Gd(e){this._internalRoot=e}Gd.prototype.unstable_scheduleHydration=function(e){if(e){var t=Gb();e={blockedOn:null,target:e,priority:t};for(var r=0;r<us.length&&t!==0&&t<us[r].priority;r++);us.splice(r,0,e),r===0&&Yb(e)}};function tm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Qd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function og(){}function PN(e,t,r,n,s){if(s){if(typeof n=="function"){var a=n;n=function(){var d=gd(i);a.call(d)}}var i=xy(t,n,e,0,null,!1,!1,"",og);return e._reactRootContainer=i,e[qn]=i.current,Ji(e.nodeType===8?e.parentNode:e),So(),i}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var d=gd(c);l.call(d)}}var c=Xp(e,0,!1,null,null,!1,!1,"",og);return e._reactRootContainer=c,e[qn]=c.current,Ji(e.nodeType===8?e.parentNode:e),So(function(){Kd(t,c,r,n)}),c}function Yd(e,t,r,n,s){var a=r._reactRootContainer;if(a){var i=a;if(typeof s=="function"){var l=s;s=function(){var c=gd(i);l.call(c)}}Kd(t,i,e,s)}else i=PN(r,t,e,s,n);return gd(i)}Vb=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Ei(t.pendingLanes);r!==0&&(yp(t,r|1),jr(t,vt()),!(We&6)&&(Ba=vt()+500,Hs()))}break;case 13:So(function(){var n=Hn(e,1);if(n!==null){var s=dr();cn(n,e,1,s)}}),Zp(e,1)}};wp=function(e){if(e.tag===13){var t=Hn(e,134217728);if(t!==null){var r=dr();cn(t,e,134217728,r)}Zp(e,134217728)}};Kb=function(e){if(e.tag===13){var t=As(e),r=Hn(e,t);if(r!==null){var n=dr();cn(r,e,t,n)}Zp(e,t)}};Gb=function(){return Ke};Qb=function(e,t){var r=Ke;try{return Ke=e,t()}finally{Ke=r}};Bh=function(e,t,r){switch(t){case"input":if(Ih(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=Ud(n);if(!s)throw Error(X(90));Sb(n),Ih(n,s)}}}break;case"textarea":Eb(e,r);break;case"select":t=r.value,t!=null&&fa(e,!!r.multiple,t,!1)}};Db=Gp;Lb=So;var TN={usingClientEntryPoint:!1,Events:[Sl,sa,Ud,Ab,Ib,Gp]},vi={findFiberByHostInstance:so,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},RN={bundleType:vi.bundleType,version:vi.version,rendererPackageName:vi.rendererPackageName,rendererConfig:vi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Fb(e),e===null?null:e.stateNode},findFiberByHostInstance:vi.findFiberByHostInstance||EN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sc.isDisabled&&sc.supportsFiber)try{Ld=sc.inject(RN),_n=sc}catch{}}Lr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TN;Lr.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tm(t))throw Error(X(200));return CN(e,t,null,r)};Lr.createRoot=function(e,t){if(!tm(e))throw Error(X(299));var r=!1,n="",s=gy;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Xp(e,1,!1,null,null,r,!1,n,s),e[qn]=t.current,Ji(e.nodeType===8?e.parentNode:e),new em(t)};Lr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(X(188)):(e=Object.keys(e).join(","),Error(X(268,e)));return e=Fb(t),e=e===null?null:e.stateNode,e};Lr.flushSync=function(e){return So(e)};Lr.hydrate=function(e,t,r){if(!Qd(t))throw Error(X(200));return Yd(null,e,t,!0,r)};Lr.hydrateRoot=function(e,t,r){if(!tm(e))throw Error(X(405));var n=r!=null&&r.hydratedSources||null,s=!1,a="",i=gy;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),t=xy(t,null,e,1,r??null,s,!1,a,i),e[qn]=t.current,Ji(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Gd(t)};Lr.render=function(e,t,r){if(!Qd(t))throw Error(X(200));return Yd(null,e,t,!1,r)};Lr.unmountComponentAtNode=function(e){if(!Qd(e))throw Error(X(40));return e._reactRootContainer?(So(function(){Yd(null,null,e,!1,function(){e._reactRootContainer=null,e[qn]=null})}),!0):!1};Lr.unstable_batchedUpdates=Gp;Lr.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Qd(r))throw Error(X(200));if(e==null||e._reactInternals===void 0)throw Error(X(38));return Yd(e,t,r,!1,n)};Lr.version="18.3.1-next-f1338f8080-20240426";function by(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(by)}catch(e){console.error(e)}}by(),bb.exports=Lr;var Jd=bb.exports;const vy=ab(Jd);var yy,ag=Jd;yy=ag.createRoot,ag.hydrateRoot;var ig=["light","dark"],ON="(prefers-color-scheme: dark)",AN=m.createContext(void 0),IN={setTheme:e=>{},themes:[]},DN=()=>{var e;return(e=m.useContext(AN))!=null?e:IN};m.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:n,enableColorScheme:s,defaultTheme:a,value:i,attrs:l,nonce:c})=>{let d=a==="system",h=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(b=>`'${b}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,u=s?ig.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(b,g=!1,w=!0)=>{let x=i?i[b]:b,y=g?b+"|| ''":`'${x}'`,v="";return s&&w&&!g&&ig.includes(b)&&(v+=`d.style.colorScheme = '${b}';`),r==="class"?g||x?v+=`c.add(${y})`:v+="null":x&&(v+=`d[s](n,${y})`),v},p=e?`!function(){${h}${f(e)}}()`:n?`!function(){try{${h}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${d})){var t='${ON}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${i?`var x=${JSON.stringify(i)};`:""}${f(i?"x[e]":"e",!0)}}${d?"":"else{"+f(a,!1,!1)+"}"}${u}}catch(e){}}()`:`!function(){try{${h}var e=localStorage.getItem('${t}');if(e){${i?`var x=${JSON.stringify(i)};`:""}${f(i?"x[e]":"e",!0)}}else{${f(a,!1,!1)};}${u}}catch(t){}}();`;return m.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:p}})});var LN=e=>{switch(e){case"success":return FN;case"info":return BN;case"warning":return UN;case"error":return zN;default:return null}},MN=Array(12).fill(0),$N=({visible:e,className:t})=>B.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},B.createElement("div",{className:"sonner-spinner"},MN.map((r,n)=>B.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),FN=B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},B.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),UN=B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},B.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),BN=B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},B.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),zN=B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},B.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),WN=B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},B.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),B.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),qN=()=>{let[e,t]=B.useState(document.hidden);return B.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},wf=1,HN=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...n}=e,s=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:wf++,a=this.toasts.find(l=>l.id===s),i=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),a?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...e,id:s,title:r}),{...l,...e,id:s,dismissible:i,title:r}):l):this.addToast({title:r,...n,dismissible:i,id:s}),s},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let n=e instanceof Promise?e:e(),s=r!==void 0,a,i=n.then(async c=>{if(a=["resolve",c],B.isValidElement(c))s=!1,this.create({id:r,type:"default",message:c});else if(KN(c)&&!c.ok){s=!1;let d=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,h=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:r,type:"error",message:d,description:h})}else if(t.success!==void 0){s=!1;let d=typeof t.success=="function"?await t.success(c):t.success,h=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"success",message:d,description:h})}}).catch(async c=>{if(a=["reject",c],t.error!==void 0){s=!1;let d=typeof t.error=="function"?await t.error(c):t.error,h=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"error",message:d,description:h})}}).finally(()=>{var c;s&&(this.dismiss(r),r=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,d)=>i.then(()=>a[0]==="reject"?d(a[1]):c(a[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||wf++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},xr=new HN,VN=(e,t)=>{let r=(t==null?void 0:t.id)||wf++;return xr.addToast({title:e,...t,id:r}),r},KN=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",GN=VN,QN=()=>xr.toasts,YN=()=>xr.getActiveToasts(),V=Object.assign(GN,{success:xr.success,info:xr.info,warning:xr.warning,error:xr.error,custom:xr.custom,message:xr.message,promise:xr.promise,dismiss:xr.dismiss,loading:xr.loading},{getHistory:QN,getToasts:YN});function JN(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}JN(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function oc(e){return e.label!==void 0}var XN=3,ZN="32px",e_="16px",lg=4e3,t_=356,r_=14,n_=20,s_=200;function Xr(...e){return e.filter(Boolean).join(" ")}function o_(e){let[t,r]=e.split("-"),n=[];return t&&n.push(t),r&&n.push(r),n}var a_=e=>{var t,r,n,s,a,i,l,c,d,h,u;let{invert:f,toast:p,unstyled:b,interacting:g,setHeights:w,visibleToasts:x,heights:y,index:v,toasts:k,expanded:N,removeToast:S,defaultRichColors:_,closeButton:P,style:D,cancelButtonStyle:T,actionButtonStyle:M,className:z="",descriptionClassName:F="",duration:W,position:Q,gap:K,loadingIcon:ne,expandByDefault:A,classNames:O,icons:L,closeButtonAriaLabel:re="Close toast",pauseWhenPageIsHidden:ee}=e,[G,le]=B.useState(null),[ve,Te]=B.useState(null),[je,et]=B.useState(!1),[tt,gt]=B.useState(!1),[Ye,At]=B.useState(!1),[xe,Kt]=B.useState(!1),[Ce,Gt]=B.useState(!1),[Qt,$r]=B.useState(0),[yt,I]=B.useState(0),ae=B.useRef(p.duration||W||lg),J=B.useRef(null),he=B.useRef(null),ke=v===0,$=v+1<=x,Z=p.type,te=p.dismissible!==!1,ce=p.className||"",Ee=p.descriptionClassName||"",oe=B.useMemo(()=>y.findIndex(fe=>fe.toastId===p.id)||0,[y,p.id]),Re=B.useMemo(()=>{var fe;return(fe=p.closeButton)!=null?fe:P},[p.closeButton,P]),ge=B.useMemo(()=>p.duration||W||lg,[p.duration,W]),lt=B.useRef(0),ot=B.useRef(0),Qr=B.useRef(0),Ut=B.useRef(null),[es,ye]=Q.split("-"),Ie=B.useMemo(()=>y.reduce((fe,Oe,Le)=>Le>=oe?fe:fe+Oe.height,0),[y,oe]),$e=qN(),Pe=p.invert||f,Ue=Z==="loading";ot.current=B.useMemo(()=>oe*K+Ie,[oe,Ie]),B.useEffect(()=>{ae.current=ge},[ge]),B.useEffect(()=>{et(!0)},[]),B.useEffect(()=>{let fe=he.current;if(fe){let Oe=fe.getBoundingClientRect().height;return I(Oe),w(Le=>[{toastId:p.id,height:Oe,position:p.position},...Le]),()=>w(Le=>Le.filter(Ae=>Ae.toastId!==p.id))}},[w,p.id]),B.useLayoutEffect(()=>{if(!je)return;let fe=he.current,Oe=fe.style.height;fe.style.height="auto";let Le=fe.getBoundingClientRect().height;fe.style.height=Oe,I(Le),w(Ae=>Ae.find(at=>at.toastId===p.id)?Ae.map(at=>at.toastId===p.id?{...at,height:Le}:at):[{toastId:p.id,height:Le,position:p.position},...Ae])},[je,p.title,p.description,w,p.id]);let Je=B.useCallback(()=>{gt(!0),$r(ot.current),w(fe=>fe.filter(Oe=>Oe.toastId!==p.id)),setTimeout(()=>{S(p)},s_)},[p,S,w,ot]);B.useEffect(()=>{if(p.promise&&Z==="loading"||p.duration===1/0||p.type==="loading")return;let fe;return N||g||ee&&$e?(()=>{if(Qr.current<lt.current){let Oe=new Date().getTime()-lt.current;ae.current=ae.current-Oe}Qr.current=new Date().getTime()})():ae.current!==1/0&&(lt.current=new Date().getTime(),fe=setTimeout(()=>{var Oe;(Oe=p.onAutoClose)==null||Oe.call(p,p),Je()},ae.current)),()=>clearTimeout(fe)},[N,g,p,Z,ee,$e,Je]),B.useEffect(()=>{p.delete&&Je()},[Je,p.delete]);function qe(){var fe,Oe,Le;return L!=null&&L.loading?B.createElement("div",{className:Xr(O==null?void 0:O.loader,(fe=p==null?void 0:p.classNames)==null?void 0:fe.loader,"sonner-loader"),"data-visible":Z==="loading"},L.loading):ne?B.createElement("div",{className:Xr(O==null?void 0:O.loader,(Oe=p==null?void 0:p.classNames)==null?void 0:Oe.loader,"sonner-loader"),"data-visible":Z==="loading"},ne):B.createElement($N,{className:Xr(O==null?void 0:O.loader,(Le=p==null?void 0:p.classNames)==null?void 0:Le.loader),visible:Z==="loading"})}return B.createElement("li",{tabIndex:0,ref:he,className:Xr(z,ce,O==null?void 0:O.toast,(t=p==null?void 0:p.classNames)==null?void 0:t.toast,O==null?void 0:O.default,O==null?void 0:O[Z],(r=p==null?void 0:p.classNames)==null?void 0:r[Z]),"data-sonner-toast":"","data-rich-colors":(n=p.richColors)!=null?n:_,"data-styled":!(p.jsx||p.unstyled||b),"data-mounted":je,"data-promise":!!p.promise,"data-swiped":Ce,"data-removed":tt,"data-visible":$,"data-y-position":es,"data-x-position":ye,"data-index":v,"data-front":ke,"data-swiping":Ye,"data-dismissible":te,"data-type":Z,"data-invert":Pe,"data-swipe-out":xe,"data-swipe-direction":ve,"data-expanded":!!(N||A&&je),style:{"--index":v,"--toasts-before":v,"--z-index":k.length-v,"--offset":`${tt?Qt:ot.current}px`,"--initial-height":A?"auto":`${yt}px`,...D,...p.style},onDragEnd:()=>{At(!1),le(null),Ut.current=null},onPointerDown:fe=>{Ue||!te||(J.current=new Date,$r(ot.current),fe.target.setPointerCapture(fe.pointerId),fe.target.tagName!=="BUTTON"&&(At(!0),Ut.current={x:fe.clientX,y:fe.clientY}))},onPointerUp:()=>{var fe,Oe,Le,Ae;if(xe||!te)return;Ut.current=null;let at=Number(((fe=he.current)==null?void 0:fe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),It=Number(((Oe=he.current)==null?void 0:Oe.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Fr=new Date().getTime()-((Le=J.current)==null?void 0:Le.getTime()),Sr=G==="x"?at:It,wt=Math.abs(Sr)/Fr;if(Math.abs(Sr)>=n_||wt>.11){$r(ot.current),(Ae=p.onDismiss)==null||Ae.call(p,p),Te(G==="x"?at>0?"right":"left":It>0?"down":"up"),Je(),Kt(!0),Gt(!1);return}At(!1),le(null)},onPointerMove:fe=>{var Oe,Le,Ae,at;if(!Ut.current||!te||((Oe=window.getSelection())==null?void 0:Oe.toString().length)>0)return;let It=fe.clientY-Ut.current.y,Fr=fe.clientX-Ut.current.x,Sr=(Le=e.swipeDirections)!=null?Le:o_(Q);!G&&(Math.abs(Fr)>1||Math.abs(It)>1)&&le(Math.abs(Fr)>Math.abs(It)?"x":"y");let wt={x:0,y:0};G==="y"?(Sr.includes("top")||Sr.includes("bottom"))&&(Sr.includes("top")&&It<0||Sr.includes("bottom")&&It>0)&&(wt.y=It):G==="x"&&(Sr.includes("left")||Sr.includes("right"))&&(Sr.includes("left")&&Fr<0||Sr.includes("right")&&Fr>0)&&(wt.x=Fr),(Math.abs(wt.x)>0||Math.abs(wt.y)>0)&&Gt(!0),(Ae=he.current)==null||Ae.style.setProperty("--swipe-amount-x",`${wt.x}px`),(at=he.current)==null||at.style.setProperty("--swipe-amount-y",`${wt.y}px`)}},Re&&!p.jsx?B.createElement("button",{"aria-label":re,"data-disabled":Ue,"data-close-button":!0,onClick:Ue||!te?()=>{}:()=>{var fe;Je(),(fe=p.onDismiss)==null||fe.call(p,p)},className:Xr(O==null?void 0:O.closeButton,(s=p==null?void 0:p.classNames)==null?void 0:s.closeButton)},(a=L==null?void 0:L.close)!=null?a:WN):null,p.jsx||m.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:B.createElement(B.Fragment,null,Z||p.icon||p.promise?B.createElement("div",{"data-icon":"",className:Xr(O==null?void 0:O.icon,(i=p==null?void 0:p.classNames)==null?void 0:i.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||qe():null,p.type!=="loading"?p.icon||(L==null?void 0:L[Z])||LN(Z):null):null,B.createElement("div",{"data-content":"",className:Xr(O==null?void 0:O.content,(l=p==null?void 0:p.classNames)==null?void 0:l.content)},B.createElement("div",{"data-title":"",className:Xr(O==null?void 0:O.title,(c=p==null?void 0:p.classNames)==null?void 0:c.title)},typeof p.title=="function"?p.title():p.title),p.description?B.createElement("div",{"data-description":"",className:Xr(F,Ee,O==null?void 0:O.description,(d=p==null?void 0:p.classNames)==null?void 0:d.description)},typeof p.description=="function"?p.description():p.description):null),m.isValidElement(p.cancel)?p.cancel:p.cancel&&oc(p.cancel)?B.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||T,onClick:fe=>{var Oe,Le;oc(p.cancel)&&te&&((Le=(Oe=p.cancel).onClick)==null||Le.call(Oe,fe),Je())},className:Xr(O==null?void 0:O.cancelButton,(h=p==null?void 0:p.classNames)==null?void 0:h.cancelButton)},p.cancel.label):null,m.isValidElement(p.action)?p.action:p.action&&oc(p.action)?B.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||M,onClick:fe=>{var Oe,Le;oc(p.action)&&((Le=(Oe=p.action).onClick)==null||Le.call(Oe,fe),!fe.defaultPrevented&&Je())},className:Xr(O==null?void 0:O.actionButton,(u=p==null?void 0:p.classNames)==null?void 0:u.actionButton)},p.action.label):null))};function cg(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function i_(e,t){let r={};return[e,t].forEach((n,s)=>{let a=s===1,i=a?"--mobile-offset":"--offset",l=a?e_:ZN;function c(d){["top","right","bottom","left"].forEach(h=>{r[`${i}-${h}`]=typeof d=="number"?`${d}px`:d})}typeof n=="number"||typeof n=="string"?c(n):typeof n=="object"?["top","right","bottom","left"].forEach(d=>{n[d]===void 0?r[`${i}-${d}`]=l:r[`${i}-${d}`]=typeof n[d]=="number"?`${n[d]}px`:n[d]}):c(l)}),r}var l_=m.forwardRef(function(e,t){let{invert:r,position:n="bottom-right",hotkey:s=["altKey","KeyT"],expand:a,closeButton:i,className:l,offset:c,mobileOffset:d,theme:h="light",richColors:u,duration:f,style:p,visibleToasts:b=XN,toastOptions:g,dir:w=cg(),gap:x=r_,loadingIcon:y,icons:v,containerAriaLabel:k="Notifications",pauseWhenPageIsHidden:N}=e,[S,_]=B.useState([]),P=B.useMemo(()=>Array.from(new Set([n].concat(S.filter(ee=>ee.position).map(ee=>ee.position)))),[S,n]),[D,T]=B.useState([]),[M,z]=B.useState(!1),[F,W]=B.useState(!1),[Q,K]=B.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ne=B.useRef(null),A=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),O=B.useRef(null),L=B.useRef(!1),re=B.useCallback(ee=>{_(G=>{var le;return(le=G.find(ve=>ve.id===ee.id))!=null&&le.delete||xr.dismiss(ee.id),G.filter(({id:ve})=>ve!==ee.id)})},[]);return B.useEffect(()=>xr.subscribe(ee=>{if(ee.dismiss){_(G=>G.map(le=>le.id===ee.id?{...le,delete:!0}:le));return}setTimeout(()=>{vy.flushSync(()=>{_(G=>{let le=G.findIndex(ve=>ve.id===ee.id);return le!==-1?[...G.slice(0,le),{...G[le],...ee},...G.slice(le+1)]:[ee,...G]})})})}),[]),B.useEffect(()=>{if(h!=="system"){K(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?K("dark"):K("light")),typeof window>"u")return;let ee=window.matchMedia("(prefers-color-scheme: dark)");try{ee.addEventListener("change",({matches:G})=>{K(G?"dark":"light")})}catch{ee.addListener(({matches:le})=>{try{K(le?"dark":"light")}catch(ve){console.error(ve)}})}},[h]),B.useEffect(()=>{S.length<=1&&z(!1)},[S]),B.useEffect(()=>{let ee=G=>{var le,ve;s.every(Te=>G[Te]||G.code===Te)&&(z(!0),(le=ne.current)==null||le.focus()),G.code==="Escape"&&(document.activeElement===ne.current||(ve=ne.current)!=null&&ve.contains(document.activeElement))&&z(!1)};return document.addEventListener("keydown",ee),()=>document.removeEventListener("keydown",ee)},[s]),B.useEffect(()=>{if(ne.current)return()=>{O.current&&(O.current.focus({preventScroll:!0}),O.current=null,L.current=!1)}},[ne.current]),B.createElement("section",{ref:t,"aria-label":`${k} ${A}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},P.map((ee,G)=>{var le;let[ve,Te]=ee.split("-");return S.length?B.createElement("ol",{key:ee,dir:w==="auto"?cg():w,tabIndex:-1,ref:ne,className:l,"data-sonner-toaster":!0,"data-theme":Q,"data-y-position":ve,"data-lifted":M&&S.length>1&&!a,"data-x-position":Te,style:{"--front-toast-height":`${((le=D[0])==null?void 0:le.height)||0}px`,"--width":`${t_}px`,"--gap":`${x}px`,...p,...i_(c,d)},onBlur:je=>{L.current&&!je.currentTarget.contains(je.relatedTarget)&&(L.current=!1,O.current&&(O.current.focus({preventScroll:!0}),O.current=null))},onFocus:je=>{je.target instanceof HTMLElement&&je.target.dataset.dismissible==="false"||L.current||(L.current=!0,O.current=je.relatedTarget)},onMouseEnter:()=>z(!0),onMouseMove:()=>z(!0),onMouseLeave:()=>{F||z(!1)},onDragEnd:()=>z(!1),onPointerDown:je=>{je.target instanceof HTMLElement&&je.target.dataset.dismissible==="false"||W(!0)},onPointerUp:()=>W(!1)},S.filter(je=>!je.position&&G===0||je.position===ee).map((je,et)=>{var tt,gt;return B.createElement(a_,{key:je.id,icons:v,index:et,toast:je,defaultRichColors:u,duration:(tt=g==null?void 0:g.duration)!=null?tt:f,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:r,visibleToasts:b,closeButton:(gt=g==null?void 0:g.closeButton)!=null?gt:i,interacting:F,position:ee,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:re,toasts:S.filter(Ye=>Ye.position==je.position),heights:D.filter(Ye=>Ye.position==je.position),setHeights:T,expandByDefault:a,gap:x,loadingIcon:y,expanded:M,pauseWhenPageIsHidden:N,swipeDirections:e.swipeDirections})})):null}))});const c_=({...e})=>{const{theme:t="system"}=DN();return o.jsx(l_,{theme:t,position:"bottom-center",className:"toaster group pointer-events-none fixed bottom-0 left-1/2 -translate-x-1/2 w-full max-w-[420px] px-3 pb-[calc(env(safe-area-inset-bottom)+12px)] pt-[env(safe-area-inset-top)] z-[120] sm:px-0",toastOptions:{classNames:{toast:"group toast pointer-events-auto w-full group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};function br(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e==null||e(s),r===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function dg(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function wy(...e){return t=>{let r=!1;const n=e.map(s=>{const a=dg(s,t);return!r&&typeof a=="function"&&(r=!0),a});if(r)return()=>{for(let s=0;s<n.length;s++){const a=n[s];typeof a=="function"?a():dg(e[s],null)}}}}function fn(...e){return m.useCallback(wy(...e),e)}function d_(e,t){const r=m.createContext(t),n=a=>{const{children:i,...l}=a,c=m.useMemo(()=>l,Object.values(l));return o.jsx(r.Provider,{value:c,children:i})};n.displayName=e+"Provider";function s(a){const i=m.useContext(r);if(i)return i;if(t!==void 0)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}return[n,s]}function rm(e,t=[]){let r=[];function n(a,i){const l=m.createContext(i),c=r.length;r=[...r,i];const d=u=>{var x;const{scope:f,children:p,...b}=u,g=((x=f==null?void 0:f[e])==null?void 0:x[c])||l,w=m.useMemo(()=>b,Object.values(b));return o.jsx(g.Provider,{value:w,children:p})};d.displayName=a+"Provider";function h(u,f){var g;const p=((g=f==null?void 0:f[e])==null?void 0:g[c])||l,b=m.useContext(p);if(b)return b;if(i!==void 0)return i;throw new Error(`\`${u}\` must be used within \`${a}\``)}return[d,h]}const s=()=>{const a=r.map(i=>m.createContext(i));return function(l){const c=(l==null?void 0:l[e])||a;return m.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[n,u_(s,...t)]}function u_(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const i=n.reduce((l,{useScope:c,scopeName:d})=>{const u=c(a)[`__scope${d}`];return{...l,...u}},{});return m.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}function nm(e){const t=f_(e),r=m.forwardRef((n,s)=>{const{children:a,...i}=n,l=m.Children.toArray(a),c=l.find(m_);if(c){const d=c.props.children,h=l.map(u=>u===c?m.Children.count(d)>1?m.Children.only(null):m.isValidElement(d)?d.props.children:null:u);return o.jsx(t,{...i,ref:s,children:m.isValidElement(d)?m.cloneElement(d,void 0,h):null})}return o.jsx(t,{...i,ref:s,children:a})});return r.displayName=`${e}.Slot`,r}var h_=nm("Slot");function f_(e){const t=m.forwardRef((r,n)=>{const{children:s,...a}=r;if(m.isValidElement(s)){const i=g_(s),l=x_(a,s.props);return s.type!==m.Fragment&&(l.ref=n?wy(n,i):i),m.cloneElement(s,l)}return m.Children.count(s)>1?m.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var jy=Symbol("radix.slottable");function p_(e){const t=({children:r})=>o.jsx(o.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=jy,t}function m_(e){return m.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===jy}function x_(e,t){const r={...t};for(const n in t){const s=e[n],a=t[n];/^on[A-Z]/.test(n)?s&&a?r[n]=(...l)=>{const c=a(...l);return s(...l),c}:s&&(r[n]=s):n==="style"?r[n]={...s,...a}:n==="className"&&(r[n]=[s,a].filter(Boolean).join(" "))}return{...e,...r}}function g_(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var b_=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Nr=b_.reduce((e,t)=>{const r=nm(`Primitive.${t}`),n=m.forwardRef((s,a)=>{const{asChild:i,...l}=s,c=i?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:a})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function v_(e,t){e&&Jd.flushSync(()=>e.dispatchEvent(t))}function za(e){const t=m.useRef(e);return m.useEffect(()=>{t.current=e}),m.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function y_(e,t=globalThis==null?void 0:globalThis.document){const r=za(e);m.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var w_="DismissableLayer",jf="dismissableLayer.update",j_="dismissableLayer.pointerDownOutside",k_="dismissableLayer.focusOutside",ug,ky=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),sm=m.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:i,onDismiss:l,...c}=e,d=m.useContext(ky),[h,u]=m.useState(null),f=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=m.useState({}),b=fn(t,_=>u(_)),g=Array.from(d.layers),[w]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),x=g.indexOf(w),y=h?g.indexOf(h):-1,v=d.layersWithOutsidePointerEventsDisabled.size>0,k=y>=x,N=S_(_=>{const P=_.target,D=[...d.branches].some(T=>T.contains(P));!k||D||(s==null||s(_),i==null||i(_),_.defaultPrevented||l==null||l())},f),S=C_(_=>{const P=_.target;[...d.branches].some(T=>T.contains(P))||(a==null||a(_),i==null||i(_),_.defaultPrevented||l==null||l())},f);return y_(_=>{y===d.layers.size-1&&(n==null||n(_),!_.defaultPrevented&&l&&(_.preventDefault(),l()))},f),m.useEffect(()=>{if(h)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(ug=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),hg(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=ug)}},[h,f,r,d]),m.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),hg())},[h,d]),m.useEffect(()=>{const _=()=>p({});return document.addEventListener(jf,_),()=>document.removeEventListener(jf,_)},[]),o.jsx(Nr.div,{...c,ref:b,style:{pointerEvents:v?k?"auto":"none":void 0,...e.style},onFocusCapture:br(e.onFocusCapture,S.onFocusCapture),onBlurCapture:br(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:br(e.onPointerDownCapture,N.onPointerDownCapture)})});sm.displayName=w_;var N_="DismissableLayerBranch",__=m.forwardRef((e,t)=>{const r=m.useContext(ky),n=m.useRef(null),s=fn(t,n);return m.useEffect(()=>{const a=n.current;if(a)return r.branches.add(a),()=>{r.branches.delete(a)}},[r.branches]),o.jsx(Nr.div,{...e,ref:s})});__.displayName=N_;function S_(e,t=globalThis==null?void 0:globalThis.document){const r=za(e),n=m.useRef(!1),s=m.useRef(()=>{});return m.useEffect(()=>{const a=l=>{if(l.target&&!n.current){let c=function(){Ny(j_,r,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=c,t.addEventListener("click",s.current,{once:!0})):c()}else t.removeEventListener("click",s.current);n.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",a),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function C_(e,t=globalThis==null?void 0:globalThis.document){const r=za(e),n=m.useRef(!1);return m.useEffect(()=>{const s=a=>{a.target&&!n.current&&Ny(k_,r,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function hg(){const e=new CustomEvent(jf);document.dispatchEvent(e)}function Ny(e,t,r,{discrete:n}){const s=r.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?v_(s,a):s.dispatchEvent(a)}var Fs=globalThis!=null&&globalThis.document?m.useLayoutEffect:()=>{},E_=up[" useId ".trim().toString()]||(()=>{}),P_=0;function Yu(e){const[t,r]=m.useState(E_());return Fs(()=>{e||r(n=>n??String(P_++))},[e]),e||(t?`radix-${t}`:"")}const T_=["top","right","bottom","left"],Us=Math.min,Tr=Math.max,bd=Math.round,ac=Math.floor,Cn=e=>({x:e,y:e}),R_={left:"right",right:"left",bottom:"top",top:"bottom"},O_={start:"end",end:"start"};function kf(e,t,r){return Tr(e,Us(t,r))}function Kn(e,t){return typeof e=="function"?e(t):e}function Gn(e){return e.split("-")[0]}function ei(e){return e.split("-")[1]}function om(e){return e==="x"?"y":"x"}function am(e){return e==="y"?"height":"width"}const A_=new Set(["top","bottom"]);function Nn(e){return A_.has(Gn(e))?"y":"x"}function im(e){return om(Nn(e))}function I_(e,t,r){r===void 0&&(r=!1);const n=ei(e),s=im(e),a=am(s);let i=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(i=vd(i)),[i,vd(i)]}function D_(e){const t=vd(e);return[Nf(e),t,Nf(t)]}function Nf(e){return e.replace(/start|end/g,t=>O_[t])}const fg=["left","right"],pg=["right","left"],L_=["top","bottom"],M_=["bottom","top"];function $_(e,t,r){switch(e){case"top":case"bottom":return r?t?pg:fg:t?fg:pg;case"left":case"right":return t?L_:M_;default:return[]}}function F_(e,t,r,n){const s=ei(e);let a=$_(Gn(e),r==="start",n);return s&&(a=a.map(i=>i+"-"+s),t&&(a=a.concat(a.map(Nf)))),a}function vd(e){return e.replace(/left|right|bottom|top/g,t=>R_[t])}function U_(e){return{top:0,right:0,bottom:0,left:0,...e}}function _y(e){return typeof e!="number"?U_(e):{top:e,right:e,bottom:e,left:e}}function yd(e){const{x:t,y:r,width:n,height:s}=e;return{width:n,height:s,top:r,left:t,right:t+n,bottom:r+s,x:t,y:r}}function mg(e,t,r){let{reference:n,floating:s}=e;const a=Nn(t),i=im(t),l=am(i),c=Gn(t),d=a==="y",h=n.x+n.width/2-s.width/2,u=n.y+n.height/2-s.height/2,f=n[l]/2-s[l]/2;let p;switch(c){case"top":p={x:h,y:n.y-s.height};break;case"bottom":p={x:h,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:u};break;case"left":p={x:n.x-s.width,y:u};break;default:p={x:n.x,y:n.y}}switch(ei(t)){case"start":p[i]-=f*(r&&d?-1:1);break;case"end":p[i]+=f*(r&&d?-1:1);break}return p}const B_=async(e,t,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:a=[],platform:i}=r,l=a.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(t));let d=await i.getElementRects({reference:e,floating:t,strategy:s}),{x:h,y:u}=mg(d,n,c),f=n,p={},b=0;for(let g=0;g<l.length;g++){const{name:w,fn:x}=l[g],{x:y,y:v,data:k,reset:N}=await x({x:h,y:u,initialPlacement:n,placement:f,strategy:s,middlewareData:p,rects:d,platform:i,elements:{reference:e,floating:t}});h=y??h,u=v??u,p={...p,[w]:{...p[w],...k}},N&&b<=50&&(b++,typeof N=="object"&&(N.placement&&(f=N.placement),N.rects&&(d=N.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:s}):N.rects),{x:h,y:u}=mg(d,f,c)),g=-1)}return{x:h,y:u,placement:f,strategy:s,middlewareData:p}};async function al(e,t){var r;t===void 0&&(t={});const{x:n,y:s,platform:a,rects:i,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:h="viewport",elementContext:u="floating",altBoundary:f=!1,padding:p=0}=Kn(t,e),b=_y(p),w=l[f?u==="floating"?"reference":"floating":u],x=yd(await a.getClippingRect({element:(r=await(a.isElement==null?void 0:a.isElement(w)))==null||r?w:w.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:d,rootBoundary:h,strategy:c})),y=u==="floating"?{x:n,y:s,width:i.floating.width,height:i.floating.height}:i.reference,v=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),k=await(a.isElement==null?void 0:a.isElement(v))?await(a.getScale==null?void 0:a.getScale(v))||{x:1,y:1}:{x:1,y:1},N=yd(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:y,offsetParent:v,strategy:c}):y);return{top:(x.top-N.top+b.top)/k.y,bottom:(N.bottom-x.bottom+b.bottom)/k.y,left:(x.left-N.left+b.left)/k.x,right:(N.right-x.right+b.right)/k.x}}const z_=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:s,rects:a,platform:i,elements:l,middlewareData:c}=t,{element:d,padding:h=0}=Kn(e,t)||{};if(d==null)return{};const u=_y(h),f={x:r,y:n},p=im(s),b=am(p),g=await i.getDimensions(d),w=p==="y",x=w?"top":"left",y=w?"bottom":"right",v=w?"clientHeight":"clientWidth",k=a.reference[b]+a.reference[p]-f[p]-a.floating[b],N=f[p]-a.reference[p],S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(d));let _=S?S[v]:0;(!_||!await(i.isElement==null?void 0:i.isElement(S)))&&(_=l.floating[v]||a.floating[b]);const P=k/2-N/2,D=_/2-g[b]/2-1,T=Us(u[x],D),M=Us(u[y],D),z=T,F=_-g[b]-M,W=_/2-g[b]/2+P,Q=kf(z,W,F),K=!c.arrow&&ei(s)!=null&&W!==Q&&a.reference[b]/2-(W<z?T:M)-g[b]/2<0,ne=K?W<z?W-z:W-F:0;return{[p]:f[p]+ne,data:{[p]:Q,centerOffset:W-Q-ne,...K&&{alignmentOffset:ne}},reset:K}}}),W_=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:s,middlewareData:a,rects:i,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:h=!0,crossAxis:u=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:g=!0,...w}=Kn(e,t);if((r=a.arrow)!=null&&r.alignmentOffset)return{};const x=Gn(s),y=Nn(l),v=Gn(l)===l,k=await(c.isRTL==null?void 0:c.isRTL(d.floating)),N=f||(v||!g?[vd(l)]:D_(l)),S=b!=="none";!f&&S&&N.push(...F_(l,g,b,k));const _=[l,...N],P=await al(t,w),D=[];let T=((n=a.flip)==null?void 0:n.overflows)||[];if(h&&D.push(P[x]),u){const W=I_(s,i,k);D.push(P[W[0]],P[W[1]])}if(T=[...T,{placement:s,overflows:D}],!D.every(W=>W<=0)){var M,z;const W=(((M=a.flip)==null?void 0:M.index)||0)+1,Q=_[W];if(Q&&(!(u==="alignment"?y!==Nn(Q):!1)||T.every(A=>A.overflows[0]>0&&Nn(A.placement)===y)))return{data:{index:W,overflows:T},reset:{placement:Q}};let K=(z=T.filter(ne=>ne.overflows[0]<=0).sort((ne,A)=>ne.overflows[1]-A.overflows[1])[0])==null?void 0:z.placement;if(!K)switch(p){case"bestFit":{var F;const ne=(F=T.filter(A=>{if(S){const O=Nn(A.placement);return O===y||O==="y"}return!0}).map(A=>[A.placement,A.overflows.filter(O=>O>0).reduce((O,L)=>O+L,0)]).sort((A,O)=>A[1]-O[1])[0])==null?void 0:F[0];ne&&(K=ne);break}case"initialPlacement":K=l;break}if(s!==K)return{reset:{placement:K}}}return{}}}};function xg(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function gg(e){return T_.some(t=>e[t]>=0)}const q_=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...s}=Kn(e,t);switch(n){case"referenceHidden":{const a=await al(t,{...s,elementContext:"reference"}),i=xg(a,r.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:gg(i)}}}case"escaped":{const a=await al(t,{...s,altBoundary:!0}),i=xg(a,r.floating);return{data:{escapedOffsets:i,escaped:gg(i)}}}default:return{}}}}},Sy=new Set(["left","top"]);async function H_(e,t){const{placement:r,platform:n,elements:s}=e,a=await(n.isRTL==null?void 0:n.isRTL(s.floating)),i=Gn(r),l=ei(r),c=Nn(r)==="y",d=Sy.has(i)?-1:1,h=a&&c?-1:1,u=Kn(t,e);let{mainAxis:f,crossAxis:p,alignmentAxis:b}=typeof u=="number"?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return l&&typeof b=="number"&&(p=l==="end"?b*-1:b),c?{x:p*h,y:f*d}:{x:f*d,y:p*h}}const V_=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:s,y:a,placement:i,middlewareData:l}=t,c=await H_(t,e);return i===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:s+c.x,y:a+c.y,data:{...c,placement:i}}}}},K_=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:s}=t,{mainAxis:a=!0,crossAxis:i=!1,limiter:l={fn:w=>{let{x,y}=w;return{x,y}}},...c}=Kn(e,t),d={x:r,y:n},h=await al(t,c),u=Nn(Gn(s)),f=om(u);let p=d[f],b=d[u];if(a){const w=f==="y"?"top":"left",x=f==="y"?"bottom":"right",y=p+h[w],v=p-h[x];p=kf(y,p,v)}if(i){const w=u==="y"?"top":"left",x=u==="y"?"bottom":"right",y=b+h[w],v=b-h[x];b=kf(y,b,v)}const g=l.fn({...t,[f]:p,[u]:b});return{...g,data:{x:g.x-r,y:g.y-n,enabled:{[f]:a,[u]:i}}}}}},G_=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:s,rects:a,middlewareData:i}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=Kn(e,t),h={x:r,y:n},u=Nn(s),f=om(u);let p=h[f],b=h[u];const g=Kn(l,t),w=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const v=f==="y"?"height":"width",k=a.reference[f]-a.floating[v]+w.mainAxis,N=a.reference[f]+a.reference[v]-w.mainAxis;p<k?p=k:p>N&&(p=N)}if(d){var x,y;const v=f==="y"?"width":"height",k=Sy.has(Gn(s)),N=a.reference[u]-a.floating[v]+(k&&((x=i.offset)==null?void 0:x[u])||0)+(k?0:w.crossAxis),S=a.reference[u]+a.reference[v]+(k?0:((y=i.offset)==null?void 0:y[u])||0)-(k?w.crossAxis:0);b<N?b=N:b>S&&(b=S)}return{[f]:p,[u]:b}}}},Q_=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:s,rects:a,platform:i,elements:l}=t,{apply:c=()=>{},...d}=Kn(e,t),h=await al(t,d),u=Gn(s),f=ei(s),p=Nn(s)==="y",{width:b,height:g}=a.floating;let w,x;u==="top"||u==="bottom"?(w=u,x=f===(await(i.isRTL==null?void 0:i.isRTL(l.floating))?"start":"end")?"left":"right"):(x=u,w=f==="end"?"top":"bottom");const y=g-h.top-h.bottom,v=b-h.left-h.right,k=Us(g-h[w],y),N=Us(b-h[x],v),S=!t.middlewareData.shift;let _=k,P=N;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(P=v),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(_=y),S&&!f){const T=Tr(h.left,0),M=Tr(h.right,0),z=Tr(h.top,0),F=Tr(h.bottom,0);p?P=b-2*(T!==0||M!==0?T+M:Tr(h.left,h.right)):_=g-2*(z!==0||F!==0?z+F:Tr(h.top,h.bottom))}await c({...t,availableWidth:P,availableHeight:_});const D=await i.getDimensions(l.floating);return b!==D.width||g!==D.height?{reset:{rects:!0}}:{}}}};function Xd(){return typeof window<"u"}function ti(e){return Cy(e)?(e.nodeName||"").toLowerCase():"#document"}function Ir(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Rn(e){var t;return(t=(Cy(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Cy(e){return Xd()?e instanceof Node||e instanceof Ir(e).Node:!1}function un(e){return Xd()?e instanceof Element||e instanceof Ir(e).Element:!1}function Pn(e){return Xd()?e instanceof HTMLElement||e instanceof Ir(e).HTMLElement:!1}function bg(e){return!Xd()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Ir(e).ShadowRoot}const Y_=new Set(["inline","contents"]);function El(e){const{overflow:t,overflowX:r,overflowY:n,display:s}=hn(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!Y_.has(s)}const J_=new Set(["table","td","th"]);function X_(e){return J_.has(ti(e))}const Z_=[":popover-open",":modal"];function Zd(e){return Z_.some(t=>{try{return e.matches(t)}catch{return!1}})}const eS=["transform","translate","scale","rotate","perspective"],tS=["transform","translate","scale","rotate","perspective","filter"],rS=["paint","layout","strict","content"];function lm(e){const t=cm(),r=un(e)?hn(e):e;return eS.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||tS.some(n=>(r.willChange||"").includes(n))||rS.some(n=>(r.contain||"").includes(n))}function nS(e){let t=Bs(e);for(;Pn(t)&&!Wa(t);){if(lm(t))return t;if(Zd(t))return null;t=Bs(t)}return null}function cm(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const sS=new Set(["html","body","#document"]);function Wa(e){return sS.has(ti(e))}function hn(e){return Ir(e).getComputedStyle(e)}function eu(e){return un(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Bs(e){if(ti(e)==="html")return e;const t=e.assignedSlot||e.parentNode||bg(e)&&e.host||Rn(e);return bg(t)?t.host:t}function Ey(e){const t=Bs(e);return Wa(t)?e.ownerDocument?e.ownerDocument.body:e.body:Pn(t)&&El(t)?t:Ey(t)}function il(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const s=Ey(e),a=s===((n=e.ownerDocument)==null?void 0:n.body),i=Ir(s);if(a){const l=_f(i);return t.concat(i,i.visualViewport||[],El(s)?s:[],l&&r?il(l):[])}return t.concat(s,il(s,[],r))}function _f(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Py(e){const t=hn(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const s=Pn(e),a=s?e.offsetWidth:r,i=s?e.offsetHeight:n,l=bd(r)!==a||bd(n)!==i;return l&&(r=a,n=i),{width:r,height:n,$:l}}function dm(e){return un(e)?e:e.contextElement}function va(e){const t=dm(e);if(!Pn(t))return Cn(1);const r=t.getBoundingClientRect(),{width:n,height:s,$:a}=Py(t);let i=(a?bd(r.width):r.width)/n,l=(a?bd(r.height):r.height)/s;return(!i||!Number.isFinite(i))&&(i=1),(!l||!Number.isFinite(l))&&(l=1),{x:i,y:l}}const oS=Cn(0);function Ty(e){const t=Ir(e);return!cm()||!t.visualViewport?oS:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function aS(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==Ir(e)?!1:t}function Co(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const s=e.getBoundingClientRect(),a=dm(e);let i=Cn(1);t&&(n?un(n)&&(i=va(n)):i=va(e));const l=aS(a,r,n)?Ty(a):Cn(0);let c=(s.left+l.x)/i.x,d=(s.top+l.y)/i.y,h=s.width/i.x,u=s.height/i.y;if(a){const f=Ir(a),p=n&&un(n)?Ir(n):n;let b=f,g=_f(b);for(;g&&n&&p!==b;){const w=va(g),x=g.getBoundingClientRect(),y=hn(g),v=x.left+(g.clientLeft+parseFloat(y.paddingLeft))*w.x,k=x.top+(g.clientTop+parseFloat(y.paddingTop))*w.y;c*=w.x,d*=w.y,h*=w.x,u*=w.y,c+=v,d+=k,b=Ir(g),g=_f(b)}}return yd({width:h,height:u,x:c,y:d})}function um(e,t){const r=eu(e).scrollLeft;return t?t.left+r:Co(Rn(e)).left+r}function Ry(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),s=n.left+t.scrollLeft-(r?0:um(e,n)),a=n.top+t.scrollTop;return{x:s,y:a}}function iS(e){let{elements:t,rect:r,offsetParent:n,strategy:s}=e;const a=s==="fixed",i=Rn(n),l=t?Zd(t.floating):!1;if(n===i||l&&a)return r;let c={scrollLeft:0,scrollTop:0},d=Cn(1);const h=Cn(0),u=Pn(n);if((u||!u&&!a)&&((ti(n)!=="body"||El(i))&&(c=eu(n)),Pn(n))){const p=Co(n);d=va(n),h.x=p.x+n.clientLeft,h.y=p.y+n.clientTop}const f=i&&!u&&!a?Ry(i,c,!0):Cn(0);return{width:r.width*d.x,height:r.height*d.y,x:r.x*d.x-c.scrollLeft*d.x+h.x+f.x,y:r.y*d.y-c.scrollTop*d.y+h.y+f.y}}function lS(e){return Array.from(e.getClientRects())}function cS(e){const t=Rn(e),r=eu(e),n=e.ownerDocument.body,s=Tr(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),a=Tr(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let i=-r.scrollLeft+um(e);const l=-r.scrollTop;return hn(n).direction==="rtl"&&(i+=Tr(t.clientWidth,n.clientWidth)-s),{width:s,height:a,x:i,y:l}}function dS(e,t){const r=Ir(e),n=Rn(e),s=r.visualViewport;let a=n.clientWidth,i=n.clientHeight,l=0,c=0;if(s){a=s.width,i=s.height;const d=cm();(!d||d&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:a,height:i,x:l,y:c}}const uS=new Set(["absolute","fixed"]);function hS(e,t){const r=Co(e,!0,t==="fixed"),n=r.top+e.clientTop,s=r.left+e.clientLeft,a=Pn(e)?va(e):Cn(1),i=e.clientWidth*a.x,l=e.clientHeight*a.y,c=s*a.x,d=n*a.y;return{width:i,height:l,x:c,y:d}}function vg(e,t,r){let n;if(t==="viewport")n=dS(e,r);else if(t==="document")n=cS(Rn(e));else if(un(t))n=hS(t,r);else{const s=Ty(e);n={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return yd(n)}function Oy(e,t){const r=Bs(e);return r===t||!un(r)||Wa(r)?!1:hn(r).position==="fixed"||Oy(r,t)}function fS(e,t){const r=t.get(e);if(r)return r;let n=il(e,[],!1).filter(l=>un(l)&&ti(l)!=="body"),s=null;const a=hn(e).position==="fixed";let i=a?Bs(e):e;for(;un(i)&&!Wa(i);){const l=hn(i),c=lm(i);!c&&l.position==="fixed"&&(s=null),(a?!c&&!s:!c&&l.position==="static"&&!!s&&uS.has(s.position)||El(i)&&!c&&Oy(e,i))?n=n.filter(h=>h!==i):s=l,i=Bs(i)}return t.set(e,n),n}function pS(e){let{element:t,boundary:r,rootBoundary:n,strategy:s}=e;const i=[...r==="clippingAncestors"?Zd(t)?[]:fS(t,this._c):[].concat(r),n],l=i[0],c=i.reduce((d,h)=>{const u=vg(t,h,s);return d.top=Tr(u.top,d.top),d.right=Us(u.right,d.right),d.bottom=Us(u.bottom,d.bottom),d.left=Tr(u.left,d.left),d},vg(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function mS(e){const{width:t,height:r}=Py(e);return{width:t,height:r}}function xS(e,t,r){const n=Pn(t),s=Rn(t),a=r==="fixed",i=Co(e,!0,a,t);let l={scrollLeft:0,scrollTop:0};const c=Cn(0);function d(){c.x=um(s)}if(n||!n&&!a)if((ti(t)!=="body"||El(s))&&(l=eu(t)),n){const p=Co(t,!0,a,t);c.x=p.x+t.clientLeft,c.y=p.y+t.clientTop}else s&&d();a&&!n&&s&&d();const h=s&&!n&&!a?Ry(s,l):Cn(0),u=i.left+l.scrollLeft-c.x-h.x,f=i.top+l.scrollTop-c.y-h.y;return{x:u,y:f,width:i.width,height:i.height}}function Ju(e){return hn(e).position==="static"}function yg(e,t){if(!Pn(e)||hn(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return Rn(e)===r&&(r=r.ownerDocument.body),r}function Ay(e,t){const r=Ir(e);if(Zd(e))return r;if(!Pn(e)){let s=Bs(e);for(;s&&!Wa(s);){if(un(s)&&!Ju(s))return s;s=Bs(s)}return r}let n=yg(e,t);for(;n&&X_(n)&&Ju(n);)n=yg(n,t);return n&&Wa(n)&&Ju(n)&&!lm(n)?r:n||nS(e)||r}const gS=async function(e){const t=this.getOffsetParent||Ay,r=this.getDimensions,n=await r(e.floating);return{reference:xS(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function bS(e){return hn(e).direction==="rtl"}const vS={convertOffsetParentRelativeRectToViewportRelativeRect:iS,getDocumentElement:Rn,getClippingRect:pS,getOffsetParent:Ay,getElementRects:gS,getClientRects:lS,getDimensions:mS,getScale:va,isElement:un,isRTL:bS};function Iy(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function yS(e,t){let r=null,n;const s=Rn(e);function a(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function i(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const d=e.getBoundingClientRect(),{left:h,top:u,width:f,height:p}=d;if(l||t(),!f||!p)return;const b=ac(u),g=ac(s.clientWidth-(h+f)),w=ac(s.clientHeight-(u+p)),x=ac(h),v={rootMargin:-b+"px "+-g+"px "+-w+"px "+-x+"px",threshold:Tr(0,Us(1,c))||1};let k=!0;function N(S){const _=S[0].intersectionRatio;if(_!==c){if(!k)return i();_?i(!1,_):n=setTimeout(()=>{i(!1,1e-7)},1e3)}_===1&&!Iy(d,e.getBoundingClientRect())&&i(),k=!1}try{r=new IntersectionObserver(N,{...v,root:s.ownerDocument})}catch{r=new IntersectionObserver(N,v)}r.observe(e)}return i(!0),a}function wS(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,d=dm(e),h=s||a?[...d?il(d):[],...il(t)]:[];h.forEach(x=>{s&&x.addEventListener("scroll",r,{passive:!0}),a&&x.addEventListener("resize",r)});const u=d&&l?yS(d,r):null;let f=-1,p=null;i&&(p=new ResizeObserver(x=>{let[y]=x;y&&y.target===d&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var v;(v=p)==null||v.observe(t)})),r()}),d&&!c&&p.observe(d),p.observe(t));let b,g=c?Co(e):null;c&&w();function w(){const x=Co(e);g&&!Iy(g,x)&&r(),g=x,b=requestAnimationFrame(w)}return r(),()=>{var x;h.forEach(y=>{s&&y.removeEventListener("scroll",r),a&&y.removeEventListener("resize",r)}),u==null||u(),(x=p)==null||x.disconnect(),p=null,c&&cancelAnimationFrame(b)}}const jS=V_,kS=K_,NS=W_,_S=Q_,SS=q_,wg=z_,CS=G_,ES=(e,t,r)=>{const n=new Map,s={platform:vS,...r},a={...s.platform,_c:n};return B_(e,t,{...s,platform:a})};var PS=typeof document<"u",TS=function(){},zc=PS?m.useLayoutEffect:TS;function wd(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!wd(e[n],t[n]))return!1;return!0}if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,s[n]))return!1;for(n=r;n--!==0;){const a=s[n];if(!(a==="_owner"&&e.$$typeof)&&!wd(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function Dy(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function jg(e,t){const r=Dy(e);return Math.round(t*r)/r}function Xu(e){const t=m.useRef(e);return zc(()=>{t.current=e}),t}function RS(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:a,floating:i}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[h,u]=m.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[f,p]=m.useState(n);wd(f,n)||p(n);const[b,g]=m.useState(null),[w,x]=m.useState(null),y=m.useCallback(A=>{A!==S.current&&(S.current=A,g(A))},[]),v=m.useCallback(A=>{A!==_.current&&(_.current=A,x(A))},[]),k=a||b,N=i||w,S=m.useRef(null),_=m.useRef(null),P=m.useRef(h),D=c!=null,T=Xu(c),M=Xu(s),z=Xu(d),F=m.useCallback(()=>{if(!S.current||!_.current)return;const A={placement:t,strategy:r,middleware:f};M.current&&(A.platform=M.current),ES(S.current,_.current,A).then(O=>{const L={...O,isPositioned:z.current!==!1};W.current&&!wd(P.current,L)&&(P.current=L,Jd.flushSync(()=>{u(L)}))})},[f,t,r,M,z]);zc(()=>{d===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,u(A=>({...A,isPositioned:!1})))},[d]);const W=m.useRef(!1);zc(()=>(W.current=!0,()=>{W.current=!1}),[]),zc(()=>{if(k&&(S.current=k),N&&(_.current=N),k&&N){if(T.current)return T.current(k,N,F);F()}},[k,N,F,T,D]);const Q=m.useMemo(()=>({reference:S,floating:_,setReference:y,setFloating:v}),[y,v]),K=m.useMemo(()=>({reference:k,floating:N}),[k,N]),ne=m.useMemo(()=>{const A={position:r,left:0,top:0};if(!K.floating)return A;const O=jg(K.floating,h.x),L=jg(K.floating,h.y);return l?{...A,transform:"translate("+O+"px, "+L+"px)",...Dy(K.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:O,top:L}},[r,l,K.floating,h.x,h.y]);return m.useMemo(()=>({...h,update:F,refs:Q,elements:K,floatingStyles:ne}),[h,F,Q,K,ne])}const OS=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:s}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?wg({element:n.current,padding:s}).fn(r):{}:n?wg({element:n,padding:s}).fn(r):{}}}},AS=(e,t)=>({...jS(e),options:[e,t]}),IS=(e,t)=>({...kS(e),options:[e,t]}),DS=(e,t)=>({...CS(e),options:[e,t]}),LS=(e,t)=>({...NS(e),options:[e,t]}),MS=(e,t)=>({..._S(e),options:[e,t]}),$S=(e,t)=>({...SS(e),options:[e,t]}),FS=(e,t)=>({...OS(e),options:[e,t]});var US="Arrow",Ly=m.forwardRef((e,t)=>{const{children:r,width:n=10,height:s=5,...a}=e;return o.jsx(Nr.svg,{...a,ref:t,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});Ly.displayName=US;var BS=Ly;function zS(e){const[t,r]=m.useState(void 0);return Fs(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let i,l;if("borderBoxSize"in a){const c=a.borderBoxSize,d=Array.isArray(c)?c[0]:c;i=d.inlineSize,l=d.blockSize}else i=e.offsetWidth,l=e.offsetHeight;r({width:i,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var My="Popper",[$y,Fy]=rm(My),[l6,Uy]=$y(My),By="PopperAnchor",zy=m.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...s}=e,a=Uy(By,r),i=m.useRef(null),l=fn(t,i);return m.useEffect(()=>{a.onAnchorChange((n==null?void 0:n.current)||i.current)}),n?null:o.jsx(Nr.div,{...s,ref:l})});zy.displayName=By;var hm="PopperContent",[WS,qS]=$y(hm),Wy=m.forwardRef((e,t)=>{var je,et,tt,gt,Ye,At;const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:a="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:h=0,sticky:u="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:b,...g}=e,w=Uy(hm,r),[x,y]=m.useState(null),v=fn(t,xe=>y(xe)),[k,N]=m.useState(null),S=zS(k),_=(S==null?void 0:S.width)??0,P=(S==null?void 0:S.height)??0,D=n+(a!=="center"?"-"+a:""),T=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},M=Array.isArray(d)?d:[d],z=M.length>0,F={padding:T,boundary:M.filter(VS),altBoundary:z},{refs:W,floatingStyles:Q,placement:K,isPositioned:ne,middlewareData:A}=RS({strategy:"fixed",placement:D,whileElementsMounted:(...xe)=>wS(...xe,{animationFrame:p==="always"}),elements:{reference:w.anchor},middleware:[AS({mainAxis:s+P,alignmentAxis:i}),c&&IS({mainAxis:!0,crossAxis:!1,limiter:u==="partial"?DS():void 0,...F}),c&&LS({...F}),MS({...F,apply:({elements:xe,rects:Kt,availableWidth:Ce,availableHeight:Gt})=>{const{width:Qt,height:$r}=Kt.reference,yt=xe.floating.style;yt.setProperty("--radix-popper-available-width",`${Ce}px`),yt.setProperty("--radix-popper-available-height",`${Gt}px`),yt.setProperty("--radix-popper-anchor-width",`${Qt}px`),yt.setProperty("--radix-popper-anchor-height",`${$r}px`)}}),k&&FS({element:k,padding:l}),KS({arrowWidth:_,arrowHeight:P}),f&&$S({strategy:"referenceHidden",...F})]}),[O,L]=Vy(K),re=za(b);Fs(()=>{ne&&(re==null||re())},[ne,re]);const ee=(je=A.arrow)==null?void 0:je.x,G=(et=A.arrow)==null?void 0:et.y,le=((tt=A.arrow)==null?void 0:tt.centerOffset)!==0,[ve,Te]=m.useState();return Fs(()=>{x&&Te(window.getComputedStyle(x).zIndex)},[x]),o.jsx("div",{ref:W.setFloating,"data-radix-popper-content-wrapper":"",style:{...Q,transform:ne?Q.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ve,"--radix-popper-transform-origin":[(gt=A.transformOrigin)==null?void 0:gt.x,(Ye=A.transformOrigin)==null?void 0:Ye.y].join(" "),...((At=A.hide)==null?void 0:At.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:o.jsx(WS,{scope:r,placedSide:O,onArrowChange:N,arrowX:ee,arrowY:G,shouldHideArrow:le,children:o.jsx(Nr.div,{"data-side":O,"data-align":L,...g,ref:v,style:{...g.style,animation:ne?void 0:"none"}})})})});Wy.displayName=hm;var qy="PopperArrow",HS={top:"bottom",right:"left",bottom:"top",left:"right"},Hy=m.forwardRef(function(t,r){const{__scopePopper:n,...s}=t,a=qS(qy,n),i=HS[a.placedSide];return o.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:o.jsx(BS,{...s,ref:r,style:{...s.style,display:"block"}})})});Hy.displayName=qy;function VS(e){return e!==null}var KS=e=>({name:"transformOrigin",options:e,fn(t){var w,x,y;const{placement:r,rects:n,middlewareData:s}=t,i=((w=s.arrow)==null?void 0:w.centerOffset)!==0,l=i?0:e.arrowWidth,c=i?0:e.arrowHeight,[d,h]=Vy(r),u={start:"0%",center:"50%",end:"100%"}[h],f=(((x=s.arrow)==null?void 0:x.x)??0)+l/2,p=(((y=s.arrow)==null?void 0:y.y)??0)+c/2;let b="",g="";return d==="bottom"?(b=i?u:`${f}px`,g=`${-c}px`):d==="top"?(b=i?u:`${f}px`,g=`${n.floating.height+c}px`):d==="right"?(b=`${-c}px`,g=i?u:`${p}px`):d==="left"&&(b=`${n.floating.width+c}px`,g=i?u:`${p}px`),{data:{x:b,y:g}}}});function Vy(e){const[t,r="center"]=e.split("-");return[t,r]}var GS=zy,QS=Wy,YS=Hy,JS="Portal",Ky=m.forwardRef((e,t)=>{var l;const{container:r,...n}=e,[s,a]=m.useState(!1);Fs(()=>a(!0),[]);const i=r||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return i?vy.createPortal(o.jsx(Nr.div,{...n,ref:t}),i):null});Ky.displayName=JS;function XS(e,t){return m.useReducer((r,n)=>t[r][n]??r,e)}var Pl=e=>{const{present:t,children:r}=e,n=ZS(t),s=typeof r=="function"?r({present:n.isPresent}):m.Children.only(r),a=fn(n.ref,eC(s));return typeof r=="function"||n.isPresent?m.cloneElement(s,{ref:a}):null};Pl.displayName="Presence";function ZS(e){const[t,r]=m.useState(),n=m.useRef(null),s=m.useRef(e),a=m.useRef("none"),i=e?"mounted":"unmounted",[l,c]=XS(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const d=ic(n.current);a.current=l==="mounted"?d:"none"},[l]),Fs(()=>{const d=n.current,h=s.current;if(h!==e){const f=a.current,p=ic(d);e?c("MOUNT"):p==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(h&&f!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),Fs(()=>{if(t){let d;const h=t.ownerDocument.defaultView??window,u=p=>{const g=ic(n.current).includes(p.animationName);if(p.target===t&&g&&(c("ANIMATION_END"),!s.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",d=h.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},f=p=>{p.target===t&&(a.current=ic(n.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",u),t.addEventListener("animationend",u),()=>{h.clearTimeout(d),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",u),t.removeEventListener("animationend",u)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:m.useCallback(d=>{n.current=d?getComputedStyle(d):null,r(d)},[])}}function ic(e){return(e==null?void 0:e.animationName)||"none"}function eC(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var tC=up[" useInsertionEffect ".trim().toString()]||Fs;function rC({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[s,a,i]=nC({defaultProp:t,onChange:r}),l=e!==void 0,c=l?e:s;{const h=m.useRef(e!==void 0);m.useEffect(()=>{const u=h.current;u!==l&&console.warn(`${n} is changing from ${u?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=l},[l,n])}const d=m.useCallback(h=>{var u;if(l){const f=sC(h)?h(e):h;f!==e&&((u=i.current)==null||u.call(i,f))}else a(h)},[l,e,a,i]);return[c,d]}function nC({defaultProp:e,onChange:t}){const[r,n]=m.useState(e),s=m.useRef(r),a=m.useRef(t);return tC(()=>{a.current=t},[t]),m.useEffect(()=>{var i;s.current!==r&&((i=a.current)==null||i.call(a,r),s.current=r)},[r,s]),[r,n,a]}function sC(e){return typeof e=="function"}var oC=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),aC="VisuallyHidden",Gy=m.forwardRef((e,t)=>o.jsx(Nr.span,{...e,ref:t,style:{...oC,...e.style}}));Gy.displayName=aC;var iC=Gy,[tu,c6]=rm("Tooltip",[Fy]),fm=Fy(),Qy="TooltipProvider",lC=700,kg="tooltip.open",[cC,Yy]=tu(Qy),Jy=e=>{const{__scopeTooltip:t,delayDuration:r=lC,skipDelayDuration:n=300,disableHoverableContent:s=!1,children:a}=e,i=m.useRef(!0),l=m.useRef(!1),c=m.useRef(0);return m.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),o.jsx(cC,{scope:t,isOpenDelayedRef:i,delayDuration:r,onOpen:m.useCallback(()=>{window.clearTimeout(c.current),i.current=!1},[]),onClose:m.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>i.current=!0,n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:m.useCallback(d=>{l.current=d},[]),disableHoverableContent:s,children:a})};Jy.displayName=Qy;var Xy="Tooltip",[d6,ru]=tu(Xy),Sf="TooltipTrigger",dC=m.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,s=ru(Sf,r),a=Yy(Sf,r),i=fm(r),l=m.useRef(null),c=fn(t,l,s.onTriggerChange),d=m.useRef(!1),h=m.useRef(!1),u=m.useCallback(()=>d.current=!1,[]);return m.useEffect(()=>()=>document.removeEventListener("pointerup",u),[u]),o.jsx(GS,{asChild:!0,...i,children:o.jsx(Nr.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...n,ref:c,onPointerMove:br(e.onPointerMove,f=>{f.pointerType!=="touch"&&!h.current&&!a.isPointerInTransitRef.current&&(s.onTriggerEnter(),h.current=!0)}),onPointerLeave:br(e.onPointerLeave,()=>{s.onTriggerLeave(),h.current=!1}),onPointerDown:br(e.onPointerDown,()=>{s.open&&s.onClose(),d.current=!0,document.addEventListener("pointerup",u,{once:!0})}),onFocus:br(e.onFocus,()=>{d.current||s.onOpen()}),onBlur:br(e.onBlur,s.onClose),onClick:br(e.onClick,s.onClose)})})});dC.displayName=Sf;var uC="TooltipPortal",[u6,hC]=tu(uC,{forceMount:void 0}),qa="TooltipContent",Zy=m.forwardRef((e,t)=>{const r=hC(qa,e.__scopeTooltip),{forceMount:n=r.forceMount,side:s="top",...a}=e,i=ru(qa,e.__scopeTooltip);return o.jsx(Pl,{present:n||i.open,children:i.disableHoverableContent?o.jsx(ew,{side:s,...a,ref:t}):o.jsx(fC,{side:s,...a,ref:t})})}),fC=m.forwardRef((e,t)=>{const r=ru(qa,e.__scopeTooltip),n=Yy(qa,e.__scopeTooltip),s=m.useRef(null),a=fn(t,s),[i,l]=m.useState(null),{trigger:c,onClose:d}=r,h=s.current,{onPointerInTransitChange:u}=n,f=m.useCallback(()=>{l(null),u(!1)},[u]),p=m.useCallback((b,g)=>{const w=b.currentTarget,x={x:b.clientX,y:b.clientY},y=bC(x,w.getBoundingClientRect()),v=vC(x,y),k=yC(g.getBoundingClientRect()),N=jC([...v,...k]);l(N),u(!0)},[u]);return m.useEffect(()=>()=>f(),[f]),m.useEffect(()=>{if(c&&h){const b=w=>p(w,h),g=w=>p(w,c);return c.addEventListener("pointerleave",b),h.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",b),h.removeEventListener("pointerleave",g)}}},[c,h,p,f]),m.useEffect(()=>{if(i){const b=g=>{const w=g.target,x={x:g.clientX,y:g.clientY},y=(c==null?void 0:c.contains(w))||(h==null?void 0:h.contains(w)),v=!wC(x,i);y?f():v&&(f(),d())};return document.addEventListener("pointermove",b),()=>document.removeEventListener("pointermove",b)}},[c,h,i,d,f]),o.jsx(ew,{...e,ref:a})}),[pC,mC]=tu(Xy,{isInside:!1}),xC=p_("TooltipContent"),ew=m.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":s,onEscapeKeyDown:a,onPointerDownOutside:i,...l}=e,c=ru(qa,r),d=fm(r),{onClose:h}=c;return m.useEffect(()=>(document.addEventListener(kg,h),()=>document.removeEventListener(kg,h)),[h]),m.useEffect(()=>{if(c.trigger){const u=f=>{const p=f.target;p!=null&&p.contains(c.trigger)&&h()};return window.addEventListener("scroll",u,{capture:!0}),()=>window.removeEventListener("scroll",u,{capture:!0})}},[c.trigger,h]),o.jsx(sm,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:u=>u.preventDefault(),onDismiss:h,children:o.jsxs(QS,{"data-state":c.stateAttribute,...d,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[o.jsx(xC,{children:n}),o.jsx(pC,{scope:r,isInside:!0,children:o.jsx(iC,{id:c.contentId,role:"tooltip",children:s||n})})]})})});Zy.displayName=qa;var tw="TooltipArrow",gC=m.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,s=fm(r);return mC(tw,r).isInside?null:o.jsx(YS,{...s,...n,ref:t})});gC.displayName=tw;function bC(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(r,n,s,a)){case a:return"left";case s:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function vC(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function yC(e){const{top:t,right:r,bottom:n,left:s}=e;return[{x:s,y:t},{x:r,y:t},{x:r,y:n},{x:s,y:n}]}function wC(e,t){const{x:r,y:n}=e;let s=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const l=t[a],c=t[i],d=l.x,h=l.y,u=c.x,f=c.y;h>n!=f>n&&r<(u-d)*(n-h)/(f-h)+d&&(s=!s)}return s}function jC(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),kC(t)}function kC(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const s=e[n];for(;t.length>=2;){const a=t[t.length-1],i=t[t.length-2];if((a.x-i.x)*(s.y-i.y)>=(a.y-i.y)*(s.x-i.x))t.pop();else break}t.push(s)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const s=e[n];for(;r.length>=2;){const a=r[r.length-1],i=r[r.length-2];if((a.x-i.x)*(s.y-i.y)>=(a.y-i.y)*(s.x-i.x))r.pop();else break}r.push(s)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var NC=Jy,rw=Zy;function nw(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=nw(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function sw(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=nw(e))&&(n&&(n+=" "),n+=t);return n}const pm="-",_C=e=>{const t=CC(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:i=>{const l=i.split(pm);return l[0]===""&&l.length!==1&&l.shift(),ow(l,t)||SC(i)},getConflictingClassGroupIds:(i,l)=>{const c=r[i]||[];return l&&n[i]?[...c,...n[i]]:c}}},ow=(e,t)=>{var i;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),s=n?ow(e.slice(1),n):void 0;if(s)return s;if(t.validators.length===0)return;const a=e.join(pm);return(i=t.validators.find(({validator:l})=>l(a)))==null?void 0:i.classGroupId},Ng=/^\[(.+)\]$/,SC=e=>{if(Ng.test(e)){const t=Ng.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},CC=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return PC(Object.entries(e.classGroups),r).forEach(([a,i])=>{Cf(i,n,a,t)}),n},Cf=(e,t,r,n)=>{e.forEach(s=>{if(typeof s=="string"){const a=s===""?t:_g(t,s);a.classGroupId=r;return}if(typeof s=="function"){if(EC(s)){Cf(s(n),t,r,n);return}t.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([a,i])=>{Cf(i,_g(t,a),r,n)})})},_g=(e,t)=>{let r=e;return t.split(pm).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},EC=e=>e.isThemeGetter,PC=(e,t)=>t?e.map(([r,n])=>{const s=n.map(a=>typeof a=="string"?t+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([i,l])=>[t+i,l])):a);return[r,s]}):e,TC=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const s=(a,i)=>{r.set(a,i),t++,t>e&&(t=0,n=r,r=new Map)};return{get(a){let i=r.get(a);if(i!==void 0)return i;if((i=n.get(a))!==void 0)return s(a,i),i},set(a,i){r.has(a)?r.set(a,i):s(a,i)}}},aw="!",RC=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,s=t[0],a=t.length,i=l=>{const c=[];let d=0,h=0,u;for(let w=0;w<l.length;w++){let x=l[w];if(d===0){if(x===s&&(n||l.slice(w,w+a)===t)){c.push(l.slice(h,w)),h=w+a;continue}if(x==="/"){u=w;continue}}x==="["?d++:x==="]"&&d--}const f=c.length===0?l:l.substring(h),p=f.startsWith(aw),b=p?f.substring(1):f,g=u&&u>h?u-h:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:b,maybePostfixModifierPosition:g}};return r?l=>r({className:l,parseClassName:i}):i},OC=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},AC=e=>({cache:TC(e.cacheSize),parseClassName:RC(e),..._C(e)}),IC=/\s+/,DC=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=t,a=[],i=e.trim().split(IC);let l="";for(let c=i.length-1;c>=0;c-=1){const d=i[c],{modifiers:h,hasImportantModifier:u,baseClassName:f,maybePostfixModifierPosition:p}=r(d);let b=!!p,g=n(b?f.substring(0,p):f);if(!g){if(!b){l=d+(l.length>0?" "+l:l);continue}if(g=n(f),!g){l=d+(l.length>0?" "+l:l);continue}b=!1}const w=OC(h).join(":"),x=u?w+aw:w,y=x+g;if(a.includes(y))continue;a.push(y);const v=s(g,b);for(let k=0;k<v.length;++k){const N=v[k];a.push(x+N)}l=d+(l.length>0?" "+l:l)}return l};function LC(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=iw(t))&&(n&&(n+=" "),n+=r);return n}const iw=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=iw(e[n]))&&(r&&(r+=" "),r+=t);return r};function MC(e,...t){let r,n,s,a=i;function i(c){const d=t.reduce((h,u)=>u(h),e());return r=AC(d),n=r.cache.get,s=r.cache.set,a=l,l(c)}function l(c){const d=n(c);if(d)return d;const h=DC(c,r);return s(c,h),h}return function(){return a(LC.apply(null,arguments))}}const rt=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},lw=/^\[(?:([a-z-]+):)?(.+)\]$/i,$C=/^\d+\/\d+$/,FC=new Set(["px","full","screen"]),UC=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,BC=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,zC=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,WC=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,qC=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,On=e=>ya(e)||FC.has(e)||$C.test(e),ss=e=>ri(e,"length",XC),ya=e=>!!e&&!Number.isNaN(Number(e)),Zu=e=>ri(e,"number",ya),yi=e=>!!e&&Number.isInteger(Number(e)),HC=e=>e.endsWith("%")&&ya(e.slice(0,-1)),De=e=>lw.test(e),os=e=>UC.test(e),VC=new Set(["length","size","percentage"]),KC=e=>ri(e,VC,cw),GC=e=>ri(e,"position",cw),QC=new Set(["image","url"]),YC=e=>ri(e,QC,eE),JC=e=>ri(e,"",ZC),wi=()=>!0,ri=(e,t,r)=>{const n=lw.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},XC=e=>BC.test(e)&&!zC.test(e),cw=()=>!1,ZC=e=>WC.test(e),eE=e=>qC.test(e),tE=()=>{const e=rt("colors"),t=rt("spacing"),r=rt("blur"),n=rt("brightness"),s=rt("borderColor"),a=rt("borderRadius"),i=rt("borderSpacing"),l=rt("borderWidth"),c=rt("contrast"),d=rt("grayscale"),h=rt("hueRotate"),u=rt("invert"),f=rt("gap"),p=rt("gradientColorStops"),b=rt("gradientColorStopPositions"),g=rt("inset"),w=rt("margin"),x=rt("opacity"),y=rt("padding"),v=rt("saturate"),k=rt("scale"),N=rt("sepia"),S=rt("skew"),_=rt("space"),P=rt("translate"),D=()=>["auto","contain","none"],T=()=>["auto","hidden","clip","visible","scroll"],M=()=>["auto",De,t],z=()=>[De,t],F=()=>["",On,ss],W=()=>["auto",ya,De],Q=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],K=()=>["solid","dashed","dotted","double","none"],ne=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],A=()=>["start","end","center","between","around","evenly","stretch"],O=()=>["","0",De],L=()=>["auto","avoid","all","avoid-page","page","left","right","column"],re=()=>[ya,De];return{cacheSize:500,separator:":",theme:{colors:[wi],spacing:[On,ss],blur:["none","",os,De],brightness:re(),borderColor:[e],borderRadius:["none","","full",os,De],borderSpacing:z(),borderWidth:F(),contrast:re(),grayscale:O(),hueRotate:re(),invert:O(),gap:z(),gradientColorStops:[e],gradientColorStopPositions:[HC,ss],inset:M(),margin:M(),opacity:re(),padding:z(),saturate:re(),scale:re(),sepia:O(),skew:re(),space:z(),translate:z()},classGroups:{aspect:[{aspect:["auto","square","video",De]}],container:["container"],columns:[{columns:[os]}],"break-after":[{"break-after":L()}],"break-before":[{"break-before":L()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Q(),De]}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:D()}],"overscroll-x":[{"overscroll-x":D()}],"overscroll-y":[{"overscroll-y":D()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",yi,De]}],basis:[{basis:M()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",De]}],grow:[{grow:O()}],shrink:[{shrink:O()}],order:[{order:["first","last","none",yi,De]}],"grid-cols":[{"grid-cols":[wi]}],"col-start-end":[{col:["auto",{span:["full",yi,De]},De]}],"col-start":[{"col-start":W()}],"col-end":[{"col-end":W()}],"grid-rows":[{"grid-rows":[wi]}],"row-start-end":[{row:["auto",{span:[yi,De]},De]}],"row-start":[{"row-start":W()}],"row-end":[{"row-end":W()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",De]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",De]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...A()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...A(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...A(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[_]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[_]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",De,t]}],"min-w":[{"min-w":[De,t,"min","max","fit"]}],"max-w":[{"max-w":[De,t,"none","full","min","max","fit","prose",{screen:[os]},os]}],h:[{h:[De,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[De,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[De,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[De,t,"auto","min","max","fit"]}],"font-size":[{text:["base",os,ss]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Zu]}],"font-family":[{font:[wi]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",De]}],"line-clamp":[{"line-clamp":["none",ya,Zu]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",On,De]}],"list-image":[{"list-image":["none",De]}],"list-style-type":[{list:["none","disc","decimal",De]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...K(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",On,ss]}],"underline-offset":[{"underline-offset":["auto",On,De]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:z()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",De]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",De]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Q(),GC]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",KC]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},YC]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...K(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:K()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...K()]}],"outline-offset":[{"outline-offset":[On,De]}],"outline-w":[{outline:[On,ss]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:F()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[On,ss]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",os,JC]}],"shadow-color":[{shadow:[wi]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...ne(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ne()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",os,De]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[u]}],saturate:[{saturate:[v]}],sepia:[{sepia:[N]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[N]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",De]}],duration:[{duration:re()}],ease:[{ease:["linear","in","out","in-out",De]}],delay:[{delay:re()}],animate:[{animate:["none","spin","ping","pulse","bounce",De]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[yi,De]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",De]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",De]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":z()}],"scroll-mx":[{"scroll-mx":z()}],"scroll-my":[{"scroll-my":z()}],"scroll-ms":[{"scroll-ms":z()}],"scroll-me":[{"scroll-me":z()}],"scroll-mt":[{"scroll-mt":z()}],"scroll-mr":[{"scroll-mr":z()}],"scroll-mb":[{"scroll-mb":z()}],"scroll-ml":[{"scroll-ml":z()}],"scroll-p":[{"scroll-p":z()}],"scroll-px":[{"scroll-px":z()}],"scroll-py":[{"scroll-py":z()}],"scroll-ps":[{"scroll-ps":z()}],"scroll-pe":[{"scroll-pe":z()}],"scroll-pt":[{"scroll-pt":z()}],"scroll-pr":[{"scroll-pr":z()}],"scroll-pb":[{"scroll-pb":z()}],"scroll-pl":[{"scroll-pl":z()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",De]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[On,ss,Zu]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},rE=MC(tE);function U(...e){return rE(sw(e))}const nE=NC,sE=m.forwardRef(({className:e,sideOffset:t=4,...r},n)=>o.jsx(rw,{ref:n,sideOffset:t,className:U("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));sE.displayName=rw.displayName;var ni=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Eo=typeof window>"u"||"Deno"in globalThis;function cr(){}function oE(e,t){return typeof e=="function"?e(t):e}function Ef(e){return typeof e=="number"&&e>=0&&e!==1/0}function dw(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Ds(e,t){return typeof e=="function"?e(t):e}function Br(e,t){return typeof e=="function"?e(t):e}function Sg(e,t){const{type:r="all",exact:n,fetchStatus:s,predicate:a,queryKey:i,stale:l}=e;if(i){if(n){if(t.queryHash!==mm(i,t.options))return!1}else if(!ll(t.queryKey,i))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||a&&!a(t))}function Cg(e,t){const{exact:r,status:n,predicate:s,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(r){if(Po(t.options.mutationKey)!==Po(a))return!1}else if(!ll(t.options.mutationKey,a))return!1}return!(n&&t.state.status!==n||s&&!s(t))}function mm(e,t){return((t==null?void 0:t.queryKeyHashFn)||Po)(e)}function Po(e){return JSON.stringify(e,(t,r)=>Pf(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function ll(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>ll(e[r],t[r])):!1}function uw(e,t){if(e===t)return e;const r=Eg(e)&&Eg(t);if(r||Pf(e)&&Pf(t)){const n=r?e:Object.keys(e),s=n.length,a=r?t:Object.keys(t),i=a.length,l=r?[]:{},c=new Set(n);let d=0;for(let h=0;h<i;h++){const u=r?h:a[h];(!r&&c.has(u)||r)&&e[u]===void 0&&t[u]===void 0?(l[u]=void 0,d++):(l[u]=uw(e[u],t[u]),l[u]===e[u]&&e[u]!==void 0&&d++)}return s===i&&d===s?e:l}return t}function jd(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function Eg(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Pf(e){if(!Pg(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!Pg(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Pg(e){return Object.prototype.toString.call(e)==="[object Object]"}function aE(e){return new Promise(t=>{setTimeout(t,e)})}function Tf(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?uw(e,t):t}function iE(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function lE(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var xm=Symbol();function hw(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===xm?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function fw(e,t){return typeof e=="function"?e(...t):!!e}var lo,ps,ka,Y0,cE=(Y0=class extends ni{constructor(){super();we(this,lo);we(this,ps);we(this,ka);se(this,ka,t=>{if(!Eo&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){R(this,ps)||this.setEventListener(R(this,ka))}onUnsubscribe(){var t;this.hasListeners()||((t=R(this,ps))==null||t.call(this),se(this,ps,void 0))}setEventListener(t){var r;se(this,ka,t),(r=R(this,ps))==null||r.call(this),se(this,ps,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){R(this,lo)!==t&&(se(this,lo,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof R(this,lo)=="boolean"?R(this,lo):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},lo=new WeakMap,ps=new WeakMap,ka=new WeakMap,Y0),gm=new cE,Na,ms,_a,J0,dE=(J0=class extends ni{constructor(){super();we(this,Na,!0);we(this,ms);we(this,_a);se(this,_a,t=>{if(!Eo&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){R(this,ms)||this.setEventListener(R(this,_a))}onUnsubscribe(){var t;this.hasListeners()||((t=R(this,ms))==null||t.call(this),se(this,ms,void 0))}setEventListener(t){var r;se(this,_a,t),(r=R(this,ms))==null||r.call(this),se(this,ms,t(this.setOnline.bind(this)))}setOnline(t){R(this,Na)!==t&&(se(this,Na,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return R(this,Na)}},Na=new WeakMap,ms=new WeakMap,_a=new WeakMap,J0),kd=new dE;function Rf(){let e,t;const r=new Promise((s,a)=>{e=s,t=a});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),e(s)},r.reject=s=>{n({status:"rejected",reason:s}),t(s)},r}function uE(e){return Math.min(1e3*2**e,3e4)}function pw(e){return(e??"online")==="online"?kd.isOnline():!0}var mw=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function eh(e){return e instanceof mw}function xw(e){let t=!1,r=0,n=!1,s;const a=Rf(),i=g=>{var w;n||(f(new mw(g)),(w=e.abort)==null||w.call(e))},l=()=>{t=!0},c=()=>{t=!1},d=()=>gm.isFocused()&&(e.networkMode==="always"||kd.isOnline())&&e.canRun(),h=()=>pw(e.networkMode)&&e.canRun(),u=g=>{var w;n||(n=!0,(w=e.onSuccess)==null||w.call(e,g),s==null||s(),a.resolve(g))},f=g=>{var w;n||(n=!0,(w=e.onError)==null||w.call(e,g),s==null||s(),a.reject(g))},p=()=>new Promise(g=>{var w;s=x=>{(n||d())&&g(x)},(w=e.onPause)==null||w.call(e)}).then(()=>{var g;s=void 0,n||(g=e.onContinue)==null||g.call(e)}),b=()=>{if(n)return;let g;const w=r===0?e.initialPromise:void 0;try{g=w??e.fn()}catch(x){g=Promise.reject(x)}Promise.resolve(g).then(u).catch(x=>{var S;if(n)return;const y=e.retry??(Eo?0:3),v=e.retryDelay??uE,k=typeof v=="function"?v(r,x):v,N=y===!0||typeof y=="number"&&r<y||typeof y=="function"&&y(r,x);if(t||!N){f(x);return}r++,(S=e.onFail)==null||S.call(e,r,x),aE(k).then(()=>d()?void 0:p()).then(()=>{t?f(x):b()})})};return{promise:a,cancel:i,continue:()=>(s==null||s(),a),cancelRetry:l,continueRetry:c,canStart:h,start:()=>(h()?b():p().then(b),a)}}var hE=e=>setTimeout(e,0);function fE(){let e=[],t=0,r=l=>{l()},n=l=>{l()},s=hE;const a=l=>{t?e.push(l):s(()=>{r(l)})},i=()=>{const l=e;e=[],l.length&&s(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||i()}return c},batchCalls:l=>(...c)=>{a(()=>{l(...c)})},schedule:a,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{s=l}}}var Rt=fE(),co,X0,gw=(X0=class{constructor(){we(this,co)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Ef(this.gcTime)&&se(this,co,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Eo?1/0:5*60*1e3))}clearGcTimeout(){R(this,co)&&(clearTimeout(R(this,co)),se(this,co,void 0))}},co=new WeakMap,X0),Sa,uo,Ur,ho,Zt,vl,fo,rn,An,Z0,pE=(Z0=class extends gw{constructor(t){super();we(this,rn);we(this,Sa);we(this,uo);we(this,Ur);we(this,ho);we(this,Zt);we(this,vl);we(this,fo);se(this,fo,!1),se(this,vl,t.defaultOptions),this.setOptions(t.options),this.observers=[],se(this,ho,t.client),se(this,Ur,R(this,ho).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,se(this,Sa,mE(this.options)),this.state=t.state??R(this,Sa),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=R(this,Zt))==null?void 0:t.promise}setOptions(t){this.options={...R(this,vl),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&R(this,Ur).remove(this)}setData(t,r){const n=Tf(this.state.data,t,this.options);return Me(this,rn,An).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){Me(this,rn,An).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,s;const r=(n=R(this,Zt))==null?void 0:n.promise;return(s=R(this,Zt))==null||s.cancel(t),r?r.then(cr).catch(cr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(R(this,Sa))}isActive(){return this.observers.some(t=>Br(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===xm||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Ds(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!dw(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=R(this,Zt))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=R(this,Zt))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),R(this,Ur).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(R(this,Zt)&&(R(this,fo)?R(this,Zt).cancel({revert:!0}):R(this,Zt).cancelRetry()),this.scheduleGc()),R(this,Ur).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Me(this,rn,An).call(this,{type:"invalidate"})}fetch(t,r){var d,h,u;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(R(this,Zt))return R(this,Zt).continueRetry(),R(this,Zt).promise}if(t&&this.setOptions(t),!this.options.queryFn){const f=this.observers.find(p=>p.options.queryFn);f&&this.setOptions(f.options)}const n=new AbortController,s=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(se(this,fo,!0),n.signal)})},a=()=>{const f=hw(this.options,r),b=(()=>{const g={client:R(this,ho),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return se(this,fo,!1),this.options.persister?this.options.persister(f,b,this):f(b)},l=(()=>{const f={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:R(this,ho),state:this.state,fetchFn:a};return s(f),f})();(d=this.options.behavior)==null||d.onFetch(l,this),se(this,uo,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&Me(this,rn,An).call(this,{type:"fetch",meta:(u=l.fetchOptions)==null?void 0:u.meta});const c=f=>{var p,b,g,w;eh(f)&&f.silent||Me(this,rn,An).call(this,{type:"error",error:f}),eh(f)||((b=(p=R(this,Ur).config).onError)==null||b.call(p,f,this),(w=(g=R(this,Ur).config).onSettled)==null||w.call(g,this.state.data,f,this)),this.scheduleGc()};return se(this,Zt,xw({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:n.abort.bind(n),onSuccess:f=>{var p,b,g,w;if(f===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(x){c(x);return}(b=(p=R(this,Ur).config).onSuccess)==null||b.call(p,f,this),(w=(g=R(this,Ur).config).onSettled)==null||w.call(g,f,this.state.error,this),this.scheduleGc()},onError:c,onFail:(f,p)=>{Me(this,rn,An).call(this,{type:"failed",failureCount:f,error:p})},onPause:()=>{Me(this,rn,An).call(this,{type:"pause"})},onContinue:()=>{Me(this,rn,An).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),R(this,Zt).start()}},Sa=new WeakMap,uo=new WeakMap,Ur=new WeakMap,ho=new WeakMap,Zt=new WeakMap,vl=new WeakMap,fo=new WeakMap,rn=new WeakSet,An=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...bw(n.data,this.options),fetchMeta:t.meta??null};case"success":return se(this,uo,void 0),{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=t.error;return eh(s)&&s.revert&&R(this,uo)?{...R(this,uo),fetchStatus:"idle"}:{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),Rt.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),R(this,Ur).notify({query:this,type:"updated",action:t})})},Z0);function bw(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:pw(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function mE(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var vn,eb,xE=(eb=class extends ni{constructor(t={}){super();we(this,vn);this.config=t,se(this,vn,new Map)}build(t,r,n){const s=r.queryKey,a=r.queryHash??mm(s,r);let i=this.get(a);return i||(i=new pE({client:t,queryKey:s,queryHash:a,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(s)}),this.add(i)),i}add(t){R(this,vn).has(t.queryHash)||(R(this,vn).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=R(this,vn).get(t.queryHash);r&&(t.destroy(),r===t&&R(this,vn).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Rt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return R(this,vn).get(t)}getAll(){return[...R(this,vn).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>Sg(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>Sg(t,n)):r}notify(t){Rt.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){Rt.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Rt.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},vn=new WeakMap,eb),yn,ar,po,wn,as,tb,gE=(tb=class extends gw{constructor(t){super();we(this,wn);we(this,yn);we(this,ar);we(this,po);this.mutationId=t.mutationId,se(this,ar,t.mutationCache),se(this,yn,[]),this.state=t.state||vw(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){R(this,yn).includes(t)||(R(this,yn).push(t),this.clearGcTimeout(),R(this,ar).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){se(this,yn,R(this,yn).filter(r=>r!==t)),this.scheduleGc(),R(this,ar).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){R(this,yn).length||(this.state.status==="pending"?this.scheduleGc():R(this,ar).remove(this))}continue(){var t;return((t=R(this,po))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var a,i,l,c,d,h,u,f,p,b,g,w,x,y,v,k,N,S,_,P;const r=()=>{Me(this,wn,as).call(this,{type:"continue"})};se(this,po,xw({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(D,T)=>{Me(this,wn,as).call(this,{type:"failed",failureCount:D,error:T})},onPause:()=>{Me(this,wn,as).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>R(this,ar).canRun(this)}));const n=this.state.status==="pending",s=!R(this,po).canStart();try{if(n)r();else{Me(this,wn,as).call(this,{type:"pending",variables:t,isPaused:s}),await((i=(a=R(this,ar).config).onMutate)==null?void 0:i.call(a,t,this));const T=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));T!==this.state.context&&Me(this,wn,as).call(this,{type:"pending",context:T,variables:t,isPaused:s})}const D=await R(this,po).start();return await((h=(d=R(this,ar).config).onSuccess)==null?void 0:h.call(d,D,t,this.state.context,this)),await((f=(u=this.options).onSuccess)==null?void 0:f.call(u,D,t,this.state.context)),await((b=(p=R(this,ar).config).onSettled)==null?void 0:b.call(p,D,null,this.state.variables,this.state.context,this)),await((w=(g=this.options).onSettled)==null?void 0:w.call(g,D,null,t,this.state.context)),Me(this,wn,as).call(this,{type:"success",data:D}),D}catch(D){try{throw await((y=(x=R(this,ar).config).onError)==null?void 0:y.call(x,D,t,this.state.context,this)),await((k=(v=this.options).onError)==null?void 0:k.call(v,D,t,this.state.context)),await((S=(N=R(this,ar).config).onSettled)==null?void 0:S.call(N,void 0,D,this.state.variables,this.state.context,this)),await((P=(_=this.options).onSettled)==null?void 0:P.call(_,void 0,D,t,this.state.context)),D}finally{Me(this,wn,as).call(this,{type:"error",error:D})}}finally{R(this,ar).runNext(this)}}},yn=new WeakMap,ar=new WeakMap,po=new WeakMap,wn=new WeakSet,as=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Rt.batch(()=>{R(this,yn).forEach(n=>{n.onMutationUpdate(t)}),R(this,ar).notify({mutation:this,type:"updated",action:t})})},tb);function vw(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Mn,nn,yl,rb,bE=(rb=class extends ni{constructor(t={}){super();we(this,Mn);we(this,nn);we(this,yl);this.config=t,se(this,Mn,new Set),se(this,nn,new Map),se(this,yl,0)}build(t,r,n){const s=new gE({mutationCache:this,mutationId:++Bl(this,yl)._,options:t.defaultMutationOptions(r),state:n});return this.add(s),s}add(t){R(this,Mn).add(t);const r=lc(t);if(typeof r=="string"){const n=R(this,nn).get(r);n?n.push(t):R(this,nn).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(R(this,Mn).delete(t)){const r=lc(t);if(typeof r=="string"){const n=R(this,nn).get(r);if(n)if(n.length>1){const s=n.indexOf(t);s!==-1&&n.splice(s,1)}else n[0]===t&&R(this,nn).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=lc(t);if(typeof r=="string"){const n=R(this,nn).get(r),s=n==null?void 0:n.find(a=>a.state.status==="pending");return!s||s===t}else return!0}runNext(t){var n;const r=lc(t);if(typeof r=="string"){const s=(n=R(this,nn).get(r))==null?void 0:n.find(a=>a!==t&&a.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Rt.batch(()=>{R(this,Mn).forEach(t=>{this.notify({type:"removed",mutation:t})}),R(this,Mn).clear(),R(this,nn).clear()})}getAll(){return Array.from(R(this,Mn))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>Cg(r,n))}findAll(t={}){return this.getAll().filter(r=>Cg(t,r))}notify(t){Rt.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return Rt.batch(()=>Promise.all(t.map(r=>r.continue().catch(cr))))}},Mn=new WeakMap,nn=new WeakMap,yl=new WeakMap,rb);function lc(e){var t;return(t=e.options.scope)==null?void 0:t.id}function Tg(e){return{onFetch:(t,r)=>{var h,u,f,p,b;const n=t.options,s=(f=(u=(h=t.fetchOptions)==null?void 0:h.meta)==null?void 0:u.fetchMore)==null?void 0:f.direction,a=((p=t.state.data)==null?void 0:p.pages)||[],i=((b=t.state.data)==null?void 0:b.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let g=!1;const w=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},x=hw(t.options,t.fetchOptions),y=async(v,k,N)=>{if(g)return Promise.reject();if(k==null&&v.pages.length)return Promise.resolve(v);const _=(()=>{const M={client:t.client,queryKey:t.queryKey,pageParam:k,direction:N?"backward":"forward",meta:t.options.meta};return w(M),M})(),P=await x(_),{maxPages:D}=t.options,T=N?lE:iE;return{pages:T(v.pages,P,D),pageParams:T(v.pageParams,k,D)}};if(s&&a.length){const v=s==="backward",k=v?vE:Rg,N={pages:a,pageParams:i},S=k(n,N);l=await y(N,S,v)}else{const v=e??a.length;do{const k=c===0?i[0]??n.initialPageParam:Rg(n,l);if(c>0&&k==null)break;l=await y(l,k),c++}while(c<v)}return l};t.options.persister?t.fetchFn=()=>{var g,w;return(w=(g=t.options).persister)==null?void 0:w.call(g,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=d}}}function Rg(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function vE(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var pt,xs,gs,Ca,Ea,bs,Pa,Ta,nb,yE=(nb=class{constructor(e={}){we(this,pt);we(this,xs);we(this,gs);we(this,Ca);we(this,Ea);we(this,bs);we(this,Pa);we(this,Ta);se(this,pt,e.queryCache||new xE),se(this,xs,e.mutationCache||new bE),se(this,gs,e.defaultOptions||{}),se(this,Ca,new Map),se(this,Ea,new Map),se(this,bs,0)}mount(){Bl(this,bs)._++,R(this,bs)===1&&(se(this,Pa,gm.subscribe(async e=>{e&&(await this.resumePausedMutations(),R(this,pt).onFocus())})),se(this,Ta,kd.subscribe(async e=>{e&&(await this.resumePausedMutations(),R(this,pt).onOnline())})))}unmount(){var e,t;Bl(this,bs)._--,R(this,bs)===0&&((e=R(this,Pa))==null||e.call(this),se(this,Pa,void 0),(t=R(this,Ta))==null||t.call(this),se(this,Ta,void 0))}isFetching(e){return R(this,pt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return R(this,xs).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=R(this,pt).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=R(this,pt).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Ds(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return R(this,pt).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),s=R(this,pt).get(n.queryHash),a=s==null?void 0:s.state.data,i=oE(t,a);if(i!==void 0)return R(this,pt).build(this,n).setData(i,{...r,manual:!0})}setQueriesData(e,t,r){return Rt.batch(()=>R(this,pt).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=R(this,pt).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=R(this,pt);Rt.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=R(this,pt);return Rt.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=Rt.batch(()=>R(this,pt).findAll(e).map(s=>s.cancel(r)));return Promise.all(n).then(cr).catch(cr)}invalidateQueries(e,t={}){return Rt.batch(()=>(R(this,pt).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=Rt.batch(()=>R(this,pt).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let a=s.fetch(void 0,r);return r.throwOnError||(a=a.catch(cr)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(n).then(cr)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=R(this,pt).build(this,t);return r.isStaleByTime(Ds(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(cr).catch(cr)}fetchInfiniteQuery(e){return e.behavior=Tg(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(cr).catch(cr)}ensureInfiniteQueryData(e){return e.behavior=Tg(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return kd.isOnline()?R(this,xs).resumePausedMutations():Promise.resolve()}getQueryCache(){return R(this,pt)}getMutationCache(){return R(this,xs)}getDefaultOptions(){return R(this,gs)}setDefaultOptions(e){se(this,gs,e)}setQueryDefaults(e,t){R(this,Ca).set(Po(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...R(this,Ca).values()],r={};return t.forEach(n=>{ll(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){R(this,Ea).set(Po(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...R(this,Ea).values()],r={};return t.forEach(n=>{ll(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...R(this,gs).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=mm(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===xm&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...R(this,gs).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){R(this,pt).clear(),R(this,xs).clear()}},pt=new WeakMap,xs=new WeakMap,gs=new WeakMap,Ca=new WeakMap,Ea=new WeakMap,bs=new WeakMap,Pa=new WeakMap,Ta=new WeakMap,nb),pr,ze,wl,ir,mo,Ra,vs,ys,jl,Oa,Aa,xo,go,ws,Ia,Ve,Ti,Of,Af,If,Df,Lf,Mf,$f,yw,sb,wE=(sb=class extends ni{constructor(t,r){super();we(this,Ve);we(this,pr);we(this,ze);we(this,wl);we(this,ir);we(this,mo);we(this,Ra);we(this,vs);we(this,ys);we(this,jl);we(this,Oa);we(this,Aa);we(this,xo);we(this,go);we(this,ws);we(this,Ia,new Set);this.options=r,se(this,pr,t),se(this,ys,null),se(this,vs,Rf()),this.options.experimental_prefetchInRender||R(this,vs).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(R(this,ze).addObserver(this),Og(R(this,ze),this.options)?Me(this,Ve,Ti).call(this):this.updateResult(),Me(this,Ve,Df).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Ff(R(this,ze),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Ff(R(this,ze),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Me(this,Ve,Lf).call(this),Me(this,Ve,Mf).call(this),R(this,ze).removeObserver(this)}setOptions(t){const r=this.options,n=R(this,ze);if(this.options=R(this,pr).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Br(this.options.enabled,R(this,ze))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Me(this,Ve,$f).call(this),R(this,ze).setOptions(this.options),r._defaulted&&!jd(this.options,r)&&R(this,pr).getQueryCache().notify({type:"observerOptionsUpdated",query:R(this,ze),observer:this});const s=this.hasListeners();s&&Ag(R(this,ze),n,this.options,r)&&Me(this,Ve,Ti).call(this),this.updateResult(),s&&(R(this,ze)!==n||Br(this.options.enabled,R(this,ze))!==Br(r.enabled,R(this,ze))||Ds(this.options.staleTime,R(this,ze))!==Ds(r.staleTime,R(this,ze)))&&Me(this,Ve,Of).call(this);const a=Me(this,Ve,Af).call(this);s&&(R(this,ze)!==n||Br(this.options.enabled,R(this,ze))!==Br(r.enabled,R(this,ze))||a!==R(this,ws))&&Me(this,Ve,If).call(this,a)}getOptimisticResult(t){const r=R(this,pr).getQueryCache().build(R(this,pr),t),n=this.createResult(r,t);return kE(this,n)&&(se(this,ir,n),se(this,Ra,this.options),se(this,mo,R(this,ze).state)),n}getCurrentResult(){return R(this,ir)}trackResult(t,r){return new Proxy(t,{get:(n,s)=>(this.trackProp(s),r==null||r(s),Reflect.get(n,s))})}trackProp(t){R(this,Ia).add(t)}getCurrentQuery(){return R(this,ze)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=R(this,pr).defaultQueryOptions(t),n=R(this,pr).getQueryCache().build(R(this,pr),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return Me(this,Ve,Ti).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),R(this,ir)))}createResult(t,r){var D;const n=R(this,ze),s=this.options,a=R(this,ir),i=R(this,mo),l=R(this,Ra),d=t!==n?t.state:R(this,wl),{state:h}=t;let u={...h},f=!1,p;if(r._optimisticResults){const T=this.hasListeners(),M=!T&&Og(t,r),z=T&&Ag(t,n,r,s);(M||z)&&(u={...u,...bw(h.data,t.options)}),r._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:b,errorUpdatedAt:g,status:w}=u;p=u.data;let x=!1;if(r.placeholderData!==void 0&&p===void 0&&w==="pending"){let T;a!=null&&a.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData)?(T=a.data,x=!0):T=typeof r.placeholderData=="function"?r.placeholderData((D=R(this,Aa))==null?void 0:D.state.data,R(this,Aa)):r.placeholderData,T!==void 0&&(w="success",p=Tf(a==null?void 0:a.data,T,r),f=!0)}if(r.select&&p!==void 0&&!x)if(a&&p===(i==null?void 0:i.data)&&r.select===R(this,jl))p=R(this,Oa);else try{se(this,jl,r.select),p=r.select(p),p=Tf(a==null?void 0:a.data,p,r),se(this,Oa,p),se(this,ys,null)}catch(T){se(this,ys,T)}R(this,ys)&&(b=R(this,ys),p=R(this,Oa),g=Date.now(),w="error");const y=u.fetchStatus==="fetching",v=w==="pending",k=w==="error",N=v&&y,S=p!==void 0,P={status:w,fetchStatus:u.fetchStatus,isPending:v,isSuccess:w==="success",isError:k,isInitialLoading:N,isLoading:N,data:p,dataUpdatedAt:u.dataUpdatedAt,error:b,errorUpdatedAt:g,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>d.dataUpdateCount||u.errorUpdateCount>d.errorUpdateCount,isFetching:y,isRefetching:y&&!v,isLoadingError:k&&!S,isPaused:u.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:k&&S,isStale:bm(t,r),refetch:this.refetch,promise:R(this,vs),isEnabled:Br(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const T=F=>{P.status==="error"?F.reject(P.error):P.data!==void 0&&F.resolve(P.data)},M=()=>{const F=se(this,vs,P.promise=Rf());T(F)},z=R(this,vs);switch(z.status){case"pending":t.queryHash===n.queryHash&&T(z);break;case"fulfilled":(P.status==="error"||P.data!==z.value)&&M();break;case"rejected":(P.status!=="error"||P.error!==z.reason)&&M();break}}return P}updateResult(){const t=R(this,ir),r=this.createResult(R(this,ze),this.options);if(se(this,mo,R(this,ze).state),se(this,Ra,this.options),R(this,mo).data!==void 0&&se(this,Aa,R(this,ze)),jd(r,t))return;se(this,ir,r);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,a=typeof s=="function"?s():s;if(a==="all"||!a&&!R(this,Ia).size)return!0;const i=new Set(a??R(this,Ia));return this.options.throwOnError&&i.add("error"),Object.keys(R(this,ir)).some(l=>{const c=l;return R(this,ir)[c]!==t[c]&&i.has(c)})};Me(this,Ve,yw).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Me(this,Ve,Df).call(this)}},pr=new WeakMap,ze=new WeakMap,wl=new WeakMap,ir=new WeakMap,mo=new WeakMap,Ra=new WeakMap,vs=new WeakMap,ys=new WeakMap,jl=new WeakMap,Oa=new WeakMap,Aa=new WeakMap,xo=new WeakMap,go=new WeakMap,ws=new WeakMap,Ia=new WeakMap,Ve=new WeakSet,Ti=function(t){Me(this,Ve,$f).call(this);let r=R(this,ze).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(cr)),r},Of=function(){Me(this,Ve,Lf).call(this);const t=Ds(this.options.staleTime,R(this,ze));if(Eo||R(this,ir).isStale||!Ef(t))return;const n=dw(R(this,ir).dataUpdatedAt,t)+1;se(this,xo,setTimeout(()=>{R(this,ir).isStale||this.updateResult()},n))},Af=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(R(this,ze)):this.options.refetchInterval)??!1},If=function(t){Me(this,Ve,Mf).call(this),se(this,ws,t),!(Eo||Br(this.options.enabled,R(this,ze))===!1||!Ef(R(this,ws))||R(this,ws)===0)&&se(this,go,setInterval(()=>{(this.options.refetchIntervalInBackground||gm.isFocused())&&Me(this,Ve,Ti).call(this)},R(this,ws)))},Df=function(){Me(this,Ve,Of).call(this),Me(this,Ve,If).call(this,Me(this,Ve,Af).call(this))},Lf=function(){R(this,xo)&&(clearTimeout(R(this,xo)),se(this,xo,void 0))},Mf=function(){R(this,go)&&(clearInterval(R(this,go)),se(this,go,void 0))},$f=function(){const t=R(this,pr).getQueryCache().build(R(this,pr),this.options);if(t===R(this,ze))return;const r=R(this,ze);se(this,ze,t),se(this,wl,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},yw=function(t){Rt.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(R(this,ir))}),R(this,pr).getQueryCache().notify({query:R(this,ze),type:"observerResultsUpdated"})})},sb);function jE(e,t){return Br(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Og(e,t){return jE(e,t)||e.state.data!==void 0&&Ff(e,t,t.refetchOnMount)}function Ff(e,t,r){if(Br(t.enabled,e)!==!1&&Ds(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&bm(e,t)}return!1}function Ag(e,t,r,n){return(e!==t||Br(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&bm(e,r)}function bm(e,t){return Br(t.enabled,e)!==!1&&e.isStaleByTime(Ds(t.staleTime,e))}function kE(e,t){return!jd(e.getCurrentResult(),t)}var js,ks,mr,$n,zn,Wc,Uf,ob,NE=(ob=class extends ni{constructor(r,n){super();we(this,zn);we(this,js);we(this,ks);we(this,mr);we(this,$n);se(this,js,r),this.setOptions(n),this.bindMethods(),Me(this,zn,Wc).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var s;const n=this.options;this.options=R(this,js).defaultMutationOptions(r),jd(this.options,n)||R(this,js).getMutationCache().notify({type:"observerOptionsUpdated",mutation:R(this,mr),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&Po(n.mutationKey)!==Po(this.options.mutationKey)?this.reset():((s=R(this,mr))==null?void 0:s.state.status)==="pending"&&R(this,mr).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=R(this,mr))==null||r.removeObserver(this)}onMutationUpdate(r){Me(this,zn,Wc).call(this),Me(this,zn,Uf).call(this,r)}getCurrentResult(){return R(this,ks)}reset(){var r;(r=R(this,mr))==null||r.removeObserver(this),se(this,mr,void 0),Me(this,zn,Wc).call(this),Me(this,zn,Uf).call(this)}mutate(r,n){var s;return se(this,$n,n),(s=R(this,mr))==null||s.removeObserver(this),se(this,mr,R(this,js).getMutationCache().build(R(this,js),this.options)),R(this,mr).addObserver(this),R(this,mr).execute(r)}},js=new WeakMap,ks=new WeakMap,mr=new WeakMap,$n=new WeakMap,zn=new WeakSet,Wc=function(){var n;const r=((n=R(this,mr))==null?void 0:n.state)??vw();se(this,ks,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},Uf=function(r){Rt.batch(()=>{var n,s,a,i,l,c,d,h;if(R(this,$n)&&this.hasListeners()){const u=R(this,ks).variables,f=R(this,ks).context;(r==null?void 0:r.type)==="success"?((s=(n=R(this,$n)).onSuccess)==null||s.call(n,r.data,u,f),(i=(a=R(this,$n)).onSettled)==null||i.call(a,r.data,null,u,f)):(r==null?void 0:r.type)==="error"&&((c=(l=R(this,$n)).onError)==null||c.call(l,r.error,u,f),(h=(d=R(this,$n)).onSettled)==null||h.call(d,void 0,r.error,u,f))}this.listeners.forEach(u=>{u(R(this,ks))})})},ob),ww=m.createContext(void 0),Vt=e=>{const t=m.useContext(ww);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},_E=({client:e,children:t})=>(m.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),o.jsx(ww.Provider,{value:e,children:t})),jw=m.createContext(!1),SE=()=>m.useContext(jw);jw.Provider;function CE(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var EE=m.createContext(CE()),PE=()=>m.useContext(EE),TE=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},RE=e=>{m.useEffect(()=>{e.clearReset()},[e])},OE=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(s&&e.data===void 0||fw(r,[e.error,n])),AE=e=>{if(e.suspense){const t=n=>n==="static"?n:Math.max(n??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...n)=>t(r(...n)):t(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},IE=(e,t)=>e.isLoading&&e.isFetching&&!t,DE=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Ig=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function LE(e,t,r){var u,f,p,b,g;const n=SE(),s=PE(),a=Vt(),i=a.defaultQueryOptions(e);(f=(u=a.getDefaultOptions().queries)==null?void 0:u._experimental_beforeQuery)==null||f.call(u,i),i._optimisticResults=n?"isRestoring":"optimistic",AE(i),TE(i,s),RE(s);const l=!a.getQueryCache().get(i.queryHash),[c]=m.useState(()=>new t(a,i)),d=c.getOptimisticResult(i),h=!n&&e.subscribed!==!1;if(m.useSyncExternalStore(m.useCallback(w=>{const x=h?c.subscribe(Rt.batchCalls(w)):cr;return c.updateResult(),x},[c,h]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),m.useEffect(()=>{c.setOptions(i)},[i,c]),DE(i,d))throw Ig(i,c,s);if(OE({result:d,errorResetBoundary:s,throwOnError:i.throwOnError,query:a.getQueryCache().get(i.queryHash),suspense:i.suspense}))throw d.error;if((b=(p=a.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||b.call(p,i,d),i.experimental_prefetchInRender&&!Eo&&IE(d,n)){const w=l?Ig(i,c,s):(g=a.getQueryCache().get(i.queryHash))==null?void 0:g.promise;w==null||w.catch(cr).finally(()=>{c.updateResult()})}return i.notifyOnChangeProps?d:c.trackResult(d)}function $t(e,t){return LE(e,wE)}function tr(e,t){const r=Vt(),[n]=m.useState(()=>new NE(r,e));m.useEffect(()=>{n.setOptions(e)},[n,e]);const s=m.useSyncExternalStore(m.useCallback(i=>n.subscribe(Rt.batchCalls(i)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),a=m.useCallback((i,l)=>{n.mutate(i,l).catch(cr)},[n]);if(s.error&&fw(n.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:a,mutateAsync:s.mutate}}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cl(){return cl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cl.apply(this,arguments)}var Ss;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ss||(Ss={}));const Dg="popstate";function ME(e){e===void 0&&(e={});function t(n,s){let{pathname:a,search:i,hash:l}=n.location;return Bf("",{pathname:a,search:i,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Nw(s)}return FE(t,r,null,e)}function _t(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function kw(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function $E(){return Math.random().toString(36).substr(2,8)}function Lg(e,t){return{usr:e.state,key:e.key,idx:t}}function Bf(e,t,r,n){return r===void 0&&(r=null),cl({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?si(t):t,{state:r,key:t&&t.key||n||$E()})}function Nw(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function si(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function FE(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:a=!1}=n,i=s.history,l=Ss.Pop,c=null,d=h();d==null&&(d=0,i.replaceState(cl({},i.state,{idx:d}),""));function h(){return(i.state||{idx:null}).idx}function u(){l=Ss.Pop;let w=h(),x=w==null?null:w-d;d=w,c&&c({action:l,location:g.location,delta:x})}function f(w,x){l=Ss.Push;let y=Bf(g.location,w,x);d=h()+1;let v=Lg(y,d),k=g.createHref(y);try{i.pushState(v,"",k)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;s.location.assign(k)}a&&c&&c({action:l,location:g.location,delta:1})}function p(w,x){l=Ss.Replace;let y=Bf(g.location,w,x);d=h();let v=Lg(y,d),k=g.createHref(y);i.replaceState(v,"",k),a&&c&&c({action:l,location:g.location,delta:0})}function b(w){let x=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof w=="string"?w:Nw(w);return y=y.replace(/ $/,"%20"),_t(x,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,x)}let g={get action(){return l},get location(){return e(s,i)},listen(w){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Dg,u),c=w,()=>{s.removeEventListener(Dg,u),c=null}},createHref(w){return t(s,w)},createURL:b,encodeLocation(w){let x=b(w);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:f,replace:p,go(w){return i.go(w)}};return g}var Mg;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Mg||(Mg={}));function UE(e,t,r){return r===void 0&&(r="/"),BE(e,t,r,!1)}function BE(e,t,r,n){let s=typeof t=="string"?si(t):t,a=Cw(s.pathname||"/",r);if(a==null)return null;let i=_w(e);zE(i);let l=null;for(let c=0;l==null&&c<i.length;++c){let d=ZE(a);l=JE(i[c],d,n)}return l}function _w(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(a,i,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:i,route:a};c.relativePath.startsWith("/")&&(_t(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=yo([n,c.relativePath]),h=r.concat(c);a.children&&a.children.length>0&&(_t(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),_w(a.children,t,h,d)),!(a.path==null&&!a.index)&&t.push({path:d,score:QE(d,a.index),routesMeta:h})};return e.forEach((a,i)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))s(a,i);else for(let c of Sw(a.path))s(a,i,c)}),t}function Sw(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return s?[a,""]:[a];let i=Sw(n.join("/")),l=[];return l.push(...i.map(c=>c===""?a:[a,c].join("/"))),s&&l.push(...i),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function zE(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:YE(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const WE=/^:[\w-]+$/,qE=3,HE=2,VE=1,KE=10,GE=-2,$g=e=>e==="*";function QE(e,t){let r=e.split("/"),n=r.length;return r.some($g)&&(n+=GE),t&&(n+=HE),r.filter(s=>!$g(s)).reduce((s,a)=>s+(WE.test(a)?qE:a===""?VE:KE),n)}function YE(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function JE(e,t,r){let{routesMeta:n}=e,s={},a="/",i=[];for(let l=0;l<n.length;++l){let c=n[l],d=l===n.length-1,h=a==="/"?t:t.slice(a.length)||"/",u=Fg({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),f=c.route;if(!u&&d&&r&&!n[n.length-1].route.index&&(u=Fg({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!u)return null;Object.assign(s,u.params),i.push({params:s,pathname:yo([a,u.pathname]),pathnameBase:n5(yo([a,u.pathnameBase])),route:f}),u.pathnameBase!=="/"&&(a=yo([a,u.pathnameBase]))}return i}function Fg(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=XE(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let a=s[0],i=a.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((d,h,u)=>{let{paramName:f,isOptional:p}=h;if(f==="*"){let g=l[u]||"";i=a.slice(0,a.length-g.length).replace(/(.)\/+$/,"$1")}const b=l[u];return p&&!b?d[f]=void 0:d[f]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:i,pattern:e}}function XE(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),kw(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function ZE(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return kw(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Cw(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function e5(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?si(e):e;return{pathname:r?r.startsWith("/")?r:t5(r,t):t,search:s5(n),hash:o5(s)}}function t5(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function th(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function r5(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Ew(e,t){let r=r5(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Pw(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=si(e):(s=cl({},e),_t(!s.pathname||!s.pathname.includes("?"),th("?","pathname","search",s)),_t(!s.pathname||!s.pathname.includes("#"),th("#","pathname","hash",s)),_t(!s.search||!s.search.includes("#"),th("#","search","hash",s)));let a=e===""||s.pathname==="",i=a?"/":s.pathname,l;if(i==null)l=r;else{let u=t.length-1;if(!n&&i.startsWith("..")){let f=i.split("/");for(;f[0]==="..";)f.shift(),u-=1;s.pathname=f.join("/")}l=u>=0?t[u]:"/"}let c=e5(s,l),d=i&&i!=="/"&&i.endsWith("/"),h=(a||i===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}const yo=e=>e.join("/").replace(/\/\/+/g,"/"),n5=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),s5=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,o5=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function a5(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Tw=["post","put","patch","delete"];new Set(Tw);const i5=["get",...Tw];new Set(i5);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dl(){return dl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dl.apply(this,arguments)}const vm=m.createContext(null),l5=m.createContext(null),Tl=m.createContext(null),nu=m.createContext(null),Vs=m.createContext({outlet:null,matches:[],isDataRoute:!1}),Rw=m.createContext(null);function Rl(){return m.useContext(nu)!=null}function Ol(){return Rl()||_t(!1),m.useContext(nu).location}function Ow(e){m.useContext(Tl).static||m.useLayoutEffect(e)}function Jn(){let{isDataRoute:e}=m.useContext(Vs);return e?k5():c5()}function c5(){Rl()||_t(!1);let e=m.useContext(vm),{basename:t,future:r,navigator:n}=m.useContext(Tl),{matches:s}=m.useContext(Vs),{pathname:a}=Ol(),i=JSON.stringify(Ew(s,r.v7_relativeSplatPath)),l=m.useRef(!1);return Ow(()=>{l.current=!0}),m.useCallback(function(d,h){if(h===void 0&&(h={}),!l.current)return;if(typeof d=="number"){n.go(d);return}let u=Pw(d,JSON.parse(i),a,h.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:yo([t,u.pathname])),(h.replace?n.replace:n.push)(u,h.state,h)},[t,n,i,a,e])}const d5=m.createContext(null);function u5(e){let t=m.useContext(Vs).outlet;return t&&m.createElement(d5.Provider,{value:e},t)}function h5(e,t){return f5(e,t)}function f5(e,t,r,n){Rl()||_t(!1);let{navigator:s}=m.useContext(Tl),{matches:a}=m.useContext(Vs),i=a[a.length-1],l=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let d=Ol(),h;if(t){var u;let w=typeof t=="string"?si(t):t;c==="/"||(u=w.pathname)!=null&&u.startsWith(c)||_t(!1),h=w}else h=d;let f=h.pathname||"/",p=f;if(c!=="/"){let w=c.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(w.length).join("/")}let b=UE(e,{pathname:p}),g=b5(b&&b.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:yo([c,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:yo([c,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),a,r,n);return t&&g?m.createElement(nu.Provider,{value:{location:dl({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Ss.Pop}},g):g}function p5(){let e=j5(),t=a5(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},t),r?m.createElement("pre",{style:s},r):null,null)}const m5=m.createElement(p5,null);class x5 extends m.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?m.createElement(Vs.Provider,{value:this.props.routeContext},m.createElement(Rw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function g5(e){let{routeContext:t,match:r,children:n}=e,s=m.useContext(vm);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),m.createElement(Vs.Provider,{value:t},n)}function b5(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var a;if(!r)return null;if(r.errors)e=r.matches;else if((a=n)!=null&&a.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,l=(s=r)==null?void 0:s.errors;if(l!=null){let h=i.findIndex(u=>u.route.id&&(l==null?void 0:l[u.route.id])!==void 0);h>=0||_t(!1),i=i.slice(0,Math.min(i.length,h+1))}let c=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let h=0;h<i.length;h++){let u=i[h];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(d=h),u.route.id){let{loaderData:f,errors:p}=r,b=u.route.loader&&f[u.route.id]===void 0&&(!p||p[u.route.id]===void 0);if(u.route.lazy||b){c=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((h,u,f)=>{let p,b=!1,g=null,w=null;r&&(p=l&&u.route.id?l[u.route.id]:void 0,g=u.route.errorElement||m5,c&&(d<0&&f===0?(b=!0,w=null):d===f&&(b=!0,w=u.route.hydrateFallbackElement||null)));let x=t.concat(i.slice(0,f+1)),y=()=>{let v;return p?v=g:b?v=w:u.route.Component?v=m.createElement(u.route.Component,null):u.route.element?v=u.route.element:v=h,m.createElement(g5,{match:u,routeContext:{outlet:h,matches:x,isDataRoute:r!=null},children:v})};return r&&(u.route.ErrorBoundary||u.route.errorElement||f===0)?m.createElement(x5,{location:r.location,revalidation:r.revalidation,component:g,error:p,children:y(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):y()},null)}var Aw=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Aw||{}),Nd=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Nd||{});function v5(e){let t=m.useContext(vm);return t||_t(!1),t}function y5(e){let t=m.useContext(l5);return t||_t(!1),t}function w5(e){let t=m.useContext(Vs);return t||_t(!1),t}function Iw(e){let t=w5(),r=t.matches[t.matches.length-1];return r.route.id||_t(!1),r.route.id}function j5(){var e;let t=m.useContext(Rw),r=y5(Nd.UseRouteError),n=Iw(Nd.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function k5(){let{router:e}=v5(Aw.UseNavigateStable),t=Iw(Nd.UseNavigateStable),r=m.useRef(!1);return Ow(()=>{r.current=!0}),m.useCallback(function(s,a){a===void 0&&(a={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,dl({fromRouteId:t},a)))},[e,t])}function N5(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function qc(e){let{to:t,replace:r,state:n,relative:s}=e;Rl()||_t(!1);let{future:a,static:i}=m.useContext(Tl),{matches:l}=m.useContext(Vs),{pathname:c}=Ol(),d=Jn(),h=Pw(t,Ew(l,a.v7_relativeSplatPath),c,s==="path"),u=JSON.stringify(h);return m.useEffect(()=>d(JSON.parse(u),{replace:r,state:n,relative:s}),[d,u,s,r,n]),null}function _5(e){return u5(e.context)}function or(e){_t(!1)}function S5(e){let{basename:t="/",children:r=null,location:n,navigationType:s=Ss.Pop,navigator:a,static:i=!1,future:l}=e;Rl()&&_t(!1);let c=t.replace(/^\/*/,"/"),d=m.useMemo(()=>({basename:c,navigator:a,static:i,future:dl({v7_relativeSplatPath:!1},l)}),[c,l,a,i]);typeof n=="string"&&(n=si(n));let{pathname:h="/",search:u="",hash:f="",state:p=null,key:b="default"}=n,g=m.useMemo(()=>{let w=Cw(h,c);return w==null?null:{location:{pathname:w,search:u,hash:f,state:p,key:b},navigationType:s}},[c,h,u,f,p,b,s]);return g==null?null:m.createElement(Tl.Provider,{value:d},m.createElement(nu.Provider,{children:r,value:g}))}function C5(e){let{children:t,location:r}=e;return h5(zf(t),r)}new Promise(()=>{});function zf(e,t){t===void 0&&(t=[]);let r=[];return m.Children.forEach(e,(n,s)=>{if(!m.isValidElement(n))return;let a=[...t,s];if(n.type===m.Fragment){r.push.apply(r,zf(n.props.children,a));return}n.type!==or&&_t(!1),!n.props.index||!n.props.children||_t(!1);let i={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=zf(n.props.children,a)),r.push(i)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const E5="6";try{window.__reactRouterVersion=E5}catch{}const P5="startTransition",Ug=up[P5];function T5(e){let{basename:t,children:r,future:n,window:s}=e,a=m.useRef();a.current==null&&(a.current=ME({window:s,v5Compat:!0}));let i=a.current,[l,c]=m.useState({action:i.action,location:i.location}),{v7_startTransition:d}=n||{},h=m.useCallback(u=>{d&&Ug?Ug(()=>c(u)):c(u)},[c,d]);return m.useLayoutEffect(()=>i.listen(h),[i,h]),m.useEffect(()=>N5(n),[n]),m.createElement(S5,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:i,future:n})}var Bg;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Bg||(Bg={}));var zg;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(zg||(zg={}));var kn=function(){return kn=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},kn.apply(this,arguments)};function oi(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function R5(e,t,r,n){function s(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function l(h){try{d(n.next(h))}catch(u){i(u)}}function c(h){try{d(n.throw(h))}catch(u){i(u)}}function d(h){h.done?a(h.value):s(h.value).then(l,c)}d((n=n.apply(e,t||[])).next())})}function O5(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,a;n<s;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}const A5=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class ym extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class I5 extends ym{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Wg extends ym{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class qg extends ym{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Wf;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Wf||(Wf={}));class D5{constructor(t,{headers:r={},customFetch:n,region:s=Wf.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=A5(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return R5(this,arguments,void 0,function*(r,n={}){var s;let a,i;try{const{headers:l,method:c,body:d,signal:h,timeout:u}=n;let f={},{region:p}=n;p||(p=this.region);const b=new URL(`${this.url}/${r}`);p&&p!=="any"&&(f["x-region"]=p,b.searchParams.set("forceFunctionRegion",p));let g;d&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",g=d):typeof d=="string"?(f["Content-Type"]="text/plain",g=d):typeof FormData<"u"&&d instanceof FormData?g=d:(f["Content-Type"]="application/json",g=JSON.stringify(d)):d&&typeof d!="string"&&!(typeof Blob<"u"&&d instanceof Blob)&&!(d instanceof ArrayBuffer)&&!(typeof FormData<"u"&&d instanceof FormData)?g=JSON.stringify(d):g=d;let w=h;u&&(i=new AbortController,a=setTimeout(()=>i.abort(),u),h?(w=i.signal,h.addEventListener("abort",()=>i.abort())):w=i.signal);const x=yield this.fetch(b.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),l),body:g,signal:w}).catch(N=>{throw new I5(N)}),y=x.headers.get("x-relay-error");if(y&&y==="true")throw new Wg(x);if(!x.ok)throw new qg(x);let v=((s=x.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),k;return v==="application/json"?k=yield x.json():v==="application/octet-stream"||v==="application/pdf"?k=yield x.blob():v==="text/event-stream"?k=x:v==="multipart/form-data"?k=yield x.formData():k=yield x.text(),{data:k,error:null,response:x}}catch(l){return{data:null,error:l,response:l instanceof qg||l instanceof Wg?l.context:void 0}}finally{a&&clearTimeout(a)}})}}var L5=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},M5=class{constructor(e){var t,r,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,this.urlLengthLimit=(n=e.urlLengthLimit)!==null&&n!==void 0?n:8e3,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{let i=null,l=null,c=null,d=a.status,h=a.statusText;if(a.ok){var u,f;if(r.method!=="HEAD"){var p;const x=await a.text();x===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((p=r.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?l=x:l=JSON.parse(x))}const g=(u=r.headers.get("Prefer"))===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),w=(f=a.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");g&&w&&w.length>1&&(c=parseInt(w[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(l)&&(l.length>1?(i={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,c=null,d=406,h="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var b;const g=await a.text();try{i=JSON.parse(g),Array.isArray(i)&&a.status===404&&(l=[],i=null,d=200,h="OK")}catch{a.status===404&&g===""?(d=204,h="No Content"):i={message:g}}if(i&&r.isMaybeSingle&&(!(i==null||(b=i.details)===null||b===void 0)&&b.includes("0 rows"))&&(i=null,d=200,h="OK"),i&&r.shouldThrowOnError)throw new L5(i)}return{error:i,data:l,count:c,status:d,statusText:h}});return this.shouldThrowOnError||(s=s.catch(a=>{var i;let l="",c="",d="";const h=a==null?void 0:a.cause;if(h){var u,f,p,b;const x=(u=h==null?void 0:h.message)!==null&&u!==void 0?u:"",y=(f=h==null?void 0:h.code)!==null&&f!==void 0?f:"";l=`${(p=a==null?void 0:a.name)!==null&&p!==void 0?p:"FetchError"}: ${a==null?void 0:a.message}`,l+=`

Caused by: ${(b=h==null?void 0:h.name)!==null&&b!==void 0?b:"Error"}: ${x}`,y&&(l+=` (${y})`),h!=null&&h.stack&&(l+=`
${h.stack}`)}else{var g;l=(g=a==null?void 0:a.stack)!==null&&g!==void 0?g:""}const w=this.url.toString().length;return(a==null?void 0:a.name)==="AbortError"||(a==null?void 0:a.code)==="ABORT_ERR"?(d="",c="Request was aborted (timeout or manual cancellation)",w>this.urlLengthLimit&&(c+=`. Note: Your request URL is ${w} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((h==null?void 0:h.name)==="HeadersOverflowError"||(h==null?void 0:h.code)==="UND_ERR_HEADERS_OVERFLOW")&&(d="",c="HTTP headers exceeded server limits (typically 16KB)",w>this.urlLengthLimit&&(c+=`. Your request URL is ${w} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(i=a==null?void 0:a.name)!==null&&i!==void 0?i:"FetchError"}: ${a==null?void 0:a.message}`,details:l,hint:c,code:d},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}},$5=class extends M5{select(e){let t=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:s=n}={}){const a=s?`${s}.order`:"order",i=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${i?`${i},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"offset":`${n}.offset`,a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:s=!1,format:a="text"}={}){var i;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(i=this.headers.get("Accept"))!==null&&i!==void 0?i:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${c}"; options=${l};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const Hg=new RegExp("[,()]");var Yo=class extends $5{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&Hg.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&Hg.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let s="";n==="plain"?s="pl":n==="phrase"?s="ph":n==="websearch"&&(s="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},F5=class{constructor(e,{headers:t={},schema:r,fetch:n,urlLengthLimit:s=8e3}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n,this.urlLengthLimit=s}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:r=!1,count:n}=t??{},s=r?"HEAD":"GET";let a=!1;const i=(e??"*").split("").map(d=>/\s/.test(d)&&!a?"":(d==='"'&&(a=!a),d)).join(""),{url:l,headers:c}=this.cloneRequestState();return l.searchParams.set("select",i),n&&c.append("Prefer",`count=${n}`),new Yo({method:s,url:l,headers:c,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(e,{count:t,defaultToNull:r=!0}={}){var n;const s="POST",{url:a,headers:i}=this.cloneRequestState();if(t&&i.append("Prefer",`count=${t}`),r||i.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(l.length>0){const c=[...new Set(l)].map(d=>`"${d}"`);a.searchParams.set("columns",c.join(","))}}return new Yo({method:s,url:a,headers:i,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:s=!0}={}){var a;const i="POST",{url:l,headers:c}=this.cloneRequestState();if(c.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&l.searchParams.set("on_conflict",t),n&&c.append("Prefer",`count=${n}`),s||c.append("Prefer","missing=default"),Array.isArray(e)){const d=e.reduce((h,u)=>h.concat(Object.keys(u)),[]);if(d.length>0){const h=[...new Set(d)].map(u=>`"${u}"`);l.searchParams.set("columns",h.join(","))}}return new Yo({method:i,url:l,headers:c,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch,urlLengthLimit:this.urlLengthLimit})}update(e,{count:t}={}){var r;const n="PATCH",{url:s,headers:a}=this.cloneRequestState();return t&&a.append("Prefer",`count=${t}`),new Yo({method:n,url:s,headers:a,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:e}={}){var t;const r="DELETE",{url:n,headers:s}=this.cloneRequestState();return e&&s.append("Prefer",`count=${e}`),new Yo({method:r,url:n,headers:s,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch,urlLengthLimit:this.urlLengthLimit})}};function ul(e){"@babel/helpers - typeof";return ul=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ul(e)}function U5(e,t){if(ul(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ul(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function B5(e){var t=U5(e,"string");return ul(t)=="symbol"?t:t+""}function z5(e,t,r){return(t=B5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function cc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Vg(Object(r),!0).forEach(function(n){z5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vg(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var W5=class Dw{constructor(t,{headers:r={},schema:n,fetch:s,timeout:a,urlLengthLimit:i=8e3}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.urlLengthLimit=i;const l=s??globalThis.fetch;a!==void 0&&a>0?this.fetch=(c,d)=>{const h=new AbortController,u=setTimeout(()=>h.abort(),a),f=d==null?void 0:d.signal;if(f){if(f.aborted)return clearTimeout(u),l(c,d);const p=()=>{clearTimeout(u),h.abort()};return f.addEventListener("abort",p,{once:!0}),l(c,cc(cc({},d),{},{signal:h.signal})).finally(()=>{clearTimeout(u),f.removeEventListener("abort",p)})}return l(c,cc(cc({},d),{},{signal:h.signal})).finally(()=>clearTimeout(u))}:this.fetch=l}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new F5(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(t){return new Dw(this.url,{headers:this.headers,schema:t,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(t,r={},{head:n=!1,get:s=!1,count:a}={}){var i;let l;const c=new URL(`${this.url}/rpc/${t}`);let d;const h=p=>p!==null&&typeof p=="object"&&(!Array.isArray(p)||p.some(h)),u=n&&Object.values(r).some(h);u?(l="POST",d=r):n||s?(l=n?"HEAD":"GET",Object.entries(r).filter(([p,b])=>b!==void 0).map(([p,b])=>[p,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([p,b])=>{c.searchParams.append(p,b)})):(l="POST",d=r);const f=new Headers(this.headers);return u?f.set("Prefer",a?`count=${a},return=minimal`:"return=minimal"):a&&f.set("Prefer",`count=${a}`),new Yo({method:l,url:c,headers:f,schema:this.schemaName,body:d,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch,urlLengthLimit:this.urlLengthLimit})}};class q5{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const n=r.versions;if(n&&n.node){const s=n.node,a=parseInt(s.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const H5="2.97.0",V5=`realtime-js/${H5}`,K5="1.0.0",Lw="2.0.0",Kg=Lw,qf=1e4,G5=1e3,Q5=100;var ds;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(ds||(ds={}));var Ct;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Ct||(Ct={}));var on;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(on||(on={}));var Hf;(function(e){e.websocket="websocket"})(Hf||(Hf={}));var ro;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(ro||(ro={}));class Y5{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const s=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(t){var r,n;const s=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},i=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,i)}_encodeUserBroadcastPush(t,r,n){var s,a;const i=t.topic,l=(s=t.ref)!==null&&s!==void 0?s:"",c=(a=t.join_ref)!==null&&a!==void 0?a:"",d=t.payload.event,h=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},u=Object.keys(h).length===0?"":JSON.stringify(h);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(i.length>255)throw new Error(`topic length ${i.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`userEvent length ${d.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`metadata length ${u.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+i.length+d.length+u.length,p=new ArrayBuffer(this.HEADER_LENGTH+f);let b=new DataView(p),g=0;b.setUint8(g++,this.KINDS.userBroadcastPush),b.setUint8(g++,c.length),b.setUint8(g++,l.length),b.setUint8(g++,i.length),b.setUint8(g++,d.length),b.setUint8(g++,u.length),b.setUint8(g++,r),Array.from(c,x=>b.setUint8(g++,x.charCodeAt(0))),Array.from(l,x=>b.setUint8(g++,x.charCodeAt(0))),Array.from(i,x=>b.setUint8(g++,x.charCodeAt(0))),Array.from(d,x=>b.setUint8(g++,x.charCodeAt(0))),Array.from(u,x=>b.setUint8(g++,x.charCodeAt(0)));var w=new Uint8Array(p.byteLength+n.byteLength);return w.set(new Uint8Array(p),0),w.set(new Uint8Array(n),p.byteLength),w.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[s,a,i,l,c]=n;return r({join_ref:s,ref:a,topic:i,event:l,payload:c})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),s=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,s)}}_decodeUserBroadcast(t,r,n){const s=r.getUint8(1),a=r.getUint8(2),i=r.getUint8(3),l=r.getUint8(4);let c=this.HEADER_LENGTH+4;const d=n.decode(t.slice(c,c+s));c=c+s;const h=n.decode(t.slice(c,c+a));c=c+a;const u=n.decode(t.slice(c,c+i));c=c+i;const f=t.slice(c,t.byteLength),p=l===this.JSON_ENCODING?JSON.parse(n.decode(f)):f,b={type:this.BROADCAST_EVENT,event:h,payload:p};return i>0&&(b.meta=JSON.parse(u)),{join_ref:null,ref:null,topic:d,event:this.BROADCAST_EVENT,payload:b}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class Mw{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Xe;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Xe||(Xe={}));const Gg=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((a,i)=>(a[i]=J5(i,e,t,s),a),{}):{}},J5=(e,t,r,n)=>{const s=t.find(l=>l.name===e),a=s==null?void 0:s.type,i=r[e];return a&&!n.includes(a)?$w(a,i):Vf(i)},$w=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return t4(t,r)}switch(e){case Xe.bool:return X5(t);case Xe.float4:case Xe.float8:case Xe.int2:case Xe.int4:case Xe.int8:case Xe.numeric:case Xe.oid:return Z5(t);case Xe.json:case Xe.jsonb:return e4(t);case Xe.timestamp:return r4(t);case Xe.abstime:case Xe.date:case Xe.daterange:case Xe.int4range:case Xe.int8range:case Xe.money:case Xe.reltime:case Xe.text:case Xe.time:case Xe.timestamptz:case Xe.timetz:case Xe.tsrange:case Xe.tstzrange:return Vf(t);default:return Vf(t)}},Vf=e=>e,X5=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Z5=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},e4=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},t4=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let a;const i=e.slice(1,r);try{a=JSON.parse("["+i+"]")}catch{a=i?i.split(","):[]}return a.map(l=>$w(t,l))}return e},r4=e=>typeof e=="string"?e.replace(" ","T"):e,Fw=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class rh{constructor(t,r,n={},s=qf){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Qg;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Qg||(Qg={}));class Bi{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:a,onLeave:i,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Bi.syncState(this.state,s,a,i),this.pendingDiffs.forEach(c=>{this.state=Bi.syncDiff(this.state,c,a,i)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:a,onLeave:i,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Bi.syncDiff(this.state,s,a,i),l())}),this.onJoin((s,a,i)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:i})}),this.onLeave((s,a,i)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const a=this.cloneDeep(t),i=this.transformState(r),l={},c={};return this.map(a,(d,h)=>{i[d]||(c[d]=h)}),this.map(i,(d,h)=>{const u=a[d];if(u){const f=h.map(w=>w.presence_ref),p=u.map(w=>w.presence_ref),b=h.filter(w=>p.indexOf(w.presence_ref)<0),g=u.filter(w=>f.indexOf(w.presence_ref)<0);b.length>0&&(l[d]=b),g.length>0&&(c[d]=g)}else l[d]=h}),this.syncDiff(a,{joins:l,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:a,leaves:i}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(a,(l,c)=>{var d;const h=(d=t[l])!==null&&d!==void 0?d:[];if(t[l]=this.cloneDeep(c),h.length>0){const u=t[l].map(p=>p.presence_ref),f=h.filter(p=>u.indexOf(p.presence_ref)<0);t[l].unshift(...f)}n(l,h,c)}),this.map(i,(l,c)=>{let d=t[l];if(!d)return;const h=c.map(u=>u.presence_ref);d=d.filter(u=>h.indexOf(u.presence_ref)<0),t[l]=d,s(l,d,c),d.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Yg;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Yg||(Yg={}));var zi;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(zi||(zi={}));var Dn;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Dn||(Dn={}));class ua{constructor(t,r={config:{}},n){var s,a;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Ct.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new rh(this,on.join,this.params,this.timeout),this.rejoinTimer=new Mw(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ct.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ct.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Ct.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ct.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Ct.errored,this.rejoinTimer.scheduleTimeout())}),this._on(on.reply,{},(i,l)=>{this._trigger(this._replyEventName(l),i)}),this.presence=new Bi(this),this.broadcastEndpointURL=Fw(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Ct.closed){const{config:{broadcast:i,presence:l,private:c}}=this.params,d=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(p=>p.filter))!==null&&s!==void 0?s:[],h=!!this.bindings[zi.PRESENCE]&&this.bindings[zi.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,u={},f={broadcast:i,presence:Object.assign(Object.assign({},l),{enabled:h}),postgres_changes:d,private:c};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(p=>t==null?void 0:t(Dn.CHANNEL_ERROR,p)),this._onClose(()=>t==null?void 0:t(Dn.CLOSED)),this.updateJoinPayload(Object.assign({config:f},u)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:p})=>{var b;if(this.socket._isManualToken()||this.socket.setAuth(),p===void 0){t==null||t(Dn.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,w=(b=g==null?void 0:g.length)!==null&&b!==void 0?b:0,x=[];for(let y=0;y<w;y++){const v=g[y],{filter:{event:k,schema:N,table:S,filter:_}}=v,P=p&&p[y];if(P&&P.event===k&&ua.isFilterValueEqual(P.schema,N)&&ua.isFilterValueEqual(P.table,S)&&ua.isFilterValueEqual(P.filter,_))x.push(Object.assign(Object.assign({},v),{id:P.id}));else{this.unsubscribe(),this.state=Ct.errored,t==null||t(Dn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(Dn.SUBSCRIBED);return}}).receive("error",p=>{this.state=Ct.errored,t==null||t(Dn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Dn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===Ct.joined&&t===zi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var s;if(r==null)return Promise.reject("Payload is required for httpSend()");const a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const i={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,i,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const d=await l.json();c=d.error||d.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:i}=t,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:i,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=d.body)===null||s===void 0?void 0:s.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var i,l,c;const d=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(i=this.params)===null||i===void 0?void 0:i.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),d.receive("ok",()=>a("ok")),d.receive("error",()=>a("error")),d.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ct.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(on.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new rh(this,on.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ct.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,a=setTimeout(()=>s.abort(),n),i=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(a),i}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new rh(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Q5){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,a;const i=t.toLocaleLowerCase(),{close:l,error:c,leave:d,join:h}=on;if(n&&[l,c,d,h].indexOf(i)>=0&&n!==this._joinRef())return;let f=this._onMessage(i,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var b,g,w;return((b=p.filter)===null||b===void 0?void 0:b.event)==="*"||((w=(g=p.filter)===null||g===void 0?void 0:g.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===i}).map(p=>p.callback(f,n)):(a=this.bindings[i])===null||a===void 0||a.filter(p=>{var b,g,w,x,y,v;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in p){const k=p.id,N=(b=p.filter)===null||b===void 0?void 0:b.event;return k&&((g=r.ids)===null||g===void 0?void 0:g.includes(k))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((w=r.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const k=(y=(x=p==null?void 0:p.filter)===null||x===void 0?void 0:x.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return k==="*"||k===((v=r==null?void 0:r.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===i}).map(p=>{if(typeof f=="object"&&"ids"in f){const b=f.data,{schema:g,table:w,commit_timestamp:x,type:y,errors:v}=b;f=Object.assign(Object.assign({},{schema:g,table:w,commit_timestamp:x,eventType:y,new:{},old:{},errors:v}),this._getPayloadRecords(b))}p.callback(f,n)})}_isClosed(){return this.state===Ct.closed}_isJoined(){return this.state===Ct.joined}_isJoining(){return this.state===Ct.joining}_isLeaving(){return this.state===Ct.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),a={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&ua.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(on.close,{},t)}_onError(t){this._on(on.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ct.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Gg(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Gg(t.columns,t.old_record)),r}}const nh=()=>{},dc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},n4=[1e3,2e3,5e3,1e4],s4=1e4,o4=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class a4{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=qf,this.transport=null,this.heartbeatIntervalMs=dc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=nh,this.ref=0,this.reconnectTimer=null,this.vsn=Kg,this.logger=nh,this.conn=null,this.sendBuffer=[],this.serializer=new Y5,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=s=>s?(...a)=>s(...a):(...a)=>fetch(...a),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Hf.websocket}`,this.httpEndpoint=Fw(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=q5.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case ds.connecting:return ro.Connecting;case ds.open:return ro.Open;case ds.closing:return ro.Closing;default:return ro.Closed}}isConnected(){return this.connectionState()===ro.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(a=>a.topic===n);if(s)return s;{const a=new ua(`realtime:${t}`,r,this);return this.channels.push(a),a}}push(t){const{topic:r,event:n,payload:s,ref:a}=t,i=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${a})`,s),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(G5,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},dc.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const d=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",d)}catch(h){this.log("error","error in heartbeat callback",h)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:s,payload:a,ref:i}=r,l=i?`(${i})`:"",c=a.status||"";this.log("receive",`${c} ${n} ${s} ${l}`.trim(),a),this.channels.filter(d=>d._isMember(n)).forEach(d=>d._trigger(s,a,i)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===ds.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===ds.open||this.conn.readyState===ds.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(r){this.log("error","error in heartbeat callback",r)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(on.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([o4],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const a={access_token:r,version:V5};r&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(on.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Mw(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},dc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,a,i,l,c,d,h,u,f,p;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:qf,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:dc.HEARTBEAT_INTERVAL,this.worker=(a=t==null?void 0:t.worker)!==null&&a!==void 0?a:!1,this.accessToken=(i=t==null?void 0:t.accessToken)!==null&&i!==void 0?i:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:nh,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:Kg,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=t==null?void 0:t.reconnectAfterMs)!==null&&d!==void 0?d:b=>n4[b-1]||s4,this.vsn){case K5:this.encode=(h=t==null?void 0:t.encode)!==null&&h!==void 0?h:(b,g)=>g(JSON.stringify(b)),this.decode=(u=t==null?void 0:t.decode)!==null&&u!==void 0?u:(b,g)=>g(JSON.parse(b));break;case Lw:this.encode=(f=t==null?void 0:t.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(p=t==null?void 0:t.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var hl=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function i4(e,t,r){const n=new URL(t,e);if(r)for(const[s,a]of Object.entries(r))a!==void 0&&n.searchParams.set(s,a);return n.toString()}async function l4(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function c4(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:s,body:a,headers:i}){const l=i4(e.baseUrl,n,s),c=await l4(e.auth),d=await t(l,{method:r,headers:{...a?{"Content-Type":"application/json"}:{},...c,...i},body:a?JSON.stringify(a):void 0}),h=await d.text(),u=(d.headers.get("content-type")||"").includes("application/json"),f=u&&h?JSON.parse(h):h;if(!d.ok){const p=u?f:void 0,b=p==null?void 0:p.error;throw new hl((b==null?void 0:b.message)??`Request failed with status ${d.status}`,{status:d.status,icebergType:b==null?void 0:b.type,icebergCode:b==null?void 0:b.code,details:p})}return{status:d.status,headers:d.headers,data:f}}}}function uc(e){return e.join("")}var d4=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:uc(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${uc(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${uc(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${uc(e.namespace)}`}),!0}catch(t){if(t instanceof hl&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof hl&&r.status===409)return;throw r}}};function Fo(e){return e.join("")}var u4=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Fo(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Fo(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Fo(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Fo(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Fo(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Fo(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof hl&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof hl&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},h4=class{constructor(e){var n;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=c4({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(n=e.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new d4(this.client,t),this.tableOps=new u4(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},su=class extends Error{constructor(e,t="storage",r,n){super(e),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=n}};function ou(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var hc=class extends su{constructor(e,t,r,n="storage"){super(e,n,t,r),this.name=n==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Uw=class extends su{constructor(e,t,r="storage"){super(e,r),this.name=r==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const f4=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),p4=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Kf=e=>{if(Array.isArray(e))return e.map(r=>Kf(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[s]=Kf(n)}),t},m4=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function fl(e){"@babel/helpers - typeof";return fl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fl(e)}function x4(e,t){if(fl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(fl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function g4(e){var t=x4(e,"string");return fl(t)=="symbol"?t:t+""}function b4(e,t,r){return(t=g4(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ne(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Jg(Object(r),!0).forEach(function(n){b4(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jg(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const Xg=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},v4=async(e,t,r,n)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const s=e,a=s.status||500;if(typeof s.json=="function")s.json().then(i=>{const l=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||a+"";t(new hc(Xg(i),a,l,n))}).catch(()=>{if(n==="vectors"){const i=a+"";t(new hc(s.statusText||`HTTP ${a} error`,a,i,n))}else{const i=a+"";t(new hc(s.statusText||`HTTP ${a} error`,a,i,n))}});else{const i=a+"";t(new hc(s.statusText||`HTTP ${a} error`,a,i,n))}}else t(new Uw(Xg(e),e,n))},y4=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||e==="HEAD"||!n?Ne(Ne({},s),r):(p4(n)?(s.headers=Ne({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),Ne(Ne({},s),r))};async function ji(e,t,r,n,s,a,i){return new Promise((l,c)=>{e(r,y4(t,n,s,a)).then(d=>{if(!d.ok)throw d;if(n!=null&&n.noResolveJson)return d;if(i==="vectors"){const h=d.headers.get("content-type");if(d.headers.get("content-length")==="0"||d.status===204)return{};if(!h||!h.includes("application/json"))return{}}return d.json()}).then(d=>l(d)).catch(d=>v4(d,c,n,i))})}function Bw(e="storage"){return{get:async(t,r,n,s)=>ji(t,"GET",r,n,s,void 0,e),post:async(t,r,n,s,a)=>ji(t,"POST",r,s,a,n,e),put:async(t,r,n,s,a)=>ji(t,"PUT",r,s,a,n,e),head:async(t,r,n,s)=>ji(t,"HEAD",r,Ne(Ne({},n),{},{noResolveJson:!0}),s,void 0,e),remove:async(t,r,n,s,a)=>ji(t,"DELETE",r,s,a,n,e)}}const w4=Bw("storage"),{get:pl,post:tn,put:Gf,head:j4,remove:wm}=w4,Rr=Bw("vectors");var ai=class{constructor(e,t={},r,n="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=f4(r),this.namespace=n}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Ne(Ne({},this.headers),{},{[e]:t}),this}async handleOperation(e){var t=this;try{return{data:await e(),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ou(r))return{data:null,error:r};throw r}}},k4=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ou(t))return{data:null,error:t};throw t}}};let zw;zw=Symbol.toStringTag;var N4=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[zw]="BlobDownloadBuilder",this.promise=null}asStream(){return new k4(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ou(t))return{data:null,error:t};throw t}}};const _4={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Zg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var S4=class extends ai{constructor(e,t={},r,n){super(e,t,n,"storage"),this.bucketId=r}async uploadOrUpdate(e,t,r,n){var s=this;return s.handleOperation(async()=>{let a;const i=Ne(Ne({},Zg),n);let l=Ne(Ne({},s.headers),e==="POST"&&{"x-upsert":String(i.upsert)});const c=i.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",i.cacheControl),c&&a.append("metadata",s.encodeMetadata(c)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.has("cacheControl")||a.append("cacheControl",i.cacheControl),c&&!a.has("metadata")&&a.append("metadata",s.encodeMetadata(c))):(a=r,l["cache-control"]=`max-age=${i.cacheControl}`,l["content-type"]=i.contentType,c&&(l["x-metadata"]=s.toBase64(s.encodeMetadata(c))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!i.duplex&&(i.duplex="half")),n!=null&&n.headers&&(l=Ne(Ne({},l),n.headers));const d=s._removeEmptyFolders(t),h=s._getFinalPath(d),u=await(e=="PUT"?Gf:tn)(s.fetch,`${s.url}/object/${h}`,a,Ne({headers:l},i!=null&&i.duplex?{duplex:i.duplex}:{}));return{path:d,id:u.Id,fullPath:u.Key}})}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,n){var s=this;const a=s._removeEmptyFolders(e),i=s._getFinalPath(a),l=new URL(s.url+`/object/upload/sign/${i}`);return l.searchParams.set("token",t),s.handleOperation(async()=>{let c;const d=Ne({upsert:Zg.upsert},n),h=Ne(Ne({},s.headers),{"x-upsert":String(d.upsert)});return typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",d.cacheControl)):(c=r,h["cache-control"]=`max-age=${d.cacheControl}`,h["content-type"]=d.contentType),{path:a,fullPath:(await Gf(s.fetch,l.toString(),c,{headers:h})).Key}})}async createSignedUploadUrl(e,t){var r=this;return r.handleOperation(async()=>{let n=r._getFinalPath(e);const s=Ne({},r.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const a=await tn(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:s}),i=new URL(r.url+a.url),l=i.searchParams.get("token");if(!l)throw new su("No token returned by API");return{signedUrl:i.toString(),path:e,token:l}})}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var n=this;return n.handleOperation(async()=>await tn(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers}))}async copy(e,t,r){var n=this;return n.handleOperation(async()=>({path:(await tn(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers})).Key}))}async createSignedUrl(e,t,r){var n=this;return n.handleOperation(async()=>{let s=n._getFinalPath(e),a=await tn(n.fetch,`${n.url}/object/sign/${s}`,Ne({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:n.headers});const i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{signedUrl:encodeURI(`${n.url}${a.signedURL}${i}`)}})}async createSignedUrls(e,t,r){var n=this;return n.handleOperation(async()=>{const s=await tn(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:t,paths:e},{headers:n.headers}),a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s.map(i=>Ne(Ne({},i),{},{signedUrl:i.signedURL?encodeURI(`${n.url}${i.signedURL}${a}`):null}))})}download(e,t,r){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=s?`?${s}`:"",i=this._getFinalPath(e),l=()=>pl(this.fetch,`${this.url}/${n}/${i}${a}`,{headers:this.headers,noResolveJson:!0},r);return new N4(l,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);return t.handleOperation(async()=>Kf(await pl(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})))}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await j4(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ou(n)&&n instanceof Uw){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&n.push(s);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});i!==""&&n.push(i);let l=n.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${l}`)}}}async remove(e){var t=this;return t.handleOperation(async()=>await wm(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}))}async list(e,t,r){var n=this;return n.handleOperation(async()=>{const s=Ne(Ne(Ne({},_4),t),{},{prefix:e||""});return await tn(n.fetch,`${n.url}/object/list/${n.bucketId}`,s,{headers:n.headers},r)})}async listV2(e,t){var r=this;return r.handleOperation(async()=>{const n=Ne({},e);return await tn(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const C4="2.97.0",Al={"X-Client-Info":`storage-js/${C4}`};var E4=class extends ai{constructor(e,t={},r,n){const s=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase."));const a=s.href.replace(/\/$/,""),i=Ne(Ne({},Al),t);super(a,i,r,"storage")}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const r=t.listBucketOptionsToQueryString(e);return await pl(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await pl(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}))}async createBucket(e,t={public:!1}){var r=this;return r.handleOperation(async()=>await tn(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async updateBucket(e,t){var r=this;return r.handleOperation(async()=>await Gf(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await tn(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await wm(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},P4=class extends ai{constructor(e,t={},r){const n=e.replace(/\/$/,""),s=Ne(Ne({},Al),t);super(n,s,r,"storage")}async createBucket(e){var t=this;return t.handleOperation(async()=>await tn(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),s=n?`${t.url}/bucket?${n}`:`${t.url}/bucket`;return await pl(t.fetch,s,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await wm(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}from(e){var t=this;if(!m4(e))throw new su("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new h4({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(s,a){const i=s[a];return typeof i!="function"?i:async(...l)=>{try{return{data:await i.apply(s,l),error:null}}catch(c){if(n)throw c;return{data:null,error:c}}}}})}},T4=class extends ai{constructor(e,t={},r){const n=e.replace(/\/$/,""),s=Ne(Ne({},Al),{},{"Content-Type":"application/json"},t);super(n,s,r,"vectors")}async createIndex(e){var t=this;return t.handleOperation(async()=>await Rr.post(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{})}async getIndex(e,t){var r=this;return r.handleOperation(async()=>await Rr.post(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await Rr.post(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}))}async deleteIndex(e,t){var r=this;return r.handleOperation(async()=>await Rr.post(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{})}},R4=class extends ai{constructor(e,t={},r){const n=e.replace(/\/$/,""),s=Ne(Ne({},Al),{},{"Content-Type":"application/json"},t);super(n,s,r,"vectors")}async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Rr.post(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await Rr.post(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}))}async listVectors(e){var t=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return t.handleOperation(async()=>await Rr.post(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await Rr.post(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Rr.post(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{})}},O4=class extends ai{constructor(e,t={},r){const n=e.replace(/\/$/,""),s=Ne(Ne({},Al),{},{"Content-Type":"application/json"},t);super(n,s,r,"vectors")}async createBucket(e){var t=this;return t.handleOperation(async()=>await Rr.post(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await Rr.post(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}))}async listBuckets(e={}){var t=this;return t.handleOperation(async()=>await Rr.post(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Rr.post(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}},A4=class extends O4{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new I4(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},I4=class extends T4{constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,Ne(Ne({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,Ne(Ne({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new D4(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},D4=class extends R4{constructor(e,t,r,n,s){super(e,t,s),this.vectorBucketName=r,this.indexName=n}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,Ne(Ne({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,Ne(Ne({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,Ne(Ne({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,Ne(Ne({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,Ne(Ne({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},L4=class extends E4{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new S4(this.url,this.headers,e,this.fetch)}get vectors(){return new A4(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new P4(this.url+"/iceberg",this.headers,this.fetch)}};const Ww="2.97.0",Jo=30*1e3,Qf=3,sh=Qf*Jo,M4="http://localhost:9999",$4="supabase.auth.token",F4={"X-Client-Info":`gotrue-js/${Ww}`},Yf="X-Supabase-Api-Version",qw={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},U4=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,B4=10*60*1e3;class ml extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function me(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class z4 extends ml{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function W4(e){return me(e)&&e.name==="AuthApiError"}class no extends ml{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Xn extends ml{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class Er extends Xn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function oh(e){return me(e)&&e.name==="AuthSessionMissingError"}class Uo extends Xn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class fc extends Xn{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class pc extends Xn{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function q4(e){return me(e)&&e.name==="AuthImplicitGrantRedirectError"}class e0 extends Xn{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class H4 extends Xn{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Jf extends Xn{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function ah(e){return me(e)&&e.name==="AuthRetryableFetchError"}class t0 extends Xn{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Xf extends Xn{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const _d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),r0=` 	
\r=`.split(""),V4=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<r0.length;t+=1)e[r0[t].charCodeAt(0)]=-2;for(let t=0;t<_d.length;t+=1)e[_d[t].charCodeAt(0)]=t;return e})();function n0(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(_d[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(_d[n]),t.queuedBits-=6}}function Hw(e,t,r){const n=V4[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function s0(e){const t=[],r=i=>{t.push(String.fromCodePoint(i))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=i=>{Q4(i,n,r)};for(let i=0;i<e.length;i+=1)Hw(e.charCodeAt(i),s,a);return t.join("")}function K4(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function G4(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}K4(n,t)}}function Q4(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function wa(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)Hw(e.charCodeAt(s),r,n);return new Uint8Array(t)}function Y4(e){const t=[];return G4(e,r=>t.push(r)),new Uint8Array(t)}function io(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>n0(s,r,n)),n0(null,r,n),t.join("")}function J4(e){return Math.round(Date.now()/1e3)+e}function X4(){return Symbol("auth-callback")}const zt=()=>typeof window<"u"&&typeof document<"u",Ys={tested:!1,writable:!1},Vw=()=>{if(!zt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ys.tested)return Ys.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Ys.tested=!0,Ys.writable=!0}catch{Ys.tested=!0,Ys.writable=!1}return Ys.writable};function Z4(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,a)=>{t[a]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const Kw=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),eP=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Xo=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Js=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Bt=async(e,t)=>{await e.removeItem(t)};class au{constructor(){this.promise=new au.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}au.promiseConstructor=Promise;function mc(e){const t=e.split(".");if(t.length!==3)throw new Xf("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!U4.test(t[n]))throw new Xf("JWT not in base64url format");return{header:JSON.parse(s0(t[0])),payload:JSON.parse(s0(t[1])),signature:wa(t[2]),raw:{header:t[0],payload:t[1]}}}async function tP(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function rP(e,t){return new Promise((n,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const i=await e(a);if(!t(a,null,i)){n(i);return}}catch(i){if(!t(a,i)){s(i);return}}})()})}function nP(e){return("0"+e.toString(16)).substr(-2)}function sP(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let a=0;a<56;a++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,nP).join("")}async function oP(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function aP(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await oP(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Bo(e,t,r=!1){const n=sP();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Xo(e,`${t}-code-verifier`,s);const a=await aP(n);return[a,n===a?"plain":"s256"]}const iP=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function lP(e){const t=e.headers.get(Yf);if(!t||!t.match(iP))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function cP(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function dP(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const uP=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function zo(e){if(!uP.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ih(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function hP(e,t){return new Proxy(e,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const a=n.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,s)}})}function o0(e){return JSON.parse(JSON.stringify(e))}const to=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),fP=[502,503,504];async function a0(e){var t;if(!eP(e))throw new Jf(to(e),0);if(fP.includes(e.status))throw new Jf(to(e),e.status);let r;try{r=await e.json()}catch(a){throw new no(to(a),a)}let n;const s=lP(e);if(s&&s.getTime()>=qw["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new t0(to(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Er}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,i)=>a&&typeof i=="string",!0))throw new t0(to(r),e.status,r.weak_password.reasons);throw new z4(to(r),e.status||500,n)}const pP=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function _e(e,t,r,n){var s;const a=Object.assign({},n==null?void 0:n.headers);a[Yf]||(a[Yf]=qw["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const i=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(i.redirect_to=n.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await mP(e,t,r+l,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function mP(e,t,r,n,s,a){const i=pP(t,n,s,a);let l;try{l=await e(r,Object.assign({},i))}catch(c){throw console.error(c),new Jf(to(c),0)}if(l.ok||await a0(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await a0(c)}}function Zr(e){var t;let r=null;bP(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=J4(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function i0(e){const t=Zr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function fs(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function xP(e){return{data:e,error:null}}function gP(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a}=e,i=oi(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a},c=Object.assign({},i);return{data:{properties:l,user:c},error:null}}function l0(e){return e}function bP(e){return e.access_token&&e.refresh_token&&e.expires_in}const lh=["global","local","others"];class vP{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=Kw(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=lh[0]){if(lh.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${lh.join(", ")}`);try{return await _e(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(me(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await _e(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:fs})}catch(n){if(me(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=oi(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await _e(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:gP,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(me(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await _e(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:fs})}catch(r){if(me(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,a,i,l,c;try{const d={nextPage:null,lastPage:0,total:0},h=await _e(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:l0});if(h.error)throw h.error;const u=await h.json(),f=(i=h.headers.get("x-total-count"))!==null&&i!==void 0?i:0,p=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(b=>{const g=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(b.split(";")[1].split("=")[1]);d[`${w}Page`]=g}),d.total=parseInt(f)),{data:Object.assign(Object.assign({},u),d),error:null}}catch(d){if(me(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){zo(t);try{return await _e(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:fs})}catch(r){if(me(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){zo(t);try{return await _e(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:fs})}catch(n){if(me(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){zo(t);try{return await _e(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:fs})}catch(n){if(me(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){zo(t.userId);try{const{data:r,error:n}=await _e(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(me(r))return{data:null,error:r};throw r}}async _deleteFactor(t){zo(t.userId),zo(t.id);try{return{data:await _e(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,s,a,i,l,c;try{const d={nextPage:null,lastPage:0,total:0},h=await _e(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:l0});if(h.error)throw h.error;const u=await h.json(),f=(i=h.headers.get("x-total-count"))!==null&&i!==void 0?i:0,p=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(b=>{const g=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(b.split(";")[1].split("=")[1]);d[`${w}Page`]=g}),d.total=parseInt(f)),{data:Object.assign(Object.assign({},u),d),error:null}}catch(d){if(me(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(t){try{return await _e(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(me(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await _e(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(me(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await _e(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(me(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await _e(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await _e(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(me(r))return{data:null,error:r};throw r}}}function c0(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Wo={debug:!!(globalThis&&Vw()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Gw extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class d0 extends Gw{}async function yP(e,t,r){Wo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;t>0&&setTimeout(()=>{n.abort(),Wo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve();try{return await globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Wo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{Wo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Wo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new d0(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Wo.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}})}catch(s){throw(s==null?void 0:s.name)==="AbortError"?new d0(`Acquiring an exclusive Navigator LockManager lock "${e}" timed out waiting ${t}ms`):s}}function wP(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Qw(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function jP(e){return parseInt(e,16)}function kP(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function NP(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:a=new Date,nonce:i,notBefore:l,requestId:c,resources:d,scheme:h,uri:u,version:f}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(i&&i.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${i}`);if(!u)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const p=Qw(e.address),b=h?`${h}://${n}`:n,g=e.statement?`${e.statement}
`:"",w=`${b} wants you to sign in with your Ethereum account:
${p}

${g}`;let x=`URI: ${u}
Version: ${f}
Chain ID: ${r}${i?`
Nonce: ${i}`:""}
Issued At: ${a.toISOString()}`;if(s&&(x+=`
Expiration Time: ${s.toISOString()}`),l&&(x+=`
Not Before: ${l.toISOString()}`),c&&(x+=`
Request ID: ${c}`),d){let y=`
Resources:`;for(const v of d){if(!v||typeof v!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${v}`);y+=`
- ${v}`}x+=y}return`${w}
${x}`}class jt extends Error{constructor({message:t,code:r,cause:n,name:s}){var a;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(a=s??(n instanceof Error?n.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=r}}class Sd extends jt{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function _P({error:e,options:t}){var r,n,s;const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new jt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=a.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new jt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=a.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new jt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=a.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new jt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new jt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new jt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return a.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new jt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new jt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const i=window.location.hostname;if(Yw(i)){if(a.rp.id!==i)return new jt({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new jt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new jt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new jt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new jt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function SP({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new jt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new jt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(Yw(n)){if(r.rpId!==n)return new jt({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new jt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new jt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new jt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class CP{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const EP=new CP;function PP(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,s=oi(e,["challenge","user","excludeCredentials"]),a=wa(t).buffer,i=Object.assign(Object.assign({},r),{id:wa(r.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:a,user:i});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const d=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},d),{id:wa(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return l}function TP(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=oi(e,["challenge","allowCredentials"]),s=wa(t).buffer,a=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){a.allowCredentials=new Array(r.length);for(let i=0;i<r.length;i++){const l=r[i];a.allowCredentials[i]=Object.assign(Object.assign({},l),{id:wa(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return a}function RP(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:io(new Uint8Array(e.response.attestationObject)),clientDataJSON:io(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function OP(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:io(new Uint8Array(s.authenticatorData)),clientDataJSON:io(new Uint8Array(s.clientDataJSON)),signature:io(new Uint8Array(s.signature)),userHandle:s.userHandle?io(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Yw(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function u0(){var e,t;return!!(zt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function AP(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Sd("Browser returned unexpected credential type",t)}:{data:null,error:new Sd("Empty credential response",t)}}catch(t){return{data:null,error:_P({error:t,options:e})}}}async function IP(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Sd("Browser returned unexpected credential type",t)}:{data:null,error:new Sd("Empty credential response",t)}}catch(t){return{data:null,error:SP({error:t,options:e})}}}const DP={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},LP={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Cd(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of e)if(s)for(const a in s){const i=s[a];if(i!==void 0)if(Array.isArray(i))n[a]=i;else if(r(i))n[a]=i;else if(t(i)){const l=n[a];t(l)?n[a]=Cd(l,i):n[a]=Cd(i)}else n[a]=i}return n}function MP(e,t){return Cd(DP,e,t||{})}function $P(e,t){return Cd(LP,e,t||{})}class FP{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:s},a){var i;try{const{data:l,error:c}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!l)return{data:null,error:c};const d=s??EP.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:h}=l.webauthn.credential_options.publicKey;if(!h.name){const u=n;if(u)h.name=`${h.id}:${u}`;else{const p=(await this.client.getUser()).data.user,b=((i=p==null?void 0:p.user_metadata)===null||i===void 0?void 0:i.name)||(p==null?void 0:p.email)||(p==null?void 0:p.id)||"User";h.name=`${h.id}:${b}`}}h.displayName||(h.displayName=h.name)}switch(l.webauthn.type){case"create":{const h=MP(l.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:u,error:f}=await AP({publicKey:h,signal:d});return u?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:u}},error:null}:{data:null,error:f}}case"request":{const h=$P(l.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:u,error:f}=await IP(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:h,signal:d}));return u?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:u}},error:null}:{data:null,error:f}}}}catch(l){return me(l)?{data:null,error:l}:{data:null,error:new no("Unexpected error in challenge",l)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},a){if(!r)return{data:null,error:new ml("rpId is required for WebAuthn authentication")};try{if(!u0())return{data:null,error:new no("Browser does not support WebAuthn",null)};const{data:i,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:a});if(!i)return{data:null,error:l};const{webauthn:c}=i;return this._verify({factorId:t,challengeId:i.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(i){return me(i)?{data:null,error:i}:{data:null,error:new no("Unexpected error in authenticate",i)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},a){if(!r)return{data:null,error:new ml("rpId is required for WebAuthn registration")};try{if(!u0())return{data:null,error:new no("Browser does not support WebAuthn",null)};const{data:i,error:l}=await this._enroll({friendlyName:t});if(!i)return await this.client.mfa.listFactors().then(h=>{var u;return(u=h.data)===null||u===void 0?void 0:u.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===t&&f.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h==null?void 0:h.id}):void 0),{data:null,error:l};const{data:c,error:d}=await this._challenge({factorId:i.id,friendlyName:i.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:a});return c?this._verify({factorId:i.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:d}}catch(i){return me(i)?{data:null,error:i}:{data:null,error:new no("Unexpected error in register",i)}}}}wP();const UP={url:M4,storageKey:$4,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:F4,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4,skipAutoInitialize:!1};async function h0(e,t,r){return await r()}const qo={};class xl{get jwks(){var t,r;return(r=(t=qo[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){qo[this.storageKey]=Object.assign(Object.assign({},qo[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=qo[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){qo[this.storageKey]=Object.assign(Object.assign({},qo[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},UP),t);if(this.storageKey=a.storageKey,this.instanceID=(r=xl.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,xl.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&zt()){const i=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(i),this.logDebugMessages&&console.trace(i)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new vP({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=Kw(a.fetch),this.lock=a.lock||h0,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,this.lockAcquireTimeout=a.lockAcquireTimeout,a.lock?this.lock=a.lock:this.persistSession&&zt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=yP:this.lock=h0,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new FP(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:Vw()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=c0(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=c0(this.memoryStorage)),zt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i);try{await this._notifyAllSubscribers(i.data.event,i.data.session,!1)}catch(l){this._debug("#broadcastChannel","error",l)}})}a.skipAutoInitialize||this.initialize().catch(i=>{this._debug("#initialize()","error",i)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Ww}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(zt()&&(r=Z4(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),zt()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),q4(a)){const c=(t=a.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return{error:a}}const{session:i,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",i,"redirect type",l),await this._saveSession(i),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return me(r)?this._returnResult({error:r}):this._returnResult({error:new no("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const a=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Zr}),{data:i,error:l}=a;if(l||!i)return this._returnResult({data:{user:null,session:null},error:l});const c=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(a){if(me(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(t){var r,n,s;try{let a;if("email"in t){const{email:h,password:u,options:f}=t;let p=null,b=null;this.flowType==="pkce"&&([p,b]=await Bo(this.storage,this.storageKey)),a=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:h,password:u,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:b},xform:Zr})}else if("phone"in t){const{phone:h,password:u,options:f}=t;a=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:u,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Zr})}else throw new fc("You must provide either an email or phone number and a password");const{data:i,error:l}=a;if(l||!i)return await Bt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const c=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(a){if(await Bt(this.storage,`${this.storageKey}-code-verifier`),me(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(t){try{let r;if("email"in t){const{email:a,password:i,options:l}=t;r=await _e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:i0})}else if("phone"in t){const{phone:a,password:i,options:l}=t;r=await _e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:i0})}else throw new fc("You must provide either an email or phone number and a password");const{data:n,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const a=new Uo;return this._returnResult({data:{user:null,session:null},error:a})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(me(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,s,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,s,a,i,l,c,d,h,u,f;let p,b;if("message"in t)p=t.message,b=t.signature;else{const{chain:g,wallet:w,statement:x,options:y}=t;let v;if(zt())if(typeof w=="object")v=w;else{const D=window;if("ethereum"in D&&typeof D.ethereum=="object"&&"request"in D.ethereum&&typeof D.ethereum.request=="function")v=D.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=w}const k=new URL((r=y==null?void 0:y.url)!==null&&r!==void 0?r:window.location.href),N=await v.request({method:"eth_requestAccounts"}).then(D=>D).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!N||N.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const S=Qw(N[0]);let _=(n=y==null?void 0:y.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!_){const D=await v.request({method:"eth_chainId"});_=jP(D)}const P={domain:k.host,address:S,statement:x,uri:k.href,version:"1",chainId:_,nonce:(s=y==null?void 0:y.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(i=(a=y==null?void 0:y.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&i!==void 0?i:new Date,expirationTime:(l=y==null?void 0:y.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=y==null?void 0:y.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(d=y==null?void 0:y.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(h=y==null?void 0:y.signInWithEthereum)===null||h===void 0?void 0:h.resources};p=NP(P),b=await v.request({method:"personal_sign",params:[kP(p),S]})}try{const{data:g,error:w}=await _e(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:b},!((u=t.options)===null||u===void 0)&&u.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Zr});if(w)throw w;if(!g||!g.session||!g.user){const x=new Uo;return this._returnResult({data:{user:null,session:null},error:x})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:w})}catch(g){if(me(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithSolana(t){var r,n,s,a,i,l,c,d,h,u,f,p;let b,g;if("message"in t)b=t.message,g=t.signature;else{const{chain:w,wallet:x,statement:y,options:v}=t;let k;if(zt())if(typeof x=="object")k=x;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))k=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=x}const N=new URL((r=v==null?void 0:v.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in k&&k.signIn){const S=await k.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),y?{statement:y}:null));let _;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")_=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)_=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in _&&"signature"in _&&(typeof _.signedMessage=="string"||_.signedMessage instanceof Uint8Array)&&_.signature instanceof Uint8Array)b=typeof _.signedMessage=="string"?_.signedMessage:new TextDecoder().decode(_.signedMessage),g=_.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in k)||typeof k.signMessage!="function"||!("publicKey"in k)||typeof k!="object"||!k.publicKey||!("toBase58"in k.publicKey)||typeof k.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${N.host} wants you to sign in with your Solana account:`,k.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(s=(n=v==null?void 0:v.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=v==null?void 0:v.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((i=v==null?void 0:v.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((c=v==null?void 0:v.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((d=v==null?void 0:v.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((u=(h=v==null?void 0:v.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||u===void 0)&&u.length?["Resources",...v.signInWithSolana.resources.map(_=>`- ${_}`)]:[]].join(`
`);const S=await k.signMessage(new TextEncoder().encode(b),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=S}}try{const{data:w,error:x}=await _e(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:io(g)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Zr});if(x)throw x;if(!w||!w.session||!w.user){const y=new Uo;return this._returnResult({data:{user:null,session:null},error:y})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:x})}catch(w){if(me(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async _exchangeCodeForSession(t){const r=await Js(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new H4;const{data:a,error:i}=await _e(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Zr});if(await Bt(this.storage,`${this.storageKey}-code-verifier`),i)throw i;if(!a||!a.session||!a.user){const l=new Uo;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:i})}catch(a){if(await Bt(this.storage,`${this.storageKey}-code-verifier`),me(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:a,nonce:i}=t,l=await _e(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:a,nonce:i,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Zr}),{data:c,error:d}=l;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!c||!c.session||!c.user){const h=new Uo;return this._returnResult({data:{user:null,session:null},error:h})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:d})}catch(r){if(me(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,s,a,i;try{if("email"in t){const{email:l,options:c}=t;let d=null,h=null;this.flowType==="pkce"&&([d,h]=await Bo(this.storage,this.storageKey));const{error:u}=await _e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:h},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:u})}if("phone"in t){const{phone:l,options:c}=t,{data:d,error:h}=await _e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(i=c==null?void 0:c.channel)!==null&&i!==void 0?i:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:h})}throw new fc("You must provide either an email or phone number.")}catch(l){if(await Bt(this.storage,`${this.storageKey}-code-verifier`),me(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var r,n;try{let s,a;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,a=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:i,error:l}=await _e(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:Zr});if(l)throw l;if(!i)throw new Error("An error occurred on token verification.");const c=i.session,d=i.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(s){if(me(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var r,n,s,a,i;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await Bo(this.storage,this.storageKey));const d=await _e(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:xP});return!((a=d.data)===null||a===void 0)&&a.url&&zt()&&!(!((i=t.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(d.data.url),this._returnResult(d)}catch(l){if(await Bt(this.storage,`${this.storageKey}-code-verifier`),me(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Er;const{error:s}=await _e(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(me(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:a}=t,{error:i}=await _e(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:i})}else if("phone"in t){const{phone:n,type:s,options:a}=t,{data:i,error:l}=await _e(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:l})}throw new fc("You must provide either an email or phone number and a type")}catch(r){if(me(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Js(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<sh:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const i=await Js(this.userStorage,this.storageKey+"-user");i!=null&&i.user?t.user=i.user:t.user=ih()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const i={value:this.suppressGetSessionWarning};t.user=hP(t.user,i),i.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await _e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:fs}):await this._useSession(async r=>{var n,s,a;const{data:i,error:l}=r;if(l)throw l;return!(!((n=i.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Er}:await _e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:fs})})}catch(r){if(me(r))return oh(r)&&(await this._removeSession(),await Bt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:a}=n;if(a)throw a;if(!s.session)throw new Er;const i=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Bo(this.storage,this.storageKey));const{data:d,error:h}=await _e(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:i.access_token,xform:fs});if(h)throw h;return i.user=d.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),this._returnResult({data:{user:i.user},error:null})})}catch(n){if(await Bt(this.storage,`${this.storageKey}-code-verifier`),me(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Er;const r=Date.now()/1e3;let n=r,s=!0,a=null;const{payload:i}=mc(t.access_token);if(i.exp&&(n=i.exp,s=n<=r),s){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});a={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(r){if(me(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:i,error:l}=r;if(l)throw l;t=(n=i.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Er;const{data:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(me(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!zt())throw new pc("No browser detected.");if(t.error||t.error_description||t.error_code)throw new pc(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new e0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new pc("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new e0("No code detected.");const{data:y,error:v}=await this._exchangeCodeForSession(t.code);if(v)throw v;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:a,refresh_token:i,expires_in:l,expires_at:c,token_type:d}=t;if(!a||!l||!i||!d)throw new pc("No session defined in URL");const h=Math.round(Date.now()/1e3),u=parseInt(l);let f=h+u;c&&(f=parseInt(c));const p=f-h;p*1e3<=Jo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${u}s`);const b=f-u;h-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,f,h):h-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,f,h);const{data:g,error:w}=await this._getUser(a);if(w)throw w;const x={provider_token:n,provider_refresh_token:s,access_token:a,expires_in:u,expires_at:f,refresh_token:i,token_type:d,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:x,redirectType:t.type},error:null})}catch(n){if(me(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Js(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a&&!oh(a))return this._returnResult({error:a});const i=(n=s.session)===null||n===void 0?void 0:n.access_token;if(i){const{error:l}=await this.admin.signOut(i,t);if(l&&!(W4(l)&&(l.status===404||l.status===401||l.status===403)||oh(l)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await Bt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=X4(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:a},error:i}=r;if(i)throw i;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Bo(this.storage,this.storageKey,!0));try{return await _e(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(await Bt(this.storage,`${this.storageKey}-code-verifier`),me(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(me(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:s}=await this._useSession(async a=>{var i,l,c,d,h;const{data:u,error:f}=a;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(i=t.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await _e(this.fetch,"GET",p,{headers:this.headers,jwt:(h=(d=u.session)===null||d===void 0?void 0:d.access_token)!==null&&h!==void 0?h:void 0})});if(s)throw s;return zt()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(me(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:a}}=r;if(s)throw s;const{options:i,provider:l,token:c,access_token:d,nonce:h}=t,u=await _e(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=a==null?void 0:a.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:d,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:Zr}),{data:f,error:p}=u;return p?this._returnResult({data:{user:null,session:null},error:p}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new Uo}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:p}))}catch(s){if(await Bt(this.storage,`${this.storageKey}-code-verifier`),me(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:a,error:i}=r;if(i)throw i;return await _e(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(me(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await rP(async s=>(s>0&&await tP(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await _e(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Zr})),(s,a)=>{const i=200*Math.pow(2,s);return a&&ah(a)&&Date.now()+i-n<Jo})}catch(n){if(this._debug(r,"error",n),me(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),zt()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await Js(this.storage,this.storageKey);if(s&&this.userStorage){let i=await Js(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:s.user},await Xo(this.userStorage,this.storageKey+"-user",i)),s.user=(t=i==null?void 0:i.user)!==null&&t!==void 0?t:ih()}else if(s&&!s.user&&!s.user){const i=await Js(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(s.user=i.user,await Bt(this.storage,this.storageKey+"-user"),await Xo(this.storage,this.storageKey,s)):s.user=ih()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const a=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<sh;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${sh}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:i}=await this._callRefreshToken(s.refresh_token);i&&(console.error(i),ah(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:l}=await this._getUser(s.access_token);!l&&(i!=null&&i.user)?(s.user=i.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(n,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Er;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new au;const{data:a,error:i}=await this._refreshAccessToken(t);if(i)throw i;if(!a.session)throw new Er;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={data:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(s,"error",a),me(a)){const i={data:null,error:a};return ah(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(i),i}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const a=[],i=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){a.push(c)}});if(await Promise.all(i),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Bt(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Xo(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const a=o0(s);await Xo(this.storage,this.storageKey,a)}else{const s=o0(r);await Xo(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Bt(this.storage,this.storageKey),await Bt(this.storage,this.storageKey+"-code-verifier"),await Bt(this.storage,this.storageKey+"-user"),this.userStorage&&await Bt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&zt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Jo);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/Jo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Jo}ms, refresh threshold is ${Qf} ticks`),s<=Qf&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Gw)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!zt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(t){this._debug("#visibilityChangedCallback","error",t)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,i]=await Bo(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(i)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);s.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;return a?this._returnResult({data:null,error:a}):await _e(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(me(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:d}=await _e(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return d?this._returnResult({data:null,error:d}):(t.factorType==="totp"&&c.type==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(me(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return this._returnResult({data:null,error:a});const i=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?RP(t.webauthn.credential_response):OP(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await _e(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:i,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(r){if(me(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return this._returnResult({data:null,error:a});const i=await _e(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(i.error)return i;const{data:l}=i;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:PP(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:TP(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(me(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const a of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])s.all.push(a),a.status==="verified"&&s[a.factor_type].push(a);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(t){var r,n,s,a;if(t)try{const{payload:p}=mc(t);let b=null;p.aal&&(b=p.aal);let g=b;const{data:{user:w},error:x}=await this.getUser(t);if(x)return this._returnResult({data:null,error:x});((n=(r=w==null?void 0:w.factors)===null||r===void 0?void 0:r.filter(k=>k.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(g="aal2");const v=p.amr||[];return{data:{currentLevel:b,nextLevel:g,currentAuthenticationMethods:v},error:null}}catch(p){if(me(p))return this._returnResult({data:null,error:p});throw p}const{data:{session:i},error:l}=await this.getSession();if(l)return this._returnResult({data:null,error:l});if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=mc(i.access_token);let d=null;c.aal&&(d=c.aal);let h=d;((a=(s=i.user.factors)===null||s===void 0?void 0:s.filter(p=>p.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(h="aal2");const f=c.amr||[];return{data:{currentLevel:d,nextLevel:h,currentAuthenticationMethods:f},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await _e(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Er})})}catch(r){if(me(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!s)return this._returnResult({data:null,error:new Er});const i=await _e(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return i.data&&i.data.redirect_url&&zt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(i.data.redirect_url),i})}catch(n){if(me(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!s)return this._returnResult({data:null,error:new Er});const i=await _e(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return i.data&&i.data.redirect_url&&zt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(i.data.redirect_url),i})}catch(n){if(me(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await _e(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Er})})}catch(t){if(me(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?(await _e(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Er})})}catch(r){if(me(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+B4>s)return n;const{data:a,error:i}=await _e(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=s,n=a.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:p,error:b}=await this.getSession();if(b||!p.session)return this._returnResult({data:null,error:b});n=p.session.access_token}const{header:s,payload:a,signature:i,raw:{header:l,payload:c}}=mc(n);r!=null&&r.allowExpired||cP(a.exp);const d=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!d){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:a,header:s,signature:i},error:null}}const h=dP(s.alg),u=await crypto.subtle.importKey("jwk",d,h,!0,["verify"]);if(!await crypto.subtle.verify(h,u,i,Y4(`${l}.${c}`)))throw new Xf("Invalid JWT signature");return{data:{claims:a,header:s,signature:i},error:null}}catch(n){if(me(n))return this._returnResult({data:null,error:n});throw n}}}xl.nextInstanceID={};const BP=xl,zP="2.97.0";let Ri="";typeof Deno<"u"?Ri="deno":typeof document<"u"?Ri="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ri="react-native":Ri="node";const WP={"X-Client-Info":`supabase-js-${Ri}/${zP}`},qP={headers:WP},HP={schema:"public"},VP={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},KP={};function gl(e){"@babel/helpers - typeof";return gl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gl(e)}function GP(e,t){if(gl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(gl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function QP(e){var t=GP(e,"string");return gl(t)=="symbol"?t:t+""}function YP(e,t,r){return(t=QP(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function mt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?f0(Object(r),!0).forEach(function(n){YP(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f0(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const JP=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),XP=()=>Headers,ZP=(e,t,r)=>{const n=JP(r),s=XP();return async(a,i)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let d=new s(i==null?void 0:i.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(a,mt(mt({},i),{},{headers:d}))}};function e3(e){return e.endsWith("/")?e:e+"/"}function t3(e,t){var r,n;const{db:s,auth:a,realtime:i,global:l}=e,{db:c,auth:d,realtime:h,global:u}=t,f={db:mt(mt({},c),s),auth:mt(mt({},d),a),realtime:mt(mt({},h),i),storage:{},global:mt(mt(mt({},u),l),{},{headers:mt(mt({},(r=u==null?void 0:u.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}function r3(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(e3(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var n3=class extends BP{constructor(e){super(e)}},s3=class{constructor(e,t,r){var n,s;this.supabaseUrl=e,this.supabaseKey=t;const a=r3(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const i=`sb-${a.hostname.split(".")[0]}-auth-token`,l={db:HP,realtime:KP,auth:mt(mt({},VP),{},{storageKey:i}),global:qP},c=t3(r??{},l);if(this.storageKey=(n=c.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(s=c.global.headers)!==null&&s!==void 0?s:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(h,u)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(u)} is not possible`)}});else{var d;this.auth=this._initSupabaseAuthClient((d=c.auth)!==null&&d!==void 0?d:{},this.headers,c.global.fetch)}this.fetch=ZP(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(mt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(h=>this.realtime.setAuth(h)).catch(h=>console.warn("Failed to set initial Realtime auth token:",h)),this.rest=new W5(new URL("rest/v1",a).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch,timeout:c.db.timeout,urlLengthLimit:c.db.urlLengthLimit}),this.storage=new L4(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new D5(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:n}=await e.auth.getSession();return(t=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:s,storageKey:a,flowType:i,lock:l,debug:c,throwOnError:d},h,u){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new n3({url:this.authUrl.href,headers:mt(mt({},f),h),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:s,flowType:i,lock:l,debug:c,throwOnError:d,fetch:u,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new a4(this.realtimeUrl.href,mt(mt({},e),{},{params:mt(mt({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const o3=(e,t,r)=>new s3(e,t,r);function a3(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const r=t.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}a3()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const i3="https://xblombwqslecowkngiac.supabase.co",l3="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhibG9tYndxc2xlY293a25naWFjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE4MDU5NjUsImV4cCI6MjA4NzM4MTk2NX0.4z8y4oYdiyRhsJtoG2EJ2F0QZR5VW5fKg-CUvtJyfeI",ue=o3(i3,l3,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),Jw=m.createContext({session:null,user:null,loading:!0,isTestMode:!1,testRole:"worker",setTestMode:()=>{},setTestRole:()=>{},signOut:async()=>{}}),St=()=>m.useContext(Jw);function c3({children:e}){const[t,r]=m.useState(null),[n,s]=m.useState(!0),[a,i]=m.useState(()=>localStorage.getItem("inopnc_test_mode")==="true"),[l,c]=m.useState(()=>localStorage.getItem("inopnc_test_role")||"worker");m.useEffect(()=>{let h=!0;const u=window.setTimeout(()=>{h&&s(!1)},6e3),{data:{subscription:f}}=ue.auth.onAuthStateChange((p,b)=>{h&&(r(b),s(!1))});return ue.auth.getSession().then(({data:{session:p}})=>{h&&r(p)}).catch(()=>{h&&r(null)}).finally(()=>{h&&(window.clearTimeout(u),s(!1))}),()=>{h=!1,window.clearTimeout(u),f.unsubscribe()}},[]),m.useEffect(()=>{localStorage.setItem("inopnc_test_mode",a?"true":"false")},[a]),m.useEffect(()=>{localStorage.setItem("inopnc_test_role",l)},[l]);const d=async()=>{i(!1),await ue.auth.signOut()};return o.jsx(Jw.Provider,{value:{session:t,user:(t==null?void 0:t.user)??null,loading:n,isTestMode:a,testRole:l,setTestMode:i,setTestRole:c,signOut:d},children:e})}function p0({children:e}){const{session:t,loading:r,isTestMode:n}=St();return r?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:o.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):!t&&!n?o.jsx(qc,{to:"/auth",replace:!0}):o.jsx(o.Fragment,{children:e})}/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Xw=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var u3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=m.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:a,iconNode:i,...l},c)=>m.createElement("svg",{ref:c,...u3,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:Xw("lucide",s),...l},[...i.map(([d,h])=>m.createElement(d,h)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=(e,t)=>{const r=m.forwardRef(({className:n,...s},a)=>m.createElement(h3,{ref:a,iconNode:t,className:Xw(`lucide-${d3(e)}`,n),...s}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=ie("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m0=ie("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zw=ie("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=ie("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=ie("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Va=ie("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tn=ie("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=ie("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=ie("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wo=ie("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=ie("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Il=ie("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=ie("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e1=ie("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ka=ie("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=ie("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=ie("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=ie("CloudRain",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=ie("CloudUpload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x0=ie("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t1=ie("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jm=ie("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ed=ie("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=ie("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pd=ie("FileCheck2",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m3 15 2 2 4-4",key:"1lhrkk"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ga=ie("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=ie("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r1=ie("FileUp",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n1=ie("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=ie("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Td=ie("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=ie("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s1=ie("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=ie("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o1=ie("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hc=ie("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=ie("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=ie("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3=ie("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a1=ie("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3=ie("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=ie("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=ie("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=ie("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i1=ie("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=ie("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=ie("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iu=ie("PinOff",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M15 9.34V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H7.89",key:"znwnzq"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v1.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h11",key:"c9qhm2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lu=ie("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const km=ie("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=ie("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nm=ie("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=ie("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=ie("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c1=ie("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=ie("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=ie("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zf=ie("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=ie("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=ie("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=ie("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _m=ie("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sm=ie("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bl=ie("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=ie("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3=ie("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=ie("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),g0=[{key:"home",label:"",path:"/"},{key:"output",label:"",path:"/output"},{key:"worklog",label:"",path:"/worklog"},{key:"site",label:"",path:"/site"},{key:"doc",label:"",path:"/doc"},{key:"request",label:"",path:"/request"}];function D3({onSearch:e,onCert:t,onNotify:r,onMenu:n,notificationCount:s=2}){var d;const a=Ol(),i=Jn(),l=((d=g0.find(h=>h.path==="/"?a.pathname==="/":a.pathname.startsWith(h.path)))==null?void 0:d.key)||"home",c=[{key:"search",label:"",icon:_r,badge:0,onClick:e},{key:"cert",label:"",icon:Ga,badge:0,onClick:t},{key:"notify",label:"",icon:Zw,badge:s,onClick:r},{key:"menu",label:"",icon:a1,badge:0,onClick:n}];return o.jsxs("header",{className:"fixed top-0 left-1/2 -translate-x-1/2 w-full max-w-app bg-card border-b border-border z-[100]",children:[o.jsxs("div",{className:"h-[60px] px-4 flex items-center justify-between",children:[o.jsx("button",{onClick:()=>i("/"),className:"text-xl-app font-[800] text-header-navy tracking-[-0.5px] bg-transparent border-none cursor-pointer p-0",children:"INOPNC"}),o.jsx("div",{className:"flex items-center gap-0.5",children:c.map(({key:h,icon:u,badge:f,onClick:p})=>o.jsxs("button",{onClick:p,className:"relative w-[42px] h-[42px] min-w-[42px] inline-flex items-center justify-center bg-transparent border-none text-header-navy rounded-[10px] cursor-pointer active:opacity-60",children:[o.jsx(u,{className:"w-[21px] h-[21px]",strokeWidth:2.1}),f>0&&o.jsx("span",{className:"absolute top-0 -right-0.5 min-w-[18px] h-[18px] rounded-full px-[5px] inline-flex items-center justify-center text-[11px] font-[800] text-white bg-destructive border-2 border-card",children:f})]},h))})]}),o.jsx("nav",{className:"h-[54px] border-t border-border/50 flex items-center gap-0 overflow-hidden px-1.5",children:g0.map((h,u)=>o.jsxs("div",{className:"contents",children:[u===5&&o.jsx("div",{className:"w-px h-[18px] bg-muted-foreground/30 mx-0.5 flex-shrink-0"}),o.jsxs("button",{onClick:()=>i(h.path),className:U("relative flex-1 min-w-0 h-full inline-flex items-center justify-center px-1 bg-transparent border-none text-[17px] font-bold tracking-[-0.2px] whitespace-nowrap cursor-pointer transition-colors duration-150",l===h.key?"text-header-navy":"text-muted-foreground hover:text-foreground/70",h.key==="request"&&"flex-[1.2]"),children:[h.label,l===h.key&&o.jsx("span",{className:"absolute left-1 right-1 bottom-0 h-[3px] rounded-full bg-header-navy"})]})]},h.key))})]})}const b0=8,L3=[{id:"page_home",title:"",desc:"   ",category:"",link:"/",keywords:["","",""]},{id:"page_worklog",title:"",desc:"   ",category:"",link:"/worklog",keywords:["","","",""]},{id:"page_site",title:"",desc:"   ",category:"",link:"/site",keywords:["","","",""]},{id:"page_doc",title:"",desc:"   ",category:"",link:"/doc",keywords:["","","",""]},{id:"page_output",title:"",desc:"   ",category:"",link:"/output",keywords:["","","",""]},{id:"page_request",title:"",desc:"   ",category:"",link:"/request",keywords:["","",""]},{id:"action_cert",title:"",desc:"  ",category:"",action:"cert",keywords:["","","",""]}],M3=[{id:"worklog",label:"",to:"/worklog",icon:kr},{id:"site",label:"",to:"/site",icon:Ft},{id:"doc",label:"",to:"/doc",icon:n1},{id:"output",label:"",to:"/output",icon:Dt},{id:"cert",label:"",icon:Ga,action:"cert"},{id:"request",label:"",to:"/request",icon:f3}];function $3({isOpen:e,onClose:t,onOpenCert:r}){const[n,s]=m.useState(""),[a,i]=m.useState([]),[l,c]=m.useState([]),[d,h]=m.useState(!1),[u,f]=m.useState(5),p=m.useRef(null),b=Jn();m.useEffect(()=>{if(e){setTimeout(()=>{var _;return(_=p.current)==null?void 0:_.focus()},250);try{const _=JSON.parse(localStorage.getItem("INOPNC_RECENT_SEARCHES_v1")||"[]");c(_)}catch{c([])}}else s(""),h(!1),f(5)},[e]);const g=m.useCallback(_=>{const P=_.trim();if(s(_),P.length<2){h(!1),i([]);return}h(!0);const D=P.toLowerCase().replace(/\s+/g,""),T=L3.filter(M=>[M.title,M.desc,M.category,...M.keywords??[]].join(" ").toLowerCase().replace(/\s+/g,"").includes(D));i(T)},[]),w=m.useCallback(_=>{const P=_.trim();if(P.length<2)return;const D=T=>[P,...T.filter(M=>M!==P)].slice(0,b0);try{const T=JSON.parse(localStorage.getItem("INOPNC_RECENT_SEARCHES_v1")||"[]"),M=D(T);localStorage.setItem("INOPNC_RECENT_SEARCHES_v1",JSON.stringify(M)),c(M)}catch{c(T=>D(T))}},[]),x=m.useCallback(_=>{const P=D=>D.filter(T=>T!==_);try{const D=JSON.parse(localStorage.getItem("INOPNC_RECENT_SEARCHES_v1")||"[]"),T=P(D);localStorage.setItem("INOPNC_RECENT_SEARCHES_v1",JSON.stringify(T)),c(T)}catch{c(D=>P(D))}},[]),y=m.useCallback(()=>{try{localStorage.removeItem("INOPNC_RECENT_SEARCHES_v1")}catch{}c([])},[]),v=()=>{const _=n.trim();_.length<2||(f(5),w(_),g(_))},k=_=>{f(5),s(_),g(_),w(_)},N=m.useCallback(_=>{if(!_)return;const P=n.trim();P.length>=2&&w(P),t(),b(_)},[b,t,n,w]),S=m.useCallback(_=>{const P=n.trim();if(P.length>=2&&w(P),_.action==="cert"){if(r){r(),t();return}N("/doc");return}N(_.to)},[N,t,r,n,w]);return o.jsxs("div",{className:`fixed inset-0 left-0 right-0 mx-auto max-w-app bg-background z-[2000] flex flex-col transition-transform duration-300 ease-[cubic-bezier(0.33,1,0.68,1)] ${e?"translate-y-0 visible":"translate-y-full invisible"}`,children:[o.jsxs("div",{className:"flex items-center gap-2.5 h-[70px] px-4 bg-card border-b border-border shrink-0",children:[o.jsx("button",{onClick:t,className:"bg-transparent border-none p-1",children:o.jsx(Ha,{className:"w-6 h-6 text-foreground"})}),o.jsxs("div",{className:"flex-1 relative flex items-center",children:[o.jsx("input",{ref:p,type:"text",value:n,onChange:_=>g(_.target.value),onKeyDown:_=>_.key==="Enter"&&v(),placeholder:" .",className:"w-full h-[50px] rounded-full bg-[hsl(var(--bg-input))] border border-border px-5 pr-[76px] text-base-app font-medium text-foreground outline-none transition-all focus:bg-card focus:border-primary focus:shadow-input-focus"}),o.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-1",children:n&&o.jsx("button",{onClick:()=>{var _;s(""),g(""),(_=p.current)==null||_.focus()},className:"w-6 h-6 rounded-full bg-muted-foreground/40 text-card flex items-center justify-center border-none cursor-pointer transition-transform hover:scale-110",children:o.jsx(He,{className:"w-3.5 h-3.5"})})})]}),o.jsx("button",{onClick:v,className:"bg-transparent border-none text-primary font-bold text-base-app cursor-pointer whitespace-nowrap pl-3",children:""})]}),o.jsx("div",{className:"flex-1 p-4 overflow-y-auto",children:d?o.jsxs("div",{children:[o.jsxs("span",{className:"text-base-app font-bold text-text-sub block mb-3",children:["  ",a.length,""]}),a.length===0?o.jsxs("div",{className:"text-center py-20 text-muted-foreground flex flex-col items-center",children:[o.jsx("div",{className:"w-20 h-20 rounded-full bg-[hsl(var(--bg-input))] flex items-center justify-center mb-5",children:o.jsx(_r,{className:"w-8 h-8 opacity-60"})}),o.jsx("p",{className:"text-base font-medium mb-2",children:"  "})]}):o.jsxs(o.Fragment,{children:[a.slice(0,u).map((_,P)=>o.jsx("div",{className:"bg-card rounded-2xl p-5 mb-3.5 shadow-soft cursor-pointer transition-transform active:scale-[0.98]",onClick:()=>{if(_.action==="cert"){if(r){r(),t();return}N("/doc");return}if(_.link){N(_.link);return}t()},children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"text-[calc(var(--fs-lg)+1px)] font-[800] text-foreground leading-tight mb-0.5",children:_.title}),o.jsx("div",{className:"text-[calc(var(--fs-sm)+1px)] text-text-sub font-medium",children:_.desc})]}),o.jsx("span",{className:"bg-primary-bg text-primary text-tiny font-bold px-2.5 py-1 rounded-md whitespace-nowrap",children:_.category})]})},_.id)),a.length>5&&o.jsxs("button",{onClick:()=>f(_=>_>=a.length?5:_+5),className:"w-full h-[50px] bg-card border border-border rounded-full text-text-sub font-semibold text-sm-app cursor-pointer flex items-center justify-center gap-1.5 mt-2.5 transition-colors active:bg-background",children:[u>=a.length?"?":"??",u>=a.length?o.jsx(Il,{className:"w-4 h-4"}):o.jsx(Nt,{className:"w-4 h-4"})]})]})]}):o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-base-app font-bold text-text-sub",children:" "}),o.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",l.length,"/",b0,")"]})]}),l.length>0&&o.jsx("button",{onClick:y,className:"text-xs font-semibold text-muted-foreground hover:text-foreground",children:" "})]}),o.jsx("div",{className:"flex gap-2 flex-wrap mb-6",children:l.length===0?o.jsx("div",{className:"text-sm-app text-muted-foreground",children:"  ."}):l.map(_=>o.jsxs("div",{className:"inline-flex items-center gap-1 rounded-full bg-card/70 border border-border px-2.5 py-1.5",children:[o.jsx("button",{onClick:()=>k(_),className:"text-sm-app text-foreground font-semibold",children:_}),o.jsx("button",{onClick:()=>x(_),className:"ml-0.5 inline-flex h-5 w-5 items-center justify-center rounded-full bg-muted text-muted-foreground hover:text-foreground","aria-label":"  ",children:o.jsx(He,{className:"w-3 h-3"})})]},_))}),o.jsx("span",{className:"text-base-app font-bold text-text-sub block mb-3",children:""}),o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2.5",children:M3.map(_=>{const P=_.icon;return o.jsxs("button",{type:"button",onClick:()=>S(_),className:"group h-[50px] w-full rounded-xl border border-border bg-[hsl(var(--bg-input))] px-3 flex items-center gap-2 text-sm-app font-semibold text-foreground transition-colors hover:border-primary/40 hover:bg-primary/5 active:scale-[0.98]",children:[o.jsx("span",{className:"flex h-7 w-7 items-center justify-center rounded-lg bg-card border border-border text-muted-foreground group-hover:text-primary group-hover:border-primary/30",children:o.jsx(P,{className:"h-4 w-4"})}),o.jsx("span",{className:"text-[15px] font-semibold text-foreground",children:_.label})]},_.id)})})]})})]})}const ep="hideNotifications",F3=280,d1=()=>new Date().toDateString(),U3=()=>{if(typeof window>"u")return!1;try{return window.localStorage.getItem(ep)===d1()}catch{return!1}},B3=e=>{if(!(typeof window>"u"))try{e?window.localStorage.setItem(ep,d1()):window.localStorage.removeItem(ep)}catch{}},z3=[{id:1,type:"announcement",title:"  ",desc:"A     .",time:" ",unread:!0},{id:2,type:"document",title:"  ",desc:"     .",time:"10 ",unread:!0},{id:3,type:"success",title:" ",desc:"    .",time:"1 ",unread:!1}],W3={announcement:"",safety:"",schedule:"",document:"",success:"",warning:"",general:""},q3={announcement:j3,safety:T3,schedule:p3,document:Dt,success:e1,warning:m3,general:kr},H3={announcement:"bg-blue-50 text-blue-700 border-blue-200",safety:"bg-red-50 text-red-700 border-red-200",schedule:"bg-indigo-50 text-indigo-700 border-indigo-200",document:"bg-sky-50 text-sky-700 border-sky-200",success:"bg-emerald-50 text-emerald-700 border-emerald-200",warning:"bg-amber-50 text-amber-700 border-amber-200",general:"bg-slate-50 text-slate-700 border-slate-200"},V3={announcement:"bg-blue-100 text-blue-700",safety:"bg-red-100 text-red-700",schedule:"bg-indigo-100 text-indigo-700",document:"bg-sky-100 text-sky-700",success:"bg-emerald-100 text-emerald-700",warning:"bg-amber-100 text-amber-700",general:"bg-slate-100 text-slate-700"};function K3({isOpen:e,onClose:t,onBadgeUpdate:r}){const[n,s]=m.useState(z3),[a,i]=m.useState(!1),[l,c]=m.useState(null),[d,h]=m.useState(e),[u,f]=m.useState(!1),p=m.useMemo(()=>n.filter(v=>v.unread).length,[n]);m.useEffect(()=>{r==null||r(p)},[r,p]),m.useEffect(()=>{e&&i(U3())},[e]),m.useEffect(()=>{if(e){h(!0);const k=window.requestAnimationFrame(()=>f(!0));return()=>window.cancelAnimationFrame(k)}f(!1);const v=window.setTimeout(()=>h(!1),F3);return()=>window.clearTimeout(v)},[e]),m.useEffect(()=>{if(!d||typeof document>"u")return;const v=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=v}},[d]);const b=l?n.find(v=>v.id===l):null,g=v=>{s(k=>k.map(N=>N.id===v?{...N,unread:!1}:N))},w=()=>{s(v=>v.map(k=>({...k,unread:!1})))},x=()=>{B3(a),c(null),t()},y=v=>{c(v),g(v)};return d?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:`fixed inset-0 z-[1500] bg-black/35 transition-opacity duration-200 ${u?"opacity-100":"pointer-events-none opacity-0"}`,onClick:x}),o.jsxs("section",{className:`fixed bottom-0 left-1/2 z-[2500] flex h-[70dvh] w-full max-w-app -translate-x-1/2 flex-col overflow-hidden rounded-t-2xl border border-b-0 border-border bg-card shadow-2xl transition-transform duration-300 ease-[cubic-bezier(0.22,1,0.36,1)] will-change-transform ${u?"translate-y-0":"translate-y-full"}`,children:[o.jsxs("header",{className:"flex h-[60px] items-center justify-between border-b border-border px-5",children:[o.jsx("span",{className:"absolute left-1/2 top-2 h-1 w-12 -translate-x-1/2 rounded-full bg-border"}),o.jsx("h3",{className:"text-lg font-bold text-foreground",children:""}),o.jsx("button",{onClick:x,className:"rounded-full border border-border px-3 py-1 text-xs font-bold text-muted-foreground transition hover:bg-accent hover:text-foreground",children:""})]}),o.jsxs("div",{className:"overflow-y-auto overscroll-contain px-4 py-3 pb-[calc(16px+env(safe-area-inset-bottom,0px))]",children:[n.length>0?o.jsx("div",{className:"space-y-3",children:n.map(v=>{const k=q3[v.type]??Zw;return o.jsxs("button",{onClick:()=>y(v.id),className:`flex w-full items-start gap-3 rounded-xl border p-3 text-left transition hover:-translate-y-0.5 hover:shadow-sm ${v.unread?"border-primary/30 bg-primary-bg/50":"border-border bg-muted/20"}`,children:[o.jsx("span",{className:`mt-0.5 inline-flex h-11 w-11 shrink-0 items-center justify-center rounded-xl border ${H3[v.type]}`,children:o.jsx(k,{className:"h-5 w-5"})}),o.jsxs("span",{className:"min-w-0 flex-1",children:[o.jsxs("span",{className:"mb-1 flex items-center gap-2",children:[o.jsx("span",{className:`inline-flex rounded-full px-2 py-0.5 text-[11px] font-bold ${V3[v.type]}`,children:W3[v.type]}),o.jsx("span",{className:"truncate text-sm font-bold text-foreground",children:v.title})]}),o.jsx("span",{className:"line-clamp-2 block text-sm text-muted-foreground",children:v.desc}),o.jsx("span",{className:"mt-1 block text-[11px] text-muted-foreground/80",children:v.time})]})]},v.id)})}):o.jsx("div",{className:"py-10 text-center text-sm text-muted-foreground",children:"  ."}),b&&o.jsxs("article",{className:"mt-4 rounded-xl border border-primary/20 bg-primary/5 p-4",children:[o.jsx("div",{className:"mb-1 text-xs font-bold text-primary",children:" "}),o.jsx("div",{className:"text-base font-bold text-foreground",children:b.title}),o.jsx("p",{className:"mt-2 text-sm leading-relaxed text-muted-foreground",children:b.desc})]}),p>0&&o.jsx("button",{onClick:w,className:"mt-4 w-full rounded-xl bg-header-navy py-2.5 text-sm font-bold text-header-navy-foreground transition hover:opacity-90",children:"  "}),o.jsxs("label",{className:"mt-4 flex cursor-pointer items-center gap-2 text-sm text-foreground",children:[o.jsx("input",{type:"checkbox",checked:a,onChange:v=>i(v.target.checked),className:"h-4 w-4 rounded border-border"}),"   "]})]})]})]}):null}function G3({isOpen:e,onClose:t,onOpenAccount:r}){const n=Jn(),s=a=>{t(),n(a)};return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:`fixed inset-0 bg-foreground/40 z-[1500] transition-opacity duration-300 ${e?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,onClick:t}),o.jsxs("div",{className:`fixed top-0 bottom-0 left-0 w-[85%] max-w-[320px] bg-card z-[2500] flex flex-col transition-transform duration-300 ease-[cubic-bezier(0.33,1,0.68,1)] ${e?"translate-x-0 visible":"-translate-x-full invisible"}`,style:{left:"max(0px, calc(50% - 300px))"},children:[o.jsxs("div",{className:"px-6 pt-[34px] pb-6 border-b border-border",children:[o.jsxs("div",{className:"flex justify-between mb-2.5",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-xl-app font-[800] text-foreground",children:""}),o.jsx("span",{className:"text-tiny font-bold text-primary bg-primary-bg px-2 py-1 rounded",children:""})]}),o.jsx("button",{onClick:t,className:"border border-border bg-transparent rounded-lg px-3.5 py-1.5 text-sm-app text-text-sub cursor-pointer",children:""})]}),o.jsx("div",{className:"text-sm-app text-text-sub",children:"manager@inopnc.com"})]}),o.jsxs("ul",{className:"list-none p-6 m-0 flex-1 overflow-y-auto",children:[[{label:"",path:"/"},{label:"",path:"/output"},{label:"",path:"/worklog"},{label:"",path:"/site"},{label:"",path:"/doc"}].map(a=>o.jsx("li",{className:"mb-6",children:o.jsx("button",{onClick:()=>s(a.path),className:"text-lg-app font-bold text-foreground cursor-pointer bg-transparent border-none p-0",children:a.label})},a.label)),o.jsxs("li",{className:"mb-6 flex justify-between items-center",children:[o.jsx("span",{className:"text-lg-app font-bold text-foreground",children:""}),o.jsx("button",{onClick:()=>{t(),r()},className:"text-sm-app font-bold text-primary bg-card border border-primary px-3.5 py-2 rounded-lg cursor-pointer",children:""})]})]}),o.jsx("div",{className:"px-6 py-6 border-t border-border",children:o.jsx("button",{onClick:()=>{t(),n("/auth")},className:"w-full h-14 bg-header-navy text-white border-none rounded-xl text-base-app font-bold cursor-pointer",children:""})})]})]})}function Q3({isOpen:e,onClose:t}){const[r,n]=m.useState(""),[s,a]=m.useState("010-1234-5678"),[i,l]=m.useState(!0),[c,d]=m.useState(!1),h=()=>{V.success("  ."),t()};return o.jsxs("div",{className:`fixed inset-0 left-0 right-0 mx-auto max-w-app bg-background z-[2000] flex flex-col transition-transform duration-300 ease-[cubic-bezier(0.33,1,0.68,1)] ${e?"translate-y-0 visible":"translate-y-full invisible"}`,children:[o.jsxs("div",{className:"h-[60px] px-4 flex items-center justify-between bg-card border-b border-border shrink-0",children:[o.jsx("button",{onClick:t,className:"bg-transparent border-none p-1",children:o.jsx(Ha,{className:"w-6 h-6 text-foreground"})}),o.jsx("span",{className:"text-lg-app font-bold text-foreground",children:" "}),o.jsx("button",{onClick:h,className:"text-base-app font-bold text-primary bg-transparent border-none cursor-pointer",children:""})]}),o.jsxs("div",{className:"flex-1 px-5 py-6 overflow-y-auto",children:[o.jsx("div",{className:"flex flex-col items-center mb-8",children:o.jsxs("div",{className:"w-[100px] h-[100px] rounded-full bg-border relative flex items-center justify-center text-[36px] font-bold text-muted-foreground border-4 border-card shadow-lg",children:[o.jsx("span",{children:""}),o.jsx("button",{className:"absolute bottom-0 right-0 w-[34px] h-[34px] rounded-full bg-header-navy text-white border-[3px] border-card flex items-center justify-center cursor-pointer z-10 shadow-md",children:o.jsx(Tn,{className:"w-4 h-4"})})]})}),o.jsxs("section",{className:"mb-8",children:[o.jsx("span",{className:"text-sm-app font-bold text-text-sub block mb-3",children:" "}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-base-app text-text-sub mb-1.5 font-bold",children:""}),o.jsx("input",{type:"text",value:r,onChange:u=>n(u.target.value),className:"w-full h-12 px-3.5 border border-border rounded-xl text-base-app text-foreground bg-[hsl(var(--bg-input))] font-medium outline-none transition-all focus:border-primary focus:shadow-input-focus"})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-base-app text-text-sub mb-1.5 font-bold",children:""}),o.jsx("input",{type:"email",value:"manager@inopnc.com",disabled:!0,className:"w-full h-12 px-3.5 border border-border rounded-xl text-base-app text-foreground bg-[hsl(var(--bg-input))] font-medium opacity-70"})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-base-app text-text-sub mb-1.5 font-bold",children:""}),o.jsx("input",{type:"tel",value:s,onChange:u=>a(u.target.value),className:"w-full h-12 px-3.5 border border-border rounded-xl text-base-app text-foreground bg-[hsl(var(--bg-input))] font-medium outline-none transition-all focus:border-primary focus:shadow-input-focus"})]})]}),o.jsxs("section",{className:"mb-8",children:[o.jsx("span",{className:"text-sm-app font-bold text-text-sub block mb-3",children:" "}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-base-app text-text-sub mb-1.5 font-bold",children:" "}),o.jsx("input",{type:"password",placeholder:"  ",className:"w-full h-12 px-3.5 border border-border rounded-xl text-base-app text-foreground bg-[hsl(var(--bg-input))] font-medium outline-none transition-all focus:border-primary focus:shadow-input-focus placeholder:text-muted-foreground"})]})]}),o.jsxs("section",{className:"mb-8",children:[o.jsx("span",{className:"text-sm-app font-bold text-text-sub block mb-3",children:" "}),o.jsxs("div",{className:"flex justify-between items-center py-4 border-b border-border",children:[o.jsx("span",{className:"text-base-app text-foreground",children:" "}),o.jsxs("label",{className:"relative inline-block w-12 h-[26px]",children:[o.jsx("input",{type:"checkbox",checked:i,onChange:u=>l(u.target.checked),className:"opacity-0 w-0 h-0 peer"}),o.jsx("span",{className:"absolute cursor-pointer inset-0 bg-border rounded-full transition-colors peer-checked:bg-primary before:content-[''] before:absolute before:h-5 before:w-5 before:left-[3px] before:bottom-[3px] before:bg-white before:rounded-full before:transition-transform peer-checked:before:translate-x-[22px]"})]})]}),o.jsxs("div",{className:"flex justify-between items-center py-4",children:[o.jsx("span",{className:"text-base-app text-foreground",children:" "}),o.jsxs("label",{className:"relative inline-block w-12 h-[26px]",children:[o.jsx("input",{type:"checkbox",checked:c,onChange:u=>d(u.target.checked),className:"opacity-0 w-0 h-0 peer"}),o.jsx("span",{className:"absolute cursor-pointer inset-0 bg-border rounded-full transition-colors peer-checked:bg-primary before:content-[''] before:absolute before:h-5 before:w-5 before:left-[3px] before:bottom-[3px] before:bg-white before:rounded-full before:transition-transform peer-checked:before:translate-x-[22px]"})]})]})]}),o.jsxs("section",{className:"mb-8",children:[o.jsx("span",{className:"text-sm-app font-bold text-text-sub block mb-3",children:""}),o.jsxs("div",{className:"flex justify-between mb-5",children:[o.jsx("span",{className:"text-sm-app text-text-sub",children:" "}),o.jsx("span",{className:"text-sm-app text-foreground font-semibold",children:"v1.2.0"})]}),o.jsx("button",{onClick:()=>alert(" "),className:"text-destructive text-sm-app font-bold bg-transparent border-none p-0 cursor-pointer underline",children:" "})]})]})]})}function u1({title:e,onBack:t,onClose:r,onReset:n,onSave:s,resetDisabled:a,saveDisabled:i,backAriaLabel:l="",resetAriaLabel:c=" ",saveAriaLabel:d="  ",closeAriaLabel:h="",titleClassName:u,className:f,style:p}){return o.jsxs("header",{className:U("flex items-center justify-between border-b border-white/15 bg-black px-2",f),style:p,children:[o.jsxs("div",{className:"flex min-w-0 flex-1 items-center gap-1.5",children:[o.jsx("button",{type:"button",onClick:t,className:"rounded-full p-2 text-white transition active:bg-white/15","aria-label":l,children:o.jsx(wo,{className:"h-6 w-6"})}),o.jsx("span",{className:U("truncate text-lg-app font-bold text-white",u),children:e})]}),o.jsxs("div",{className:"flex shrink-0 items-center gap-1.5",children:[n&&o.jsx("button",{type:"button",onClick:n,disabled:a,className:"rounded-full p-2 text-white transition active:bg-white/15 disabled:cursor-not-allowed disabled:opacity-40","aria-label":c,children:o.jsx(Nm,{className:"h-5 w-5"})}),s&&o.jsx("button",{type:"button",onClick:s,disabled:i,className:"rounded-full p-2 text-white transition active:bg-white/15 disabled:cursor-not-allowed disabled:opacity-40","aria-label":d,children:o.jsx(jm,{className:"h-5 w-5"})}),o.jsx("button",{type:"button",onClick:r,className:"rounded-full p-2 text-white transition active:bg-white/15","aria-label":h,children:o.jsx(He,{className:"h-6 w-6"})})]})]})}function Y3({onZoomOut:e,onFit:t,onTogglePan:r,onZoomIn:n,onShare:s,panActive:a=!1,fitActive:i=!1,zoomOutDisabled:l=!1,zoomInDisabled:c=!1,className:d}){return o.jsxs("div",{"data-no-pan":"1",className:U("fixed bottom-[calc(env(safe-area-inset-bottom,0px)+12px)] left-1/2 z-[10005] flex w-[min(92vw,420px)] -translate-x-1/2 items-center justify-between gap-2 rounded-[50px] border border-[#333] bg-[#222] px-4 py-2.5 shadow-[0_10px_30px_rgba(0,0,0,0.5)] backdrop-blur",d),children:[o.jsxs("button",{"data-no-pan":"1",type:"button",onClick:e,disabled:l,className:"flex min-h-11 min-w-[44px] flex-1 flex-col items-center justify-center gap-0.5 rounded-full border-none bg-transparent text-[10px] font-medium text-white opacity-80 transition-opacity hover:opacity-100 disabled:cursor-not-allowed disabled:opacity-40",children:[o.jsx(N3,{className:"w-5 h-5"}),""]}),o.jsxs("button",{"data-no-pan":"1",type:"button",onClick:t,className:U("flex min-h-11 min-w-[44px] flex-1 flex-col items-center justify-center gap-0.5 rounded-full border-none bg-transparent text-[10px] font-medium transition-opacity",i?"text-primary opacity-100 font-bold":"text-white opacity-80 hover:opacity-100"),children:[o.jsx(l1,{className:"w-5 h-5"}),""]}),o.jsxs("button",{"data-no-pan":"1",type:"button",onClick:r,className:U("flex min-h-11 min-w-[44px] flex-1 flex-col items-center justify-center gap-0.5 rounded-full border-none bg-transparent text-[10px] font-medium transition-opacity",a?"text-primary opacity-100 font-bold":"text-white opacity-80 hover:opacity-100"),children:[o.jsx(v3,{className:"w-5 h-5"}),""]}),o.jsxs("button",{"data-no-pan":"1",type:"button",onClick:n,disabled:c,className:"flex min-h-11 min-w-[44px] flex-1 flex-col items-center justify-center gap-0.5 rounded-full border-none bg-transparent text-[10px] font-medium text-white opacity-80 transition-opacity hover:opacity-100 disabled:cursor-not-allowed disabled:opacity-40",children:[o.jsx(km,{className:"w-5 h-5"}),""]}),o.jsxs("button",{"data-no-pan":"1",type:"button",onClick:s,className:"flex min-h-11 min-w-[44px] flex-1 flex-col items-center justify-center gap-0.5 rounded-full border-none bg-transparent text-[10px] font-medium text-white opacity-80 transition-opacity hover:opacity-100",children:[o.jsx(c1,{className:"w-5 h-5"}),""]})]})}function J3(e){return o.jsx(Y3,{...e})}function X3({children:e,headerHeightPx:t,toolbarHeightPx:r,className:n,style:s}){return o.jsx("div",{className:U("relative flex-1 overflow-auto overscroll-contain bg-[#333]",n),style:{WebkitOverflowScrolling:"touch",touchAction:"pan-x pan-y pinch-zoom",paddingTop:`calc(${t}px + env(safe-area-inset-top))`,paddingBottom:`calc(${r}px + env(safe-area-inset-bottom) + 12px)`,...s},children:e})}const Z3=280,eT="dev",v0=`/@confirm3.html?v=${eT}`,tT="width=device-width, initial-scale=1.0, minimum-scale=0.5, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover",rT=e=>{let t=e.querySelector('meta[name="viewport"]');!t&&e.head&&(t=e.createElement("meta"),t.name="viewport",e.head.appendChild(t)),t&&(t.content=tT);const r=e.getElementById("viewport");r&&(r.style.touchAction="pan-x pan-y");const n=e.querySelector(".controls-pill");n&&(n.style.bottom="max(20px, env(safe-area-inset-bottom, 0px))")};function nT({isOpen:e,onClose:t}){const r=m.useRef(null),n=m.useRef(!1),[s,a]=m.useState(e),[i,l]=m.useState(!1),[c,d]=m.useState(!1),[h,u]=m.useState(!1);m.useEffect(()=>{if(typeof document>"u")return;const b=document.createElement("link");return b.rel="preload",b.as="document",b.href=v0,document.head.appendChild(b),()=>{var g;(g=b.parentNode)==null||g.removeChild(b)}},[]),m.useEffect(()=>{if(e){a(!0),d(n.current),u(!1);const b=window.requestAnimationFrame(()=>l(!0));return()=>window.cancelAnimationFrame(b)}if(l(!1),!n.current){const b=window.setTimeout(()=>a(!1),Z3);return()=>window.clearTimeout(b)}},[e]),m.useEffect(()=>{if(!e||typeof document>"u")return;const b=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=b}},[e]),m.useEffect(()=>{if(!s)return;const b=g=>{g.key==="Escape"&&t()};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[s,t]);const f=m.useCallback(()=>{var b,g;try{const w=(b=r.current)==null?void 0:b.contentDocument;if(!w)return;rT(w),(g=w.body)==null||g.classList.add("iframe-mode"),n.current=!0,u(!1),d(!0)}catch{d(!1),u(!0)}},[]),p=m.useCallback(b=>{var x,y;const g=(x=r.current)==null?void 0:x.contentDocument;(y=r.current)==null||y.contentWindow;const w=g==null?void 0:g.getElementById(b);if(!w){V.error("   .");return}w.click()},[]);return s?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:`fixed inset-0 z-[3000] bg-black/45 transition-opacity duration-200 ${i?"opacity-100":"pointer-events-none opacity-0"}`,onClick:t}),o.jsxs("section",{className:`fixed inset-0 left-1/2 z-[3100] flex w-full max-w-app -translate-x-1/2 flex-col overflow-hidden bg-black shadow-2xl transition-transform duration-300 ease-[cubic-bezier(0.22,1,0.36,1)] ${i?"translate-y-0":"pointer-events-none translate-y-full"}`,style:{paddingTop:"env(safe-area-inset-top)"},children:[o.jsx(u1,{title:"",onBack:t,onClose:t,onReset:()=>p("btnReset"),onSave:()=>p("btnDownload"),resetDisabled:!c,saveDisabled:!c,backAriaLabel:"",resetAriaLabel:" ",saveAriaLabel:" ",closeAriaLabel:" ",className:"h-[60px] min-h-[60px]"}),o.jsxs("div",{className:"relative flex-1 bg-black",children:[o.jsx("iframe",{ref:r,title:"",src:v0,onLoad:f,onError:()=>{d(!1),u(!0)},className:"h-full w-full border-0 bg-black",allow:"fullscreen",loading:"eager"}),!c&&!h&&o.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center text-sm-app font-semibold text-white/70",children:"  ..."}),h&&o.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center gap-3 bg-black/70 px-6 text-center",children:[o.jsx("p",{className:"text-sm-app font-semibold text-white",children:"  ."}),o.jsx("button",{onClick:()=>{var b,g;u(!1),d(!1),(g=(b=r.current)==null?void 0:b.contentWindow)==null||g.location.reload()},className:"rounded-lg border border-white/40 px-3 py-1.5 text-xs font-bold text-white",children:" "})]})]})]})]}):null}const sT="modulepreload",oT=function(e){return"/"+e},y0={},tp=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=oT(c),c in y0)return;y0[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const u=document.createElement("link");if(u.rel=d?"stylesheet":sT,d||(u.as="script"),u.crossOrigin="",u.href=c,l&&u.setAttribute("nonce",l),document.head.appendChild(u),d)return new Promise((f,p)=>{u.addEventListener("load",f),u.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return s.then(i=>{for(const l of i||[])l.status==="rejected"&&a(l.reason);return t().catch(a)})},aT="inopnc_offline",iT=1,Gr="syncQueue",Rd="offlineMedia";function ii(){return new Promise((e,t)=>{const r=indexedDB.open(aT,iT);r.onupgradeneeded=()=>{const n=r.result;n.objectStoreNames.contains(Gr)||n.createObjectStore(Gr,{keyPath:"id",autoIncrement:!0}),n.objectStoreNames.contains(Rd)||n.createObjectStore(Rd,{keyPath:"id",autoIncrement:!0}).createIndex("siteDate",["siteValue","workDate"])},r.onsuccess=()=>e(r.result),r.onerror=()=>t(r.error)})}async function lT(e){const t=await ii();return new Promise((r,n)=>{const i=t.transaction(Gr,"readwrite").objectStore(Gr).add(e);i.onsuccess=()=>r(i.result),i.onerror=()=>n(i.error)})}async function cT(){const e=await ii();return new Promise((t,r)=>{const s=e.transaction(Gr,"readonly").objectStore(Gr).getAll();s.onsuccess=()=>t(s.result),s.onerror=()=>r(s.error)})}async function dT(e){const t=await ii();return new Promise((r,n)=>{const s=t.transaction(Gr,"readwrite");s.objectStore(Gr).delete(e),s.oncomplete=()=>r(),s.onerror=()=>n(s.error)})}async function w0(e,t){const r=await ii();return new Promise((n,s)=>{const a=r.transaction(Gr,"readwrite"),i=a.objectStore(Gr),l=i.get(e);l.onsuccess=()=>{l.result&&i.put({...l.result,...t})},a.oncomplete=()=>n(),a.onerror=()=>s(a.error)})}async function uT(){const e=await ii();return new Promise((t,r)=>{const s=e.transaction(Gr,"readonly").objectStore(Gr).count();s.onsuccess=()=>t(s.result),s.onerror=()=>r(s.error)})}async function hT(e){const t=await ii();return new Promise((r,n)=>{const a=t.transaction(Rd,"readwrite").objectStore(Rd).add(e);a.onsuccess=()=>r(a.result),a.onerror=()=>n(a.error)})}async function h1(){const e=await cT();let t=0,r=0;for(const n of e)if(n.status!=="syncing")try{switch(await w0(n.id,{status:"syncing"}),n.action){case"save_worklog":{const{saveWorklog:s}=await tp(async()=>{const{saveWorklog:a}=await Promise.resolve().then(()=>OT);return{saveWorklog:a}},void 0);s(n.payload);break}case"upload_photo":case"upload_drawing":{const s=n.action==="upload_photo"?"sitePhotos":"siteDrawings",a=JSON.parse(localStorage.getItem(s)||"{}"),{siteValue:i,workDate:l,data:c}=n.payload;a[i]||(a[i]={}),a[i][l]||(a[i][l]=[]),a[i][l].push(c),localStorage.setItem(s,JSON.stringify(a));break}}await dT(n.id),t++}catch(s){console.error("Sync failed for item:",n.id,s),await w0(n.id,{status:"failed",retryCount:(n.retryCount||0)+1}),r++}return{synced:t,failed:r}}function f1(){const[e,t]=m.useState(navigator.onLine),[r,n]=m.useState(0),[s,a]=m.useState(!1),i=m.useCallback(async()=>{try{const c=await uT();n(c)}catch{}},[]),l=m.useCallback(async()=>{if(!(!navigator.onLine||s)){a(!0);try{const c=await h1();c.synced>0&&V.success(`${c.synced}  `),c.failed>0&&V.error(`${c.failed}   -  `),await i()}catch(c){console.error("Sync error:",c)}finally{a(!1)}}},[s,i]);return m.useEffect(()=>{const c=()=>{t(!0),V.success("  -    ..."),l()},d=()=>{t(!1),V.warning("  -   ",{duration:4e3})};return window.addEventListener("online",c),window.addEventListener("offline",d),i(),()=>{window.removeEventListener("online",c),window.removeEventListener("offline",d)}},[l,i]),{isOnline:e,pendingCount:r,isSyncing:s,syncNow:l,refreshPending:i}}function fT(){const{isOnline:e,pendingCount:t,isSyncing:r,syncNow:n}=f1();return e&&t===0?null:o.jsxs("div",{className:`fixed bottom-0 left-0 right-0 z-50 flex items-center justify-between px-4 py-2.5 text-sm font-medium transition-all duration-300 ${e?"bg-amber-500 text-white":"bg-red-600 text-white"}`,style:{maxWidth:600,margin:"0 auto"},children:[o.jsxs("div",{className:"flex items-center gap-2",children:[e?o.jsx(I3,{className:"w-4 h-4"}):o.jsx(A3,{className:"w-4 h-4 animate-pulse"}),o.jsx("span",{children:e?`   ${t}`:"  -      "})]}),e&&t>0&&o.jsxs("button",{onClick:n,disabled:r,className:"flex items-center gap-1 px-3 py-1 rounded-full bg-white/20 hover:bg-white/30 transition-colors disabled:opacity-50",children:[r?o.jsx(l1,{className:"w-3.5 h-3.5 animate-spin"}):o.jsx(b3,{className:"w-3.5 h-3.5"}),o.jsx("span",{className:"text-xs",children:r?" ...":""})]})]})}const pT="hideNotifications",mT=()=>{if(typeof window>"u")return!1;try{return window.localStorage.getItem(pT)===new Date().toDateString()}catch{return!1}};function xT(){const[e,t]=m.useState(!1),[r,n]=m.useState(!1),[s,a]=m.useState(!1),[i,l]=m.useState(!1),[c,d]=m.useState(!1),[h,u]=m.useState(2),[f,p]=m.useState(!1),[b,g]=m.useState(!1);m.useEffect(()=>{r||f||h<=0||mT()||(n(!0),p(!0))},[f,h,r]),m.useEffect(()=>{const x=y=>{if(y.origin!==window.location.origin)return;const v=y.data;!v||v.type!=="inopnc-drawing"||g(!!v.open)};return window.addEventListener("message",x),()=>window.removeEventListener("message",x)},[]);const w=()=>{p(!0),n(!0)};return o.jsxs("div",{className:"inopnc-app",style:{"--app-header-height":b?"0px":"114px","--home-section-mt":b?"0px":"-0.5rem","--home-section-mb":b?"0px":"-1.5rem"},children:[!b&&o.jsx(D3,{onSearch:()=>t(!0),onCert:()=>d(!0),onNotify:w,onMenu:()=>a(!0),notificationCount:h}),o.jsx("main",{className:"px-4",style:{paddingTop:"var(--app-header-height, 114px)",paddingBottom:b?"0px":"1.5rem"},children:o.jsx(_5,{})}),o.jsx($3,{isOpen:e,onClose:()=>t(!1),onOpenCert:()=>d(!0)}),o.jsx(K3,{isOpen:r,onClose:()=>n(!1),onBadgeUpdate:u}),o.jsx(G3,{isOpen:s,onClose:()=>a(!1),onOpenAccount:()=>l(!0)}),o.jsx(Q3,{isOpen:i,onClose:()=>l(!1)}),o.jsx(nT,{isOpen:c,onClose:()=>d(!1)}),o.jsx(fT,{})]})}const gT="/assets/flash-CePliuWt.png",bT="/assets/site-info-CZu9Bop0.png",vT="/assets/worklog-Dy8Q5q5X.png",yT="/assets/output-DXfNHp1M.png",wT="/assets/docs-C1gEQT8z.png",jT="/assets/request-BEN5-YEM.png",j0=[{id:1,name:"  101",status:"ing",days:120,mp:450,address:"   1 12-3",worker:8,manager:"",safety:"",affil:"",lastUpdate:"2025-12-24 08:30",hasDraw:!0,hasPhoto:!0,hasPTW:!0,hasLog:!0,hasAction:!1},{id:2,name:"  ",status:"wait",days:45,mp:120,address:"   123-45",worker:3,manager:"",safety:"",affil:"",lastUpdate:"2025-12-24 09:00",hasDraw:!0,hasPhoto:!1,hasPTW:!1,hasLog:!0,hasAction:!0}],k0={:{text:" 2C",icon:x0},:{text:" 4C",icon:g3},:{text:" 8C",icon:Zf},:{text:" 3C",icon:Zf},:{text:" 2C",icon:x0}};function kT(e){const t=Object.keys(k0).find(r=>e.includes(r));return t?k0[t]:{text:" 3C",icon:Zf}}const NT=[{label:"",path:"/site",icon:bT},{label:"",path:"/worklog",icon:vT,badge:3,badgeColor:"bg-green-600"},{label:"",path:"/output",icon:yT},{label:"",path:"/doc",icon:wT},{label:"",path:"/request",icon:jT,badge:2,badgeColor:"bg-violet-500"}],N0=[{type:"",text:"      .",badgeCls:"bg-header-navy"},{type:"",text:" PDF   .",badgeCls:"bg-primary"},{type:"",text:"     .",badgeCls:"bg-header-navy"}];function _T(){const e=Jn(),t=new Date,r=`${String(t.getMonth()+1).padStart(2,"0")}.${String(t.getDate()).padStart(2,"0")} (${["","","","","","",""][t.getDay()]})`,[n,s]=m.useState(0);return m.useEffect(()=>{const a=setInterval(()=>s(i=>(i+1)%N0.length),4e3);return()=>clearInterval(a)},[]),o.jsxs("div",{className:"animate-fade-in",children:[o.jsxs("div",{className:"mb-5 pt-2.5",children:[o.jsxs("div",{className:"flex items-center gap-1.5 mb-4 px-1",children:[o.jsx("img",{src:gT,alt:"",className:"w-5 h-5 object-contain"}),o.jsx("span",{className:"text-[20px] font-bold text-header-navy tracking-tight",children:""})]}),o.jsx("div",{className:"grid grid-cols-5 gap-0.5",children:NT.map(a=>o.jsxs("button",{onClick:()=>e(a.path),className:"flex flex-col items-center gap-1.5 py-1 cursor-pointer bg-transparent border-none active:scale-95 transition-transform",children:[o.jsxs("div",{className:"relative inline-block",children:[o.jsx("img",{src:a.icon,alt:a.label,className:"w-[46px] h-[46px] object-contain drop-shadow-[0_2px_4px_rgba(0,0,0,0.06)]"}),a.badge&&o.jsx("span",{className:U("absolute top-0 right-0 translate-x-1/2 -translate-y-1/2 min-w-[18px] h-[18px] px-[5px] rounded-full text-white text-[10px] font-black flex items-center justify-center shadow-[0_2px_6px_rgba(0,0,0,0.25)] border-2 border-background z-10 leading-none",a.badgeColor,a.badgeColor==="bg-violet-500"&&"animate-pulse"),children:a.badge})]}),o.jsx("span",{className:"text-[13px] font-bold text-foreground text-center whitespace-nowrap tracking-tight",children:a.label})]},a.label))})]}),o.jsxs("div",{className:"bg-card rounded-xl border border-border shadow-soft h-14 mb-5 flex items-center px-4 gap-3 relative overflow-hidden",children:[N0.map((a,i)=>o.jsxs("div",{className:U("absolute inset-0 flex items-center px-4 gap-3 transition-all duration-500",i===n?"opacity-100 translate-x-0":"opacity-0 translate-x-full"),children:[o.jsx("span",{className:U("text-[12px] font-bold px-2.5 py-1.5 rounded-md text-white whitespace-nowrap",a.badgeCls),children:a.type}),o.jsx("span",{className:"text-[15px] font-medium text-foreground flex-1 truncate",children:a.text})]},i)),o.jsx(Ls,{className:"w-[18px] h-[18px] text-text-sub relative z-10 ml-auto"})]}),o.jsxs("div",{className:"bg-card rounded-2xl p-[22px] mb-6 shadow-soft",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ft,{className:"w-5 h-5 text-header-navy"}),o.jsx("span",{className:"text-[19px] font-[800] text-header-navy",children:"  "})]}),o.jsx("span",{className:"text-[14px] text-primary bg-primary/10 px-3 py-1.5 rounded-full font-bold",children:r})]}),o.jsx("div",{className:"flex flex-col gap-3",children:j0.map(a=>o.jsxs("div",{className:"flex justify-between items-center bg-muted/50 p-3.5 px-[18px] rounded-xl",children:[o.jsx("span",{className:"text-[16px] font-bold text-foreground flex-1 truncate pr-2",children:a.name}),o.jsxs("span",{className:"text-[16px] font-bold text-primary flex items-center gap-1",children:[o.jsx(bl,{className:"w-[18px] h-[18px]"})," ",a.worker,""]})]},a.id))})]}),j0.map(a=>{const i=kT(a.address),l=i.icon;return o.jsxs("div",{className:"bg-card rounded-2xl shadow-soft mb-5 overflow-hidden relative",children:[o.jsx("span",{className:U("absolute top-0 right-0 text-[11px] font-bold px-3 py-1 text-white rounded-bl-xl z-10",a.status==="ing"?"bg-blue-500":"bg-violet-500"),children:a.status==="ing"?"":""}),o.jsxs("div",{className:"p-5 border-b border-border",children:[o.jsx("span",{className:"text-[15px] font-medium text-text-sub block mb-1",children:a.lastUpdate}),o.jsx("div",{className:"text-[20px] font-[800] text-header-navy mb-4 w-[85%]",children:a.name}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex gap-2 items-center",children:[o.jsx("span",{className:"text-[13px] font-bold px-2.5 py-1 rounded-md bg-indigo-50 text-indigo-500 border border-indigo-200",children:""}),o.jsx("span",{className:"text-[13px] font-bold px-2.5 py-1 rounded-md bg-primary/10 text-primary border border-primary/30",children:a.affil}),o.jsxs("span",{className:"text-[13px] font-bold px-2.5 py-1 rounded-md bg-muted text-text-sub border border-border flex items-center gap-1",children:[o.jsx(l,{className:"w-3.5 h-3.5"}),i.text]})]}),o.jsxs("div",{className:"flex gap-1.5 items-center pl-2 border-l border-border ml-1",children:[o.jsx(Qn,{className:U("w-4 h-4",a.hasDraw?"text-header-navy":"text-border")}),o.jsx(Tn,{className:U("w-4 h-4",a.hasPhoto?"text-header-navy":"text-border")}),o.jsx(Dt,{className:U("w-4 h-4",a.hasPTW?"text-header-navy":"text-border")}),o.jsx(kr,{className:U("w-4 h-4",a.hasLog?"text-header-navy":"text-border")}),o.jsx(Ka,{className:U("w-4 h-4",a.hasAction?"text-header-navy":"text-border")})]})]})]}),o.jsxs("div",{className:"p-[22px]",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-3.5 mb-5",children:[o.jsxs("div",{className:"bg-muted/50 rounded-xl p-3.5 text-center border border-muted",children:[o.jsx("span",{className:"block text-[15px] text-text-sub font-bold mb-1.5",children:" "}),o.jsxs("span",{className:"text-[20px] font-[800] text-foreground",children:[a.days,""]})]}),o.jsxs("div",{className:"bg-muted/50 rounded-xl p-3.5 text-center border border-muted",children:[o.jsx("span",{className:"block text-[15px] text-text-sub font-bold mb-1.5",children:" "}),o.jsxs("span",{className:"text-[20px] font-[800] text-primary",children:[a.mp,""]})]})]}),o.jsxs("div",{className:"flex justify-between items-center py-3 border-t border-dashed border-border text-[15px] text-text-sub",children:[o.jsx("span",{className:"font-bold text-[17px] w-20",children:""}),o.jsxs("span",{className:"flex-1 font-semibold text-foreground text-right pr-3 text-[17px] truncate",children:[a.manager," "]}),o.jsx("button",{onClick:()=>window.location.href="tel:01000000000",className:"w-9 h-9 rounded-[10px] bg-blue-50 border border-blue-100 text-blue-900 flex items-center justify-center cursor-pointer",children:o.jsx(zs,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"flex justify-between items-center py-3 border-t border-dashed border-border text-[15px] text-text-sub",children:[o.jsx("span",{className:"font-bold text-[17px] w-20",children:""}),o.jsxs("span",{className:"flex-1 font-semibold text-foreground text-right pr-3 text-[17px] truncate",children:[a.safety," "]}),o.jsx("button",{onClick:()=>window.location.href="tel:01000000000",className:"w-9 h-9 rounded-[10px] bg-blue-50 border border-blue-100 text-blue-900 flex items-center justify-center cursor-pointer",children:o.jsx(zs,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"flex justify-between items-center py-3 border-t border-dashed border-border text-[15px] text-text-sub",children:[o.jsx("span",{className:"font-bold text-[17px] w-20",children:""}),o.jsx("span",{className:"flex-1 font-semibold text-foreground text-right pr-3 text-[17px] truncate",children:a.address}),o.jsx("button",{className:"w-9 h-9 rounded-[10px] bg-blue-50 border border-blue-100 text-blue-900 flex items-center justify-center cursor-pointer",children:o.jsx(Ft,{className:"w-4 h-4"})})]}),o.jsx("div",{className:"grid grid-cols-5 gap-1.5 mt-5",children:[{label:"",icon:Qn,cls:"bg-primary/10 border-primary/30 text-primary"},{label:"",icon:Tn,cls:"bg-indigo-50 border-indigo-200 text-indigo-500"},{label:"",icon:Dt,cls:"bg-blue-50 border-blue-200 text-blue-600"},{label:"",icon:kr,cls:"bg-emerald-50 border-emerald-200 text-emerald-700"},{label:"",icon:Ka,cls:"bg-red-50 border-red-200 text-red-700"}].map(c=>o.jsxs("button",{className:U("flex flex-col items-center justify-center gap-1.5 py-3 rounded-xl border cursor-pointer transition-all active:scale-[0.98]",c.cls),children:[o.jsx(c.icon,{className:"w-6 h-6"}),o.jsx("span",{className:"text-[14px] font-bold",children:c.label})]},c.label))})]})]},a.id)})]})}function Zn(){const{user:e,isTestMode:t,testRole:r}=St(),[n,s]=m.useState(null),[a,i]=m.useState(!0);return m.useEffect(()=>{if(t){s(r),i(!1);return}if(!e){s(null),i(!1);return}(async()=>{const{data:c}=await ue.from("user_roles").select("role").eq("user_id",e.id).maybeSingle();s((c==null?void 0:c.role)??"worker"),i(!1)})()},[e,t,r]),{role:n,isAdmin:n==="admin",isPartner:n==="partner",isWorker:n==="worker",loading:a}}const ST=Date.now().toString(),CT=`/home-v2/main-v2-app/index.html?v=${ST}`,ET=new Set(["/","/output","/worklog","/site","/doc","/request"]);function PT(){const{isPartner:e}=Zn(),t=Jn(),[r,n]=m.useState(!1);return m.useEffect(()=>{const s=a=>{if(a.origin!==window.location.origin)return;const i=a.data;if(!i||i.type!=="inopnc:navigate")return;const l=typeof i.path=="string"?i.path:"";if(!ET.has(l)){console.warn("[inopnc] invalid path",l);return}t(l)};return window.addEventListener("message",s),()=>window.removeEventListener("message",s)},[t]),e?o.jsx(_T,{}):o.jsx("section",{className:"-mx-4",style:{marginTop:"var(--home-section-mt, -0.5rem)",marginBottom:"var(--home-section-mb, -1.5rem)"},children:r?o.jsxs("div",{className:"mx-4 rounded-2xl border border-border bg-card p-6 text-center shadow-soft",style:{minHeight:"calc(100dvh - var(--app-header-height, 114px))"},children:[o.jsx("p",{className:"text-base font-semibold text-foreground",children:"   ."}),o.jsx("button",{type:"button",onClick:()=>window.location.reload(),className:"mt-4 inline-flex items-center justify-center rounded-lg border border-border px-4 py-2 text-sm font-medium text-foreground hover:bg-muted",children:" "})]}):o.jsx("iframe",{title:"INOPNC Home Main",src:CT,className:"block w-full border-0 bg-background",style:{height:"calc(100dvh - var(--app-header-height, 114px))"},onError:()=>n(!0)})})}const To="inopnc_worklogs_unified",TT="siteDrawings";function li(){try{const e=JSON.parse(localStorage.getItem(To)||"[]");return Array.isArray(e)?e:[]}catch{return[]}}function RT(e){const t=li(),r=new Date().toISOString();if(e.id){const s=t.findIndex(a=>a.id===e.id);if(s>=0)return t[s]={...t[s],...e,id:e.id,updatedAt:r},localStorage.setItem(To,JSON.stringify(t)),t[s]}const n={...e,id:e.id||`wl_${Date.now()}_${Math.random().toString(36).slice(2,8)}`,status:e.status||"draft",createdAt:e.createdAt||r,version:e.version||1};return t.unshift(n),localStorage.setItem(To,JSON.stringify(t)),n}function p1(e,t){const r=li(),n=r.findIndex(s=>s.id===e);return n<0?!1:(r[n].status=t,r[n].updatedAt=new Date().toISOString(),localStorage.setItem(To,JSON.stringify(r)),!0)}function m1(e){const t=li(),r=t.filter(n=>n.id!==e);return r.length===t.length?!1:(localStorage.setItem(To,JSON.stringify(r)),!0)}function x1(e,t){try{const r=JSON.parse(localStorage.getItem(TT)||"{}");return r[e]?Object.values(r[e]).flat():[]}catch{return[]}}function g1(){if(!(li().length>0))try{const t=JSON.parse(localStorage.getItem("siteWorklogs")||"{}"),r=[];Object.entries(t).forEach(([s,a])=>{Object.entries(a).forEach(([i,l])=>{var c,d,h,u,f,p,b;l.baseInfo&&r.push({id:`wl_migrated_${s}_${i}`,siteValue:l.baseInfo.siteValue||s,siteName:l.baseInfo.siteName||"",dept:l.baseInfo.dept||"",workDate:l.baseInfo.workDate||i,manpower:l.baseInfo.manpower||[],workSets:l.baseInfo.workSets||[],materials:((d=(c=l.versions)==null?void 0:c[l.versions.length-1])==null?void 0:d.materials)||[],photoCount:((u=(h=l.versions)==null?void 0:h[l.versions.length-1])==null?void 0:u.photoCount)||0,drawingCount:((p=(f=l.versions)==null?void 0:f[l.versions.length-1])==null?void 0:p.drawingCount)||0,status:"draft",createdAt:l.baseInfo.createdAt||new Date().toISOString(),updatedAt:l.baseInfo.updatedAt,version:((b=l.versions)==null?void 0:b.length)||1})})}),r.length>0&&localStorage.setItem(To,JSON.stringify(r));const n=JSON.parse(localStorage.getItem("inopnc_worklogs_v4_site_based")||"{}");Object.entries(n).forEach(([s,a])=>{Array.isArray(a)&&a.forEach(i=>{r.find(c=>c.siteValue===s&&c.workDate===i.workDate)||r.push({id:`wl_v4_${s}_${i.workDate}`,siteValue:i.siteValue||s,siteName:i.site||"",dept:i.dept||"",workDate:i.workDate||"",manpower:i.manpower||[],workSets:i.workSets||[],materials:i.materials||[],photoCount:i.photoCount||0,drawingCount:0,status:"draft",createdAt:i.savedAt||new Date().toISOString(),version:1})})}),r.length>0&&localStorage.setItem(To,JSON.stringify(r))}catch(t){console.error("Migration failed:",t)}}const OT=Object.freeze(Object.defineProperty({__proto__:null,deleteWorklog:m1,getAllWorklogs:li,getDrawingsForSite:x1,migrateOldWorklogs:g1,saveWorklog:RT,updateWorklogStatus:p1},Symbol.toStringTag,{value:"Module"}));function AT(e){return{id:e.id,siteValue:e.site_id,siteName:e.site_name,dept:e.dept||"",workDate:e.work_date,manpower:(e.worklog_manpower||[]).map(t=>({id:t.id,worker:t.worker_name,workHours:Number(t.work_hours),isCustom:t.is_custom||!1,locked:t.locked||!1})),workSets:(e.worklog_worksets||[]).map(t=>({id:t.id,member:t.member||"",process:t.process||"",type:t.work_type||"",location:{block:t.block||"",dong:t.dong||"",floor:t.floor||""},customMemberValue:"",customProcessValue:"",customTypeValue:""})),materials:(e.worklog_materials||[]).map(t=>({id:t.id,name:t.name,qty:Number(t.qty)})),photoCount:0,drawingCount:0,status:e.status,createdAt:e.created_at,updatedAt:e.updated_at,version:e.version,weather:e.weather||""}}function Cm(){const{user:e,isTestMode:t}=St(),r=Vt(),n=!!e,s=$t({queryKey:["worklogs"],queryFn:async()=>{if(!n)return g1(),li();const{data:a,error:i}=await ue.from("worklogs").select(`
          *,
          worklog_manpower(*),
          worklog_worksets(*),
          worklog_materials(*)
        `).order("work_date",{ascending:!1});if(i)throw i;return(a||[]).map(AT)},enabled:n||t,refetchInterval:n?!1:2e3});return m.useEffect(()=>{if(!n)return;const a=ue.channel("worklogs-changes").on("postgres_changes",{event:"*",schema:"public",table:"worklogs"},()=>r.invalidateQueries({queryKey:["worklogs"]})).subscribe();return()=>{ue.removeChannel(a)}},[n,r]),s}function IT(){const{user:e}=St(),t=Vt();return tr({mutationFn:async({id:r,status:n})=>{if(!e){p1(r,n);return}const{error:s}=await ue.from("worklogs").update({status:n}).eq("id",r);if(s)throw s},onSuccess:()=>{t.invalidateQueries({queryKey:["worklogs"]})}})}function DT(){const{user:e}=St(),t=Vt();return tr({mutationFn:async r=>{if(!e){m1(r);return}await ue.from("worklog_manpower").delete().eq("worklog_id",r),await ue.from("worklog_worksets").delete().eq("worklog_id",r),await ue.from("worklog_materials").delete().eq("worklog_id",r);const{error:n}=await ue.from("worklogs").delete().eq("id",r);if(n)throw n},onSuccess:()=>{t.invalidateQueries({queryKey:["worklogs"]})}})}const b1="inopnc_punch_data";function Dl(){try{const e=JSON.parse(localStorage.getItem(b1)||"[]");return Array.isArray(e)?e:[]}catch{return[]}}function Ya(e){localStorage.setItem(b1,JSON.stringify(e))}function LT(e,t){const r=Dl(),n=r.find(s=>s.id===e);return n?(n.punchItems||(n.punchItems=[]),n.punchItems.unshift(t),Ya(r),!0):!1}function MT(e,t,r){const n=Dl(),s=n.find(i=>i.id===e);if(!s||!s.punchItems)return!1;const a=s.punchItems.find(i=>i.id===t);return a?(Object.assign(a,r),Ya(n),!0):!1}function $T(e,t){const r=Dl(),n=r.find(s=>s.id===e);return!n||!n.punchItems?!1:(n.punchItems=n.punchItems.filter(s=>s.id!==t),Ya(r),!0)}function FT(){if(Dl().length>0)return;const t="https://images.unsplash.com/photo-1581094271901-8022df4466f9?q=80&w=400&auto=format&fit=crop",r="https://images.unsplash.com/photo-1503387762-592deb58ef4e?q=80&w=400&auto=format&fit=crop",n="https://images.unsplash.com/photo-1504307651254-35680f356dfd?q=80&w=400&auto=format&fit=crop";Ya([{id:"p1",title:"  101 ",contractor:"GS",affiliation:"",author:"",date:"2025-12-20",time:"14:30",status:"open",files:[{id:"p1f1",name:"",type:"img",url:t,size:"2.5MB",ext:"JPG",url_before:t,url_after:"",currentView:"before"}],punchItems:[{id:"p1i1",location:"A 1",issue:" ",priority:"",status:"ing",assignee:"",dueDate:"2025-12-25",date:"2025-12-20",beforePhoto:t,afterPhoto:""},{id:"p1i2",location:"A 2",issue:"  ",priority:"",status:"open",assignee:"",dueDate:"2025-12-26",date:"2025-12-20",beforePhoto:"",afterPhoto:""}]},{id:"p2",title:"  P3 ",contractor:"",affiliation:"",author:"",date:"2025-12-22",time:"09:15",status:"done",files:[{id:"p2f1",name:"",type:"img",url:r,size:"2.1MB",ext:"JPG",url_before:t,url_after:r,currentView:"after"}],punchItems:[{id:"p2i1",location:"B 1 ",issue:"  ",priority:"",status:"done",assignee:"",dueDate:"2025-12-28",date:"2025-12-22",beforePhoto:t,afterPhoto:r}]},{id:"p3",title:"  ",contractor:"GS",affiliation:"",author:"",date:"2025-12-23",time:"11:00",status:"open",files:[{id:"p3f1",name:"",type:"img",url:n,size:"3.0MB",ext:"JPG",url_before:n,url_after:"",currentView:"before"}],punchItems:[{id:"p3i1",location:"C  1",issue:" ",priority:"",status:"open",assignee:"",dueDate:"2025-12-27",date:"2025-12-23",beforePhoto:n,afterPhoto:""},{id:"p3i2",location:"C ",issue:"",priority:"",status:"ing",assignee:"",dueDate:"2025-12-29",date:"2025-12-23",beforePhoto:"",afterPhoto:""}]}])}function UT(e){return{id:e.id,title:e.site_name,contractor:e.contractor||"",affiliation:e.affiliation||"",author:e.author||"",date:e.punch_date,time:e.punch_time||"",status:e.status,punchItems:(e.punch_items||[]).map(t=>{var r;return{id:t.id,location:t.location||"",issue:t.issue||"",priority:t.priority,status:t.status,assignee:t.assignee||"",dueDate:t.due_date||"",date:((r=t.created_at)==null?void 0:r.split("T")[0])||"",beforePhoto:t.before_photo||"",afterPhoto:t.after_photo||""}}),files:[]}}function v1(){const{user:e,isTestMode:t}=St(),r=Vt(),n=!!e,s=$t({queryKey:["punchGroups"],queryFn:async()=>{if(!n)return FT(),Dl();const{data:a,error:i}=await ue.from("punch_groups").select("*, punch_items(*)").order("punch_date",{ascending:!1});if(i)throw i;return(a||[]).map(UT)},enabled:n||t,refetchInterval:n?!1:2e3});return m.useEffect(()=>{if(!n)return;const a=ue.channel("punch-changes").on("postgres_changes",{event:"*",schema:"public",table:"punch_groups"},()=>r.invalidateQueries({queryKey:["punchGroups"]})).on("postgres_changes",{event:"*",schema:"public",table:"punch_items"},()=>r.invalidateQueries({queryKey:["punchGroups"]})).subscribe();return()=>{ue.removeChannel(a)}},[n,r]),s}function BT(){const{user:e}=St(),t=Vt();return tr({mutationFn:async({groupId:r,item:n})=>{if(!e){LT(r,n);return}const{error:s}=await ue.from("punch_items").insert({group_id:r,location:n.location,issue:n.issue,priority:n.priority,status:n.status,assignee:n.assignee,due_date:n.dueDate||null,before_photo:n.beforePhoto,after_photo:n.afterPhoto});if(s)throw s},onSuccess:()=>t.invalidateQueries({queryKey:["punchGroups"]})})}function zT(){const{user:e}=St(),t=Vt();return tr({mutationFn:async({groupId:r,itemId:n,field:s,value:a})=>{if(!e){MT(r,n,{[s]:a});return}const l={location:"location",issue:"issue",priority:"priority",status:"status",assignee:"assignee",dueDate:"due_date",beforePhoto:"before_photo",afterPhoto:"after_photo"}[s]||s,{error:c}=await ue.from("punch_items").update({[l]:a}).eq("id",n);if(c)throw c},onSuccess:()=>t.invalidateQueries({queryKey:["punchGroups"]})})}function WT(){const{user:e}=St(),t=Vt();return tr({mutationFn:async({groupId:r,itemId:n})=>{if(!e){$T(r,n);return}const{error:s}=await ue.from("punch_items").delete().eq("id",n);if(s)throw s},onSuccess:()=>t.invalidateQueries({queryKey:["punchGroups"]})})}function qT(){const{user:e}=St(),t=Vt();return tr({mutationFn:async r=>{if(!e){Ya(r);return}Ya(r)},onSuccess:()=>t.invalidateQueries({queryKey:["punchGroups"]})})}const xc=e=>`inopnc_site_lodge:${e}`;function HT(e){var u;const{user:t}=St(),{isAdmin:r,isPartner:n}=Zn(),s=Vt(),a=$t({queryKey:["site-member",e,t==null?void 0:t.id],enabled:!!e&&!!t&&!r&&!n,queryFn:async()=>{if(!e||!t)return!1;const{data:f,error:p}=await ue.rpc("is_site_member",{_site_id:e,_user_id:t.id});return p?!1:!!f}}),i=!!a.data,l=!!e&&!n&&(r||i),c=l,d=$t({queryKey:["site-lodging",e],enabled:!!e&&l,queryFn:async()=>{if(!e)return{lodge_address:""};const{data:f,error:p}=await ue.from("site_lodgings").select("lodge_address, updated_at, updated_by").eq("site_id",e).maybeSingle(),b=typeof window<"u"?localStorage.getItem(xc(e)):"";if(p)return{lodge_address:b||""};const g=(f==null?void 0:f.lodge_address)||"";return typeof window<"u"&&localStorage.setItem(xc(e),g),f??{lodge_address:g}}}),h=tr({mutationFn:async f=>{if(!t||!e)throw new Error(" .");if(n||!c)throw new Error(" .");const p=f.trim();if(!p)throw new Error(" .");if(p.length>200)throw new Error("  .");const{data:b,error:g}=await ue.from("site_lodgings").upsert({site_id:e,lodge_address:p,updated_by:t.id,updated_at:new Date().toISOString()},{onConflict:"site_id"}).select("lodge_address").single();if(g)throw g;return(b==null?void 0:b.lodge_address)??p},onMutate:async f=>{if(!e)return;await s.cancelQueries({queryKey:["site-lodging",e]});const p=s.getQueryData(["site-lodging",e]);return s.setQueryData(["site-lodging",e],{lodge_address:f}),{prev:p}},onError:(f,p,b)=>{b!=null&&b.prev&&e&&s.setQueryData(["site-lodging",e],b.prev),V.error("   .")},onSuccess:f=>{e&&typeof window<"u"&&localStorage.setItem(xc(e),f),e&&s.invalidateQueries({queryKey:["site-lodging",e]})}});return{lodge:((u=d.data)==null?void 0:u.lodge_address)??(e&&typeof window<"u"?localStorage.getItem(xc(e))??"":""),isLoading:d.isLoading||a.isLoading,isSaving:h.isPending,canView:l,canEdit:c,saveLodge:h.mutateAsync}}const VT=[{id:1,name:"  101 ",status:"ing",affil:"",addr:"   149",manager:" ",safety:" ",phoneM:"010-1234-5678",phoneS:"010-9876-5432",days:245,mp:3,pinned:!0,lastDate:"2025-12-09",hasDraw:!0,hasPhoto:!0,hasLog:!0,hasPunch:!0},{id:2,name:"  P3 ",status:"done",affil:"",addr:"   1",manager:" ",safety:" ",phoneM:"010-1111-2222",phoneS:"010-3333-4444",days:120,mp:1,pinned:!1,lastDate:"2025-12-05",hasDraw:!0,hasPhoto:!1,hasLog:!0,hasPunch:!1},{id:3,name:"  ",status:"wait",affil:"",addr:"",manager:" ",safety:" ",phoneM:"010-5555-6666",phoneS:"010-7777-8888",days:15,mp:0,pinned:!1,lastDate:"2025-12-03",hasDraw:!1,hasPhoto:!1,hasLog:!1,hasPunch:!1}],KT={ing:{label:"",cls:"bg-blue-500"},wait:{label:"",cls:"bg-indigo-500"},done:{label:"",cls:"bg-muted-foreground"}},GT=[{key:"all",label:""},{key:"ing",label:""},{key:"wait",label:""},{key:"done",label:""}];function QT(){const[e,t]=m.useState(""),[r,n]=m.useState("all"),[s,a]=m.useState(new Set),i=m.useMemo(()=>VT.filter(c=>!(r!=="all"&&c.status!==r||e&&!c.name.toLowerCase().includes(e.toLowerCase()))).sort((c,d)=>c.pinned!==d.pinned?c.pinned?-1:1:d.id-c.id),[e,r]),l=c=>{a(d=>{const h=new Set(d);return h.has(c)?h.delete(c):h.add(c),h})};return o.jsxs("div",{className:"animate-fade-in",children:[o.jsx("div",{className:"flex gap-2 mb-3 mt-1",children:o.jsxs("div",{className:"relative flex-1",children:[o.jsx("input",{value:e,onChange:c=>t(c.target.value),placeholder:"   ",className:"w-full h-[50px] bg-card border border-border rounded-xl px-4 pr-10 text-base-app font-medium text-foreground placeholder:text-muted-foreground outline-none transition-all hover:border-primary/50 focus:border-primary focus:shadow-[0_0_0_3px_rgba(49,163,250,0.15)]"}),e?o.jsx("button",{onClick:()=>t(""),className:"absolute right-3 top-1/2 -translate-y-1/2",children:o.jsx(He,{className:"w-4 h-4 text-muted-foreground"})}):o.jsx(_r,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"})]})}),o.jsx("div",{className:"grid grid-cols-4 gap-2 mb-3",children:GT.map(c=>o.jsx("button",{onClick:()=>n(c.key),className:U("h-10 rounded-full text-[14px] font-medium border cursor-pointer transition-all",r===c.key?c.key==="all"?"bg-primary text-white border-primary font-bold":c.key==="ing"?"bg-blue-500 text-white border-blue-500 font-bold":c.key==="wait"?"bg-indigo-500 text-white border-indigo-500 font-bold":"bg-muted-foreground text-white border-muted-foreground font-bold":"bg-card text-muted-foreground border-border"),children:c.label},c.key))}),i.length===0?o.jsx("div",{className:"text-center py-20 text-muted-foreground",children:"  "}):o.jsx("div",{className:"space-y-5",children:i.map(c=>{const d=s.has(c.id),h=KT[c.status];return o.jsxs("div",{className:U("bg-card rounded-2xl shadow-soft overflow-hidden",c.pinned&&"border-2 border-primary"),children:[o.jsx("span",{className:U("text-[11px] font-bold px-3 py-1 text-white rounded-bl-xl",h.cls),style:{float:"right"},children:h.label}),o.jsxs("div",{className:"p-5 border-b border-border",children:[o.jsx("div",{className:"text-[15px] text-text-sub font-medium mb-1",children:c.lastDate}),o.jsx("div",{className:"text-[20px] font-[800] text-header-navy mb-3 w-[85%]",children:c.name}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"flex gap-2 items-center",children:o.jsx("span",{className:"text-[14px] font-semibold px-3 py-1 rounded-lg bg-primary/10 text-primary border border-primary/30",children:c.affil})}),o.jsxs("div",{className:"flex gap-1.5 items-center",children:[o.jsx(Qn,{className:U("w-4 h-4",c.hasDraw?"text-header-navy":"text-border")}),o.jsx(Tn,{className:U("w-4 h-4",c.hasPhoto?"text-header-navy":"text-border")}),o.jsx(kr,{className:U("w-4 h-4",c.hasLog?"text-header-navy":"text-border")}),o.jsx(Ka,{className:U("w-4 h-4",c.hasPunch?"text-header-navy":"text-border")})]})]})]}),o.jsxs("button",{onClick:()=>l(c.id),className:"w-full h-12 flex items-center justify-center gap-1.5 text-text-sub text-[14px] font-semibold bg-transparent border-none cursor-pointer",children:[d?"":"",d?o.jsx(Il,{className:"w-4 h-4"}):o.jsx(Nt,{className:"w-4 h-4"})]}),d&&o.jsxs("div",{className:"p-[22px] border-t border-border animate-slide-down",children:[o.jsxs("div",{className:"flex mb-5 border-b border-dashed border-border pb-3.5",children:[o.jsxs("div",{className:"flex-1 text-center relative",children:[o.jsx("span",{className:"block text-[17px] text-text-sub font-bold mb-2",children:" "}),o.jsxs("span",{className:"text-[20px] font-[800] text-header-navy",children:[c.days,""]}),o.jsx("div",{className:"absolute right-0 top-[10%] h-[80%] w-px bg-border"})]}),o.jsxs("div",{className:"flex-1 text-center",children:[o.jsx("span",{className:"block text-[17px] text-text-sub font-bold mb-2",children:" "}),o.jsxs("span",{className:"text-[20px] font-[800] text-header-navy",children:[c.mp,""]})]})]}),o.jsxs("div",{className:"flex justify-between items-center py-3.5 border-b border-dashed border-border",children:[o.jsx("span",{className:"font-bold text-text-sub w-20 text-[17px]",children:""}),o.jsx("span",{className:"flex-1 font-semibold text-foreground text-right pr-3 truncate text-[17px]",children:c.manager}),o.jsx("button",{onClick:()=>window.location.href=`tel:${c.phoneM}`,className:"w-9 h-9 rounded-[10px] bg-blue-50 border border-blue-100 text-blue-900 flex items-center justify-center cursor-pointer",children:o.jsx(zs,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"flex justify-between items-center py-3.5 border-b border-dashed border-border",children:[o.jsx("span",{className:"font-bold text-text-sub w-20 text-[17px]",children:""}),o.jsx("span",{className:"flex-1 font-semibold text-foreground text-right pr-3 truncate text-[17px]",children:c.safety}),o.jsx("button",{onClick:()=>window.location.href=`tel:${c.phoneS}`,className:"w-9 h-9 rounded-[10px] bg-blue-50 border border-blue-100 text-blue-900 flex items-center justify-center cursor-pointer",children:o.jsx(zs,{className:"w-4 h-4"})})]}),c.addr&&o.jsxs("div",{className:"flex justify-between items-center py-3.5",children:[o.jsx("span",{className:"font-bold text-text-sub w-20 text-[17px]",children:""}),o.jsx("span",{className:"flex-1 font-semibold text-foreground text-right pr-3 truncate text-[17px]",children:c.addr}),o.jsx("button",{className:"w-9 h-9 rounded-[10px] bg-blue-50 border border-blue-100 text-blue-900 flex items-center justify-center cursor-pointer",children:o.jsx(Ft,{className:"w-4 h-4"})})]}),o.jsx("div",{className:"grid grid-cols-5 gap-1.5 mt-4",children:[{label:"",icon:Qn,cls:"bg-primary/10 border-primary/30 text-primary"},{label:"",icon:Tn,cls:"bg-indigo-50 border-indigo-200 text-indigo-500"},{label:"",icon:kr,cls:"bg-blue-50 border-blue-200 text-blue-600"},{label:"",icon:kr,cls:"bg-emerald-50 border-emerald-200 text-emerald-700"},{label:"",icon:Ka,cls:"bg-red-50 border-red-200 text-red-700"}].map(u=>o.jsxs("button",{className:U("flex flex-col items-center justify-center gap-1.5 h-[74px] rounded-xl border cursor-pointer transition-all active:scale-[0.98]",u.cls),children:[o.jsx(u.icon,{className:"w-6 h-6"}),o.jsx("span",{className:"text-[14px] font-bold",children:u.label})]},u.label))})]})]},c.id)})})]})}function y1({open:e,title:t,onBack:r,onClose:n,onSave:s,onShare:a,zoom:i,contentRef:l,children:c,titleClassName:d,maxWidthClassName:h}){const[u,f]=m.useState(!1),p=m.useMemo(()=>b=>{i.contentRef.current=b,l&&(l.current=b)},[l,i.contentRef]);return e?o.jsxs("div",{className:"fixed inset-0 z-[10000] bg-black text-white",children:[o.jsx(u1,{title:t,onBack:r,onClose:n,onSave:s,titleClassName:d}),o.jsx(X3,{headerHeightPx:56,toolbarHeightPx:72,children:o.jsx("div",{ref:i.containerRef,className:"mx-auto flex min-h-full w-full items-start justify-center px-3 py-5",onWheel:i.onWheel,onTouchStart:i.onTouchStart,onTouchMove:i.onTouchMove,onTouchEnd:i.onTouchEnd,children:o.jsx("div",{ref:p,className:U("origin-top transition-transform",h??"max-w-[900px]",u?"cursor-grab":""),style:{transform:`translate(${i.panX}px, ${i.panY}px) scale(${i.scale})`},children:c})})}),o.jsx(J3,{onZoomOut:i.zoomOut,onZoomIn:i.zoomIn,onFit:()=>i.reset(),onTogglePan:()=>f(b=>!b),panActive:u,fitActive:!1,onShare:()=>a==null?void 0:a(),zoomOutDisabled:i.scale<=i.minScale+.001,zoomInDisabled:i.scale>=i.maxScale-.001})]}):null}function w1(e){const t=(e==null?void 0:e.defaultScale)??1,r=(e==null?void 0:e.defaultMinScale)??.5,n=(e==null?void 0:e.defaultMaxScale)??4,[s,a]=m.useState(t),[i,l]=m.useState(0),[c,d]=m.useState(0),h=m.useRef(null),u=m.useRef(null),f=m.useRef(null),p=m.useCallback(N=>Math.min(n,Math.max(r,N)),[n,r]),b=m.useCallback(N=>{a(p(N??t)),l(0),d(0)},[p,t]),g=m.useCallback(()=>{a(N=>p(N+.1))},[p]),w=m.useCallback(()=>{a(N=>p(N-.1))},[p]),x=m.useCallback(N=>{N.preventDefault(),a(S=>p(S+(N.deltaY<0?.1:-.1)))},[p]),y=m.useCallback(N=>{if(N.touches.length>=2){const[S,_]=N.touches,P=S.clientX-_.clientX,D=S.clientY-_.clientY;f.current={x:0,y:0,pinchDistance:Math.hypot(P,D),pinchScale:s};return}N.touches.length===1&&(f.current={x:N.touches[0].clientX,y:N.touches[0].clientY})},[s]),v=m.useCallback(N=>{if(!f.current)return;if(N.touches.length>=2&&f.current.pinchDistance&&f.current.pinchScale){const[D,T]=N.touches,M=D.clientX-T.clientX,z=D.clientY-T.clientY,F=Math.hypot(M,z);a(p(f.current.pinchScale*F/f.current.pinchDistance));return}if(N.touches.length!==1)return;const S=N.touches[0],_=S.clientX-f.current.x,P=S.clientY-f.current.y;f.current={x:S.clientX,y:S.clientY},N.preventDefault(),l(D=>D+_),d(D=>D+P)},[p]),k=m.useCallback(()=>{f.current=null},[]);return{scale:s,panX:i,panY:c,minScale:r,maxScale:n,containerRef:h,contentRef:u,setScale:a,setPanX:l,setPanY:d,reset:b,zoomIn:g,zoomOut:w,onWheel:x,onTouchStart:y,onTouchMove:v,onTouchEnd:k}}function j1({open:e,onClose:t,title:r,children:n}){const s=w1({open:e}),a=m.useRef(null),i=m.useCallback(async()=>{if(!a.current){V.error("   .");return}try{const{default:c}=await tp(async()=>{const{default:p}=await import("./html2canvas.esm-CBrSDip1.js");return{default:p}},[]),d=await c(a.current,{scale:2,useCORS:!0,backgroundColor:"#ffffff",logging:!1}),h=await new Promise(p=>d.toBlob(p,"image/png",.95));if(!h)throw new Error("blob_failed");const u=URL.createObjectURL(h),f=document.createElement("a");f.href=u,f.download=`${(r||"document").replace(/[\\/:*?"<>|]+/g,"_")}.png`,document.body.appendChild(f),f.click(),f.remove(),window.setTimeout(()=>URL.revokeObjectURL(u),1200)}catch{V.error("  .")}},[r]),l=m.useCallback(async()=>{var c,d;if(!a.current){V.error("   .");return}try{const{default:h}=await tp(async()=>{const{default:b}=await import("./html2canvas.esm-CBrSDip1.js");return{default:b}},[]),u=await h(a.current,{scale:2,useCORS:!0,backgroundColor:"#ffffff",logging:!1}),f=await new Promise(b=>u.toBlob(b,"image/png",.95));if(!f)throw new Error("blob_failed");const p=new File([f],`${(r||"document").replace(/[\\/:*?"<>|]+/g,"_")}.png`,{type:"image/png"});if(navigator.share&&((c=navigator.canShare)!=null&&c.call(navigator,{files:[p]}))){await navigator.share({title:r,files:[p]});return}if(navigator.share){await navigator.share({title:r,url:window.location.href});return}if((d=navigator.clipboard)!=null&&d.writeText){await navigator.clipboard.writeText(window.location.href),V.success(" .");return}V.error("   .")}catch(h){if((h==null?void 0:h.name)==="AbortError")return;V.error(" .")}},[r]);return o.jsx(y1,{open:e,title:r,onBack:t,onClose:t,onSave:i,onShare:l,zoom:s,contentRef:a,children:o.jsx("div",{className:"flex flex-col items-center gap-5 p-5",children:n})})}function Od({children:e,pageNum:t,totalPages:r}){return o.jsx("div",{className:"bg-white shadow-lg",style:{width:"210mm",minHeight:"297mm",padding:"20mm",boxSizing:"border-box"},children:o.jsxs("div",{style:{border:"2px solid #1a254f",height:"100%",padding:"15mm",boxSizing:"border-box",display:"flex",flexDirection:"column"},children:[e,o.jsxs("div",{className:"mt-auto pt-4 flex justify-between text-[12px] text-[#999] border-t border-[#ddd]",children:[o.jsx("span",{children:"INOPNC Safety Management System"}),o.jsxs("span",{children:[t," / ",r]})]})]})})}function _0({photos:e,siteName:t}){const r=Math.ceil(e.length/4);return o.jsx(o.Fragment,{children:Array.from({length:r},(n,s)=>{const a=s*4,i=e.slice(a,a+4);return o.jsxs(Od,{pageNum:s+1,totalPages:r,children:[o.jsxs("div",{className:"text-center border-b-2 border-[#1a254f] pb-3 mb-4",children:[o.jsx("div",{className:"text-[24px] font-[800] text-[#1a254f]",children:" ??"}),o.jsx("div",{className:"text-[14px] text-[#666] mt-1",children:t})]}),o.jsx("div",{className:"flex-1 grid grid-cols-2 gap-3",children:i.map((l,c)=>o.jsxs("div",{className:"border border-[#ddd] rounded-lg overflow-hidden flex flex-col bg-white",children:[o.jsx("div",{className:"flex-1 bg-[#f8fafc] flex items-center justify-center",style:{minHeight:"80mm"},children:o.jsx("img",{src:l.url,className:"max-w-full max-h-full object-contain",alt:`? ${a+c+1}`})}),o.jsxs("div",{className:"p-2 border-t border-[#ddd] bg-white",children:[o.jsxs("div",{className:"text-[12px] font-bold text-[#1a254f]",children:["? ",a+c+1]}),o.jsxs("div",{className:"text-[11px] text-[#666]",children:["?: ",l.date||"-"]})]})]},c))})]},s)})})}function k1({entry:e}){var n,s,a;const t=((n=e.manpower)==null?void 0:n.length)||0,r=((s=e.manpower)==null?void 0:s.reduce((i,l)=>i+(l.workHours||0),0))||0;return o.jsxs(Od,{pageNum:1,totalPages:1,children:[o.jsxs("div",{className:"text-center border-b-2 border-[#1a254f] pb-3 mb-4",children:[o.jsx("div",{className:"text-[24px] font-[800] text-[#1a254f]",children:"???"}),o.jsx("div",{className:"text-[14px] text-[#666] mt-1",children:e.siteName})]}),o.jsxs("div",{className:"grid grid-cols-[120px_1fr] gap-2 text-[14px] mb-6",children:[o.jsx("div",{className:"font-bold text-[#1a254f]",children:"??"}),o.jsx("div",{className:"border-b border-[#ddd] py-1",children:e.workDate}),o.jsx("div",{className:"font-bold text-[#1a254f]",children:""}),o.jsx("div",{className:"border-b border-[#ddd] py-1",children:e.siteName}),o.jsx("div",{className:"font-bold text-[#1a254f]",children:"??"}),o.jsxs("div",{className:"border-b border-[#ddd] py-1",children:[t,"?(",r.toFixed(1),")"]})]}),(a=e.workSets)==null?void 0:a.map((i,l)=>{var c,d,h;return o.jsxs("div",{className:"mb-4 p-3 bg-[#f8fafc] rounded-lg",children:[o.jsxs("div",{className:"text-[13px] font-bold text-[#1a254f] mb-1",children:["? ? ",l+1]}),o.jsxs("div",{className:"grid grid-cols-[80px_1fr] gap-1 text-[12px]",children:[o.jsx("span",{className:"text-[#666]",children:"?"}),o.jsx("span",{children:i.member==="?"?i.customMemberValue:i.member}),o.jsx("span",{className:"text-[#666]",children:""}),o.jsx("span",{children:i.process==="?"?i.customProcessValue:i.process}),o.jsx("span",{className:"text-[#666]",children:"?"}),o.jsx("span",{children:i.type==="?"?i.customTypeValue:i.type}),o.jsx("span",{className:"text-[#666]",children:"?"}),o.jsx("span",{children:[(c=i.location)==null?void 0:c.block,(d=i.location)==null?void 0:d.dong,(h=i.location)==null?void 0:h.floor].filter(Boolean).join(" / ")||"-"})]})]},l)}),e.materials&&e.materials.length>0&&o.jsxs("div",{className:"mt-4",children:[o.jsx("div",{className:"text-[13px] font-bold text-[#1a254f] mb-2",children:"? ? ?"}),e.materials.map((i,l)=>o.jsxs("div",{className:"flex justify-between text-[12px] py-1 border-b border-[#eee]",children:[o.jsx("span",{children:i.name}),o.jsxs("span",{children:[i.qty,""]})]},l))]})]})}const ch={lat:37.5665,lng:126.978};async function YT(){return typeof navigator>"u"||!navigator.geolocation?ch:await new Promise(e=>{let t=!1;const r=window.setTimeout(()=>{t||(t=!0,e(ch))},900);navigator.geolocation.getCurrentPosition(n=>{t||(t=!0,window.clearTimeout(r),e({lat:n.coords.latitude,lng:n.coords.longitude}))},()=>{t||(t=!0,window.clearTimeout(r),e(ch))},{enableHighAccuracy:!1,timeout:900,maximumAge:6e4})})}async function N1(e,t=""){var n;const r=(e||"").trim();if(!r){V.error(`${t} `);return}try{if((n=navigator==null?void 0:navigator.clipboard)!=null&&n.writeText){await navigator.clipboard.writeText(r),V.success(`${t} .`);return}}catch{}try{const s=document.createElement("textarea");s.value=r,s.style.position="fixed",s.style.opacity="0",document.body.appendChild(s),s.focus(),s.select();const a=document.execCommand("copy");document.body.removeChild(s),a?V.success(`${t} .`):V.error(" .")}catch{V.error(" .")}}async function Ad(e,t){const r=(t==null?void 0:t.label)??"",n=(e||"").trim();if(!n){V.error(`${r} `);return}if(typeof navigator<"u"&&!navigator.onLine){V.error("      .");return}if(typeof window>"u")return;const s=encodeURIComponent(n),a=window.location.origin||"inopnc",i=encodeURIComponent(a),{lat:l,lng:c}=await YT(),d=`tmap://search?name=${s}`,h=`nmap://search?query=${s}&appname=${i}`,u=`kakaomap://search?q=${s}&p=${l},${c}`,f=`https://www.google.com/maps/search/?api=1&query=${s}`,p=(b,g)=>{window.location.href=b,window.setTimeout(()=>{document.hidden||g()},900)};p(d,()=>p(h,()=>p(u,()=>{window.location.href=f})))}const JT=[{id:1,name:"  101 ",addr:"   149",lodge:"   123-45",status:"ing",affil:"",manager:" ",safety:" ",phoneM:"010-1234-5678",phoneS:"010-9876-5432",days:245,mp:3,pinned:!0,lastDate:"2025-12-09",lastTime:"10:30",hasDraw:!0,hasPhoto:!0,hasPTW:!0,hasLog:!0,hasPunch:!0,ptw:{title:"",status:"",pages:2},workLog:{title:"",status:"",pages:3},punch:{title:"",status:"",pages:1},images:["sample1.jpg","sample2.jpg"],drawings:{construction:[{name:"1 .pdf"},{name:"2 .pdf"}],progress:[{name:"_01.jpg",type:"img"}],completion:[{name:".pdf"}]}},{id:2,name:"  P3 ",addr:"   1",lodge:"    123",status:"done",affil:"",manager:" ",safety:" ",phoneM:"010-1111-2222",phoneS:"010-3333-4444",days:120,mp:1,pinned:!1,lastDate:"2025-12-05",lastTime:"18:20",hasDraw:!0,hasPhoto:!0,hasPTW:!0,hasLog:!0,hasPunch:!0,ptw:{title:"",status:"",pages:2},workLog:{title:"",status:"",pages:3},punch:{title:"",status:"",pages:1},images:["sample1.jpg"],drawings:{construction:[{name:"1 .pdf"}],progress:[],completion:[{name:".pdf"}]}},{id:3,name:"  ",addr:"",lodge:"",status:"wait",affil:"",manager:" ",safety:" ",phoneM:"010-5555-6666",phoneS:"010-7777-8888",days:15,mp:0,pinned:!1,lastDate:"2025-12-03",lastTime:"14:00",hasDraw:!1,hasPhoto:!1,hasPTW:!1,hasLog:!1,hasPunch:!1,images:[],drawings:{construction:[],progress:[],completion:[]}},{id:4,name:"  4",addr:"",lodge:"",status:"ing",affil:"",manager:"",safety:"",phoneM:"",phoneS:"",days:10,mp:0,pinned:!1,lastDate:"2025-12-01",lastTime:"09:00",hasDraw:!1,hasPhoto:!1,hasPTW:!1,hasLog:!1,hasPunch:!1,images:[],drawings:{construction:[],progress:[],completion:[]}},{id:5,name:"  5",addr:"",lodge:"",status:"ing",affil:"",manager:"",safety:"",phoneM:"",phoneS:"",days:11,mp:0,pinned:!1,lastDate:"2025-12-01",lastTime:"09:00",hasDraw:!1,hasPhoto:!1,hasPTW:!1,hasLog:!1,hasPunch:!1,images:[],drawings:{construction:[],progress:[],completion:[]}}],XT={ing:{label:"",className:"bg-blue-500 text-white"},wait:{label:"",className:"bg-indigo-500 text-white"},done:{label:"",className:"bg-muted-foreground text-white"}},ZT=[{key:"all",label:"",chipClass:"status-all"},{key:"ing",label:"",chipClass:"status-ing"},{key:"wait",label:"",chipClass:"status-wait"},{key:"done",label:"",chipClass:"status-done"}],_1="inopnc_site_drawings_v1";let gc=null;function eR(){var e;return typeof window>"u"?Promise.reject(new Error("no window")):(e=window.daum)!=null&&e.Postcode?Promise.resolve():gc||(gc=new Promise((t,r)=>{const n=document.createElement("script");n.src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js",n.async=!0,n.onload=()=>t(),n.onerror=()=>r(new Error("postcode load failed")),document.head.appendChild(n)}),gc)}async function tR(){return await eR(),await new Promise(e=>{var t;if(!((t=window.daum)!=null&&t.Postcode))return e("");new window.daum.Postcode({oncomplete:r=>{e((r==null?void 0:r.roadAddress)||(r==null?void 0:r.address)||(r==null?void 0:r.jibunAddress)||"")},onclose:()=>e("")}).open()})}function rR(){if(typeof window>"u")return{};try{const e=JSON.parse(localStorage.getItem(_1)||"{}");return!e||typeof e!="object"?{}:e}catch{return{}}}function nR(e){typeof window>"u"||localStorage.setItem(_1,JSON.stringify(e))}function sR(e){return e.siteDbId||e.name}function oR(e){return new Promise((t,r)=>{const n=new FileReader;n.onload=s=>{var a;return t(String(((a=s.target)==null?void 0:a.result)||""))},n.onerror=()=>r(new Error("file_read_failed")),n.readAsDataURL(e)})}function aR(e){return`data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='1000' height='700'%3E%3Crect width='1000' height='700' fill='%23ffffff'/%3E%3Crect x='18' y='18' width='964' height='664' fill='none' stroke='%231a254f' stroke-width='4'/%3E%3Ctext x='500' y='350' text-anchor='middle' font-family='sans-serif' font-size='32' fill='%231a254f'%3E${encodeURIComponent(e||" ")}%3C/text%3E%3C/svg%3E`}function iR(){const{isPartner:e}=Zn();return e?o.jsx(QT,{}):o.jsx(lR,{})}function lR(){const[e,t]=m.useState(JT),[r,n]=m.useState(""),[s,a]=m.useState("all"),[i,l]=m.useState("latest"),[c,d]=m.useState(new Set),[h,u]=m.useState(5),[f,p]=m.useState(()=>typeof navigator<"u"?navigator.onLine:!0),[b,g]=m.useState(!1),[w,x]=m.useState(""),[y,v]=m.useState(null),[k,N]=m.useState(!1),[S,_]=m.useState(null),P=m.useRef(null),[D,T]=m.useState(()=>rR()),[M,z]=m.useState(!1),{data:F=[]}=Cm(),{data:W=[]}=v1();m.useEffect(()=>{if(typeof window>"u")return;const I=()=>p(!0),ae=()=>p(!1);return window.addEventListener("online",I),window.addEventListener("offline",ae),()=>{window.removeEventListener("online",I),window.removeEventListener("offline",ae)}},[]);const Q=m.useMemo(()=>e.map(I=>{var Ee;const ae=I.name||"",J=ae.split(" ")[0]||ae,he=F.filter(oe=>{const Re=(oe.siteName||"").trim();return Re?Re===ae||Re.includes(J)||ae.includes(Re):!1}),ke=he.filter(oe=>oe.status==="approved"),$=W.filter(oe=>{const Re=(oe.title||"").trim();return Re?Re===ae||Re.includes(J)||ae.includes(Re):!1}),te=$.flatMap(oe=>oe.punchItems||[]).filter(oe=>oe.status!=="done").length,ce=((Ee=he[0])==null?void 0:Ee.siteValue)||null;return{...I,siteDbId:ce,hasLog:I.hasLog||he.length>0,hasPhoto:I.hasPhoto||he.some(oe=>oe.photoCount>0),hasDraw:I.hasDraw||he.some(oe=>oe.drawingCount>0),hasPunch:I.hasPunch||$.length>0,mp:te||I.mp,liveLogs:he,approvedLogs:ke,sitePunchGroups:$}}),[e,F,W]),K=Q.filter(I=>s==="all"||I.status===s).filter(I=>I.name.toLowerCase().includes(r.toLowerCase())||I.addr.toLowerCase().includes(r.toLowerCase())).sort((I,ae)=>I.pinned!==ae.pinned?I.pinned?-1:1:i==="name"?I.name.localeCompare(ae.name,"ko"):ae.id-I.id),ne=K.slice(0,h),A=m.useMemo(()=>S&&Q.find(I=>I.id===S)||null,[Q,S]),O=m.useMemo(()=>A?sR(A):"",[A]),L=m.useMemo(()=>O?D[O]||[]:[],[D,O]),re=m.useMemo(()=>L.filter(I=>I.kind==="marked"),[L]),ee=m.useMemo(()=>L.filter(I=>I.kind==="final"),[L]),G=I=>{d(ae=>{const J=new Set(ae);return J.has(I)?J.delete(I):J.add(I),J})},le=(I,ae)=>{var J;ae.stopPropagation(),t(he=>he.map(ke=>ke.id===I?{...ke,pinned:!ke.pinned}:ke)),V.success((J=e.find(he=>he.id===I))!=null&&J.pinned?" ":" ")},ve=I=>{if(!I||I.length<5){V.error(" ");return}window.location.href=`tel:${I.replace(/[^0-9+]/g,"")}`},Te=()=>{h>=K.length?(u(5),window.scrollTo({top:0,behavior:"smooth"})):u(I=>I+5)},je=I=>{_(I),N(!0)},et=m.useCallback((I,ae)=>{T(J=>{const he=ae(J[I]||[]),ke={...J,[I]:he};return nR(ke),ke})},[]),tt=m.useCallback(I=>{if(!A)return;const ae=I.kind==="original"?"()":I.kind==="final"?"()":"";x(`${A.name}  ${ae}`),v(o.jsx("img",{src:I.url,style:{width:850,height:"auto",display:"block"},alt:I.name||" "})),g(!0),N(!1)},[A]),gt=m.useCallback(async I=>{const ae=Array.from(I.target.files||[]);if(I.currentTarget.value="",!(!A||!O||ae.length===0))try{const J=await Promise.all(ae.map($=>oR($))),he=new Date().toISOString(),ke=J.map(($,Z)=>{var te;return{id:`marked_${Date.now()}_${Z}`,name:((te=ae[Z])==null?void 0:te.name)||` ${Z+1}`,url:$,kind:"marked",source:"upload",createdAt:he}});et(O,$=>[...ke,...$]),V.success(`${ke.length}  .`)}catch{V.error("  .")}},[A,O,et]),Ye=m.useCallback(()=>{var he;if(!A||!O)return;const I=A.siteDbId?x1(A.siteDbId):[],ae=new Date().toISOString();let J=I.filter(ke=>!!ke.img).map((ke,$)=>({id:`origin_${Date.now()}_${$}`,name:`  ${$+1}`,url:ke.img,kind:"original",source:"linked",createdAt:ke.timestamp||ae}));if(J.length===0&&(((he=A.drawings)==null?void 0:he.construction)||[]).length>0&&(J=(A.drawings.construction||[]).map((ke,$)=>({id:`origin_fallback_${Date.now()}_${$}`,name:(ke==null?void 0:ke.name)||`  ${$+1}`,url:aR((ke==null?void 0:ke.name)||`  ${$+1}`),kind:"original",source:"linked",createdAt:ae}))),J.length===0){V.error("   .");return}et(O,ke=>{const $=new Set(ke.map(te=>`${te.kind}:${te.url}`)),Z=J.filter(te=>!$.has(`${te.kind}:${te.url}`));return Z.length===0?ke:[...Z,...ke]}),V.success(`   ${J.length} .`)},[A,O,et]),At=m.useCallback(I=>{if(!A||!O)return;const ae={...I,id:`final_${Date.now()}`,kind:"final",source:"approved",name:`${I.name.replace(/\s*\(\)$/,"")} ()`,createdAt:new Date().toISOString()};et(O,J=>[ae,...J]),V.success("   .")},[A,O,et]),xe=m.useCallback(()=>{if(A){if(re.length===0){V.error("  .");return}x(`${A.name}   `),v(o.jsx(_0,{photos:re.map(I=>({url:I.url,date:I.createdAt.slice(0,10)})),siteName:A.name})),g(!0),N(!1)}},[re,A]),Kt=m.useCallback(()=>{const I=[...ee].sort((ae,J)=>J.createdAt.localeCompare(ae.createdAt))[0];if(!I){V.error("   .");return}tt(I)},[ee,tt]),Ce=I=>{const ae=I.images.map(J=>({url:"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Crect fill='%23ddd' width='200' height='200'/%3E%3Ctext x='100' y='100' text-anchor='middle' dy='.3em'%3ESample%3C/text%3E%3C/svg%3E",date:I.lastDate}));if(ae.length===0){V.error("  ");return}x(`${I.name}  `),v(o.jsx(_0,{photos:ae,siteName:I.name})),g(!0)},Gt=(I,ae)=>{const J=I[ae];if(!J){V.error("  ");return}const he={ptw:"PTW ",workLog:"",punch:""};if(ae==="workLog"&&I.approvedLogs.length>0){const ke=I.approvedLogs[0];x(`${I.name}  `),v(o.jsx(k1,{entry:ke})),g(!0);return}if(ae==="punch"&&I.sitePunchGroups&&I.sitePunchGroups.length>0){const ke=I.sitePunchGroups.flatMap(te=>te.punchItems||[]),$=ke.filter(te=>te.status!=="done").length,Z=ke.filter(te=>te.status==="done").length;x(`${I.name}  `),v(o.jsxs(Od,{pageNum:1,totalPages:1,children:[o.jsxs("div",{className:"text-center border-b-2 border-[#1a254f] pb-3 mb-4",children:[o.jsx("div",{className:"text-[24px] font-[800] text-[#1a254f]",children:"   "}),o.jsx("div",{className:"text-[14px] text-[#666] mt-1",children:I.name})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[o.jsxs("div",{className:"bg-sky-50 border border-sky-400 p-3 rounded-lg text-center",children:[o.jsx("div",{className:"text-[20px] font-[900] text-sky-600",children:ke.length}),o.jsx("div",{className:"text-[11px] font-bold text-sky-700",children:""})]}),o.jsxs("div",{className:"bg-red-50 border border-red-400 p-3 rounded-lg text-center",children:[o.jsx("div",{className:"text-[20px] font-[900] text-red-600",children:$}),o.jsx("div",{className:"text-[11px] font-bold text-red-700",children:""})]}),o.jsxs("div",{className:"bg-slate-50 border border-slate-400 p-3 rounded-lg text-center",children:[o.jsx("div",{className:"text-[20px] font-[900] text-slate-600",children:Z}),o.jsx("div",{className:"text-[11px] font-bold text-slate-500",children:""})]})]}),o.jsxs("table",{className:"w-full border-collapse text-[12px]",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-slate-100",children:[o.jsx("th",{className:"border border-slate-300 p-2 w-10",children:"NO"}),o.jsx("th",{className:"border border-slate-300 p-2 w-20",children:""}),o.jsx("th",{className:"border border-slate-300 p-2",children:" "}),o.jsx("th",{className:"border border-slate-300 p-2 w-16",children:""}),o.jsx("th",{className:"border border-slate-300 p-2 w-16",children:""})]})}),o.jsx("tbody",{children:ke.map((te,ce)=>o.jsxs("tr",{children:[o.jsx("td",{className:"border border-slate-300 p-2 text-center font-bold",children:ce+1}),o.jsx("td",{className:"border border-slate-300 p-2 text-center",children:te.location||"-"}),o.jsx("td",{className:"border border-slate-300 p-2",children:te.issue||"-"}),o.jsx("td",{className:"border border-slate-300 p-2 text-center",children:te.priority}),o.jsx("td",{className:"border border-slate-300 p-2 text-center font-bold",children:te.status==="done"?"":te.status==="ing"?"":""})]},te.id))})]})]})),g(!0);return}x(`${I.name}  ${he[ae]}`),v(o.jsxs(Od,{pageNum:1,totalPages:J.pages||1,children:[o.jsxs("div",{className:"text-center border-b-2 border-[#1a254f] pb-3 mb-4",children:[o.jsx("div",{className:"text-[24px] font-[800] text-[#1a254f]",children:he[ae]}),o.jsx("div",{className:"text-[14px] text-[#666] mt-1",children:I.name})]}),o.jsxs("div",{className:"grid grid-cols-[120px_1fr] gap-2 text-[14px] mb-6",children:[o.jsx("div",{className:"font-bold text-[#1a254f]",children:""}),o.jsx("div",{className:"border-b border-[#ddd] py-1",children:"DOC-2025-0001"}),o.jsx("div",{className:"font-bold text-[#1a254f]",children:""}),o.jsx("div",{className:"border-b border-[#ddd] py-1",children:J.status}),o.jsx("div",{className:"font-bold text-[#1a254f]",children:""}),o.jsx("div",{className:"border-b border-[#ddd] py-1",children:I.name})]}),o.jsx("div",{className:"flex-1 p-4 bg-[#f8fafc] rounded-lg flex items-center justify-center",style:{minHeight:"100mm"},children:o.jsx("span",{className:"text-[#666]",children:"  "})})]})),g(!0)},Qt=(I,ae)=>{if(ae==="images"){Ce(I);return}if(ae==="ptw"||ae==="workLog"||ae==="punch"){Gt(I,ae);return}V.error(" ")},yt=e.map(I=>I.name).filter(I=>I.toLowerCase().includes(r.toLowerCase()));return o.jsxs("div",{className:"animate-fade-in",children:[o.jsxs("div",{className:"flex gap-2 mb-3 mt-3",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx("input",{type:"text",value:r,onChange:I=>{n(I.target.value),z(!0)},onFocus:()=>z(!0),placeholder:"   ",className:"w-full h-[50px] bg-card border border-border rounded-xl px-4 pr-12 text-base-app font-medium text-foreground placeholder:text-muted-foreground outline-none transition-all hover:border-primary/50 focus:border-primary focus:shadow-[0_0_0_3px_rgba(49,163,250,0.15)]"}),r&&o.jsx("button",{onClick:()=>{n(""),z(!1)},className:"absolute right-10 top-1/2 -translate-y-1/2 w-5 h-5 rounded-full bg-muted flex items-center justify-center text-muted-foreground z-10",children:o.jsx(He,{className:"w-3 h-3"})}),o.jsx("button",{onClick:()=>z(!M),className:"absolute right-4 top-1/2 -translate-y-1/2 text-muted-foreground bg-transparent border-none cursor-pointer",children:o.jsx(Nt,{className:"w-5 h-5"})}),M&&r&&o.jsx("ul",{className:"absolute z-50 w-full mt-1.5 max-h-60 overflow-auto bg-card border border-border rounded-xl shadow-lg animate-[dropdownSlide_0.2s_ease-out]",children:yt.length===0?o.jsx("li",{className:"p-4 text-muted-foreground text-center text-sm-app",children:"  "}):yt.map(I=>o.jsx("li",{onClick:()=>{n(I),z(!1)},className:"px-4 py-3.5 cursor-pointer border-b border-border last:border-0 text-sm-app font-medium text-foreground hover:bg-muted transition-colors",children:I},I))})]}),o.jsxs("select",{value:i,onChange:I=>l(I.target.value),className:"w-[95px] h-[50px] rounded-xl px-3 text-sm-app font-semibold bg-card border border-border text-foreground appearance-none cursor-pointer outline-none transition-all hover:border-primary/50 focus:border-primary focus:shadow-[0_0_0_3px_rgba(49,163,250,0.15)]",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23475569' stroke-width='2'%3E%3Cpath d='m6 9 6 6 6-6'/%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center",paddingRight:"36px"},children:[o.jsx("option",{value:"latest",children:""}),o.jsx("option",{value:"name",children:""})]})]}),o.jsx("div",{className:"flex gap-1.5 mb-4 overflow-x-auto pb-1 no-scrollbar",children:ZT.map(I=>o.jsx("button",{onClick:()=>{a(I.key),u(5)},className:U("h-10 px-3.5 rounded-full text-sm-app font-medium whitespace-nowrap flex-shrink-0 border transition-all cursor-pointer flex items-center justify-center",s===I.key?I.key==="all"?"bg-primary text-white border-primary font-bold shadow-sm":I.key==="ing"?"bg-blue-500 text-white border-blue-500 font-bold shadow-sm":I.key==="wait"?"bg-indigo-500 text-white border-indigo-500 font-bold shadow-sm":"bg-muted-foreground text-white border-muted-foreground font-bold shadow-sm":"bg-card text-muted-foreground border-border hover:border-primary/50"),children:I.label},I.key))}),ne.length===0&&o.jsxs("div",{className:"text-center py-20",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-muted rounded-full mb-5",children:o.jsx(_r,{className:"w-8 h-8 text-muted-foreground opacity-60"})}),o.jsx("p",{className:"text-base-app font-medium text-muted-foreground",children:"  "})]}),o.jsx("div",{className:"space-y-4",children:ne.map(I=>{var Ee;const ae=c.has(I.id),J=XT[I.status],he=!!((Ee=I.addr)!=null&&Ee.trim()),ke=I.hasDraw,$=I.hasPhoto,Z=!!I.ptw,te=I.hasLog,ce=!!I.punch;return o.jsxs("div",{className:U("bg-card rounded-2xl shadow-soft overflow-hidden transition-all",I.pinned&&"border-2 border-primary shadow-[0_4px_12px_rgba(49,163,250,0.2)]"),children:[o.jsxs("div",{className:"p-5 max-[640px]:p-4 border-b border-border relative",children:[o.jsx("span",{className:U("absolute top-0 right-0 text-[11px] font-bold px-2.5 py-1 rounded-bl-xl z-10",J.className),children:J.label}),I.lastDate&&o.jsxs("div",{className:"text-sm-app text-text-sub font-medium mb-1 max-[640px]:mb-0.5",children:[I.lastDate," ",I.lastTime?`( ${I.lastTime})`:""]}),o.jsxs("div",{className:"flex items-start justify-between mb-2",children:[o.jsx("h3",{className:"text-[20px] max-[640px]:text-[18px] font-[800] text-header-navy flex-1 leading-snug",style:{wordBreak:"keep-all"},children:I.name}),o.jsx("button",{onClick:oe=>le(I.id,oe),className:"bg-transparent border-none p-1 cursor-pointer ml-2",children:I.pinned?o.jsx(iu,{className:"w-[22px] h-[22px] text-primary"}):o.jsx(lu,{className:"w-[22px] h-[22px] text-border"})})]}),o.jsxs("div",{className:"flex items-center justify-between mb-3 max-[640px]:mb-2",children:[o.jsxs("div",{className:"flex gap-2 max-[640px]:gap-1.5 items-center flex-wrap min-w-0",children:[I.affil!==""&&o.jsx("span",{className:"text-[14px] max-[640px]:text-[13px] px-3 max-[640px]:px-2.5 h-[34px] max-[640px]:h-[30px] rounded-lg border border-indigo-200 bg-indigo-50 text-indigo-500 font-semibold flex items-center",children:""}),o.jsx("span",{className:U("text-[14px] max-[640px]:text-[13px] px-3 max-[640px]:px-2.5 h-[34px] max-[640px]:h-[30px] rounded-lg border font-semibold flex items-center",I.affil===""?"bg-red-50 text-red-700 border-red-200":"bg-sky-50 text-sky-600 border-sky-200"),children:I.affil})]}),o.jsxs("div",{className:"flex gap-1.5 max-[640px]:gap-1 items-center pl-2 border-l border-border ml-1",children:[o.jsx(Qn,{className:U("w-4 h-4 max-[640px]:w-[15px] max-[640px]:h-[15px] transition-colors",ke?"text-header-navy":"text-border")}),o.jsx(Tn,{className:U("w-4 h-4 max-[640px]:w-[15px] max-[640px]:h-[15px] transition-colors",$?"text-header-navy":"text-border")}),o.jsx(Pd,{className:U("w-4 h-4 max-[640px]:w-[15px] max-[640px]:h-[15px] transition-colors",Z?"text-header-navy":"text-border")}),o.jsx(kr,{className:U("w-4 h-4 max-[640px]:w-[15px] max-[640px]:h-[15px] transition-colors",te?"text-header-navy":"text-border")}),o.jsx(Ka,{className:U("w-4 h-4 max-[640px]:w-[15px] max-[640px]:h-[15px] transition-colors",ce?"text-header-navy":"text-border")})]})]}),o.jsxs("div",{className:"flex items-center justify-between pt-1",children:[o.jsxs("div",{className:"flex items-center gap-1.5 flex-1 overflow-hidden cursor-pointer",onClick:()=>Ad(I.addr,{label:" "}),children:[o.jsx(Ft,{className:"w-4 h-4 text-text-sub flex-shrink-0"}),o.jsx("span",{className:U("text-base-app font-bold truncate",he?"text-text-sub":"text-muted-foreground"),children:he?I.addr:" "})]}),o.jsxs("div",{className:"flex items-center gap-1.5 shrink-0 ml-2",children:[o.jsx("button",{disabled:!he,className:U("w-9 h-9 max-[640px]:w-8 max-[640px]:h-8 rounded-[10px] flex items-center justify-center transition-all active:scale-95",he?"bg-muted border border-border text-text-sub":"border border-dashed border-muted-foreground/40 text-muted-foreground bg-transparent opacity-60 cursor-not-allowed"),onClick:()=>N1(I.addr," "),children:o.jsx(t1,{className:"w-[16px] h-[16px]"})}),o.jsx("button",{disabled:!he,className:U("w-9 h-9 max-[640px]:w-8 max-[640px]:h-8 rounded-[10px] flex items-center justify-center transition-all active:scale-95",he?"bg-[hsl(219_100%_95%)] border border-[hsl(219_100%_90%)] text-[hsl(230_60%_30%)]":"border border-dashed border-muted-foreground/40 text-muted-foreground bg-transparent opacity-60 cursor-not-allowed"),onClick:()=>Ad(I.addr,{label:" "}),children:o.jsx(Ft,{className:"w-[18px] h-[18px]"})})]})]})]}),ae&&o.jsxs("div",{className:"p-5 max-[640px]:p-4 animate-slide-down bg-card",children:[[{label:"",value:I.manager,phone:I.phoneM},{label:"",value:I.safety,phone:I.phoneS}].map(oe=>o.jsxs("div",{className:"flex justify-between items-center py-3 max-[640px]:py-2.5 border-b border-dashed border-border",children:[o.jsx("span",{className:"text-base-app text-text-sub font-bold w-20",children:oe.label}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"flex-1 text-right text-base-app font-semibold text-foreground truncate pr-3",children:oe.value||""}),o.jsx("button",{className:U("w-9 h-9 max-[640px]:w-8 max-[640px]:h-8 rounded-[10px] flex items-center justify-center shrink-0 transition-all active:scale-95",oe.phone?"bg-[hsl(219_100%_95%)] border border-[hsl(219_100%_90%)] text-[hsl(230_60%_30%)]":"border border-dashed border-border bg-transparent text-muted-foreground"),onClick:()=>ve(oe.phone),children:o.jsx(zs,{className:"w-[18px] h-[18px]"})})]})]},oe.label)),o.jsx(cR,{site:I,isOnline:f}),o.jsxs("div",{className:"flex py-3 max-[640px]:py-2.5",children:[o.jsxs("div",{className:"flex-1 text-center relative",children:[o.jsx("span",{className:"block text-base-app text-text-sub font-bold mb-2",children:" "}),o.jsxs("span",{className:"text-lg-app font-[800] text-header-navy",children:[I.days,""]}),o.jsx("div",{className:"absolute right-0 top-[10%] h-[80%] w-px bg-border"})]}),o.jsxs("div",{className:"flex-1 text-center",children:[o.jsx("span",{className:"block text-base-app text-text-sub font-bold mb-2",children:"()"}),o.jsxs("span",{className:U("text-lg-app font-[800]",I.mp>0?"text-destructive":"text-header-navy"),children:[I.mp,""]})]})]}),o.jsx("div",{className:"grid grid-cols-5 gap-1.5 max-[640px]:gap-1 mt-0",children:[{icon:E3,label:"",active:ke,color:"bg-primary-bg text-primary border-sky-200",onClick:()=>ke?je(I.id):V.error("  ")},{icon:Tn,label:"",active:$,color:"bg-indigo-50 text-indigo-500 border-indigo-200",onClick:()=>Qt(I,"images")},{icon:Pd,label:"PTW",active:Z,color:"bg-blue-50 text-blue-600 border-blue-200",onClick:()=>Qt(I,"ptw")},{icon:kr,label:"",active:te,color:"bg-emerald-50 text-emerald-700 border-emerald-200",onClick:()=>Qt(I,"workLog")},{icon:Ka,label:"",active:ce,color:"bg-red-50 text-red-600 border-red-200",onClick:()=>Qt(I,"punch")}].map(({icon:oe,label:Re,active:ge,color:lt,onClick:ot})=>o.jsxs("button",{className:U("flex flex-col items-center justify-center gap-1.5 max-[640px]:gap-1 h-[74px] max-[640px]:h-[64px] rounded-xl border cursor-pointer transition-all active:scale-95",ge?lt:"bg-muted border-border text-border opacity-60 cursor-not-allowed"),onClick:ot,children:[o.jsx(oe,{className:"w-6 h-6"}),o.jsx("span",{className:"text-[14px] font-bold tracking-tight",children:Re})]},Re))})]}),o.jsxs("button",{onClick:()=>G(I.id),className:U("w-full h-12 flex items-center justify-center gap-1.5 text-text-sub text-[14px] font-semibold cursor-pointer bg-transparent border-none transition-colors",ae&&"bg-background border-t border-border"),children:[!ae&&o.jsx("span",{children:"  "}),ae?o.jsx(Il,{className:"w-[18px] h-[18px]"}):o.jsx(Nt,{className:"w-[18px] h-[18px]"})]})]},I.id)})}),K.length>5&&o.jsxs("button",{onClick:Te,className:"w-full h-[50px] bg-card border border-border rounded-full text-text-sub font-semibold text-sm-app cursor-pointer mt-3 flex items-center justify-center gap-1.5 transition-all hover:bg-muted",children:[o.jsx("span",{children:h>=K.length?"":" "}),o.jsx(Nt,{className:U("w-4 h-4 transition-transform",h>=K.length&&"rotate-180")})]}),k&&o.jsx("div",{className:"fixed inset-0 bg-black/50 z-[2000]",onClick:()=>N(!1),children:o.jsxs("div",{className:"absolute bottom-0 left-0 right-0 mx-auto w-full max-w-[600px] rounded-t-2xl bg-card p-4 shadow-2xl",onClick:I=>I.stopPropagation(),children:[o.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[o.jsx("div",{className:"text-lg font-bold text-header-navy",children:" "}),o.jsx("button",{type:"button",onClick:()=>N(!1),className:"rounded-lg p-1 text-muted-foreground hover:bg-accent",children:o.jsx(He,{className:"h-5 w-5"})})]}),o.jsx("input",{ref:P,type:"file",multiple:!0,accept:"image/*",className:"hidden",onChange:gt}),o.jsxs("button",{type:"button",onClick:()=>{var I;return(I=P.current)==null?void 0:I.click()},className:"mb-2 flex h-[48px] w-full items-center justify-center gap-2 rounded-xl border border-dashed border-primary/35 bg-primary/10 text-[14px] font-bold text-primary hover:bg-primary/15",children:[o.jsx(_m,{className:"h-4 w-4"}),"   ( )"]}),o.jsxs("button",{type:"button",onClick:Ye,className:"mb-3 flex h-[48px] w-full items-center justify-center gap-2 rounded-xl border border-border bg-bg-input text-[14px] font-bold text-foreground hover:bg-accent",children:[o.jsx(Qn,{className:"h-4 w-4"}),"    "]}),o.jsxs("div",{className:"mb-3 grid grid-cols-2 gap-2",children:[o.jsx("button",{type:"button",onClick:xe,className:"h-[40px] rounded-lg border border-sky-200 bg-sky-50 text-[12px] font-bold text-sky-700 hover:bg-sky-100",children:"  "}),o.jsx("button",{type:"button",onClick:Kt,className:"h-[40px] rounded-lg border border-emerald-200 bg-emerald-50 text-[12px] font-bold text-emerald-700 hover:bg-emerald-100",children:"  "})]}),o.jsx("div",{className:"max-h-[54vh] overflow-y-auto",children:L.length===0?o.jsx("div",{className:"rounded-xl border border-border bg-bg-input px-4 py-10 text-center text-sm text-muted-foreground",children:"     "}):o.jsx("div",{className:"space-y-2",children:L.slice().sort((I,ae)=>ae.createdAt.localeCompare(I.createdAt)).map(I=>o.jsx("div",{className:"rounded-xl border border-border bg-bg-input p-2.5",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:U("inline-flex h-5 shrink-0 items-center rounded-full px-2 text-[10px] font-bold",I.kind==="original"?"bg-blue-50 text-blue-700 border border-blue-200":I.kind==="final"?"bg-emerald-50 text-emerald-700 border border-emerald-200":"bg-indigo-50 text-indigo-700 border border-indigo-200"),children:I.kind==="original"?"":I.kind==="final"?"":""}),o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("div",{className:"truncate text-[13px] font-semibold text-foreground",children:I.name}),o.jsx("div",{className:"text-[11px] text-muted-foreground",children:I.createdAt.slice(0,10)})]}),o.jsxs("button",{type:"button",onClick:()=>tt(I),className:"inline-flex h-7 items-center gap-1 rounded-md border border-border bg-card px-2 text-[11px] font-bold text-text-sub hover:bg-muted",children:[o.jsx(En,{className:"h-3.5 w-3.5"})," "]}),I.kind!=="final"&&o.jsx("button",{type:"button",onClick:()=>At(I),className:"inline-flex h-7 items-center rounded-md border border-emerald-200 bg-emerald-50 px-2 text-[11px] font-bold text-emerald-700 hover:bg-emerald-100",children:""})]})},I.id))})})]})}),o.jsx(j1,{open:b,onClose:()=>g(!1),title:w,children:y})]})}function cR({site:e,isOnline:t}){const{lodge:r,canView:n,canEdit:s,isSaving:a,saveLodge:i}=HT(e.siteDbId),l=!e.siteDbId;if(!n&&!l)return null;const[c,d]=m.useState(e.lodge||"");m.useEffect(()=>{d(e.lodge||"")},[e.id,e.lodge]);const h=s&&!!e.siteDbId,u=h||l,f=(r||c||"").trim(),p=!!f.trim(),b=async w=>{const x=w.trim();if(x){if(h){await i(x);return}d(x)}},g=async()=>{if(!t){V.error("  .");return}if(!(!u||h&&a))try{const w=await tR();if(!w)return;try{await b(w),V.success("  .")}catch{}}catch{V.error(" .")}};return o.jsxs("div",{className:"flex justify-between items-center py-3 max-[640px]:py-2.5 border-b border-dashed border-border",children:[o.jsx("span",{className:"text-base-app text-text-sub font-bold w-20 shrink-0 whitespace-nowrap",children:""}),o.jsxs("div",{className:"flex items-center gap-1.5 max-[640px]:gap-1 flex-1 min-w-0 justify-end",children:[o.jsx("button",{type:"button",disabled:!p,onClick:()=>p&&Ad(f,{label:" "}),className:U("flex-1 min-w-0 text-base-app font-semibold truncate pr-1 text-right bg-transparent border-none outline-none",p?"text-foreground cursor-pointer":"text-muted-foreground cursor-default"),children:p?f:" "}),p&&o.jsx("button",{className:"w-9 h-9 max-[640px]:w-8 max-[640px]:h-8 rounded-[10px] flex items-center justify-center shrink-0 transition-all active:scale-95 bg-muted border border-border text-text-sub",onClick:()=>N1(f," "),children:o.jsx(t1,{className:"w-[16px] h-[16px]"})}),o.jsx("button",{disabled:!t&&!p||!u||h&&a,className:U("w-9 h-9 max-[640px]:w-8 max-[640px]:h-8 rounded-[10px] flex items-center justify-center shrink-0 transition-all active:scale-95",p?"bg-[hsl(219_100%_95%)] border border-[hsl(219_100%_90%)] text-[hsl(230_60%_30%)]":"border border-dashed border-primary text-primary bg-transparent",(!t&&!p||!u||h&&a)&&"opacity-50 cursor-not-allowed"),onClick:()=>p?Ad(f,{label:" "}):g(),children:o.jsx(Ft,{className:"w-[18px] h-[18px]"})}),u&&o.jsx("button",{type:"button",disabled:h&&a,onClick:g,"aria-label":"  ",className:U("w-9 h-9 max-[640px]:w-8 max-[640px]:h-8 rounded-[10px] flex items-center justify-center border",h&&a?"opacity-50 cursor-not-allowed border-border text-muted-foreground":"border-border text-text-sub bg-muted"),children:o.jsx(C3,{className:"w-4 h-4"})})]})]})}const bc={pending:{label:"",bgCls:"bg-[hsl(217_100%_96%)]",textCls:"text-blue-500",borderCls:"border-blue-200",badgeBg:"bg-blue-500"},wait:{label:"",bgCls:"bg-[hsl(263_100%_97%)]",textCls:"text-violet-600",borderCls:"border-violet-200",badgeBg:"bg-violet-500"},approved:{label:"",bgCls:"bg-muted",textCls:"text-muted-foreground",borderCls:"border-border",badgeBg:"bg-muted-foreground"}};function dR(e){return e===""?"pending":e===""?"wait":"approved"}function uR(){const{user:e}=St(),[t,r]=m.useState(""),[n,s]=m.useState("all"),[a,i]=m.useState("latest"),[l,c]=m.useState(()=>{try{const S=localStorage.getItem("partner_pinned_sites");return S?new Set(JSON.parse(S)):new Set}catch{return new Set}}),[d,h]=m.useState(5),[u,f]=m.useState(null),[p,b]=m.useState(!1),{data:g=[],isLoading:w}=$t({queryKey:["partner-worklog-sites",e==null?void 0:e.id],queryFn:async()=>{if(!e)return[];const{data:S,error:_}=await ue.from("site_members").select("site_id").eq("user_id",e.id);if(_)throw _;if(!S||S.length===0)return[];const P=S.map(W=>W.site_id),{data:D,error:T}=await ue.from("sites").select("*").in("id",P);if(T)throw T;const{data:M,error:z}=await ue.from("worklogs").select(`
          id, site_id, site_name, work_date, status, dept,
          worklog_manpower(worker_name, work_hours),
          worklog_worksets(member, process, work_type, block, dong, floor)
        `).in("site_id",P).order("work_date",{ascending:!1});if(z)throw z;const{data:F}=await ue.from("documents").select("id, title, doc_type, file_ext, site_id, work_date, created_at").in("site_id",P);return(D||[]).map(W=>{var ee;const Q=(M||[]).filter(G=>G.site_id===W.id),K=(F||[]).filter(G=>G.site_id===W.id),ne=Q[0],A=Q.slice(0,10).map(G=>{const le=(G.worklog_manpower||[]).reduce((ve,Te)=>ve+Number(Te.work_hours||8)/8,0);return{date:new Date(G.work_date).toLocaleDateString("ko-KR",{month:"numeric",day:"numeric"}).replace(". ",".").replace(".","."),man:Math.round(le*10)/10||(G.worklog_manpower||[]).length}}),O=Q.reduce((G,le)=>{const ve=(le.worklog_manpower||[]).reduce((Te,je)=>Te+Number(je.work_hours||8)/8,0);return G+(ve||(le.worklog_manpower||[]).length)},0);let L="";if(ne){const G=(ne.worklog_worksets||[])[0];G&&(L=[G.block,G.dong,G.floor,G.process].filter(Boolean).join(" | ")||G.work_type||"")}const re=ne?(ne.worklog_manpower||[]).length:0;return{id:W.id,siteName:W.name,siteId:W.id,latestDate:(ne==null?void 0:ne.work_date)||((ee=W.created_at)==null?void 0:ee.slice(0,10))||"",status:dR(W.status),latestContent:L,workerCount:re,totalDays:Q.length,totalManpower:Math.round(O*10)/10,isPinned:l.has(W.id),detailDates:A,photos:K.filter(G=>G.doc_type==="photo").map(G=>{var le;return{name:G.title,date:((le=G.created_at)==null?void 0:le.slice(0,10))||""}}),drawings:K.filter(G=>G.doc_type==="drawing").map(G=>{var le;return{name:G.title,date:((le=G.created_at)==null?void 0:le.slice(0,10))||""}}),certDocs:K.filter(G=>G.doc_type==="cert"||G.doc_type==="completion").map(G=>{var le;return{name:G.title,date:((le=G.created_at)==null?void 0:le.slice(0,10))||""}})}})},enabled:!!e}),x=m.useMemo(()=>{let S=g.map(_=>({..._,isPinned:l.has(_.id)}));return S=S.filter(_=>{const P=t.toLowerCase(),D=!P||_.siteName.toLowerCase().includes(P)||_.latestContent.toLowerCase().includes(P),T=n==="all"||_.status===n;return D&&T}),S.sort((_,P)=>_.isPinned!==P.isPinned?_.isPinned?-1:1:a==="name"?_.siteName.localeCompare(P.siteName,"ko"):new Date(P.latestDate).getTime()-new Date(_.latestDate).getTime()),S},[g,l,t,n,a]),y=m.useMemo(()=>({pending:g.filter(S=>S.status==="pending").length,wait:g.filter(S=>S.status==="wait").length,approved:g.filter(S=>S.status==="approved").length}),[g]),v=S=>{c(_=>{const P=new Set(_);return P.has(S)?P.delete(S):P.add(S),localStorage.setItem("partner_pinned_sites",JSON.stringify([...P])),P})},k=x.slice(0,d),N=d<x.length;return w?o.jsx("div",{className:"flex items-center justify-center py-20",children:o.jsx(o1,{className:"w-8 h-8 animate-spin text-primary"})}):o.jsxs("div",{className:"animate-fade-in",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx("input",{value:t,onChange:S=>r(S.target.value),placeholder:",  ",className:"w-full h-[54px] bg-card border border-border rounded-xl px-4 pr-10 text-[17px] font-medium text-foreground placeholder:text-muted-foreground outline-none transition-all focus:border-primary focus:shadow-[0_0_0_3px_rgba(49,163,250,0.15)]"}),t?o.jsx("button",{onClick:()=>r(""),className:"absolute right-3 top-1/2 -translate-y-1/2",children:o.jsx(He,{className:"w-4 h-4 text-muted-foreground"})}):o.jsx(_r,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"})]}),o.jsxs("select",{value:a,onChange:S=>i(S.target.value),className:"w-[120px] h-[54px] bg-card border border-border rounded-xl px-3 text-[15px] font-semibold text-foreground appearance-none cursor-pointer outline-none",children:[o.jsx("option",{value:"latest",children:""}),o.jsx("option",{value:"name",children:""})]})]}),o.jsx("div",{className:"grid grid-cols-3 gap-2 mb-5",children:["pending","wait","approved"].map(S=>{const _=bc[S];return o.jsxs("button",{onClick:()=>s(n===S?"all":S),className:U("p-3.5 rounded-xl text-center flex flex-col items-center gap-1 border cursor-pointer transition-all active:scale-[0.98] shadow-soft",_.bgCls,_.borderCls,n===S&&"ring-2 ring-primary/30"),children:[o.jsx("span",{className:U("text-[22px] font-[800]",_.textCls),children:y[S]}),o.jsx("span",{className:U("text-[13px] font-semibold",_.textCls),children:_.label})]},S)})}),k.length===0?o.jsxs("div",{className:"text-center py-20 text-muted-foreground flex flex-col items-center gap-2",children:[o.jsx(kr,{className:"w-10 h-10 opacity-50"}),o.jsx("p",{children:e?"  .":" ."})]}):o.jsx("div",{className:"flex flex-col gap-4",children:k.map(S=>{const _=bc[S.status],P=S.photos.length>0,D=S.drawings.length>0,T=S.certDocs.length>0;return o.jsxs("div",{onClick:()=>{f(S),b(!1)},className:U("bg-card rounded-2xl shadow-soft overflow-hidden relative cursor-pointer transition-all active:scale-[0.98]",S.isPinned&&"border-2 border-primary shadow-[0_4px_12px_rgba(49,163,250,0.2)]"),children:[o.jsx("span",{className:U("absolute top-0 right-0 text-[11px] font-bold px-3 py-1 text-white rounded-bl-xl z-10",_.badgeBg),children:_.label}),o.jsxs("div",{className:"p-5",children:[o.jsxs("div",{className:"flex items-center gap-1.5 mb-1 text-[15px] text-text-sub font-semibold",children:[o.jsx(Va,{className:"w-3.5 h-3.5"})," ",S.latestDate]}),o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"text-[19px] font-[800] text-header-navy flex-1 truncate mr-2",children:S.siteName}),o.jsx("button",{onClick:M=>{M.stopPropagation(),v(S.id)},className:U("p-1 transition-colors",S.isPinned?"text-primary":"text-border"),children:S.isPinned?o.jsx(iu,{className:"w-4 h-4"}):o.jsx(lu,{className:"w-4 h-4"})})]}),S.latestContent&&o.jsx("div",{className:"flex items-center gap-1.5 mb-3",children:o.jsx("span",{className:"text-[15px] font-semibold text-foreground truncate",children:S.latestContent})}),o.jsxs("div",{className:"flex items-center justify-between border-t border-dashed border-border pt-3",children:[o.jsxs("span",{className:"text-[15px] font-semibold flex items-center gap-1.5",children:[o.jsx(Ft,{className:"w-4 h-4 text-primary"}),o.jsxs("span",{className:"text-foreground",children:[S.workerCount,""]}),o.jsxs("span",{className:"text-text-sub",children:["(",S.totalDays,")"]})]}),o.jsxs("div",{className:"flex gap-2 items-center",children:[o.jsx(Tn,{className:U("w-4 h-4",P?"text-header-navy":"text-border")}),o.jsx(Qn,{className:U("w-4 h-4",D?"text-header-navy":"text-border")}),o.jsx(Pd,{className:U("w-4 h-4",T?"text-header-navy":"text-border")})]})]})]})]},S.id)})}),N&&o.jsxs("button",{onClick:()=>h(S=>S+5),className:"w-full h-[50px] mt-4 bg-card border border-border rounded-full text-text-sub font-semibold text-[15px] flex items-center justify-center gap-1.5 cursor-pointer transition-all hover:bg-muted active:scale-[0.98]",children:["  ",o.jsx(Nt,{className:"w-4 h-4"})]}),u&&o.jsxs("div",{className:"fixed inset-0 z-[2000] bg-background flex flex-col animate-fade-in",children:[o.jsxs("div",{className:"h-[60px] px-4 flex items-center justify-between bg-card border-b border-border",children:[o.jsx("button",{onClick:()=>f(null),className:"bg-transparent border-none",children:o.jsx(Ha,{className:"w-6 h-6 text-text-sub"})}),o.jsx("span",{className:"text-[18px] font-[800] text-header-navy absolute left-1/2 -translate-x-1/2",children:"  "}),o.jsx("div",{className:"w-6"})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-4 pb-10",children:[o.jsxs("div",{className:"bg-card rounded-2xl p-5 mb-4 shadow-soft",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-border",children:[o.jsxs("span",{className:"text-[17px] font-[800] text-header-navy flex items-center gap-2",children:[o.jsx(s1,{className:"w-5 h-5"}),"  "]}),o.jsx("span",{className:U("text-[13px] font-[800] px-3 py-1.5 rounded-full text-white",bc[u.status].badgeBg),children:bc[u.status].label})]}),o.jsxs("div",{className:"space-y-2.5 text-[15px]",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-text-sub font-medium",children:""}),o.jsx("span",{className:"font-bold text-foreground",children:u.siteName})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-text-sub font-medium",children:""}),o.jsx("span",{className:"font-bold text-foreground",children:u.latestContent||"-"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-text-sub font-medium",children:""}),o.jsxs("span",{className:"font-bold text-foreground",children:[u.workerCount,""]})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-text-sub font-medium",children:" "}),o.jsxs("button",{onClick:()=>b(!p),className:"flex items-center gap-1 font-bold text-foreground bg-transparent border-none cursor-pointer",children:[u.totalDays," (",u.totalManpower,")",o.jsx(Nt,{className:U("w-4 h-4 text-muted-foreground transition-transform",p&&"rotate-180")})]})]}),p&&u.detailDates.length>0&&o.jsx("div",{className:"bg-muted/50 rounded-xl p-3 mt-2 animate-fade-in",children:u.detailDates.map((S,_)=>o.jsxs("div",{className:"flex justify-between text-[14px] py-1",children:[o.jsx("span",{className:"text-text-sub",children:S.date}),o.jsxs("span",{className:"font-bold text-foreground",children:[S.man,""]})]},_))})]})]}),o.jsxs("div",{className:"bg-card rounded-2xl p-5 mb-4 shadow-soft",children:[o.jsx("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-border",children:o.jsxs("span",{className:"text-[17px] font-[800] text-header-navy flex items-center gap-2",children:[o.jsx(y3,{className:"w-5 h-5"}),"   "]})}),u.photos.length>0?u.photos.map((S,_)=>o.jsx(dh,{icon:o.jsx(Tn,{className:"w-6 h-6 text-muted-foreground"}),title:S.name,sub:S.date},`p-${_}`)):o.jsx("p",{className:"text-[14px] text-muted-foreground mb-2",children:"  ."}),u.drawings.length>0?u.drawings.map((S,_)=>o.jsx(dh,{icon:o.jsx(Qn,{className:"w-6 h-6 text-muted-foreground"}),title:S.name,sub:S.date},`d-${_}`)):o.jsx("p",{className:"text-[14px] text-muted-foreground",children:"  ."})]}),o.jsxs("div",{className:"bg-card rounded-2xl p-5 mb-4 shadow-soft",children:[o.jsx("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-border",children:o.jsxs("span",{className:"text-[17px] font-[800] text-header-navy flex items-center gap-2",children:[o.jsx(n1,{className:"w-5 h-5"}),"  "]})}),o.jsx(vc,{title:" ",children:u.certDocs.length>0?u.certDocs.map((S,_)=>o.jsx(dh,{icon:o.jsx(Pd,{className:"w-6 h-6 text-muted-foreground"}),title:S.name,sub:S.date},_)):o.jsx("p",{className:"text-[14px] text-muted-foreground",children:"  ."})}),o.jsx(vc,{title:"",children:o.jsx(uh,{label:" "})}),o.jsx(vc,{title:"",children:o.jsx(uh,{label:" "})}),o.jsx(vc,{title:" ",noBorder:!0,children:o.jsx(uh,{label:"  "})})]})]})]})]})}function dh({icon:e,title:t,sub:r}){return o.jsxs("div",{className:"flex items-center justify-between bg-card border border-border p-4 rounded-xl mb-2.5 cursor-pointer transition-all active:scale-[0.98] hover:bg-muted/50",children:[o.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e,o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"text-[15px] font-bold text-foreground truncate",children:t}),o.jsx("div",{className:"text-[13px] text-muted-foreground",children:r})]})]}),o.jsx(En,{className:"w-5 h-5 text-muted-foreground flex-shrink-0"})]})}function vc({title:e,children:t,noBorder:r}){return o.jsxs("div",{className:U("mb-6",!r&&""),children:[o.jsx("div",{className:"text-[15px] font-bold text-text-sub mb-2",children:e}),t]})}function uh({label:e}){return o.jsxs("button",{className:"w-full h-[54px] border border-dashed border-primary bg-primary/[0.04] text-primary rounded-xl font-bold text-[15px] flex items-center justify-center gap-2 cursor-pointer transition-all hover:bg-primary/[0.08] active:scale-[0.98] mt-2",children:[o.jsx(_m,{className:"w-[18px] h-[18px]"})," ",e]})}const S0={draft:{label:"",className:"bg-blue-50 text-blue-500 border-blue-200",next:"pending"},pending:{label:"",className:"bg-indigo-50 text-indigo-500 border-indigo-200",next:"approved"},approved:{label:"",className:"bg-muted text-muted-foreground border-border"},rejected:{label:"",className:"bg-red-50 text-red-600 border-red-200",next:"draft"}},hR=[{key:"all",label:""},{key:"draft",label:""},{key:"pending",label:""},{key:"approved",label:""},{key:"rejected",label:""}];function fR(){const{isPartner:e}=Zn();return e?o.jsx(uR,{}):o.jsx(pR,{})}function pR(){const[e,t]=m.useState(""),[r,n]=m.useState("all"),[s,a]=m.useState(null),[i,l]=m.useState(null),{data:c=[],isLoading:d}=Cm(),h=IT(),u=DT(),f=m.useMemo(()=>c.filter(x=>r==="all"||x.status===r).filter(x=>{var y;return x.siteName.toLowerCase().includes(e.toLowerCase())||x.workDate.includes(e)||((y=x.workSets)==null?void 0:y.some(v=>{const k=v.member===""?v.customMemberValue:v.member,N=v.process===""?v.customProcessValue:v.process;return k&&k.includes(e)||N&&N.includes(e)}))}).sort((x,y)=>y.workDate.localeCompare(x.workDate)||y.createdAt.localeCompare(x.createdAt)),[c,r,e]),p=m.useMemo(()=>({all:c.length,draft:c.filter(x=>x.status==="draft").length,pending:c.filter(x=>x.status==="pending").length,approved:c.filter(x=>x.status==="approved").length,rejected:c.filter(x=>x.status==="rejected").length}),[c]),b=(x,y)=>{h.mutate({id:x,status:y},{onSuccess:()=>V.success(` "${S0[y].label}"() `)})},g=x=>{window.confirm("  ?")&&u.mutate(x,{onSuccess:()=>{a(null),V.success(" ")}})},w=x=>{var y;return((y=x.manpower)==null?void 0:y.reduce((v,k)=>v+(k.workHours||0),0))||0};return d?o.jsx("div",{className:"flex items-center justify-center py-20",children:o.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):o.jsxs("div",{className:"animate-fade-in",children:[o.jsxs("div",{className:"relative mb-3 mt-3",children:[o.jsx("input",{value:e,onChange:x=>t(x.target.value),placeholder:"    ",className:"w-full h-[50px] bg-card border border-border rounded-xl px-4 pr-12 text-base-app font-medium text-foreground placeholder:text-muted-foreground transition-all hover:border-primary/50 focus:border-primary focus:shadow-[0_0_0_3px_rgba(49,163,250,0.15)] outline-none"}),e?o.jsx("button",{onClick:()=>t(""),className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 rounded-full bg-muted flex items-center justify-center",children:o.jsx(He,{className:"w-3 h-3 text-muted-foreground"})}):o.jsx(_r,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"})]}),o.jsx("div",{className:"flex gap-1.5 mb-4 overflow-x-auto pb-1 no-scrollbar",children:hR.map(x=>o.jsxs("button",{onClick:()=>n(x.key),className:U("h-10 px-3.5 rounded-full text-sm-app font-medium whitespace-nowrap flex-shrink-0 border transition-all cursor-pointer flex items-center gap-1.5",r===x.key?"bg-header-navy text-header-navy-foreground border-transparent shadow-none":"bg-card text-muted-foreground border-border hover:bg-muted/40 hover:border-border"),children:[x.label,p[x.key]>0&&o.jsx("span",{className:U("min-w-[18px] h-[18px] rounded-full text-[10px] font-[900] flex items-center justify-center",r===x.key?"bg-white/20 text-white":"bg-muted text-muted-foreground"),children:p[x.key]})]},x.key))}),f.length===0&&o.jsxs("div",{className:"text-center py-20",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-muted rounded-full mb-5",children:o.jsx(Va,{className:"w-8 h-8 text-muted-foreground opacity-60"})}),o.jsx("p",{className:"text-base-app font-medium text-muted-foreground mb-2",children:c.length===0?"  ":"  "}),c.length===0&&o.jsx("p",{className:"text-sm-app text-muted-foreground",children:"     "})]}),o.jsx("div",{className:"space-y-3",children:f.map(x=>{var T,M,z,F;const y=S0[x.status],v=s===x.id,k=w(x),N=((T=x.manpower)==null?void 0:T.length)||0,S=(M=x.workSets)==null?void 0:M[0],_=S?S.member===""?S.customMemberValue:S.member:"",P=S?S.process===""?S.customProcessValue:S.process:"",D=[_,P].filter(Boolean).join("  ")||" ";return o.jsxs("div",{className:"bg-card rounded-2xl shadow-soft overflow-hidden transition-all",children:[o.jsxs("div",{className:"p-5 cursor-pointer active:bg-muted/30 transition-colors",onClick:()=>a(v?null:x.id),children:[o.jsxs("div",{className:"flex items-start justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Va,{className:"w-4 h-4 text-primary"}),o.jsx("span",{className:"text-sm-app text-text-sub font-medium",children:x.workDate}),x.version>1&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"text-sm-app text-text-sub",children:""}),o.jsxs("span",{className:"text-tiny text-muted-foreground font-medium",children:["v",x.version]})]})]}),o.jsx("span",{className:U("text-tiny font-bold px-2.5 py-1 rounded-full border",y.className),children:y.label})]}),o.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[o.jsx(Ft,{className:"w-4 h-4 text-primary flex-shrink-0"}),o.jsx("span",{className:"text-sm-app text-primary font-bold truncate",children:x.siteName})]}),o.jsx("p",{className:"text-base-app font-bold text-foreground mb-2 truncate",children:D}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("span",{className:"text-sm-app text-text-sub font-medium",children:[" ",N,""]}),o.jsx("span",{className:"text-sm-app text-text-sub",children:""}),o.jsxs("span",{className:"text-sm-app text-text-sub font-medium",children:[k.toFixed(1),""]}),x.photoCount>0&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"text-sm-app text-text-sub",children:""}),o.jsxs("span",{className:"text-sm-app text-text-sub font-medium",children:[" ",x.photoCount]})]})]}),o.jsx(Nt,{className:U("w-5 h-5 text-muted-foreground transition-transform",v&&"rotate-180")})]})]}),v&&o.jsxs("div",{className:"px-5 pb-5 border-t border-border animate-slide-down",children:[o.jsxs("div",{className:"py-3 border-b border-dashed border-border",children:[o.jsx("div",{className:"text-sm-app font-bold text-text-sub mb-2",children:" "}),o.jsx("div",{className:"flex flex-wrap gap-2",children:(z=x.manpower)==null?void 0:z.map((W,Q)=>o.jsxs("span",{className:"text-sm-app bg-muted px-3 py-1.5 rounded-lg font-medium",children:[W.worker," ",o.jsx("span",{className:"text-primary font-bold",children:W.workHours.toFixed(1)})]},Q))})]}),o.jsxs("div",{className:"py-3 border-b border-dashed border-border",children:[o.jsx("div",{className:"text-sm-app font-bold text-text-sub mb-2",children:" "}),(F=x.workSets)==null?void 0:F.map((W,Q)=>{var L,re,ee;const K=W.member===""?W.customMemberValue:W.member,ne=W.process===""?W.customProcessValue:W.process,A=W.type===""?W.customTypeValue:W.type,O=[(L=W.location)==null?void 0:L.block,(re=W.location)==null?void 0:re.dong,(ee=W.location)==null?void 0:ee.floor].filter(Boolean).join("/");return o.jsxs("div",{className:"text-sm-app mb-1.5",children:[o.jsx("span",{className:"font-bold text-foreground",children:K}),ne&&o.jsxs("span",{className:"text-text-sub",children:["  ",ne]}),A&&o.jsxs("span",{className:"text-text-sub",children:["  ",A]}),O&&o.jsxs("span",{className:"text-muted-foreground ml-1",children:["(",O,")"]})]},Q)})]}),x.materials&&x.materials.length>0&&o.jsxs("div",{className:"py-3 border-b border-dashed border-border",children:[o.jsx("div",{className:"text-sm-app font-bold text-text-sub mb-2",children:" "}),x.materials.map((W,Q)=>o.jsxs("div",{className:"text-sm-app flex justify-between",children:[o.jsx("span",{children:W.name}),o.jsxs("span",{className:"text-primary font-bold",children:[W.qty,""]})]},Q))]}),o.jsxs("div",{className:"py-3 border-b border-dashed border-border text-tiny text-muted-foreground",children:[o.jsxs("div",{children:[": ",new Date(x.createdAt).toLocaleString("ko-KR")]}),x.updatedAt&&o.jsxs("div",{children:[": ",new Date(x.updatedAt).toLocaleString("ko-KR")]})]}),o.jsxs("div",{className:"flex gap-2 pt-3",children:[x.status==="draft"&&o.jsxs("button",{onClick:()=>b(x.id,"pending"),className:"flex-1 h-11 bg-indigo-50 text-indigo-600 border border-indigo-200 rounded-xl font-bold text-sm-app flex items-center justify-center gap-1.5",children:[o.jsx(Ls,{className:"w-4 h-4"})," "]}),x.status==="pending"&&o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:()=>b(x.id,"approved"),className:"flex-1 h-11 bg-emerald-50 text-emerald-600 border border-emerald-200 rounded-xl font-bold text-sm-app flex items-center justify-center gap-1.5",children:[o.jsx(ha,{className:"w-4 h-4"})," "]}),o.jsxs("button",{onClick:()=>b(x.id,"rejected"),className:"flex-1 h-11 bg-red-50 text-red-600 border border-red-200 rounded-xl font-bold text-sm-app flex items-center justify-center gap-1.5",children:[o.jsx(Nm,{className:"w-4 h-4"})," "]})]}),x.status==="rejected"&&o.jsxs("button",{onClick:()=>b(x.id,"draft"),className:"flex-1 h-11 bg-blue-50 text-blue-600 border border-blue-200 rounded-xl font-bold text-sm-app flex items-center justify-center gap-1.5",children:[o.jsx(i1,{className:"w-4 h-4"})," "]}),o.jsx("button",{onClick:()=>l(x),className:"h-11 px-4 bg-primary-bg text-primary border border-primary/30 rounded-xl font-bold text-sm-app flex items-center justify-center gap-1.5",children:""}),o.jsx("button",{onClick:()=>g(x.id),className:"h-11 px-3 bg-destructive/10 text-destructive border border-destructive/20 rounded-xl font-bold text-sm-app flex items-center justify-center",children:o.jsx(Qa,{className:"w-4 h-4"})})]})]})]},x.id)})}),o.jsx(j1,{open:!!i,onClose:()=>l(null),title:i?`${i.siteName}  `:"",children:i&&o.jsx(k1,{entry:i})})]})}function mR(){const{isAdmin:e}=Zn(),[t,r]=m.useState(""),[n,s]=m.useState("latest"),[a,i]=m.useState("all"),[l,c]=m.useState(!1),[d,h]=m.useState(()=>{const F=localStorage.getItem("admin_pinned_ids");return F?new Set(JSON.parse(F)):new Set}),[u,f]=m.useState(null),[p,b]=m.useState(1),[g,w]=m.useState(""),x=Vt(),{data:y=[],isLoading:v}=$t({queryKey:["admin-worklogs"],queryFn:async()=>{const{data:F,error:W}=await ue.from("worklogs").select(`
          id, site_name, site_id, work_date, status, created_by, created_at, dept, weather,
          worklog_manpower(worker_name, work_hours),
          worklog_worksets(member, process, work_type, block, dong, floor),
          worklog_materials(name, qty)
        `).order("created_at",{ascending:!1}).limit(100);if(W)throw W;const Q=[...new Set((F||[]).map(A=>A.created_by))],{data:K}=await ue.from("profiles").select("user_id, name, phone, affiliation").in("user_id",Q),ne={};return K==null||K.forEach(A=>{ne[A.user_id]=A}),(F||[]).map(A=>{const O=ne[A.created_by],L=A.worklog_manpower||[],re=A.worklog_worksets||[],ee=A.worklog_materials||[],G=re[0],le=L.reduce((Te,je)=>Te+(je.work_hours||0),0),ve=G&&[G.block,G.dong,G.floor].filter(Boolean).join(" ")||"";return{id:A.id,name:(O==null?void 0:O.name)||"",role:"",affiliation:(O==null?void 0:O.affiliation)||"",site:A.site_name,siteId:A.site_id,member:(G==null?void 0:G.member)||"-",process:(G==null?void 0:G.process)||"-",workType:(G==null?void 0:G.work_type)||"-",location:ve,man:le,cumDays:0,cumMan:0,task:re.map(Te=>`${Te.member||""} ${Te.process||""}`).join(", ")||"  ",status:A.status==="draft"||A.status==="submitted"?"pending":A.status,latestDate:A.created_at,phone:(O==null?void 0:O.phone)||"",pinned:!1,worklogId:A.id,materials:ee.map(Te=>`${Te.name} (${Te.qty})`).join("  ")||"-"}})}}),k=tr({mutationFn:async({worklogId:F,newStatus:W})=>{const{error:Q}=await ue.from("worklogs").update({status:W}).eq("id",F);if(Q)throw Q},onSuccess:()=>{x.invalidateQueries({queryKey:["admin-worklogs"]}),f(null),w(""),b(1)}}),N=m.useCallback(F=>{h(W=>{const Q=new Set(W);return Q.has(F)?Q.delete(F):Q.add(F),localStorage.setItem("admin_pinned_ids",JSON.stringify([...Q])),Q})},[]),S=m.useMemo(()=>y.map(F=>({...F,pinned:d.has(F.id)})),[y,d]),_=m.useMemo(()=>{let F=S.filter(W=>{const Q=t.toLowerCase(),K=!Q||W.name.toLowerCase().includes(Q)||W.site.toLowerCase().includes(Q),ne=a==="all"||W.status===a;return K&&ne});return F.sort((W,Q)=>W.pinned!==Q.pinned?W.pinned?-1:1:n==="name"?W.name.localeCompare(Q.name,"ko"):new Date(Q.latestDate).getTime()-new Date(W.latestDate).getTime()),F},[S,t,a,n]),P=l?_:_.slice(0,3),D=m.useMemo(()=>({all:S.length,pending:S.filter(F=>F.status==="pending").length,approved:S.filter(F=>F.status==="approved").length}),[S]),T=F=>{if(!F)return"";const W=new Date(F);return`${String(W.getMonth()+1).padStart(2,"0")}.${String(W.getDate()).padStart(2,"0")}.${String(W.getFullYear()).slice(2)}`},M=()=>{u&&k.mutate({worklogId:u.worklogId,newStatus:"approved"})},z=()=>{if(u){if(!g.trim()){alert("  .");return}k.mutate({worklogId:u.worklogId,newStatus:"rejected"})}};return v?o.jsx("div",{className:"py-20 text-center text-muted-foreground",children:" ..."}):o.jsxs("div",{className:"animate-fade-in mt-3",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx("input",{type:"text",value:t,onChange:F=>r(F.target.value),placeholder:"   ",className:"w-full h-[54px] bg-card border border-border rounded-xl pl-4 pr-[75px] text-[17px] font-medium text-foreground placeholder:text-muted-foreground outline-none transition-all shadow-soft hover:border-primary/50 focus:border-primary focus:shadow-[0_0_0_3px_rgba(49,163,250,0.15)]"}),o.jsxs("div",{className:"absolute right-3.5 top-1/2 -translate-y-1/2 flex items-center gap-2",children:[t&&o.jsx("button",{onClick:()=>r(""),className:"w-5 h-5 rounded-full bg-muted flex items-center justify-center text-muted-foreground",children:o.jsx(He,{className:"w-3 h-3"})}),o.jsx(_r,{className:"w-5 h-5 text-muted-foreground"})]})]}),o.jsxs("div",{className:"relative",children:[o.jsxs("select",{value:n,onChange:F=>s(F.target.value),className:"w-[95px] h-[54px] bg-card border border-border rounded-xl px-3 text-[15px] font-semibold text-foreground appearance-none outline-none cursor-pointer shadow-soft transition-all hover:border-primary/50 focus:border-primary focus:shadow-[0_0_0_3px_rgba(49,163,250,0.15)]",children:[o.jsx("option",{value:"latest",children:""}),o.jsx("option",{value:"name",children:""})]}),o.jsx(Nt,{className:"absolute right-2.5 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground pointer-events-none"})]})]}),o.jsx("div",{className:"grid grid-cols-3 gap-2.5 mb-5",children:[{key:"all",label:" ",val:D.all,colors:"bg-[hsl(217_100%_96%)] text-[#3b82f6] border-[#bfdbfe]"},{key:"pending",label:" ",val:D.pending,colors:"bg-[hsl(229_100%_96%)] text-[#6366f1] border-[#c7d2fe]"},{key:"approved",label:" ",val:D.approved,colors:"bg-muted text-text-sub border-[#94a3b8]"}].map(F=>o.jsxs("button",{onClick:()=>{i(F.key),c(!1)},className:U("p-3.5 rounded-2xl text-center flex flex-col items-center gap-0.5 border cursor-pointer transition-all active:scale-[0.98]",F.colors,a===F.key&&"ring-1 ring-primary/30 -translate-y-px"),children:[o.jsx("span",{className:"text-[22px] font-[800] leading-tight",children:F.val}),o.jsx("span",{className:"text-[12px] font-bold opacity-90",children:F.label})]},F.key))}),_.length===0?o.jsx("div",{className:"text-center py-20 text-muted-foreground",children:"  ."}):o.jsx("div",{className:"flex flex-col gap-2",children:P.map(F=>o.jsxs("div",{className:U("bg-card rounded-2xl shadow-soft overflow-hidden relative",F.pinned&&"border-2 border-primary shadow-[0_4px_12px_rgba(49,163,250,0.2)]"),children:[o.jsx("span",{className:U("absolute top-0 right-0 text-[11px] font-bold px-3.5 py-1.5 text-white z-10",F.pinned?"rounded-bl-xl rounded-tr-[14px]":"rounded-bl-xl rounded-tr-2xl",F.status==="pending"?"bg-[#6366f1]":F.status==="approved"?"bg-[#475569]":"bg-destructive"),children:F.status==="pending"?"":F.status==="approved"?"":""}),o.jsxs("div",{className:"p-5 pb-3 cursor-pointer",onClick:()=>{f(F),b(1)},children:[o.jsxs("div",{className:"flex items-center gap-1.5 mb-1 flex-wrap",children:[o.jsx("span",{className:"text-[20px] font-[800] text-header-navy",children:F.name}),o.jsx("span",{className:"text-[16px] font-semibold text-text-sub ml-2",children:F.role})]}),o.jsxs("div",{className:"flex items-center justify-between w-full mt-1",children:[o.jsxs("div",{className:"flex items-center gap-1 flex-1 min-w-0 overflow-hidden",children:[o.jsx("span",{className:"text-[14px] font-semibold px-2 py-0.5 rounded-lg bg-[hsl(229_100%_96%)] text-[#6366f1] border border-[#c7d2fe] shrink-0",children:F.affiliation}),o.jsx("span",{className:"text-[17px] font-[800] text-header-navy truncate",children:F.site})]}),o.jsx("button",{onClick:W=>{W.stopPropagation(),N(F.id)},className:U("p-1 shrink-0 ml-2 transition-colors",F.pinned?"text-primary":"text-border"),children:F.pinned?o.jsx(lu,{className:"w-6 h-6 fill-current"}):o.jsx(iu,{className:"w-6 h-6"})})]}),o.jsxs("div",{className:"flex items-center gap-1 mt-2 text-[14px] text-text-sub font-semibold",children:[o.jsxs("span",{className:"text-[#0369a1] font-[800]",children:[T(F.latestDate)," l"]}),o.jsx(Ft,{className:"w-3.5 h-3.5 mr-1"}),o.jsxs("span",{children:[F.member,"  ",F.process,"  ",F.location]})]}),o.jsxs("div",{className:"grid grid-cols-3 bg-muted/50 rounded-xl p-3 mt-3 border border-border/50",children:[o.jsxs("div",{className:"text-center border-r border-border",children:[o.jsx("span",{className:"block text-[17px] font-[800] text-primary",children:F.man}),o.jsx("span",{className:"block text-[11px] font-bold text-text-sub",children:" "})]}),o.jsxs("div",{className:"text-center border-r border-border",children:[o.jsxs("span",{className:"block text-[17px] font-[800] text-primary",children:[F.cumDays,""]}),o.jsx("span",{className:"block text-[11px] font-bold text-text-sub",children:" "})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("span",{className:"block text-[17px] font-[800] text-primary",children:F.cumMan}),o.jsx("span",{className:"block text-[11px] font-bold text-text-sub",children:" "})]})]})]}),o.jsxs("div",{className:"px-5 pb-4 flex gap-2",children:[F.phone&&o.jsxs("a",{href:`tel:${F.phone}`,onClick:W=>W.stopPropagation(),className:"flex-1 h-12 flex items-center justify-center gap-1.5 text-[14px] font-bold rounded-xl border bg-[hsl(138_76%_97%)] border-[#bbf7d0] text-[#166534] cursor-pointer transition-all active:scale-[0.98]",children:[o.jsx(zs,{className:"w-3.5 h-3.5"}),""]}),F.phone&&o.jsxs("a",{href:`sms:${F.phone}`,onClick:W=>W.stopPropagation(),className:"flex-1 h-12 flex items-center justify-center gap-1.5 text-[14px] font-bold rounded-xl border bg-[hsl(229_100%_96%)] border-[#c7d2fe] text-[#6366f1] cursor-pointer transition-all active:scale-[0.98]",children:[o.jsx(k3,{className:"w-3.5 h-3.5"}),""]}),o.jsxs("button",{onClick:W=>{W.stopPropagation(),f(F),b(1)},className:"flex-1 h-12 flex items-center justify-center gap-1.5 text-[14px] font-[800] rounded-xl border bg-muted border-[#94a3b8] text-[#334155] cursor-pointer transition-all active:scale-[0.98] shadow-sm",children:[o.jsx(Ga,{className:"w-3.5 h-3.5"}),""]})]})]},F.id))}),_.length>3&&o.jsxs("button",{onClick:()=>c(!l),className:"w-full h-[54px] bg-card border border-border rounded-full text-text-sub font-semibold text-[15px] cursor-pointer mt-2.5 mb-4 flex items-center justify-center gap-1.5 transition-all hover:bg-muted",children:[o.jsx("span",{children:l?"":" "}),l?o.jsx(Il,{className:"w-4 h-4"}):o.jsx(Nt,{className:"w-4 h-4"})]}),u&&o.jsx("div",{className:"fixed inset-0 bg-black/50 z-[2000] flex items-end justify-center p-0",onClick:()=>{f(null),b(1),w("")},children:o.jsxs("div",{className:"w-full max-w-[600px] bg-card rounded-t-[20px] p-6 max-h-[90vh] overflow-y-auto animate-slide-up",onClick:F=>F.stopPropagation(),children:[o.jsxs("div",{className:"flex items-center justify-between mb-5",children:[o.jsx("h3",{className:"text-[20px] font-bold text-foreground m-0",children:" "}),o.jsx("button",{onClick:()=>{f(null),b(1),w("")},className:"bg-transparent border-none text-text-sub cursor-pointer p-1",children:o.jsx(He,{className:"w-6 h-6"})})]}),p===1&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"bg-muted/50 rounded-[14px] p-[18px] mb-4 border border-border",children:[o.jsxs("div",{className:"text-[14px] font-[800] text-header-navy mb-2.5 flex items-center gap-1.5",children:[o.jsx(Dt,{className:"w-4 h-4"}),"    "]}),o.jsx("div",{className:"text-[16px] font-[800] text-foreground leading-relaxed",children:u.task})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[o.jsxs("div",{className:"bg-muted/50 p-4 rounded-xl border border-border/50",children:[o.jsx("span",{className:"block text-[13px] font-[800] text-text-sub mb-1.5",children:" "}),o.jsxs("div",{className:"text-[19px] font-[900] text-header-navy",children:[u.man," "]})]}),o.jsxs("div",{className:"bg-muted/50 p-4 rounded-xl border border-border/50",children:[o.jsx("span",{className:"block text-[13px] font-[800] text-text-sub mb-1.5",children:" "}),o.jsx("div",{className:"text-[19px] font-[900] text-header-navy",children:new Date(u.latestDate).toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"})})]})]}),o.jsxs("button",{onClick:()=>b(2),className:"w-full h-14 rounded-xl text-[16px] font-[900] border border-[#e0f2fe] bg-[hsl(205_100%_97%)] text-[#0284c7] flex items-center justify-center gap-2 cursor-pointer mb-3",children:["   ",o.jsx(Ls,{className:"w-5 h-5"})]}),e&&o.jsx("button",{onClick:M,disabled:k.isPending,className:"w-full h-14 rounded-xl text-[16px] font-[900] border-none bg-header-navy text-white cursor-pointer shadow-[0_8px_22px_rgba(26,37,79,0.18)] disabled:opacity-50",children:" "})]}),p===2&&o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:()=>b(1),className:"flex items-center gap-1.5 text-text-sub font-bold mb-4 cursor-pointer bg-transparent border-none p-0",children:[o.jsx(wo,{className:"w-5 h-5"})," "]}),o.jsxs("div",{className:"bg-muted/50 rounded-[14px] p-[18px] mb-4 border border-border",children:[o.jsxs("div",{className:"text-[14px] font-[800] text-header-navy mb-2.5 flex items-center gap-1.5",children:[o.jsx(Qn,{className:"w-4 h-4"}),"    "]}),o.jsxs("div",{className:"text-[16px] font-[800] text-foreground",children:[u.member,"  ",u.process,"  ",u.location]})]}),o.jsxs("div",{className:"bg-muted/50 rounded-[14px] p-[18px] mb-4 border border-border",children:[o.jsxs("div",{className:"text-[14px] font-[800] text-header-navy mb-2.5 flex items-center gap-1.5",children:[o.jsx(_3,{className:"w-4 h-4"}),"   "]}),o.jsx("div",{className:"text-[13px] font-[800] text-foreground",children:u.materials})]}),e&&o.jsx("textarea",{value:g,onChange:F=>w(F.target.value),placeholder:"     .",className:"w-full h-24 p-3.5 border border-border rounded-xl text-[13px] font-bold outline-none resize-none mb-3.5 focus:border-primary focus:shadow-[0_0_0_3px_rgba(49,163,250,0.12)]"}),e?o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:z,disabled:k.isPending,className:"flex-1 h-14 rounded-xl text-[16px] font-[900] border-[1.5px] border-[#fecaca] bg-[hsl(0_100%_97%)] text-destructive cursor-pointer disabled:opacity-50",children:" "}),o.jsx("button",{onClick:M,disabled:k.isPending,className:"flex-1 h-14 rounded-xl text-[16px] font-[900] border-none bg-header-navy text-white cursor-pointer disabled:opacity-50",children:" "})]}):o.jsx("div",{className:"text-center py-3 text-[14px] font-semibold text-text-sub bg-muted rounded-xl",children:"   /  "})]})]})})]})}const xR=["","","","","","",""],gR={"2026-01-02":[{site:"",people:2,note:" "}],"2026-01-03":[{site:" Y1CUB",people:1,note:""},{site:"",people:3,note:""}],"2026-01-04":[{site:"",people:1,note:" "}],"2026-01-05":[{site:"",people:1,note:" "},{site:"",people:2,note:""}],"2026-01-06":[{site:"  2",people:2,note:"  "}],"2026-02-03":[{site:"  101",people:3,note:""}],"2026-02-05":[{site:"  P3",people:2,note:""}],"2026-02-10":[{site:"  101",people:4,note:""},{site:" ",people:1,note:""}],"2026-02-12":[{site:"  ",people:5,note:" "}],"2026-02-18":[{site:" ",people:3,note:" "}],"2026-02-20":[{site:" 4",people:6,note:" "}],"2026-02-23":[{site:"  101",people:2,note:""}]};function bR(){const e=new Date,[t,r]=m.useState(e.getFullYear()),[n,s]=m.useState(e.getMonth()+1),[a,i]=m.useState(""),[l,c]=m.useState(!1),[d,h]=m.useState(!1),[u,f]=m.useState(e.getFullYear()),[p,b]=m.useState(null),g=gR,w=m.useMemo(()=>{const N=new Date(t,n-1,1).getDay(),S=new Date(t,n,0).getDate(),_=[];for(let P=1;P<=S;P++){const D=`${t}-${String(n).padStart(2,"0")}-${String(P).padStart(2,"0")}`;let T=g[D]||[];a&&(T=T.filter(z=>z.site===a));const M=e.getFullYear()===t&&e.getMonth()+1===n&&e.getDate()===P;_.push({day:P,isToday:M,entries:T})}return{firstDay:N,cells:_}},[t,n,a,g]),x=m.useMemo(()=>{const N=new Set;let S=0,_=0;return w.cells.forEach(P=>{P.entries.length>0&&(_++,P.entries.forEach(D=>{N.add(D.site),S+=D.people}))}),{totalSites:N.size,totalPeople:S,workedDays:_}},[w]),v=m.useMemo(()=>{const N=new Set;return Object.values(g).forEach(S=>S.forEach(_=>N.add(_.site))),Array.from(N).sort()},[g]).filter(N=>N.toLowerCase().includes(a.toLowerCase())),k=N=>{let S=n+N,_=t;S>12&&(S=1,_++),S<1&&(S=12,_--),s(S),r(_)};return o.jsxs("div",{className:"animate-fade-in",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[o.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[o.jsx("input",{type:"text",value:a,onChange:N=>{i(N.target.value),c(!0)},onFocus:()=>c(!0),placeholder:"   ",className:"w-full h-[50px] bg-card border border-border rounded-xl px-4 pr-12 text-[17px] font-medium text-foreground placeholder:text-muted-foreground outline-none transition-all hover:border-primary/50 focus:border-primary focus:shadow-[0_0_0_3px_rgba(49,163,250,0.15)]"}),a&&o.jsx("button",{onClick:()=>{i(""),c(!1)},className:"absolute right-10 top-1/2 -translate-y-1/2 w-5 h-5 rounded-full bg-muted flex items-center justify-center text-[12px] text-muted-foreground z-10",children:""}),o.jsx("button",{onClick:()=>c(!l),className:"absolute right-4 top-1/2 -translate-y-1/2 text-muted-foreground",children:o.jsx(Nt,{className:"w-5 h-5"})}),l&&o.jsx("ul",{className:"absolute z-50 w-full mt-1.5 max-h-60 overflow-auto bg-card border border-border rounded-xl shadow-lg animate-fade-in",children:v.length===0?o.jsx("li",{className:"p-4 text-muted-foreground text-center text-sm-app",children:"  "}):v.map(N=>o.jsx("li",{onClick:()=>{i(N),c(!1)},className:"px-4 py-3.5 cursor-pointer border-b border-border last:border-0 text-[16px] font-medium text-foreground hover:bg-muted transition-colors",children:N},N))})]}),o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:()=>{f(t),h(!d)},className:U("flex items-center justify-between min-w-[145px] h-[54px] px-4 bg-card border border-border rounded-xl text-[17px] font-bold text-foreground cursor-pointer transition-all hover:border-primary/50",d&&"border-primary shadow-[0_0_0_3px_rgba(49,163,250,0.15)]"),children:[o.jsxs("span",{children:[t," ",n,""]}),o.jsx(Va,{className:"w-[18px] h-[18px] text-muted-foreground ml-2"})]}),d&&o.jsxs("div",{className:"absolute top-[calc(100%+8px)] right-0 w-[280px] bg-card border border-border rounded-2xl shadow-lg p-4 z-[1000] animate-fade-in",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4 px-1",children:[o.jsx("button",{onClick:()=>f(N=>N-1),className:"p-1 hover:bg-muted rounded",children:o.jsx(wo,{className:"w-[18px] h-[18px]"})}),o.jsxs("span",{className:"font-bold text-lg-app",children:[u,""]}),o.jsx("button",{onClick:()=>f(N=>N+1),className:"p-1 hover:bg-muted rounded",children:o.jsx(Ls,{className:"w-[18px] h-[18px]"})})]}),o.jsx("div",{className:"grid grid-cols-3 gap-2",children:Array.from({length:12},(N,S)=>S+1).map(N=>o.jsxs("button",{onClick:()=>{r(u),s(N),h(!1)},className:U("h-11 rounded-lg text-[15px] font-semibold cursor-pointer transition-all border-none",u===t&&N===n?"bg-primary/10 text-primary font-[800]":"text-text-sub hover:bg-muted hover:text-primary"),children:[N,""]},N))})]})]})]}),o.jsxs("div",{className:"rounded-2xl overflow-hidden mb-4 bg-card shadow-soft",children:[o.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-border",children:[o.jsx("button",{onClick:()=>k(-1),className:"bg-transparent border-none cursor-pointer text-text-sub p-2 hover:bg-muted rounded-full",children:o.jsx(wo,{className:"w-7 h-7"})}),o.jsxs("span",{className:"text-[22px] font-[800] text-foreground",children:[t," ",n,""]}),o.jsx("button",{onClick:()=>k(1),className:"bg-transparent border-none cursor-pointer text-text-sub p-2 hover:bg-muted rounded-full",children:o.jsx(Ls,{className:"w-7 h-7"})})]}),o.jsxs("div",{className:"grid grid-cols-7",children:[xR.map((N,S)=>o.jsx("div",{className:U("h-9 flex items-center justify-center text-[14px] font-bold border-b border-border bg-muted/50",S===0?"text-destructive":S===6?"text-primary":"text-text-sub"),children:N},N)),Array.from({length:w.firstDay}).map((N,S)=>o.jsx("div",{className:"min-h-[96px] border-b border-r border-border bg-card"},`empty-${S}`)),w.cells.map(N=>{const S=(w.firstDay+N.day-1)%7,_=N.entries.reduce((P,D)=>P+D.people,0);return o.jsxs("div",{onClick:()=>N.entries.length>0&&b({date:`${t}-${String(n).padStart(2,"0")}-${String(N.day).padStart(2,"0")}`,entries:N.entries}),className:U("min-h-[96px] p-1.5 flex flex-col items-center gap-0.5 cursor-pointer border-b border-border bg-card hover:bg-muted transition-colors",S<6&&"border-r"),children:[o.jsx("span",{className:U("text-[15px] font-bold w-[26px] h-[26px] rounded-full flex items-center justify-center mb-1",N.isToday?"bg-header-navy text-white font-[800]":S===0?"text-destructive":S===6?"text-primary":"text-foreground"),children:N.day}),N.entries.length>0&&o.jsxs("div",{className:"w-full flex flex-col items-center",children:[o.jsxs("span",{className:"text-[13px] font-[800] text-primary",children:[_,""]}),o.jsx("span",{className:"text-[11px] font-bold text-text-sub truncate max-w-full text-center",children:N.entries.length===1?N.entries[0].site.replace(/\s+/g,"").slice(0,4):`${N.entries[0].site.replace(/\s+/g,"").slice(0,4)}${N.entries.length-1}`})]})]},N.day)})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-2.5 mb-6",children:[o.jsxs("div",{className:"p-4 rounded-2xl text-center flex flex-col gap-1.5 shadow-soft bg-[hsl(201_100%_94%)] text-[#0284c7] border border-[#0284c7]",children:[o.jsx("span",{className:"text-[24px] font-[800] leading-tight tracking-tight",children:x.totalSites}),o.jsx("span",{className:"text-[14px] font-bold opacity-90",children:""})]}),o.jsxs("div",{className:"p-4 rounded-2xl text-center flex flex-col gap-1.5 shadow-soft bg-[hsl(225_33%_95%)] text-[#1e3a8a] border border-[#1e3a8a]",children:[o.jsx("span",{className:"text-[24px] font-[800] leading-tight tracking-tight",children:x.totalPeople}),o.jsx("span",{className:"text-[14px] font-bold opacity-90",children:""})]}),o.jsxs("div",{className:"p-4 rounded-2xl text-center flex flex-col gap-1.5 shadow-soft bg-muted text-text-sub border border-text-sub",children:[o.jsx("span",{className:"text-[24px] font-[800] leading-tight tracking-tight",children:x.workedDays}),o.jsx("span",{className:"text-[14px] font-bold opacity-90",children:""})]})]}),p&&o.jsx("div",{className:"fixed inset-0 bg-black/50 z-[3000] flex items-center justify-center p-5",onClick:()=>b(null),children:o.jsxs("div",{className:"bg-card w-full max-w-[440px] rounded-[20px] p-6 shadow-lg max-h-[80vh] overflow-y-auto border border-border",onClick:N=>N.stopPropagation(),children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("span",{className:"text-[20px] font-[800] text-foreground",children:"  "}),o.jsx("button",{onClick:()=>b(null),className:"bg-transparent border-none text-text-sub p-1 cursor-pointer",children:o.jsx(He,{className:"w-6 h-6"})})]}),o.jsx("div",{className:"text-sm-app text-text-sub mb-3 font-medium",children:p.date}),o.jsx("div",{className:"mt-2",children:p.entries.map((N,S)=>o.jsxs("div",{className:"flex justify-between items-start py-2.5 border-b border-border gap-3",children:[o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("div",{className:"text-[15px] font-bold text-foreground truncate",children:N.site}),N.note&&o.jsx("div",{className:"text-[13px] text-muted-foreground mt-0.5",children:N.note})]}),o.jsx("div",{className:"text-right shrink-0",children:o.jsxs("div",{className:"text-[15px] font-[800] text-primary",children:[N.people,""]})})]},S))}),o.jsxs("div",{className:"mt-4 pt-3 border-t border-border flex justify-between items-center",children:[o.jsx("span",{className:"text-[15px] font-bold text-text-sub",children:""}),o.jsxs("span",{className:"text-[18px] font-[800] text-primary",children:[p.entries.reduce((N,S)=>N+S.people,0),""]})]})]})})]})}const vR=["","","","","","",""],C0=[{rawDate:"2026-01",month:"2026 1",baseTotal:6e6,man:26,price:230769,year:2026,netPay:495e4,grossPay:6e6,deductions:105e4},{rawDate:"2026-02",month:"2026 2",baseTotal:58e5,man:24.5,price:236735,year:2026,netPay:4787e3,grossPay:58e5,deductions:1013e3},{rawDate:"2025-12",month:"2025 12",baseTotal:55e5,man:25,price:22e4,year:2025,netPay:4537500,grossPay:55e5,deductions:962500},{rawDate:"2025-11",month:"2025 11",baseTotal:47e5,man:22,price:213636,year:2025,netPay:3871e3,grossPay:47e5,deductions:829e3},{rawDate:"2025-10",month:"2025 10",baseTotal:23e5,man:10,price:23e4,year:2025,netPay:1894100,grossPay:23e5,deductions:405900}];function yR(){const{isAdmin:e,isPartner:t}=Zn();return t?o.jsx(bR,{}):o.jsx(wR,{isAdmin:e})}function wR({isAdmin:e}){const[t,r]=m.useState("output"),n=new Date,[s,a]=m.useState(n.getFullYear()),[i,l]=m.useState(n.getMonth()+1),[c,d]=m.useState(""),[h,u]=m.useState(!1),[f,p]=m.useState(!1),[b,g]=m.useState(n.getFullYear()),[w,x]=m.useState(!0),[y,v]=m.useState(!1),[k,N]=m.useState(n.getFullYear()),[S,_]=m.useState(null),[P,D]=m.useState("latest"),[T,M]=m.useState(!1),[z,F]=m.useState(n.getFullYear()),[W,Q]=m.useState(!1),[K,ne]=m.useState(null),[A,O]=m.useState(null),L=m.useRef(null),re=m.useRef(null),ee=m.useRef(null),{data:G=[]}=Cm(),le=m.useMemo(()=>{const $={};return G.filter(te=>{const ce=`${s}-${String(i).padStart(2,"0")}`;return te.workDate.startsWith(ce)}).forEach(te=>{var oe,Re,ge;$[te.workDate]||($[te.workDate]=[]);const ce=((oe=te.manpower)==null?void 0:oe.reduce((lt,ot)=>lt+(ot.workHours||0),0))||0,Ee=Math.round(ce*225e3);$[te.workDate].push({site:te.siteName,man:ce,price:Ee,worker:((ge=(Re=te.manpower)==null?void 0:Re[0])==null?void 0:ge.worker)||""})}),$},[G,s,i]),ve=m.useMemo(()=>{const $=new Date(s,i-1,1).getDay(),Z=new Date(s,i,0).getDate(),te=[];for(let ce=1;ce<=Z;ce++){const Ee=`${s}-${String(i).padStart(2,"0")}-${String(ce).padStart(2,"0")}`;let oe=le[Ee]||[];c&&(oe=oe.filter(ge=>ge.site===c));const Re=n.getFullYear()===s&&n.getMonth()+1===i&&n.getDate()===ce;te.push({day:ce,isToday:Re,entries:oe})}return{firstDay:$,cells:te}},[s,i,c,le]),Te=m.useMemo(()=>{const $=new Set;let Z=0,te=0;return ve.cells.forEach(ce=>{ce.entries.length>0&&(te++,ce.entries.forEach(Ee=>{$.add(Ee.site),Z+=Ee.man}))}),{totalSites:$.size,totalMan:Z.toFixed(1),workedDays:te}},[ve]),je=m.useMemo(()=>{let $=0,Z=0;ve.cells.forEach(Ee=>{Ee.entries.forEach(oe=>{$+=oe.man,Z+=oe.price})});const te=Math.floor(Z*.033),ce=Z-te;return{totalMan:$,totalPay:Z,deduction:te,netPay:ce}},[ve]),et=m.useMemo(()=>{const $=ve.cells.length,Z=Math.ceil((ve.firstDay+$)/7)*7;return Array.from({length:Z},(te,ce)=>{const Ee=ce-ve.firstDay+1;return Ee<1||Ee>$?null:ve.cells[Ee-1]})},[ve]),gt=m.useMemo(()=>{const $=new Set;return Object.values(le).forEach(Z=>Z.forEach(te=>$.add(te.site))),Array.from($).sort()},[le]).filter($=>$.toLowerCase().includes(c.toLowerCase())),Ye=$=>{let Z=i+$,te=s;Z>12&&(Z=1,te++),Z<1&&(Z=12,te--),l(Z),a(te)},At=m.useMemo(()=>{let $=C0.filter(Z=>Z.year===k);return S!==null&&($=$.filter(Z=>parseInt(Z.rawDate.split("-")[1])===S)),P==="amount"&&($=[...$].sort((Z,te)=>te.baseTotal-Z.baseTotal)),$},[k,S,P]),xe=y?At:At.slice(0,3),Kt=C0[0],Ce=$=>$.toLocaleString(),Gt=$=>{ne($),Q(!0)},Qt=$=>new Promise((Z,te)=>{const ce=document.querySelector(`script[src="${$}"]`);if(ce){if(ce.dataset.loaded==="true"){Z();return}ce.addEventListener("load",()=>Z(),{once:!0}),ce.addEventListener("error",()=>te(new Error(`Failed to load ${$}`)),{once:!0});return}const Ee=document.createElement("script");Ee.src=$,Ee.async=!0,Ee.onload=()=>{Ee.dataset.loaded="true",Z()},Ee.onerror=()=>te(new Error(`Failed to load ${$}`)),document.head.appendChild(Ee)}),$r=async()=>{window.html2canvas||await Qt("https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js")},yt=async()=>{var $;if(ee.current)try{await $r();const te=window.html2canvas;if(!te){alert("     .");return}const ce=await te(ee.current,{scale:2,backgroundColor:"#ffffff",useCORS:!0}),Ee=await new Promise(Qr=>ce.toBlob(Qr,"image/png",1));if(!Ee){alert("    .");return}const Re=`_${`${s}-${String(i).padStart(2,"0")}`}.png`,ge=new File([Ee],Re,{type:"image/png"});if(navigator.share&&(($=navigator.canShare)!=null&&$.call(navigator,{files:[ge]}))){await navigator.share({title:"  ",files:[ge]});return}const lt=URL.createObjectURL(Ee),ot=document.createElement("a");ot.href=lt,ot.download=Re,document.body.appendChild(ot),ot.click(),ot.remove(),URL.revokeObjectURL(lt)}catch{alert("    .")}},I=async()=>{const $=window;$.html2canvas||await Qt("https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"),$.jspdf||await Qt("https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js")},ae=async()=>{var Z;const $=re.current||L.current;if(!(!$||!K))try{await I();const te=window,ce=te.html2canvas,Ee=(Z=te.jspdf)==null?void 0:Z.jsPDF;if(!ce||!Ee){alert("PDF     .");return}const oe=$.cloneNode(!0);oe.style.position="fixed",oe.style.left="0",oe.style.top="-10000px",oe.style.width=`${$.offsetWidth||794}px`,oe.style.backgroundColor="#ffffff",oe.style.fontFamily="Arial, sans-serif",oe.style.pointerEvents="none",document.body.appendChild(oe);try{oe.querySelectorAll("td, th").forEach(Je=>{const qe=Je;qe.style.verticalAlign="middle",qe.style.lineHeight="1.5",qe.style.paddingTop="6px",qe.style.paddingBottom="16px",qe.style.paddingLeft="4px",qe.style.paddingRight="4px",qe.style.whiteSpace="nowrap",qe.style.height="auto",qe.style.boxSizing="border-box"});const Re=await ce(oe,{scale:2,backgroundColor:"#ffffff",useCORS:!0}),ge=Re.toDataURL("image/png"),lt=new Ee({orientation:"p",unit:"mm",format:"a4"}),ot=lt.internal.pageSize.getWidth(),Qr=lt.internal.pageSize.getHeight(),Ut=10,es=ot-Ut*2,ye=Qr-Ut*2;let Ie=es,$e=Re.height*Ie/Re.width;$e>ye&&($e=ye,Ie=Re.width*$e/Re.height);const Pe=(ot-Ie)/2,Ue=Ut;lt.addImage(ge,"PNG",Pe,Ue,Ie,$e),lt.save(`_${K.rawDate}.pdf`)}finally{oe.remove()}}catch{alert("PDF    .")}},J=(K==null?void 0:K.grossPay)??(K==null?void 0:K.baseTotal)??0,he=(K==null?void 0:K.deductions)??((K==null?void 0:K.netPay)!=null?Math.max(0,J-K.netPay):Math.floor(J*.033)),ke=(K==null?void 0:K.netPay)??Math.max(0,J-he);return o.jsxs("div",{className:"animate-fade-in",children:[o.jsxs("div",{className:"flex border-b border-border -mx-4 px-4 bg-card pt-0",style:{position:"sticky",top:114,zIndex:30},children:[o.jsx("button",{onClick:()=>r("output"),className:U("flex-1 min-w-0 h-12 bg-transparent border-none text-[16px] font-semibold cursor-pointer border-b-[3px] transition-all whitespace-nowrap px-1",t==="output"?"text-primary border-b-primary font-bold":"text-text-sub border-b-transparent"),children:""}),o.jsx("button",{onClick:()=>r("salary"),className:U("flex-1 min-w-0 h-12 bg-transparent border-none text-[16px] font-semibold cursor-pointer border-b-[3px] transition-all whitespace-nowrap px-1",t==="salary"?"text-primary border-b-primary font-bold":"text-text-sub border-b-transparent"),children:""}),e&&o.jsx("button",{onClick:()=>r("admin"),className:U("flex-1 min-w-0 h-12 bg-transparent border-none text-[16px] font-semibold cursor-pointer border-b-[3px] transition-all whitespace-nowrap px-1",t==="admin"?"text-primary border-b-primary font-bold":"text-text-sub border-b-transparent"),children:""})]}),t==="output"&&o.jsxs("div",{className:"animate-fade-in mt-3",children:[o.jsxs("div",{className:"flex items-center gap-3 max-[640px]:gap-2 mb-3",children:[o.jsxs("div",{className:"relative flex-1 min-w-0 md:min-w-[200px]",children:[o.jsx("input",{type:"text",value:c,onChange:$=>{d($.target.value),u(!0)},onFocus:()=>u(!0),placeholder:"   ",className:"w-full h-[50px] bg-card border border-border rounded-xl px-4 pr-12 text-[17px] font-medium text-foreground placeholder:text-muted-foreground outline-none transition-all hover:border-primary/50 focus:border-primary focus:shadow-[0_0_0_3px_rgba(49,163,250,0.15)]"}),c&&o.jsx("button",{onClick:()=>{d(""),u(!1)},className:"absolute right-10 top-1/2 -translate-y-1/2 w-5 h-5 rounded-full bg-muted flex items-center justify-center text-[12px] text-muted-foreground z-10",children:""}),o.jsx("button",{onClick:()=>u(!h),className:"absolute right-4 top-1/2 -translate-y-1/2 text-muted-foreground",children:o.jsx(Nt,{className:"w-5 h-5"})}),h&&o.jsx("ul",{className:"absolute z-50 w-full mt-1.5 max-h-60 overflow-auto bg-card border border-border rounded-xl shadow-lg animate-fade-in",children:gt.length===0?o.jsx("li",{className:"p-4 text-muted-foreground text-center text-sm-app",children:"  "}):gt.map($=>o.jsx("li",{onClick:()=>{d($),u(!1)},className:"px-4 py-3.5 cursor-pointer border-b border-border last:border-0 text-[16px] font-medium text-foreground hover:bg-muted transition-colors",children:$},$))})]}),o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:()=>{g(s),p(!f)},className:U("flex items-center justify-between min-w-[145px] max-[640px]:min-w-[118px] h-[50px] px-4 max-[640px]:px-3 bg-card border border-border rounded-xl text-[17px] max-[640px]:text-[16px] font-bold text-foreground cursor-pointer transition-all hover:border-primary/50",f&&"border-primary shadow-[0_0_0_3px_rgba(49,163,250,0.15)]"),children:[o.jsxs("span",{children:[String(s).slice(-2)," ",i,""]}),o.jsx(Va,{className:"w-[18px] h-[18px] text-muted-foreground ml-2"})]}),f&&o.jsxs("div",{className:"absolute top-[calc(100%+8px)] right-0 w-[280px] bg-card border border-border rounded-2xl shadow-lg p-4 z-[1000] animate-fade-in",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4 px-1",children:[o.jsx("button",{onClick:()=>g($=>$-1),className:"p-1 hover:bg-muted rounded",children:o.jsx(wo,{className:"w-[18px] h-[18px]"})}),o.jsxs("span",{className:"font-bold text-lg-app",children:[b,""]}),o.jsx("button",{onClick:()=>g($=>$+1),className:"p-1 hover:bg-muted rounded",children:o.jsx(Ls,{className:"w-[18px] h-[18px]"})})]}),o.jsx("div",{className:"grid grid-cols-3 gap-2",children:Array.from({length:12},($,Z)=>Z+1).map($=>o.jsxs("button",{onClick:()=>{a(b),l($),p(!1)},className:U("h-11 rounded-lg text-[15px] font-semibold cursor-pointer transition-all border-none",b===s&&$===i?"bg-primary/10 text-primary font-[800]":"text-text-sub hover:bg-muted hover:text-primary"),children:[$,""]},$))})]})]})]}),o.jsxs("div",{className:"rounded-2xl overflow-hidden mb-4 bg-card shadow-soft",children:[o.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-border",children:[o.jsx("button",{onClick:()=>Ye(-1),className:"bg-transparent border-none cursor-pointer text-text-sub p-2 hover:bg-muted rounded-full",children:o.jsx(wo,{className:"w-7 h-7"})}),o.jsxs("span",{className:"text-[22px] font-[800] text-foreground",children:[s," ",i,""]}),o.jsx("button",{onClick:()=>Ye(1),className:"bg-transparent border-none cursor-pointer text-text-sub p-2 hover:bg-muted rounded-full",children:o.jsx(Ls,{className:"w-7 h-7"})})]}),o.jsxs("div",{className:"grid grid-cols-7",children:[vR.map(($,Z)=>o.jsx("div",{className:U("h-9 flex items-center justify-center text-[14px] font-bold border-b border-border bg-muted/50",Z===0?"text-destructive":Z===6?"text-primary":"text-text-sub"),children:$},$)),Array.from({length:ve.firstDay}).map(($,Z)=>o.jsx("div",{className:"min-h-[96px] border-b border-r border-border bg-card"},`empty-${Z}`)),ve.cells.map($=>{const Z=(ve.firstDay+$.day-1)%7,te=$.entries.reduce((Ee,oe)=>Ee+oe.man,0),ce=$.entries.reduce((Ee,oe)=>Ee+oe.price,0);return o.jsxs("div",{onClick:()=>$.entries.length>0&&O({date:`${s}-${String(i).padStart(2,"0")}-${String($.day).padStart(2,"0")}`,entries:$.entries}),className:U("min-h-[96px] p-1.5 flex flex-col items-center gap-0.5 cursor-pointer border-b border-border bg-card hover:bg-muted transition-colors",Z<6&&"border-r"),children:[o.jsx("span",{className:U("text-[15px] font-bold w-[26px] h-[26px] rounded-full flex items-center justify-center mb-1",$.isToday?"bg-header-navy text-white font-[800]":Z===0?"text-destructive":Z===6?"text-primary":"text-foreground"),children:$.day}),$.entries.length>0&&o.jsxs("div",{className:"w-full flex flex-col items-center",children:[o.jsxs("span",{className:"text-[11px] font-bold text-text-sub",children:[te.toFixed(1),""]}),o.jsxs("span",{className:"text-[12px] font-[800] text-primary",children:["",(ce/1e4).toFixed(0),""]}),$.entries.length===1&&o.jsx("span",{className:"text-[10px] font-bold text-text-sub truncate max-w-full text-center",children:$.entries[0].site.slice(0,6)})]})]},$.day)})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-2.5 mb-0",children:[o.jsxs("div",{className:"p-3 rounded-2xl text-center flex flex-col gap-1 shadow-soft bg-[hsl(201_100%_94%)] text-[#0284c7] border border-[#0284c7]",children:[o.jsx("span",{className:"text-[22px] font-[800] leading-tight tracking-tight",children:Te.totalSites}),o.jsx("span",{className:"text-[13px] font-bold opacity-90",children:""})]}),o.jsxs("div",{className:"p-3 rounded-2xl text-center flex flex-col gap-1 shadow-soft bg-[hsl(225_33%_95%)] text-[#1e3a8a] border border-[#1e3a8a]",children:[o.jsx("span",{className:"text-[22px] font-[800] leading-tight tracking-tight",children:Te.totalMan}),o.jsx("span",{className:"text-[13px] font-bold opacity-90",children:""})]}),o.jsxs("div",{className:"p-3 rounded-2xl text-center flex flex-col gap-1 shadow-soft bg-muted text-text-sub border border-text-sub",children:[o.jsx("span",{className:"text-[22px] font-[800] leading-tight tracking-tight",children:Te.workedDays}),o.jsx("span",{className:"text-[13px] font-bold opacity-90",children:""})]})]})]}),t==="salary"&&o.jsxs("div",{className:"animate-fade-in mt-3",children:[o.jsxs("div",{className:"flex justify-between items-center mb-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(x3,{className:"w-[20px] h-[20px] text-header-navy"}),o.jsx("span",{className:"text-[20px] font-bold text-header-navy",children:"   "})]}),o.jsxs("button",{onClick:()=>x(!w),className:"bg-transparent border-none flex items-center gap-1 cursor-pointer text-text-sub text-[15px] font-semibold p-0",children:[o.jsx("span",{children:" /"}),w?o.jsx(Ed,{className:"w-4 h-4"}):o.jsx(En,{className:"w-4 h-4"})]})]}),o.jsxs("div",{className:"bg-card shadow-sm rounded-2xl p-6 mb-4 border border-border",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsxs("span",{className:"text-lg-app font-[800] text-foreground",style:{fontSize:18},children:[s," ",i,""]}),o.jsx("span",{className:"text-[13px] font-semibold px-2.5 py-1 rounded-full border bg-[#f0f9ff] text-[#0284c7] border-[#7dd3fc]",children:""})]}),o.jsxs("div",{className:"flex justify-between items-center mb-2 pb-3.5 border-b border-dashed border-border gap-2",children:[o.jsx("span",{className:"font-bold text-foreground shrink-0",children:" "}),o.jsxs("div",{className:"flex items-baseline justify-end gap-0.5 whitespace-nowrap",children:[o.jsx("span",{className:"text-[24px] text-primary font-[800] tracking-tighter",children:w?"****":Ce(Kt.netPay)}),o.jsx("span",{className:"text-base-app font-semibold text-primary",children:""})]})]}),o.jsxs("div",{className:"flex justify-between items-center mb-2 text-[15px]",children:[o.jsx("span",{className:"font-bold text-foreground shrink-0",children:""}),o.jsx("span",{className:"font-semibold text-foreground text-[16px]",children:Kt.man.toFixed(1)})]}),o.jsxs("div",{className:"flex justify-between items-center mb-2 text-[15px]",children:[o.jsx("span",{className:"font-bold text-foreground shrink-0",children:"(3.3%)"}),o.jsx("span",{className:"font-semibold text-foreground text-[16px]",children:w?"****":`${Ce(Kt.price)}`})]}),o.jsxs("button",{onClick:yt,className:"w-full mt-4 h-[50px] rounded-[10px] bg-header-navy text-white font-bold text-base-app cursor-pointer flex items-center justify-center gap-2 border-none transition-all active:scale-[0.98]",children:[o.jsx(P3,{className:"w-[18px] h-[18px]"}),"  ()"]})]}),o.jsx("div",{className:"flex justify-between items-center mb-3 mt-[12px]",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Dt,{className:"w-[20px] h-[20px] text-header-navy"}),o.jsx("span",{className:"text-[20px] font-bold text-header-navy",children:"  "})]})}),o.jsxs("div",{className:"flex gap-3 mb-3",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsxs("button",{onClick:()=>{F(k),M(!T)},className:U("flex items-center justify-between w-full h-[50px] px-4 bg-card border border-border rounded-xl text-[17px] font-bold text-foreground cursor-pointer transition-all hover:border-primary/50",T&&"border-primary shadow-[0_0_0_3px_rgba(49,163,250,0.15)]"),children:[o.jsxs("span",{children:[k," ",S!==null?`${S}`:""]}),o.jsx(Va,{className:"w-[18px] h-[18px] text-muted-foreground"})]}),T&&o.jsxs("div",{className:"absolute top-[calc(100%+8px)] left-0 w-[280px] bg-card border border-border rounded-2xl shadow-lg p-4 z-[1000] animate-fade-in",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4 px-1",children:[o.jsx("button",{onClick:()=>F($=>$-1),className:"p-1 hover:bg-muted rounded",children:o.jsx(wo,{className:"w-[18px] h-[18px]"})}),o.jsxs("span",{className:"font-bold text-lg-app",children:[z,""]}),o.jsx("button",{onClick:()=>F($=>$+1),className:"p-1 hover:bg-muted rounded",children:o.jsx(Ls,{className:"w-[18px] h-[18px]"})})]}),o.jsx("div",{className:"grid grid-cols-3 gap-2",children:Array.from({length:12},($,Z)=>Z+1).map($=>o.jsxs("button",{onClick:()=>{N(z),_($),M(!1)},className:U("h-11 rounded-lg text-[15px] font-semibold cursor-pointer transition-all border-none",k===z&&S===$?"bg-primary/10 text-primary font-[800]":"text-text-sub hover:bg-muted hover:text-primary"),children:[$,""]},$))}),o.jsx("div",{className:"mt-3 pt-3 border-t border-border",children:o.jsx("button",{onClick:()=>{N(z),_(null),M(!1)},className:"w-full h-11 rounded-lg text-[15px] font-semibold cursor-pointer transition-all text-text-sub hover:bg-muted hover:text-primary border-none bg-transparent",children:"  "})})]})]}),o.jsxs("div",{className:"relative flex-1",children:[o.jsxs("select",{value:P,onChange:$=>D($.target.value),className:"w-full h-[50px] bg-card border border-border rounded-xl px-3.5 pr-10 text-[17px] font-semibold text-foreground shadow-soft appearance-none outline-none cursor-pointer transition-all hover:border-primary/50 focus:border-primary focus:shadow-[0_0_0_3px_rgba(49,163,250,0.15)]",children:[o.jsx("option",{value:"latest",children:""}),o.jsx("option",{value:"amount",children:""})]}),o.jsx(Nt,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-text-sub pointer-events-none"})]})]}),o.jsx("div",{className:"flex flex-col gap-3",children:xe.map($=>o.jsxs("div",{onClick:()=>Gt($),className:"bg-card shadow-soft rounded-2xl p-5 cursor-pointer transition-all hover:shadow-md active:scale-[0.99] border border-border",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsx("span",{className:"text-lg-app font-[800] text-foreground",style:{fontSize:18},children:$.month}),o.jsx("span",{className:"text-[13px] font-semibold px-2.5 py-1 rounded-full bg-emerald-50 text-emerald-600 border border-emerald-300",children:""})]}),o.jsxs("div",{className:"flex justify-between items-center pb-3 border-b border-dashed border-border mb-2",children:[o.jsx("span",{className:"font-bold text-foreground",children:""}),o.jsx("span",{className:"text-[20px] font-[800] text-primary tracking-tight",children:w?"****":`${Ce($.netPay)}`})]}),o.jsxs("div",{className:"flex justify-between text-[15px] text-text-sub",children:[o.jsxs("span",{children:[" ",o.jsx("strong",{className:"text-foreground",children:$.man.toFixed(1)})]}),o.jsxs("span",{children:[" ",o.jsx("strong",{className:"text-foreground",children:w?"****":`${Ce($.baseTotal)}`})]})]})]},$.rawDate))}),At.length>3&&o.jsxs("button",{onClick:()=>v(!y),className:"w-full h-[50px] bg-card border border-border rounded-full text-text-sub font-semibold text-[15px] cursor-pointer mt-2.5 mb-5 flex items-center justify-center gap-1.5 transition-all hover:bg-muted",children:[o.jsx("span",{children:y?"":" "}),o.jsx(Nt,{className:U("w-4 h-4 transition-transform",y&&"rotate-180")})]})]}),t==="admin"&&e&&o.jsx(mR,{}),A&&o.jsx("div",{className:"fixed inset-0 bg-black/50 z-[3000] flex items-center justify-center p-5",onClick:()=>O(null),children:o.jsxs("div",{className:"bg-card w-full max-w-[440px] rounded-[20px] p-6 shadow-lg max-h-[80vh] overflow-y-auto border border-border",onClick:$=>$.stopPropagation(),children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("span",{className:"text-[20px] font-[800] text-foreground",children:"  "}),o.jsx("button",{onClick:()=>O(null),className:"bg-transparent border-none text-text-sub p-1 cursor-pointer",children:o.jsx(He,{className:"w-6 h-6"})})]}),o.jsx("div",{className:"text-sm-app text-text-sub mb-3 font-medium",children:A.date}),o.jsx("div",{className:"mt-2",children:A.entries.map(($,Z)=>o.jsxs("div",{className:"flex justify-between items-start py-2.5 border-b border-border gap-3",children:[o.jsx("div",{children:o.jsx("div",{className:"text-[15px] font-bold text-text-sub",children:$.site})}),o.jsxs("div",{className:"text-right",children:[o.jsxs("div",{className:"text-[15px] font-semibold text-foreground",children:[$.man,""]}),o.jsxs("div",{className:"text-[15px] font-semibold text-primary",children:["",Ce($.price)]})]})]},Z))})]})}),W&&K&&o.jsxs("div",{className:U("fixed inset-0 bg-background z-[2000] flex flex-col transition-transform duration-300",W?"translate-y-0":"translate-y-full"),children:[o.jsxs("div",{className:"h-[60px] px-4 flex items-center justify-between bg-card border-b border-border shrink-0",children:[o.jsx("button",{onClick:()=>Q(!1),className:"bg-transparent border-none text-foreground cursor-pointer",children:o.jsx(He,{className:"w-6 h-6"})}),o.jsx("span",{className:"text-lg-app font-bold text-foreground",children:" "}),o.jsx("div",{className:"w-6"})]}),o.jsxs("div",{className:"flex-1 p-5 max-[640px]:p-3 pb-10 overflow-y-auto",children:[o.jsxs("div",{ref:L,className:"w-full max-w-[500px] bg-white rounded-2xl shadow-lg p-10 max-[640px]:p-6 text-[#111] mx-auto",children:[o.jsxs("div",{className:"flex justify-between items-end border-b-2 border-header-navy pb-5 mb-8",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-[32px] font-[800] text-header-navy tracking-tight leading-tight m-0",children:""}),o.jsx("span",{className:"text-[22px] font-bold text-header-navy",children:K.month})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-[16px] font-bold text-[#111]",children:""}),o.jsxs("div",{className:"text-[14px] text-[#64748b] font-medium",children:[K.rawDate,"-25 "]})]})]}),o.jsx("table",{className:"w-full border-collapse mb-5 border border-[#d1d5db]",children:o.jsxs("tbody",{children:[o.jsxs("tr",{children:[o.jsx("th",{className:"bg-[#f8fafc] text-header-navy font-bold text-[14px] p-2 border border-[#d1d5db] w-1/4 text-center",children:""}),o.jsx("td",{className:"font-medium text-[14px] p-2 border border-[#d1d5db] text-center",children:""}),o.jsx("th",{className:"bg-[#f8fafc] text-header-navy font-bold text-[14px] p-2 border border-[#d1d5db] w-1/4 text-center",children:""}),o.jsx("td",{className:"font-medium text-[14px] p-2 border border-[#d1d5db] text-center",children:""})]}),o.jsxs("tr",{children:[o.jsx("th",{className:"bg-[#f8fafc] text-header-navy font-bold text-[14px] p-2 border border-[#d1d5db] w-1/4 text-center",children:""}),o.jsx("td",{className:"font-medium text-[14px] p-2 border border-[#d1d5db] text-center",children:K.man.toFixed(1)}),o.jsx("th",{className:"bg-[#f8fafc] text-header-navy font-bold text-[14px] p-2 border border-[#d1d5db] w-1/4 text-center",children:""}),o.jsxs("td",{className:"font-medium text-[14px] p-2 border border-[#d1d5db] text-center",children:["",Ce(K.price)]})]})]})}),o.jsx("table",{className:"w-full border-collapse mb-0 border-t border-header-navy",children:o.jsxs("tbody",{children:[o.jsxs("tr",{children:[o.jsx("th",{colSpan:2,className:"bg-header-navy text-white text-[14px] font-bold text-center p-2 border border-[#556080] border-b-0",children:""}),o.jsx("th",{colSpan:2,className:"bg-header-navy text-white text-[14px] font-bold text-center p-2 border border-[#556080] border-b-0",children:""})]}),o.jsxs("tr",{children:[o.jsx("td",{className:"bg-[#e0f2fe] text-header-navy font-bold text-[14px] text-center p-2 border border-[#d1d5db]",children:""}),o.jsx("td",{className:"bg-[#e0f2fe] text-header-navy font-bold text-[14px] text-center p-2 border border-[#d1d5db]",children:""}),o.jsx("td",{className:"bg-[#e0f2fe] text-header-navy font-bold text-[14px] text-center p-2 border border-[#d1d5db]",children:""}),o.jsx("td",{className:"bg-[#e0f2fe] text-header-navy font-bold text-[14px] text-center p-2 border border-[#d1d5db]",children:""})]}),o.jsxs("tr",{children:[o.jsx("td",{className:"p-2 border border-[#d1d5db] text-[14px]",children:""}),o.jsxs("td",{className:"p-2 border border-[#d1d5db] text-[14px] text-right font-medium",children:["",Ce(J)]}),o.jsx("td",{className:"p-2 border border-[#d1d5db] text-[14px]",children:""}),o.jsxs("td",{className:"p-2 border border-[#d1d5db] text-[14px] text-right font-medium",children:["",Ce(he)]})]}),o.jsxs("tr",{className:"bg-[#f8fafc] font-[800]",children:[o.jsx("td",{className:"p-2 border border-[#d1d5db] text-[14px]",children:""}),o.jsxs("td",{className:"p-2 border border-[#d1d5db] text-[14px] text-right",children:["",Ce(J)]}),o.jsx("td",{className:"p-2 border border-[#d1d5db] text-[14px]",children:""}),o.jsxs("td",{className:"p-2 border border-[#d1d5db] text-[14px] text-right",children:["",Ce(he)]})]})]})}),o.jsxs("div",{className:"mt-5 bg-[#eff6ff] rounded-2xl p-6 flex justify-between items-center",children:[o.jsx("span",{className:"text-[16px] font-bold text-header-navy",children:""}),o.jsxs("span",{className:"text-[28px] font-[800] text-[#2563eb]",children:["",Ce(ke)]})]}),o.jsx("div",{className:"mt-5 sm:hidden",children:o.jsxs("div",{className:"border border-[#d1d5db] rounded-2xl overflow-hidden",children:[o.jsx("div",{className:"bg-header-navy text-white text-[14px] font-bold text-center py-2",children:"  "}),o.jsxs("div",{className:"divide-y divide-[#e5e7eb]",children:[o.jsxs("div",{className:"flex justify-between items-center px-4 py-3 text-[13px]",children:[o.jsx("span",{className:"font-bold text-[#334155]",children:""}),o.jsx("span",{className:"font-semibold text-[#111]",children:K.man.toFixed(1)})]}),o.jsxs("div",{className:"flex justify-between items-center px-4 py-3 text-[13px]",children:[o.jsx("span",{className:"font-bold text-[#334155]",children:""}),o.jsxs("span",{className:"font-semibold text-[#111]",children:["",Ce(K.price)]})]}),o.jsxs("div",{className:"flex justify-between items-center px-4 py-3 text-[13px]",children:[o.jsx("span",{className:"font-bold text-[#334155]",children:""}),o.jsxs("span",{className:"font-semibold text-[#111]",children:["",Ce(J)]})]}),o.jsxs("div",{className:"flex justify-between items-center px-4 py-3 text-[13px]",children:[o.jsx("span",{className:"font-bold text-[#334155]",children:""}),o.jsxs("span",{className:"font-semibold text-[#ef4444]",children:["-",Ce(he)]})]}),o.jsxs("div",{className:"flex justify-between items-center px-4 py-3 text-[13px] bg-[#eff6ff]",children:[o.jsx("span",{className:"font-bold text-header-navy",children:""}),o.jsxs("span",{className:"font-[800] text-[#2563eb]",children:["",Ce(ke)]})]})]})]})}),o.jsx("table",{className:"hidden sm:table w-full border-collapse mt-5",children:o.jsxs("tbody",{children:[o.jsx("tr",{className:"bg-header-navy text-white font-bold text-[14px]",children:o.jsx("td",{colSpan:5,className:"p-2 text-center",children:"  "})}),o.jsxs("tr",{children:[o.jsx("th",{className:"bg-header-navy text-white text-[13px] p-2 border border-[#556080] text-center",children:""}),o.jsx("th",{className:"bg-header-navy text-white text-[13px] p-2 border border-[#556080] text-center",children:""}),o.jsx("th",{className:"bg-header-navy text-white text-[13px] p-2 border border-[#556080] text-center",children:""}),o.jsx("th",{className:"bg-header-navy text-white text-[13px] p-2 border border-[#556080] text-center",children:""}),o.jsx("th",{className:"bg-header-navy text-white text-[13px] p-2 border border-[#556080] text-center",children:""})]}),o.jsxs("tr",{children:[o.jsx("td",{className:"p-2 border border-[#d1d5db] text-[13px] text-center",children:K.man.toFixed(1)}),o.jsxs("td",{className:"p-2 border border-[#d1d5db] text-[13px] text-center",children:["",Ce(K.price)]}),o.jsxs("td",{className:"p-2 border border-[#d1d5db] text-[13px] text-center",children:["",Ce(J)]}),o.jsxs("td",{className:"p-2 border border-[#d1d5db] text-[13px] text-center",children:["",Ce(he)]}),o.jsxs("td",{className:"p-2 border border-[#d1d5db] text-[13px] text-center",children:["",Ce(ke)]})]})]})}),o.jsx("p",{className:"mt-6 text-center text-[14px] text-[#64748b] font-medium",children:"  ,      ."})]}),o.jsxs("button",{onClick:ae,className:"mt-4 w-full max-w-[500px] mx-auto bg-header-navy text-white text-base-app font-bold rounded-xl h-14 border-none flex items-center justify-center gap-2 cursor-pointer transition-transform active:scale-95 shadow-lg",children:[o.jsx(jm,{className:"w-5 h-5"}),"PDF "]}),o.jsx("div",{ref:re,className:"fixed left-[-10000px] top-0 w-[794px] bg-white text-[#111]",style:{fontFamily:"Pretendard Variable, Pretendard, -apple-system, BlinkMacSystemFont, system-ui, sans-serif"},children:o.jsxs("div",{className:"p-[56px]",children:[o.jsxs("div",{className:"flex justify-between items-end border-b-2 border-header-navy pb-6 mb-8",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-[36px] font-[800] text-header-navy tracking-tight leading-tight m-0",children:""}),o.jsx("span",{className:"text-[24px] font-bold text-header-navy",children:K.month})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-[16px] font-bold text-[#111]",children:""}),o.jsxs("div",{className:"text-[14px] text-[#64748b] font-medium",children:[K.rawDate,"-25 "]})]})]}),o.jsx("table",{className:"w-full border-collapse mb-6 border border-[#d1d5db]",children:o.jsxs("tbody",{children:[o.jsxs("tr",{children:[o.jsx("th",{className:"bg-[#f8fafc] text-header-navy font-bold text-[14px] p-2 border border-[#d1d5db] w-1/4 text-center",children:""}),o.jsx("td",{className:"font-medium text-[14px] p-2 border border-[#d1d5db] text-center",children:""}),o.jsx("th",{className:"bg-[#f8fafc] text-header-navy font-bold text-[14px] p-2 border border-[#d1d5db] w-1/4 text-center",children:""}),o.jsx("td",{className:"font-medium text-[14px] p-2 border border-[#d1d5db] text-center",children:""})]}),o.jsxs("tr",{children:[o.jsx("th",{className:"bg-[#f8fafc] text-header-navy font-bold text-[14px] p-2 border border-[#d1d5db] w-1/4 text-center",children:""}),o.jsx("td",{className:"font-medium text-[14px] p-2 border border-[#d1d5db] text-center",children:K.man.toFixed(1)}),o.jsx("th",{className:"bg-[#f8fafc] text-header-navy font-bold text-[14px] p-2 border border-[#d1d5db] w-1/4 text-center",children:""}),o.jsxs("td",{className:"font-medium text-[14px] p-2 border border-[#d1d5db] text-center",children:["",Ce(K.price)]})]})]})}),o.jsx("table",{className:"w-full border-collapse mb-0 border-t border-header-navy",children:o.jsxs("tbody",{children:[o.jsxs("tr",{children:[o.jsx("th",{colSpan:2,className:"bg-header-navy text-white text-[14px] font-bold text-center p-2 border border-[#556080] border-b-0",children:""}),o.jsx("th",{colSpan:2,className:"bg-header-navy text-white text-[14px] font-bold text-center p-2 border border-[#556080] border-b-0",children:""})]}),o.jsxs("tr",{children:[o.jsx("td",{className:"bg-[#e0f2fe] text-header-navy font-bold text-[14px] text-center p-2 border border-[#d1d5db]",children:""}),o.jsx("td",{className:"bg-[#e0f2fe] text-header-navy font-bold text-[14px] text-center p-2 border border-[#d1d5db]",children:""}),o.jsx("td",{className:"bg-[#e0f2fe] text-header-navy font-bold text-[14px] text-center p-2 border border-[#d1d5db]",children:""}),o.jsx("td",{className:"bg-[#e0f2fe] text-header-navy font-bold text-[14px] text-center p-2 border border-[#d1d5db]",children:""})]}),o.jsxs("tr",{children:[o.jsx("td",{className:"p-2 border border-[#d1d5db] text-[14px]",children:""}),o.jsxs("td",{className:"p-2 border border-[#d1d5db] text-[14px] text-right font-medium",children:["",Ce(J)]}),o.jsx("td",{className:"p-2 border border-[#d1d5db] text-[14px]",children:""}),o.jsxs("td",{className:"p-2 border border-[#d1d5db] text-[14px] text-right font-medium",children:["",Ce(he)]})]}),o.jsxs("tr",{className:"bg-[#f8fafc] font-[800]",children:[o.jsx("td",{className:"p-2 border border-[#d1d5db] text-[14px]",children:""}),o.jsxs("td",{className:"p-2 border border-[#d1d5db] text-[14px] text-right",children:["",Ce(J)]}),o.jsx("td",{className:"p-2 border border-[#d1d5db] text-[14px]",children:""}),o.jsxs("td",{className:"p-2 border border-[#d1d5db] text-[14px] text-right",children:["",Ce(he)]})]})]})}),o.jsxs("div",{className:"mt-6 bg-[#eff6ff] rounded-2xl p-6 flex justify-between items-center",children:[o.jsx("span",{className:"text-[16px] font-bold text-header-navy",children:""}),o.jsxs("span",{className:"text-[28px] font-[800] text-[#2563eb]",children:["",Ce(ke)]})]}),o.jsx("table",{className:"w-full border-collapse mt-6",children:o.jsxs("tbody",{children:[o.jsx("tr",{className:"bg-header-navy text-white font-bold text-[14px]",children:o.jsx("td",{colSpan:5,className:"p-2 text-center",children:"  "})}),o.jsxs("tr",{children:[o.jsx("th",{className:"bg-header-navy text-white text-[13px] p-2 border border-[#556080] text-center",children:""}),o.jsx("th",{className:"bg-header-navy text-white text-[13px] p-2 border border-[#556080] text-center",children:""}),o.jsx("th",{className:"bg-header-navy text-white text-[13px] p-2 border border-[#556080] text-center",children:""}),o.jsx("th",{className:"bg-header-navy text-white text-[13px] p-2 border border-[#556080] text-center",children:""}),o.jsx("th",{className:"bg-header-navy text-white text-[13px] p-2 border border-[#556080] text-center",children:""})]}),o.jsxs("tr",{children:[o.jsx("td",{className:"p-2 border border-[#d1d5db] text-[13px] text-center",children:K.man.toFixed(1)}),o.jsxs("td",{className:"p-2 border border-[#d1d5db] text-[13px] text-center",children:["",Ce(K.price)]}),o.jsxs("td",{className:"p-2 border border-[#d1d5db] text-[13px] text-center",children:["",Ce(J)]}),o.jsxs("td",{className:"p-2 border border-[#d1d5db] text-[13px] text-center",children:["",Ce(he)]}),o.jsxs("td",{className:"p-2 border border-[#d1d5db] text-[13px] text-center",children:["",Ce(ke)]})]})]})}),o.jsx("p",{className:"mt-8 text-center text-[14px] text-[#64748b] font-medium",children:"  ,      ."})]})})]})]}),o.jsx("div",{ref:ee,className:"fixed left-[-10000px] top-0 w-[794px] min-h-[1123px] bg-white text-[#0f172a]",style:{fontFamily:"Pretendard Variable, Pretendard, -apple-system, BlinkMacSystemFont, system-ui, sans-serif"},children:o.jsxs("div",{className:"p-[56px]",children:[o.jsx("div",{className:"text-[36px] font-[800] text-[#1e2a57]",children:"  "}),o.jsxs("div",{className:"mt-2 text-[24px] font-[700] text-[#64748b]",children:[s," ",i,""]}),o.jsx("div",{className:"mt-4 h-[2px] bg-[#1e2a57]"}),o.jsxs("div",{className:"mt-8 flex justify-between items-start",children:[o.jsx("div",{}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-[18px] font-[700] text-[#64748b]",children:" "}),o.jsxs("div",{className:"mt-2 text-[42px] font-[800] text-[#3b82f6]",children:[Ce(je.netPay),""]})]})]}),o.jsxs("div",{className:"mt-6 rounded-[22px] bg-[#f8fafc] p-6 border border-[#e2e8f0]",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[16px] font-[700] text-[#64748b]",children:" "}),o.jsxs("div",{className:"mt-2 text-[28px] font-[800] text-[#0f172a]",children:[je.totalMan.toFixed(1)," "]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[16px] font-[700] text-[#64748b]",children:" "}),o.jsxs("div",{className:"mt-2 text-[28px] font-[800] text-[#0f172a]",children:[Ce(je.totalPay),""]})]})]}),o.jsx("div",{className:"mt-4 border-t border-dashed border-[#cbd5e1]"}),o.jsxs("div",{className:"mt-4 flex justify-between items-center text-[18px] font-[700] text-[#64748b]",children:[o.jsx("span",{children:" (3.3%)"}),o.jsxs("span",{className:"text-[#ef4444]",children:["-",Ce(je.deduction),""]})]})]}),o.jsxs("div",{className:"mt-8 rounded-[24px] border border-[#e2e8f0] overflow-hidden",children:[o.jsx("div",{className:"grid grid-cols-7 bg-[#f8fafc] text-center text-[16px] font-[700] text-[#334155]",children:["","","","","","",""].map(($,Z)=>o.jsx("div",{className:U("py-3 border-b border-r border-[#e2e8f0]",Z===0?"text-[#ef4444]":Z===6?"text-[#2563eb]":"text-[#334155]",Z===6&&"border-r-0"),children:$},$))}),o.jsx("div",{className:"grid grid-cols-7",children:et.map(($,Z)=>{if(!$)return o.jsx("div",{className:U("h-[90px] border-b border-r border-[#e2e8f0]",(Z+1)%7===0&&"border-r-0")},`empty-${Z}`);const te=$.entries.reduce((oe,Re)=>oe+Re.man,0),ce=$.entries.reduce((oe,Re)=>oe+Re.price,0);let Ee="";if($.entries.length>0){const Re=$.entries[0].site.replace(/\s+/g,"").slice(0,4);Ee=$.entries.length>1?`${Re}${$.entries.length-1}`:Re}return o.jsxs("div",{className:U("h-[90px] border-b border-r border-[#e2e8f0] p-2 text-[#0f172a]",(Z+1)%7===0&&"border-r-0"),children:[o.jsx("div",{className:"text-[16px] font-[700]",children:$.day}),$.entries.length>0&&o.jsxs("div",{className:"mt-1 text-[12px] text-[#64748b] leading-tight",children:[o.jsxs("div",{className:"font-[700] text-[#0f172a]",children:[te.toFixed(1),""]}),o.jsxs("div",{className:"font-[800] text-[#2563eb]",children:[(ce/1e4).toFixed(0),""]}),o.jsx("div",{className:"truncate",children:Ee})]})]},`day-${$.day}`)})})]}),o.jsx("div",{className:"mt-10 text-center text-[#94a3b8] text-[14px] font-[600]",children:"Generated by INOPNC App"})]})})]})}var hh="focusScope.autoFocusOnMount",fh="focusScope.autoFocusOnUnmount",E0={bubbles:!1,cancelable:!0},jR="FocusScope",S1=m.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...i}=e,[l,c]=m.useState(null),d=za(s),h=za(a),u=m.useRef(null),f=fn(t,g=>c(g)),p=m.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;m.useEffect(()=>{if(n){let g=function(v){if(p.paused||!l)return;const k=v.target;l.contains(k)?u.current=k:is(u.current,{select:!0})},w=function(v){if(p.paused||!l)return;const k=v.relatedTarget;k!==null&&(l.contains(k)||is(u.current,{select:!0}))},x=function(v){if(document.activeElement===document.body)for(const N of v)N.removedNodes.length>0&&is(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",w);const y=new MutationObserver(x);return l&&y.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",w),y.disconnect()}}},[n,l,p.paused]),m.useEffect(()=>{if(l){T0.add(p);const g=document.activeElement;if(!l.contains(g)){const x=new CustomEvent(hh,E0);l.addEventListener(hh,d),l.dispatchEvent(x),x.defaultPrevented||(kR(ER(C1(l)),{select:!0}),document.activeElement===g&&is(l))}return()=>{l.removeEventListener(hh,d),setTimeout(()=>{const x=new CustomEvent(fh,E0);l.addEventListener(fh,h),l.dispatchEvent(x),x.defaultPrevented||is(g??document.body,{select:!0}),l.removeEventListener(fh,h),T0.remove(p)},0)}}},[l,d,h,p]);const b=m.useCallback(g=>{if(!r&&!n||p.paused)return;const w=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,x=document.activeElement;if(w&&x){const y=g.currentTarget,[v,k]=NR(y);v&&k?!g.shiftKey&&x===k?(g.preventDefault(),r&&is(v,{select:!0})):g.shiftKey&&x===v&&(g.preventDefault(),r&&is(k,{select:!0})):x===y&&g.preventDefault()}},[r,n,p.paused]);return o.jsx(Nr.div,{tabIndex:-1,...i,ref:f,onKeyDown:b})});S1.displayName=jR;function kR(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(is(n,{select:t}),document.activeElement!==r)return}function NR(e){const t=C1(e),r=P0(t,e),n=P0(t.reverse(),e);return[r,n]}function C1(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function P0(e,t){for(const r of e)if(!_R(r,{upTo:t}))return r}function _R(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function SR(e){return e instanceof HTMLInputElement&&"select"in e}function is(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&SR(e)&&t&&e.select()}}var T0=CR();function CR(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=R0(e,t),e.unshift(t)},remove(t){var r;e=R0(e,t),(r=e[0])==null||r.resume()}}}function R0(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function ER(e){return e.filter(t=>t.tagName!=="A")}var ph=0;function PR(){m.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??O0()),document.body.insertAdjacentElement("beforeend",e[1]??O0()),ph++,()=>{ph===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),ph--}},[])}function O0(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Vc="right-scroll-bar-position",Kc="width-before-scroll-bar",TR="with-scroll-bars-hidden",RR="--removed-body-scroll-bar-size";function mh(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function OR(e,t){var r=m.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=t,r.facade}var AR=typeof window<"u"?m.useLayoutEffect:m.useEffect,A0=new WeakMap;function IR(e,t){var r=OR(null,function(n){return e.forEach(function(s){return mh(s,n)})});return AR(function(){var n=A0.get(r);if(n){var s=new Set(n),a=new Set(e),i=r.current;s.forEach(function(l){a.has(l)||mh(l,null)}),a.forEach(function(l){s.has(l)||mh(l,i)})}A0.set(r,e)},[e]),r}function DR(e){return e}function LR(e,t){t===void 0&&(t=DR);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(a){var i=t(a,n);return r.push(i),function(){r=r.filter(function(l){return l!==i})}},assignSyncMedium:function(a){for(n=!0;r.length;){var i=r;r=[],i.forEach(a)}r={push:function(l){return a(l)},filter:function(){return r}}},assignMedium:function(a){n=!0;var i=[];if(r.length){var l=r;r=[],l.forEach(a),i=r}var c=function(){var h=i;i=[],h.forEach(a)},d=function(){return Promise.resolve().then(c)};d(),r={push:function(h){i.push(h),d()},filter:function(h){return i=i.filter(h),r}}}};return s}function MR(e){e===void 0&&(e={});var t=LR(null);return t.options=kn({async:!0,ssr:!1},e),t}var E1=function(e){var t=e.sideCar,r=oi(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return m.createElement(n,kn({},r))};E1.isSideCarExport=!0;function $R(e,t){return e.useMedium(t),E1}var P1=MR(),xh=function(){},cu=m.forwardRef(function(e,t){var r=m.useRef(null),n=m.useState({onScrollCapture:xh,onWheelCapture:xh,onTouchMoveCapture:xh}),s=n[0],a=n[1],i=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,h=e.enabled,u=e.shards,f=e.sideCar,p=e.noRelative,b=e.noIsolation,g=e.inert,w=e.allowPinchZoom,x=e.as,y=x===void 0?"div":x,v=e.gapMode,k=oi(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),N=f,S=IR([r,t]),_=kn(kn({},k),s);return m.createElement(m.Fragment,null,h&&m.createElement(N,{sideCar:P1,removeScrollBar:d,shards:u,noRelative:p,noIsolation:b,inert:g,setCallbacks:a,allowPinchZoom:!!w,lockRef:r,gapMode:v}),i?m.cloneElement(m.Children.only(l),kn(kn({},_),{ref:S})):m.createElement(y,kn({},_,{className:c,ref:S}),l))});cu.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};cu.classNames={fullWidth:Kc,zeroRight:Vc};var FR=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function UR(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=FR();return t&&e.setAttribute("nonce",t),e}function BR(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function zR(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var WR=function(){var e=0,t=null;return{add:function(r){e==0&&(t=UR())&&(BR(t,r),zR(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},qR=function(){var e=WR();return function(t,r){m.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},T1=function(){var e=qR(),t=function(r){var n=r.styles,s=r.dynamic;return e(n,s),null};return t},HR={left:0,top:0,right:0,gap:0},gh=function(e){return parseInt(e||"",10)||0},VR=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[gh(r),gh(n),gh(s)]},KR=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return HR;var t=VR(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},GR=T1(),ja="data-scroll-locked",QR=function(e,t,r,n){var s=e.left,a=e.top,i=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(TR,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(ja,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Vc,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Kc,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Vc," .").concat(Vc,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Kc," .").concat(Kc,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(ja,`] {
    `).concat(RR,": ").concat(l,`px;
  }
`)},I0=function(){var e=parseInt(document.body.getAttribute(ja)||"0",10);return isFinite(e)?e:0},YR=function(){m.useEffect(function(){return document.body.setAttribute(ja,(I0()+1).toString()),function(){var e=I0()-1;e<=0?document.body.removeAttribute(ja):document.body.setAttribute(ja,e.toString())}},[])},JR=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,s=n===void 0?"margin":n;YR();var a=m.useMemo(function(){return KR(s)},[s]);return m.createElement(GR,{styles:QR(a,!t,s,r?"":"!important")})},rp=!1;if(typeof window<"u")try{var yc=Object.defineProperty({},"passive",{get:function(){return rp=!0,!0}});window.addEventListener("test",yc,yc),window.removeEventListener("test",yc,yc)}catch{rp=!1}var Ho=rp?{passive:!1}:!1,XR=function(e){return e.tagName==="TEXTAREA"},R1=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!XR(e)&&r[t]==="visible")},ZR=function(e){return R1(e,"overflowY")},eO=function(e){return R1(e,"overflowX")},D0=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=O1(e,n);if(s){var a=A1(e,n),i=a[1],l=a[2];if(i>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},tO=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},rO=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},O1=function(e,t){return e==="v"?ZR(t):eO(t)},A1=function(e,t){return e==="v"?tO(t):rO(t)},nO=function(e,t){return e==="h"&&t==="rtl"?-1:1},sO=function(e,t,r,n,s){var a=nO(e,window.getComputedStyle(t).direction),i=a*n,l=r.target,c=t.contains(l),d=!1,h=i>0,u=0,f=0;do{if(!l)break;var p=A1(e,l),b=p[0],g=p[1],w=p[2],x=g-w-a*b;(b||x)&&O1(e,l)&&(u+=x,f+=b);var y=l.parentNode;l=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(h&&(Math.abs(u)<1||!s)||!h&&(Math.abs(f)<1||!s))&&(d=!0),d},wc=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},L0=function(e){return[e.deltaX,e.deltaY]},M0=function(e){return e&&"current"in e?e.current:e},oO=function(e,t){return e[0]===t[0]&&e[1]===t[1]},aO=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},iO=0,Vo=[];function lO(e){var t=m.useRef([]),r=m.useRef([0,0]),n=m.useRef(),s=m.useState(iO++)[0],a=m.useState(T1)[0],i=m.useRef(e);m.useEffect(function(){i.current=e},[e]),m.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var g=O5([e.lockRef.current],(e.shards||[]).map(M0),!0).filter(Boolean);return g.forEach(function(w){return w.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),g.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=m.useCallback(function(g,w){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!i.current.allowPinchZoom;var x=wc(g),y=r.current,v="deltaX"in g?g.deltaX:y[0]-x[0],k="deltaY"in g?g.deltaY:y[1]-x[1],N,S=g.target,_=Math.abs(v)>Math.abs(k)?"h":"v";if("touches"in g&&_==="h"&&S.type==="range")return!1;var P=D0(_,S);if(!P)return!0;if(P?N=_:(N=_==="v"?"h":"v",P=D0(_,S)),!P)return!1;if(!n.current&&"changedTouches"in g&&(v||k)&&(n.current=N),!N)return!0;var D=n.current||N;return sO(D,w,g,D==="h"?v:k,!0)},[]),c=m.useCallback(function(g){var w=g;if(!(!Vo.length||Vo[Vo.length-1]!==a)){var x="deltaY"in w?L0(w):wc(w),y=t.current.filter(function(N){return N.name===w.type&&(N.target===w.target||w.target===N.shadowParent)&&oO(N.delta,x)})[0];if(y&&y.should){w.cancelable&&w.preventDefault();return}if(!y){var v=(i.current.shards||[]).map(M0).filter(Boolean).filter(function(N){return N.contains(w.target)}),k=v.length>0?l(w,v[0]):!i.current.noIsolation;k&&w.cancelable&&w.preventDefault()}}},[]),d=m.useCallback(function(g,w,x,y){var v={name:g,delta:w,target:x,should:y,shadowParent:cO(x)};t.current.push(v),setTimeout(function(){t.current=t.current.filter(function(k){return k!==v})},1)},[]),h=m.useCallback(function(g){r.current=wc(g),n.current=void 0},[]),u=m.useCallback(function(g){d(g.type,L0(g),g.target,l(g,e.lockRef.current))},[]),f=m.useCallback(function(g){d(g.type,wc(g),g.target,l(g,e.lockRef.current))},[]);m.useEffect(function(){return Vo.push(a),e.setCallbacks({onScrollCapture:u,onWheelCapture:u,onTouchMoveCapture:f}),document.addEventListener("wheel",c,Ho),document.addEventListener("touchmove",c,Ho),document.addEventListener("touchstart",h,Ho),function(){Vo=Vo.filter(function(g){return g!==a}),document.removeEventListener("wheel",c,Ho),document.removeEventListener("touchmove",c,Ho),document.removeEventListener("touchstart",h,Ho)}},[]);var p=e.removeScrollBar,b=e.inert;return m.createElement(m.Fragment,null,b?m.createElement(a,{styles:aO(s)}):null,p?m.createElement(JR,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function cO(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const dO=$R(P1,lO);var I1=m.forwardRef(function(e,t){return m.createElement(cu,kn({},e,{ref:t,sideCar:dO}))});I1.classNames=cu.classNames;var uO=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Ko=new WeakMap,jc=new WeakMap,kc={},bh=0,D1=function(e){return e&&(e.host||D1(e.parentNode))},hO=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=D1(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},fO=function(e,t,r,n){var s=hO(t,Array.isArray(e)?e:[e]);kc[r]||(kc[r]=new WeakMap);var a=kc[r],i=[],l=new Set,c=new Set(s),d=function(u){!u||l.has(u)||(l.add(u),d(u.parentNode))};s.forEach(d);var h=function(u){!u||c.has(u)||Array.prototype.forEach.call(u.children,function(f){if(l.has(f))h(f);else try{var p=f.getAttribute(n),b=p!==null&&p!=="false",g=(Ko.get(f)||0)+1,w=(a.get(f)||0)+1;Ko.set(f,g),a.set(f,w),i.push(f),g===1&&b&&jc.set(f,!0),w===1&&f.setAttribute(r,"true"),b||f.setAttribute(n,"true")}catch(x){console.error("aria-hidden: cannot operate on ",f,x)}})};return h(t),l.clear(),bh++,function(){i.forEach(function(u){var f=Ko.get(u)-1,p=a.get(u)-1;Ko.set(u,f),a.set(u,p),f||(jc.has(u)||u.removeAttribute(n),jc.delete(u)),p||u.removeAttribute(r)}),bh--,bh||(Ko=new WeakMap,Ko=new WeakMap,jc=new WeakMap,kc={})}},pO=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),s=uO(e);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live]"))),fO(n,s,r,"aria-hidden")):function(){return null}},du="Dialog",[L1,f6]=rm(du),[mO,pn]=L1(du),M1=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:s,onOpenChange:a,modal:i=!0}=e,l=m.useRef(null),c=m.useRef(null),[d,h]=rC({prop:n,defaultProp:s??!1,onChange:a,caller:du});return o.jsx(mO,{scope:t,triggerRef:l,contentRef:c,contentId:Yu(),titleId:Yu(),descriptionId:Yu(),open:d,onOpenChange:h,onOpenToggle:m.useCallback(()=>h(u=>!u),[h]),modal:i,children:r})};M1.displayName=du;var $1="DialogTrigger",F1=m.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=pn($1,r),a=fn(t,s.triggerRef);return o.jsx(Nr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Tm(s.open),...n,ref:a,onClick:br(e.onClick,s.onOpenToggle)})});F1.displayName=$1;var Em="DialogPortal",[xO,U1]=L1(Em,{forceMount:void 0}),B1=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:s}=e,a=pn(Em,t);return o.jsx(xO,{scope:t,forceMount:r,children:m.Children.map(n,i=>o.jsx(Pl,{present:r||a.open,children:o.jsx(Ky,{asChild:!0,container:s,children:i})}))})};B1.displayName=Em;var Id="DialogOverlay",z1=m.forwardRef((e,t)=>{const r=U1(Id,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,a=pn(Id,e.__scopeDialog);return a.modal?o.jsx(Pl,{present:n||a.open,children:o.jsx(bO,{...s,ref:t})}):null});z1.displayName=Id;var gO=nm("DialogOverlay.RemoveScroll"),bO=m.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=pn(Id,r);return o.jsx(I1,{as:gO,allowPinchZoom:!0,shards:[s.contentRef],children:o.jsx(Nr.div,{"data-state":Tm(s.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),Ro="DialogContent",W1=m.forwardRef((e,t)=>{const r=U1(Ro,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,a=pn(Ro,e.__scopeDialog);return o.jsx(Pl,{present:n||a.open,children:a.modal?o.jsx(vO,{...s,ref:t}):o.jsx(yO,{...s,ref:t})})});W1.displayName=Ro;var vO=m.forwardRef((e,t)=>{const r=pn(Ro,e.__scopeDialog),n=m.useRef(null),s=fn(t,r.contentRef,n);return m.useEffect(()=>{const a=n.current;if(a)return pO(a)},[]),o.jsx(q1,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:br(e.onCloseAutoFocus,a=>{var i;a.preventDefault(),(i=r.triggerRef.current)==null||i.focus()}),onPointerDownOutside:br(e.onPointerDownOutside,a=>{const i=a.detail.originalEvent,l=i.button===0&&i.ctrlKey===!0;(i.button===2||l)&&a.preventDefault()}),onFocusOutside:br(e.onFocusOutside,a=>a.preventDefault())})}),yO=m.forwardRef((e,t)=>{const r=pn(Ro,e.__scopeDialog),n=m.useRef(!1),s=m.useRef(!1);return o.jsx(q1,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var i,l;(i=e.onCloseAutoFocus)==null||i.call(e,a),a.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),a.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:a=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,a),a.defaultPrevented||(n.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=a.target;((d=r.triggerRef.current)==null?void 0:d.contains(i))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),q1=m.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:a,...i}=e,l=pn(Ro,r),c=m.useRef(null),d=fn(t,c);return PR(),o.jsxs(o.Fragment,{children:[o.jsx(S1,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:a,children:o.jsx(sm,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Tm(l.open),...i,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),o.jsxs(o.Fragment,{children:[o.jsx(wO,{titleId:l.titleId}),o.jsx(kO,{contentRef:c,descriptionId:l.descriptionId})]})]})}),Pm="DialogTitle",H1=m.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=pn(Pm,r);return o.jsx(Nr.h2,{id:s.titleId,...n,ref:t})});H1.displayName=Pm;var V1="DialogDescription",K1=m.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=pn(V1,r);return o.jsx(Nr.p,{id:s.descriptionId,...n,ref:t})});K1.displayName=V1;var G1="DialogClose",Q1=m.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=pn(G1,r);return o.jsx(Nr.button,{type:"button",...n,ref:t,onClick:br(e.onClick,()=>s.onOpenChange(!1))})});Q1.displayName=G1;function Tm(e){return e?"open":"closed"}var Y1="DialogTitleWarning",[p6,J1]=d_(Y1,{contentName:Ro,titleName:Pm,docsSlug:"dialog"}),wO=({titleId:e})=>{const t=J1(Y1),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return m.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},jO="DialogDescriptionWarning",kO=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${J1(jO).contentName}}.`;return m.useEffect(()=>{var a;const s=(a=e.current)==null?void 0:a.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},NO=M1,_O=F1,SO=B1,CO=z1,EO=W1,PO=H1,TO=K1,RO=Q1;function OO(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}const X1=B.createContext({drawerRef:{current:null},overlayRef:{current:null},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,handleOnly:!1,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},closeDrawer:()=>{},direction:"bottom",shouldScaleBackground:!1,setBackgroundColorOnScale:!0,noBodyStyles:!1,container:null,autoFocus:!1}),ci=()=>{const e=B.useContext(X1);if(!e)throw new Error("useDrawerContext must be used within a Drawer.Root");return e};OO(`[data-vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1);animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=open]{animation-name:slideFromBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=closed]{animation-name:slideToBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=open]{animation-name:slideFromTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=closed]{animation-name:slideToTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=open]{animation-name:slideFromLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=closed]{animation-name:slideToLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=open]{animation-name:slideFromRight}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=closed]{animation-name:slideToRight}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,100%,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,-100%,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(-100%,0,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(100%,0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-overlay][data-vaul-snap-points=false]{animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-overlay][data-vaul-snap-points=false][data-state=open]{animation-name:fadeIn}[data-vaul-overlay][data-state=closed]{animation-name:fadeOut}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:1}[data-vaul-drawer]:not([data-vaul-custom-container=true])::after{content:'';position:absolute;background:inherit;background-color:inherit}[data-vaul-drawer][data-vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[data-vaul-drawer][data-vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[data-vaul-overlay][data-vaul-snap-points=true]:not([data-vaul-snap-points-overlay=true]):not(
[data-state=closed]
){opacity:0}[data-vaul-overlay][data-vaul-snap-points-overlay=true]{opacity:1}[data-vaul-handle]{display:block;position:relative;opacity:.7;background:#e2e2e4;margin-left:auto;margin-right:auto;height:5px;width:32px;border-radius:1rem;touch-action:pan-y}[data-vaul-handle]:active,[data-vaul-handle]:hover{opacity:1}[data-vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}@media (hover:hover) and (pointer:fine){[data-vaul-drawer]{user-select:none}}@media (pointer:fine){[data-vaul-handle-hitarea]:{width:100%;height:100%}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{to{opacity:0}}@keyframes slideFromBottom{from{transform:translate3d(0,100%,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToBottom{to{transform:translate3d(0,100%,0)}}@keyframes slideFromTop{from{transform:translate3d(0,-100%,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToTop{to{transform:translate3d(0,-100%,0)}}@keyframes slideFromLeft{from{transform:translate3d(-100%,0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToLeft{to{transform:translate3d(-100%,0,0)}}@keyframes slideFromRight{from{transform:translate3d(100%,0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToRight{to{transform:translate3d(100%,0,0)}}`);const AO=24,IO=typeof window<"u"?m.useLayoutEffect:m.useEffect;function $0(...e){return(...t)=>{for(let r of e)typeof r=="function"&&r(...t)}}function DO(){return Rm(/^Mac/)}function LO(){return Rm(/^iPhone/)}function F0(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function MO(){return Rm(/^iPad/)||DO()&&navigator.maxTouchPoints>1}function Z1(){return LO()||MO()}function Rm(e){return typeof window<"u"&&window.navigator!=null?e.test(window.navigator.platform):void 0}const vh=typeof document<"u"&&window.visualViewport;function U0(e){let t=window.getComputedStyle(e);return/(auto|scroll)/.test(t.overflow+t.overflowX+t.overflowY)}function ej(e){for(U0(e)&&(e=e.parentElement);e&&!U0(e);)e=e.parentElement;return e||document.scrollingElement||document.documentElement}const $O=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let Nc=0,yh;function FO(e={}){let{isDisabled:t}=e;IO(()=>{if(!t)return Nc++,Nc===1&&Z1()&&(yh=UO()),()=>{Nc--,Nc===0&&(yh==null||yh())}},[t])}function UO(){let e,t=0,r=u=>{e=ej(u.target),!(e===document.documentElement&&e===document.body)&&(t=u.changedTouches[0].pageY)},n=u=>{if(!e||e===document.documentElement||e===document.body){u.preventDefault();return}let f=u.changedTouches[0].pageY,p=e.scrollTop,b=e.scrollHeight-e.clientHeight;b!==0&&((p<=0&&f>t||p>=b&&f<t)&&u.preventDefault(),t=f)},s=u=>{let f=u.target;np(f)&&f!==document.activeElement&&(u.preventDefault(),f.style.transform="translateY(-2000px)",f.focus(),requestAnimationFrame(()=>{f.style.transform=""}))},a=u=>{let f=u.target;np(f)&&(f.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{f.style.transform="",vh&&(vh.height<window.innerHeight?requestAnimationFrame(()=>{B0(f)}):vh.addEventListener("resize",()=>B0(f),{once:!0}))}))},i=()=>{window.scrollTo(0,0)},l=window.pageXOffset,c=window.pageYOffset,d=$0(BO(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`));window.scrollTo(0,0);let h=$0(ki(document,"touchstart",r,{passive:!1,capture:!0}),ki(document,"touchmove",n,{passive:!1,capture:!0}),ki(document,"touchend",s,{passive:!1,capture:!0}),ki(document,"focus",a,!0),ki(window,"scroll",i));return()=>{d(),h(),window.scrollTo(l,c)}}function BO(e,t,r){let n=e.style[t];return e.style[t]=r,()=>{e.style[t]=n}}function ki(e,t,r,n){return e.addEventListener(t,r,n),()=>{e.removeEventListener(t,r,n)}}function B0(e){let t=document.scrollingElement||document.documentElement;for(;e&&e!==t;){let r=ej(e);if(r!==document.documentElement&&r!==document.body&&r!==e){let n=r.getBoundingClientRect().top,s=e.getBoundingClientRect().top,a=e.getBoundingClientRect().bottom;const i=r.getBoundingClientRect().bottom+AO;a>i&&(r.scrollTop+=s-n)}e=r.parentElement}}function np(e){return e instanceof HTMLInputElement&&!$O.has(e.type)||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable}function zO(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function WO(...e){return t=>e.forEach(r=>zO(r,t))}function tj(...e){return m.useCallback(WO(...e),e)}const rj=new WeakMap;function Et(e,t,r=!1){if(!e||!(e instanceof HTMLElement))return;let n={};Object.entries(t).forEach(([s,a])=>{if(s.startsWith("--")){e.style.setProperty(s,a);return}n[s]=e.style[s],e.style[s]=a}),!r&&rj.set(e,n)}function qO(e,t){if(!e||!(e instanceof HTMLElement))return;let r=rj.get(e);r&&(e.style[t]=r[t])}const Pt=e=>{switch(e){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return e}};function _c(e,t){if(!e)return null;const r=window.getComputedStyle(e),n=r.transform||r.webkitTransform||r.mozTransform;let s=n.match(/^matrix3d\((.+)\)$/);return s?parseFloat(s[1].split(", ")[Pt(t)?13:12]):(s=n.match(/^matrix\((.+)\)$/),s?parseFloat(s[1].split(", ")[Pt(t)?5:4]):null)}function HO(e){return 8*(Math.log(e+1)-2)}function wh(e,t){if(!e)return()=>{};const r=e.style.cssText;return Object.assign(e.style,t),()=>{e.style.cssText=r}}function VO(...e){return(...t)=>{for(const r of e)typeof r=="function"&&r(...t)}}const dt={DURATION:.5,EASE:[.32,.72,0,1]},nj=.4,KO=.25,GO=100,sj=8,Xs=16,sp=26,jh="vaul-dragging";function oj(e){const t=B.useRef(e);return B.useEffect(()=>{t.current=e}),B.useMemo(()=>(...r)=>t.current==null?void 0:t.current.call(t,...r),[])}function QO({defaultProp:e,onChange:t}){const r=B.useState(e),[n]=r,s=B.useRef(n),a=oj(t);return B.useEffect(()=>{s.current!==n&&(a(n),s.current=n)},[n,s,a]),r}function aj({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,s]=QO({defaultProp:t,onChange:r}),a=e!==void 0,i=a?e:n,l=oj(r),c=B.useCallback(d=>{if(a){const u=typeof d=="function"?d(e):d;u!==e&&l(u)}else s(d)},[a,e,s,l]);return[i,c]}function YO({activeSnapPointProp:e,setActiveSnapPointProp:t,snapPoints:r,drawerRef:n,overlayRef:s,fadeFromIndex:a,onSnapPointChange:i,direction:l="bottom",container:c,snapToSequentialPoint:d}){const[h,u]=aj({prop:e,defaultProp:r==null?void 0:r[0],onChange:t}),[f,p]=B.useState(typeof window<"u"?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0);B.useEffect(()=>{function _(){p({innerWidth:window.innerWidth,innerHeight:window.innerHeight})}return window.addEventListener("resize",_),()=>window.removeEventListener("resize",_)},[]);const b=B.useMemo(()=>h===(r==null?void 0:r[r.length-1])||null,[r,h]),g=B.useMemo(()=>r==null?void 0:r.findIndex(_=>_===h),[r,h]),w=r&&r.length>0&&(a||a===0)&&!Number.isNaN(a)&&r[a]===h||!r,x=B.useMemo(()=>{const _=c?{width:c.getBoundingClientRect().width,height:c.getBoundingClientRect().height}:typeof window<"u"?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0};var P;return(P=r==null?void 0:r.map(D=>{const T=typeof D=="string";let M=0;if(T&&(M=parseInt(D,10)),Pt(l)){const F=T?M:f?D*_.height:0;return f?l==="bottom"?_.height-F:-_.height+F:F}const z=T?M:f?D*_.width:0;return f?l==="right"?_.width-z:-_.width+z:z}))!=null?P:[]},[r,f,c]),y=B.useMemo(()=>g!==null?x==null?void 0:x[g]:null,[x,g]),v=B.useCallback(_=>{var P;const D=(P=x==null?void 0:x.findIndex(T=>T===_))!=null?P:null;i(D),Et(n.current,{transition:`transform ${dt.DURATION}s cubic-bezier(${dt.EASE.join(",")})`,transform:Pt(l)?`translate3d(0, ${_}px, 0)`:`translate3d(${_}px, 0, 0)`}),x&&D!==x.length-1&&D!==a&&D<a?Et(s.current,{transition:`opacity ${dt.DURATION}s cubic-bezier(${dt.EASE.join(",")})`,opacity:"0"}):Et(s.current,{transition:`opacity ${dt.DURATION}s cubic-bezier(${dt.EASE.join(",")})`,opacity:"1"}),u(r==null?void 0:r[Math.max(D,0)])},[n.current,r,x,a,s,u]);B.useEffect(()=>{if(h||e){var _;const P=(_=r==null?void 0:r.findIndex(D=>D===e||D===h))!=null?_:-1;x&&P!==-1&&typeof x[P]=="number"&&v(x[P])}},[h,e,r,x,v]);function k({draggedDistance:_,closeDrawer:P,velocity:D,dismissible:T}){if(a===void 0)return;const M=l==="bottom"||l==="right"?(y??0)-_:(y??0)+_,z=g===a-1,F=g===0,W=_>0;if(z&&Et(s.current,{transition:`opacity ${dt.DURATION}s cubic-bezier(${dt.EASE.join(",")})`}),!d&&D>2&&!W){T?P():v(x[0]);return}if(!d&&D>2&&W&&x&&r){v(x[r.length-1]);return}const Q=x==null?void 0:x.reduce((ne,A)=>typeof ne!="number"||typeof A!="number"?ne:Math.abs(A-M)<Math.abs(ne-M)?A:ne),K=Pt(l)?window.innerHeight:window.innerWidth;if(D>nj&&Math.abs(_)<K*.4){const ne=W?1:-1;if(ne>0&&b){v(x[r.length-1]);return}if(F&&ne<0&&T&&P(),g===null)return;v(x[g+ne]);return}v(Q)}function N({draggedDistance:_}){if(y===null)return;const P=l==="bottom"||l==="right"?y-_:y+_;(l==="bottom"||l==="right")&&P<x[x.length-1]||(l==="top"||l==="left")&&P>x[x.length-1]||Et(n.current,{transform:Pt(l)?`translate3d(0, ${P}px, 0)`:`translate3d(${P}px, 0, 0)`})}function S(_,P){if(!r||typeof g!="number"||!x||a===void 0)return null;const D=g===a-1;if(g>=a&&P)return 0;if(D&&!P)return 1;if(!w&&!D)return null;const M=D?g+1:g-1,z=D?x[M]-x[M-1]:x[M+1]-x[M],F=_/Math.abs(z);return D?1-F:F}return{isLastSnapPoint:b,activeSnapPoint:h,shouldFade:w,getPercentageDragged:S,setActiveSnapPoint:u,activeSnapPointIndex:g,onRelease:k,onDrag:N,snapPointsOffset:x}}const JO=()=>()=>{};function XO(){const{direction:e,isOpen:t,shouldScaleBackground:r,setBackgroundColorOnScale:n,noBodyStyles:s}=ci(),a=B.useRef(null),i=m.useMemo(()=>document.body.style.backgroundColor,[]);function l(){return(window.innerWidth-sp)/window.innerWidth}B.useEffect(()=>{if(t&&r){a.current&&clearTimeout(a.current);const c=document.querySelector("[data-vaul-drawer-wrapper]")||document.querySelector("[vaul-drawer-wrapper]");if(!c)return;VO(n&&!s?wh(document.body,{background:"black"}):JO,wh(c,{transformOrigin:Pt(e)?"top":"left",transitionProperty:"transform, border-radius",transitionDuration:`${dt.DURATION}s`,transitionTimingFunction:`cubic-bezier(${dt.EASE.join(",")})`}));const d=wh(c,{borderRadius:`${sj}px`,overflow:"hidden",...Pt(e)?{transform:`scale(${l()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`}:{transform:`scale(${l()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`}});return()=>{d(),a.current=window.setTimeout(()=>{i?document.body.style.background=i:document.body.style.removeProperty("background")},dt.DURATION*1e3)}}},[t,r,i])}let Ni=null;function ZO({isOpen:e,modal:t,nested:r,hasBeenOpened:n,preventScrollRestoration:s,noBodyStyles:a}){const[i,l]=B.useState(()=>typeof window<"u"?window.location.href:""),c=B.useRef(0),d=B.useCallback(()=>{if(F0()&&Ni===null&&e&&!a){Ni={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:u,innerHeight:f}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:`${-c.current}px`,left:`${-u}px`,right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const p=f-window.innerHeight;p&&c.current>=f&&(document.body.style.top=`${-(c.current+p)}px`)}),300)}},[e]),h=B.useCallback(()=>{if(F0()&&Ni!==null&&!a){const u=-parseInt(document.body.style.top,10),f=-parseInt(document.body.style.left,10);Object.assign(document.body.style,Ni),window.requestAnimationFrame(()=>{if(s&&i!==window.location.href){l(window.location.href);return}window.scrollTo(f,u)}),Ni=null}},[i]);return B.useEffect(()=>{function u(){c.current=window.scrollY}return u(),window.addEventListener("scroll",u),()=>{window.removeEventListener("scroll",u)}},[]),B.useEffect(()=>{r||!n||(e?(!window.matchMedia("(display-mode: standalone)").matches&&d(),t||window.setTimeout(()=>{h()},500)):h())},[e,n,i,t,r,d,h]),{restorePositionSetting:h}}function ij({open:e,onOpenChange:t,children:r,onDrag:n,onRelease:s,snapPoints:a,shouldScaleBackground:i=!1,setBackgroundColorOnScale:l=!0,closeThreshold:c=KO,scrollLockTimeout:d=GO,dismissible:h=!0,handleOnly:u=!1,fadeFromIndex:f=a&&a.length-1,activeSnapPoint:p,setActiveSnapPoint:b,fixed:g,modal:w=!0,onClose:x,nested:y,noBodyStyles:v,direction:k="bottom",defaultOpen:N=!1,disablePreventScroll:S=!0,snapToSequentialPoint:_=!1,preventScrollRestoration:P=!1,repositionInputs:D=!0,onAnimationEnd:T,container:M,autoFocus:z=!1}){var F,W;const[Q=!1,K]=aj({defaultProp:N,prop:e,onChange:ye=>{t==null||t(ye),!ye&&!y&&Z(),setTimeout(()=>{T==null||T(ye)},dt.DURATION*1e3),ye&&!w&&typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),ye||(document.body.style.pointerEvents="auto")}}),[ne,A]=B.useState(!1),[O,L]=B.useState(!1),[re,ee]=B.useState(!1),G=B.useRef(null),le=B.useRef(null),ve=B.useRef(null),Te=B.useRef(null),je=B.useRef(null),et=B.useRef(!1),tt=B.useRef(null),gt=B.useRef(0),Ye=B.useRef(!1),At=B.useRef(0),xe=B.useRef(null),Kt=B.useRef(((F=xe.current)==null?void 0:F.getBoundingClientRect().height)||0),Ce=B.useRef(((W=xe.current)==null?void 0:W.getBoundingClientRect().width)||0),Gt=B.useRef(0),Qt=B.useCallback(ye=>{a&&ye===J.length-1&&(le.current=new Date)},[]),{activeSnapPoint:$r,activeSnapPointIndex:yt,setActiveSnapPoint:I,onRelease:ae,snapPointsOffset:J,onDrag:he,shouldFade:ke,getPercentageDragged:$}=YO({snapPoints:a,activeSnapPointProp:p,setActiveSnapPointProp:b,drawerRef:xe,fadeFromIndex:f,overlayRef:G,onSnapPointChange:Qt,direction:k,container:M,snapToSequentialPoint:_});FO({isDisabled:!Q||O||!w||re||!ne||!D||!S});const{restorePositionSetting:Z}=ZO({isOpen:Q,modal:w,nested:y,hasBeenOpened:ne,preventScrollRestoration:P,noBodyStyles:v});function te(){return(window.innerWidth-sp)/window.innerWidth}function ce(ye){var Ie,$e;!h&&!a||xe.current&&!xe.current.contains(ye.target)||(Kt.current=((Ie=xe.current)==null?void 0:Ie.getBoundingClientRect().height)||0,Ce.current=(($e=xe.current)==null?void 0:$e.getBoundingClientRect().width)||0,L(!0),ve.current=new Date,Z1()&&window.addEventListener("touchend",()=>et.current=!1,{once:!0}),ye.target.setPointerCapture(ye.pointerId),gt.current=Pt(k)?ye.pageY:ye.pageX)}function Ee(ye,Ie){var $e,Pe;let Ue=ye;const Je=($e=window.getSelection())==null?void 0:$e.toString(),qe=xe.current?_c(xe.current,k):null,fe=new Date;if(Ue.hasAttribute("data-vaul-no-drag")||Ue.closest("[data-vaul-no-drag]"))return!1;if(k==="right"||k==="left")return!0;if(le.current&&fe.getTime()-le.current.getTime()<500)return!1;if(qe!==null&&(k==="bottom"?qe>0:qe<0))return!0;if(Je&&Je.length>0)return!1;if(fe.getTime()-((Pe=je.current)==null?void 0:Pe.getTime())<d&&qe===0||Ie)return je.current=fe,!1;for(;Ue;){if(Ue.scrollHeight>Ue.clientHeight){if(Ue.scrollTop!==0)return je.current=new Date,!1;if(Ue.getAttribute("role")==="dialog")return!0}Ue=Ue.parentNode}return!0}function oe(ye){if(xe.current&&O){const Ie=k==="bottom"||k==="right"?1:-1,$e=(gt.current-(Pt(k)?ye.pageY:ye.pageX))*Ie,Pe=$e>0,Ue=a&&!h&&!Pe;if(Ue&&yt===0)return;const Je=Math.abs($e),qe=document.querySelector("[data-vaul-drawer-wrapper]"),fe=k==="bottom"||k==="top"?Kt.current:Ce.current;let Oe=Je/fe;const Le=$(Je,Pe);if(Le!==null&&(Oe=Le),Ue&&Oe>=1||!et.current&&!Ee(ye.target,Pe))return;if(xe.current.classList.add(jh),et.current=!0,Et(xe.current,{transition:"none"}),Et(G.current,{transition:"none"}),a&&he({draggedDistance:$e}),Pe&&!a){const at=HO($e),It=Math.min(at*-1,0)*Ie;Et(xe.current,{transform:Pt(k)?`translate3d(0, ${It}px, 0)`:`translate3d(${It}px, 0, 0)`});return}const Ae=1-Oe;if((ke||f&&yt===f-1)&&(n==null||n(ye,Oe),Et(G.current,{opacity:`${Ae}`,transition:"none"},!0)),qe&&G.current&&i){const at=Math.min(te()+Oe*(1-te()),1),It=8-Oe*8,Fr=Math.max(0,14-Oe*14);Et(qe,{borderRadius:`${It}px`,transform:Pt(k)?`scale(${at}) translate3d(0, ${Fr}px, 0)`:`scale(${at}) translate3d(${Fr}px, 0, 0)`,transition:"none"},!0)}if(!a){const at=Je*Ie;Et(xe.current,{transform:Pt(k)?`translate3d(0, ${at}px, 0)`:`translate3d(${at}px, 0, 0)`})}}}B.useEffect(()=>{var ye;function Ie(){if(!xe.current||!D)return;const $e=document.activeElement;if(np($e)||Ye.current){var Pe;const Ue=((Pe=window.visualViewport)==null?void 0:Pe.height)||0,Je=window.innerHeight;let qe=Je-Ue;const fe=xe.current.getBoundingClientRect().height||0,Oe=fe>Je*.8;Gt.current||(Gt.current=fe);const Le=xe.current.getBoundingClientRect().top;if(Math.abs(At.current-qe)>60&&(Ye.current=!Ye.current),a&&a.length>0&&J&&yt){const Ae=J[yt]||0;qe+=Ae}if(At.current=qe,fe>Ue||Ye.current){const Ae=xe.current.getBoundingClientRect().height;let at=Ae;Ae>Ue&&(at=Ue-(Oe?Le:sp)),g?xe.current.style.height=`${Ae-Math.max(qe,0)}px`:xe.current.style.height=`${Math.max(at,Ue-Le)}px`}else xe.current.style.height=`${Gt.current}px`;a&&a.length>0&&!Ye.current?xe.current.style.bottom="0px":xe.current.style.bottom=`${Math.max(qe,0)}px`}}return(ye=window.visualViewport)==null||ye.addEventListener("resize",Ie),()=>{var $e;return($e=window.visualViewport)==null?void 0:$e.removeEventListener("resize",Ie)}},[yt,a,J]);function Re(ye){lt(),x==null||x(),ye||K(!1),setTimeout(()=>{a&&I(a[0])},dt.DURATION*1e3)}function ge(){if(!xe.current)return;const ye=document.querySelector("[data-vaul-drawer-wrapper]"),Ie=_c(xe.current,k);Et(xe.current,{transform:"translate3d(0, 0, 0)",transition:`transform ${dt.DURATION}s cubic-bezier(${dt.EASE.join(",")})`}),Et(G.current,{transition:`opacity ${dt.DURATION}s cubic-bezier(${dt.EASE.join(",")})`,opacity:"1"}),i&&Ie&&Ie>0&&Q&&Et(ye,{borderRadius:`${sj}px`,overflow:"hidden",...Pt(k)?{transform:`scale(${te()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${te()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${dt.DURATION}s`,transitionTimingFunction:`cubic-bezier(${dt.EASE.join(",")})`},!0)}function lt(){!O||!xe.current||(xe.current.classList.remove(jh),et.current=!1,L(!1),Te.current=new Date)}function ot(ye){if(!O||!xe.current)return;xe.current.classList.remove(jh),et.current=!1,L(!1),Te.current=new Date;const Ie=_c(xe.current,k);if(!Ee(ye.target,!1)||!Ie||Number.isNaN(Ie)||ve.current===null)return;const $e=Te.current.getTime()-ve.current.getTime(),Pe=gt.current-(Pt(k)?ye.pageY:ye.pageX),Ue=Math.abs(Pe)/$e;if(Ue>.05&&(ee(!0),setTimeout(()=>{ee(!1)},200)),a){ae({draggedDistance:Pe*(k==="bottom"||k==="right"?1:-1),closeDrawer:Re,velocity:Ue,dismissible:h}),s==null||s(ye,!0);return}if(k==="bottom"||k==="right"?Pe>0:Pe<0){ge(),s==null||s(ye,!0);return}if(Ue>nj){Re(),s==null||s(ye,!1);return}var Je;const qe=Math.min((Je=xe.current.getBoundingClientRect().height)!=null?Je:0,window.innerHeight);var fe;const Oe=Math.min((fe=xe.current.getBoundingClientRect().width)!=null?fe:0,window.innerWidth),Le=k==="left"||k==="right";if(Math.abs(Ie)>=(Le?Oe:qe)*c){Re(),s==null||s(ye,!1);return}s==null||s(ye,!0),ge()}B.useEffect(()=>(Q&&(Et(document.documentElement,{scrollBehavior:"auto"}),le.current=new Date),()=>{qO(document.documentElement,"scrollBehavior")}),[Q]);function Qr(ye){const Ie=ye?(window.innerWidth-Xs)/window.innerWidth:1,$e=ye?-Xs:0;tt.current&&window.clearTimeout(tt.current),Et(xe.current,{transition:`transform ${dt.DURATION}s cubic-bezier(${dt.EASE.join(",")})`,transform:`scale(${Ie}) translate3d(0, ${$e}px, 0)`}),!ye&&xe.current&&(tt.current=setTimeout(()=>{const Pe=_c(xe.current,k);Et(xe.current,{transition:"none",transform:Pt(k)?`translate3d(0, ${Pe}px, 0)`:`translate3d(${Pe}px, 0, 0)`})},500))}function Ut(ye,Ie){if(Ie<0)return;const $e=(window.innerWidth-Xs)/window.innerWidth,Pe=$e+Ie*(1-$e),Ue=-Xs+Ie*Xs;Et(xe.current,{transform:Pt(k)?`scale(${Pe}) translate3d(0, ${Ue}px, 0)`:`scale(${Pe}) translate3d(${Ue}px, 0, 0)`,transition:"none"})}function es(ye,Ie){const $e=Pt(k)?window.innerHeight:window.innerWidth,Pe=Ie?($e-Xs)/$e:1,Ue=Ie?-Xs:0;Ie&&Et(xe.current,{transition:`transform ${dt.DURATION}s cubic-bezier(${dt.EASE.join(",")})`,transform:Pt(k)?`scale(${Pe}) translate3d(0, ${Ue}px, 0)`:`scale(${Pe}) translate3d(${Ue}px, 0, 0)`})}return B.createElement(NO,{defaultOpen:N,onOpenChange:ye=>{!h&&!ye||(ye?A(!0):Re(!0),K(ye))},open:Q},B.createElement(X1.Provider,{value:{activeSnapPoint:$r,snapPoints:a,setActiveSnapPoint:I,drawerRef:xe,overlayRef:G,onOpenChange:t,onPress:ce,onRelease:ot,onDrag:oe,dismissible:h,handleOnly:u,isOpen:Q,isDragging:O,shouldFade:ke,closeDrawer:Re,onNestedDrag:Ut,onNestedOpenChange:Qr,onNestedRelease:es,keyboardIsOpen:Ye,modal:w,snapPointsOffset:J,direction:k,shouldScaleBackground:i,setBackgroundColorOnScale:l,noBodyStyles:v,container:M,autoFocus:z}},r))}const lj=B.forwardRef(function({...e},t){const{overlayRef:r,snapPoints:n,onRelease:s,shouldFade:a,isOpen:i,modal:l}=ci(),c=tj(t,r),d=n&&n.length>0;return l?B.createElement(CO,{onMouseUp:s,ref:c,"data-vaul-overlay":"","data-vaul-snap-points":i&&d?"true":"false","data-vaul-snap-points-overlay":i&&a?"true":"false",...e}):(typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),null)});lj.displayName="Drawer.Overlay";const cj=B.forwardRef(function({onPointerDownOutside:e,style:t,onOpenAutoFocus:r,...n},s){const{drawerRef:a,onPress:i,onRelease:l,onDrag:c,keyboardIsOpen:d,snapPointsOffset:h,modal:u,isOpen:f,direction:p,snapPoints:b,container:g,handleOnly:w,autoFocus:x}=ci(),[y,v]=B.useState(!1),k=tj(s,a),N=B.useRef(null),S=B.useRef(null),_=B.useRef(!1),P=b&&b.length>0;XO();const D=(M,z,F=0)=>{if(_.current)return!0;const W=Math.abs(M.y),Q=Math.abs(M.x),K=Q>W,ne=["bottom","right"].includes(z)?1:-1;if(z==="left"||z==="right"){if(!(M.x*ne<0)&&Q>=0&&Q<=F)return K}else if(!(M.y*ne<0)&&W>=0&&W<=F)return!K;return _.current=!0,!0};B.useEffect(()=>{P&&window.requestAnimationFrame(()=>{v(!0)})},[]);function T(M){N.current=null,_.current=!1,l(M)}return B.createElement(EO,{"data-vaul-drawer-direction":p,"data-vaul-drawer":"","data-vaul-delayed-snap-points":y?"true":"false","data-vaul-snap-points":f&&P?"true":"false","data-vaul-custom-container":g?"true":"false",...n,ref:k,style:h&&h.length>0?{"--snap-point-height":`${h[0]}px`,...t}:t,onPointerDown:M=>{w||(n.onPointerDown==null||n.onPointerDown.call(n,M),N.current={x:M.pageX,y:M.pageY},i(M))},onOpenAutoFocus:M=>{r==null||r(M),x||M.preventDefault()},onPointerDownOutside:M=>{if(e==null||e(M),!u||M.defaultPrevented){M.preventDefault();return}d.current&&(d.current=!1)},onFocusOutside:M=>{if(!u){M.preventDefault();return}},onPointerMove:M=>{if(S.current=M,w||(n.onPointerMove==null||n.onPointerMove.call(n,M),!N.current))return;const z=M.pageY-N.current.y,F=M.pageX-N.current.x,W=M.pointerType==="touch"?10:2;D({x:F,y:z},p,W)?c(M):(Math.abs(F)>W||Math.abs(z)>W)&&(N.current=null)},onPointerUp:M=>{n.onPointerUp==null||n.onPointerUp.call(n,M),N.current=null,_.current=!1,l(M)},onPointerOut:M=>{n.onPointerOut==null||n.onPointerOut.call(n,M),T(S.current)},onContextMenu:M=>{n.onContextMenu==null||n.onContextMenu.call(n,M),T(S.current)}})});cj.displayName="Drawer.Content";const eA=250,tA=120,dj=B.forwardRef(function({preventCycle:e=!1,children:t,...r},n){const{closeDrawer:s,isDragging:a,snapPoints:i,activeSnapPoint:l,setActiveSnapPoint:c,dismissible:d,handleOnly:h,isOpen:u,onPress:f,onDrag:p}=ci(),b=B.useRef(null),g=B.useRef(!1);function w(){if(g.current){v();return}window.setTimeout(()=>{x()},tA)}function x(){if(a||e||g.current){v();return}if(v(),(!i||i.length===0)&&d){s();return}if(l===i[i.length-1]&&d){s();return}const N=i.findIndex(_=>_===l);if(N===-1)return;const S=i[N+1];c(S)}function y(){b.current=window.setTimeout(()=>{g.current=!0},eA)}function v(){window.clearTimeout(b.current),g.current=!1}return B.createElement("div",{onClick:w,onPointerCancel:v,onPointerDown:k=>{h&&f(k),y()},onPointerMove:k=>{h&&p(k)},ref:n,"data-vaul-drawer-visible":u?"true":"false","data-vaul-handle":"","aria-hidden":"true",...r},B.createElement("span",{"data-vaul-handle-hitarea":"","aria-hidden":"true"},t))});dj.displayName="Drawer.Handle";function rA({onDrag:e,onOpenChange:t,...r}){const{onNestedDrag:n,onNestedOpenChange:s,onNestedRelease:a}=ci();if(!n)throw new Error("Drawer.NestedRoot must be placed in another drawer");return B.createElement(ij,{nested:!0,onClose:()=>{s(!1)},onDrag:(i,l)=>{n(i,l),e==null||e(i,l)},onOpenChange:i=>{i&&s(i)},onRelease:a,...r})}function nA(e){const t=ci(),{container:r=t.container,...n}=e;return B.createElement(SO,{container:r,...n})}const Sc={Root:ij,NestedRoot:rA,Content:cj,Overlay:lj,Trigger:_O,Portal:nA,Handle:dj,Close:RO,Title:PO,Description:TO},kh=e=>{const t=((e==null?void 0:e.ext)||"").toLowerCase();return((e==null?void 0:e.mime)||"").startsWith("image/")||["jpg","jpeg","png","gif","webp","bmp"].includes(t)},z0=e=>{const t=((e==null?void 0:e.ext)||"").toLowerCase();return((e==null?void 0:e.mime)||"").includes("pdf")||t==="pdf"};function sA({open:e,file:t,title:r,onClose:n}){return e?o.jsx("div",{className:"fixed inset-0 z-[10020] bg-black/70 backdrop-blur-sm",children:o.jsxs("div",{className:"mx-auto mt-8 flex h-[calc(100vh-4rem)] w-[min(96vw,1100px)] flex-col overflow-hidden rounded-xl border border-white/15 bg-[#111] text-white",children:[o.jsxs("div",{className:"flex items-center justify-between border-b border-white/15 px-4 py-3",children:[o.jsx("h3",{className:"truncate text-sm font-semibold",children:r||(t==null?void 0:t.name)||" "}),o.jsx("button",{type:"button",onClick:n,className:"rounded-full p-1.5 hover:bg-white/10","aria-label":"",children:o.jsx(He,{className:"h-5 w-5"})})]}),o.jsxs("div",{className:"flex-1 overflow-auto p-3",children:[!(t!=null&&t.url)&&o.jsx("div",{className:"p-4 text-sm text-white/70",children:"  ."}),!!(t!=null&&t.url)&&kh(t)&&o.jsx("img",{src:t.url,alt:t.name,className:"mx-auto max-h-full max-w-full object-contain"}),!!(t!=null&&t.url)&&!kh(t)&&z0(t)&&o.jsx("iframe",{src:t.url,title:t.name,className:"h-full min-h-[70vh] w-full rounded border border-white/10 bg-white"}),!!(t!=null&&t.url)&&!kh(t)&&!z0(t)&&o.jsxs("div",{className:"p-4 text-sm text-white/80",children:["    .",o.jsx("a",{href:t.url,target:"_blank",rel:"noreferrer",className:"ml-2 underline",children:"  "})]})]})]})}):null}const oA={:[{value:"site1",text:"  101",dept:"HQ"},{value:"site2",text:"  P3",dept:"HQ"},{value:"site3",text:" ",dept:"HQ"},{value:"site13",text:"  ",dept:"HQ"},{value:"site14",text:"  2",dept:"HQ"},{value:"site15",text:" ",dept:"HQ"}],:[{value:"site4",text:" ",dept:"HQ"},{value:"site5",text:" ",dept:"HQ"},{value:"site16",text:"  ",dept:"HQ"},{value:"site17",text:"  ",dept:"HQ"}],:[{value:"site6",text:" ",dept:"HQ"},{value:"site7",text:" ",dept:"HQ"},{value:"site18",text:" ",dept:"HQ"}],:[{value:"site8",text:"  ",dept:"HQ"},{value:"site9",text:"  ",dept:"HQ"},{value:"site10",text:"  ",dept:"HQ"},{value:"site19",text:"  2",dept:"HQ"},{value:"site20",text:" ",dept:"HQ"}],:[{value:"site11",text:" ",dept:"HQ"},{value:"site12",text:" ",dept:"HQ"},{value:"site21",text:" ",dept:"HQ"}]},aA=Object.values(oA).flat().reverse(),Nh=aA.map(e=>({site_id:e.value,site_name:e.text,dept:e.dept}));function W0(e){return(e||"").toLowerCase().replace(/\s+/g,"")}function iA(e,t,r=2){const n=(t||"").trim();if(n.length<r)return[];const s=W0(n);return e.filter(a=>W0(a.site_name).includes(s))}function lA(){const{user:e,isTestMode:t}=St(),r=!!e;return $t({queryKey:["sites"],queryFn:async()=>{if(!r)return Nh;const{data:n,error:s}=await ue.from("sites").select("id, name").order("name",{ascending:!0});if(s)return Nh;const a=(n||[]).map(i=>({site_id:String(i.id),site_name:String(i.name||"")})).filter(i=>!!i.site_id&&!!i.site_name);return a.length>0?a:Nh},enabled:r||t,staleTime:1e3*60*5})}function cA(e){return new Promise((t,r)=>{const n=new FileReader;n.onload=()=>t(String(n.result||"")),n.onerror=()=>r(n.error||new Error("file_read_failed")),n.readAsDataURL(e)})}async function dA(e){const{site_id:t,site_name:r,work_date:n,files:s,badge:a=""}=e,i=new Date().toISOString();let l=0;for(let c=0;c<s.length;c++){const d=s[c];if(!d.type.startsWith("image/"))continue;const h=await cA(d);await hT({type:"photo",dataUrl:h,siteValue:t,siteName:r,workDate:n,badge:a,createdAt:i}),await lT({action:"upload_photo",payload:{siteValue:t,workDate:n,data:{id:Date.now()+c,url:h,badge:a,type:"photo",version:1,timestamp:i,siteName:r,workDate:n}},createdAt:i,retryCount:0,status:"pending"}),l++}if(l>0&&navigator.onLine)try{await h1()}catch{}return{saved:l}}const uA="https://images.unsplash.com/photo-1504307651254-35680f356dfd?q=80&w=400&auto=format&fit=crop",uj="https://images.unsplash.com/photo-1503387762-592deb58ef4e?q=80&w=400&auto=format&fit=crop",gn={"sys: ":{id:"sys: ",siteName:" ",siteSource:"system",affiliation:"",contractor:"",totalDrawings:2,currentVersion:1,lastUpdated:"2026-02-10",history:[{id:"bp_hist_1",date:"2026-02-10",time:"14:30",author:"",affiliation:"",contractor:"",component:"",process:"",files:[{id:"bp_f1",name:"_.pdf",type:"file",url:"",size:"2.1MB",ext:"PDF",version:"v1"},{id:"bp_f2",name:".jpg",type:"img",url:uj,size:"1.2MB",ext:"JPG",version:"v1"}],version:1}]},"custom: B":{id:"custom: B",siteName:" B",siteSource:"custom",affiliation:"",contractor:"GS",totalDrawings:1,currentVersion:1,lastUpdated:"2026-02-12",history:[{id:"bp_hist_2",date:"2026-02-12",time:"09:15",author:"",affiliation:"",contractor:"GS",component:"",process:"",files:[{id:"bp_f3",name:"_.pdf",type:"file",url:"",size:"3.4MB",ext:"PDF",version:"v1"}],version:1}]}},hA=["","","","",""],fA=["","","",""],pA=["","","",""],_h={:[{id:"md1",title:"  ",author:"",date:"2026-02-15",time:"09:10",files:[{id:"md1f1",name:"_1.jpg",type:"img",url:uj,size:"1.2MB",ext:"JPG",version:"v1"}]},{id:"md2",title:" ",author:"",date:"2026-02-16",time:"13:30",files:[]}],:[{id:"co1",title:" ",author:"",date:"2026-01-05",time:"10:00",files:[{id:"co1f1",name:".hwp",type:"file",url:"",size:"54KB",ext:"HWP",version:"v1"}]}],:[],:[{id:"ph1",title:" ",contractor:"",affiliation:"",author:"",date:"2026-02-18",time:"16:45",files:[{id:"ph1f1",name:"_2.jpg",type:"img",url:uA,size:"2.5MB",ext:"JPG",version:"v1"}]}],:[]},_i=[{key:"safetyEdu",label:"",acceptMime:"application/pdf,image/*",help:"   "},{key:"bankbook",label:"",acceptMime:"application/pdf,image/*",help:"   "},{key:"idCard",label:"",acceptMime:"application/pdf,image/*",help:"   "},{key:"medical",label:"",acceptMime:"application/pdf,image/*",help:"   "},{key:"carReg",label:"",acceptMime:"application/pdf,image/*",help:"   "},{key:"carIns",label:"",acceptMime:"application/pdf,image/*",help:"   "},{key:"senior",label:"",acceptMime:"application/pdf,image/*",help:"   "}],Cc=e=>{const t=e.split("-");return t.length===3?`${t[0].slice(2)}.${t[1]}.${t[2]}`:e},hj=["","","","","","","","","","","","","","","","","","",""],mA=new Set(hj);function xA(e){let t="";for(const r of e){const n=r.charCodeAt(0);if(n>=44032&&n<=55203){const s=Math.floor((n-44032)/588);t+=hj[s]??r;continue}t+=r.toLowerCase()}return t}function gA(e){const t=e.replace(/\s+/g,"");if(!t)return!1;for(const r of t)if(!mA.has(r))return!1;return!0}function q0(e,t){const r=t.trim();return r?gA(r)?xA(e).replace(/\s+/g,"").includes(r.replace(/\s+/g,"")):e.toLowerCase().includes(r.toLowerCase()):!0}function bA(){const{isPartner:e}=Zn();return o.jsx(vA,{restrictCompanyDocs:e})}function vA({restrictCompanyDocs:e}){var Hm,Vm;const t=e?["","","",""]:hA,[r,n]=m.useState(0),[s,a]=m.useState(""),[i,l]=m.useState(new Set),[c,d]=m.useState(5),[h,u]=m.useState("all"),[f,p]=m.useState(""),[b,g]=m.useState(!1),[w,x]=m.useState(!1),[y,v]=m.useState(!1),[k,N]=m.useState({isOpen:!1}),[S,_]=m.useState({}),[P,D]=m.useState(new Set),[T,M]=m.useState(null),[z,F]=m.useState(null),[W,Q]=m.useState([]),K=m.useRef(null),ne=m.useRef(null),A=m.useMemo(()=>new Date().toISOString().split("T")[0],[]),{data:O=[]}=lA(),[L,re]=m.useState(""),[ee,G]=m.useState(null),[le,ve]=m.useState(!1),[Te,je]=m.useState(()=>new Date().toISOString().split("T")[0]),[et,tt]=m.useState(null),[gt,Ye]=m.useState(""),At=m.useMemo(()=>iA(O,L,2).slice(0,40),[O,L]),xe=t[r]==="",Kt=m.useMemo(()=>xe?W.length>0&&gt.trim().length>0&&!!Te:W.length>0&&!!ee&&!!Te,[W.length,gt,Te,xe,ee]),[Ce,Gt]=m.useState({isOpen:!1}),[Qt,$r]=m.useState(new Set),yt=m.useRef({}),[I,ae]=m.useState(null),[J,he]=m.useState({siteName:"",siteIsCustom:!1,affiliation:"",contractorPreset:"",contractorCustom:"",componentPreset:"",componentCustom:"",processPreset:"",processCustom:""}),[ke,$]=m.useState(!1),[Z,te]=m.useState(!1),[ce,Ee]=m.useState(null),[oe,Re]=m.useState(!1),[ge,lt]=m.useState(null),[ot,Qr]=m.useState({}),Ut=m.useRef(null),es=m.useRef(null),ye=m.useRef(null),[Ie,$e]=m.useState(null),Pe=w1({open:oe,defaultMinScale:.5,defaultMaxScale:4}),[Ue,Je]=m.useState(0),[qe,fe]=m.useState(!1),[Oe,Le]=m.useState("width"),{data:Ae=[]}=v1(),at=BT(),It=zT(),Fr=WT(),Sr=qT(),wt=t[r],fr=wt==="",Io=wt==="",nr=wt==="",Om=m.useMemo(()=>{const j=["","GS","","",""],C=Object.values(gn).map(q=>q.affiliation).filter(Boolean),E=Ae.map(q=>q.affiliation).filter(Boolean);return Array.from(new Set([...j,...C,...E]))},[Ae]),jj=m.useMemo(()=>{const j=["","GS","","",""],C=Object.values(gn).map(q=>q.contractor).filter(Boolean),E=Ae.map(q=>q.contractor).filter(Boolean);return Array.from(new Set([...j,...C,...E]))},[Ae]),Am=m.useMemo(()=>{const j=new Map,C=(q,Y)=>{const H=(q||"").trim(),be=(Y||"").trim();if(!H||!be)return;j.has(H)||j.set(H,new Map);const pe=j.get(H);pe.set(be,(pe.get(be)||0)+1)};Object.values(gn).forEach(q=>C(q.affiliation,q.contractor)),Ae.forEach(q=>C(q.affiliation,q.contractor));const E={};for(const[q,Y]of j.entries()){let H="",be=-1;for(const[pe,Se]of Y.entries())Se>be&&(H=pe,be=Se);H&&(E[q]=H)}return E},[Ae]);m.useEffect(()=>{const j=(J.affiliation||"").trim();if(!j)return;const C={:"",:""};if(j===""){he(Y=>Y.contractorPreset===""?Y:{...Y,contractorPreset:"",contractorCustom:""});return}const E=C[j];if(E){he(Y=>Y.contractorPreset===E?Y:{...Y,contractorPreset:E,contractorCustom:""});return}const q=Am[j];q&&he(Y=>Y.contractorPreset?Y:{...Y,contractorPreset:q,contractorCustom:""})},[J.affiliation,Am]);const uu=m.useMemo(()=>{const j=Ae.flatMap(C=>C.punchItems||[]);return{total:j.length,open:j.filter(C=>C.status!=="done").length,done:j.filter(C=>C.status==="done").length}},[Ae]),hu=m.useMemo(()=>{if(fr)return[];const j=s.toLowerCase();return(_h[wt]||[]).filter(C=>C.title.toLowerCase().includes(j)||(C.contractor||"").toLowerCase().includes(j))},[r,s,wt,fr]),fu=m.useMemo(()=>{if(!fr)return[];const j=s.toLowerCase();return Ae.filter(C=>{var q,Y;if(f&&C.title!==f)return!1;const E=C.title.toLowerCase().includes(j)||C.contractor.toLowerCase().includes(j);return h==="all"?E:h==="open"?E&&((q=C.punchItems)==null?void 0:q.some(H=>H.status!=="done")):h==="done"?E&&((Y=C.punchItems)==null?void 0:Y.every(H=>H.status==="done")):E})},[fr,s,h,f,Ae]),Im=nr?e2():[],Ll=nr?(()=>{const j=s.trim().toLowerCase();return j?Im.filter(C=>{var q,Y,H,be,pe,Se;return[C.siteName,C.affiliation,C.contractor,(Y=(q=C.history)==null?void 0:q[0])==null?void 0:Y.author,(be=(H=C.history)==null?void 0:H[0])==null?void 0:be.component,(Se=(pe=C.history)==null?void 0:pe[0])==null?void 0:Se.process].filter(Boolean).join(" ").toLowerCase().includes(j)}):Im})():[],Dm=!fr&&!nr?hu.slice(0,c):[],Lm=fr?fu.slice(0,c):[],kj=nr?Ll.slice(0,c):[],Mm=fr?fu.length>c:nr?Ll.length>c:hu.length>c,Nj=fr?fu.length:nr?Ll.length:hu.length;m.useEffect(()=>{if(!I||!nr)return;const j=yt.current[I];j&&j.scrollIntoView({behavior:"smooth",block:"center"});const C=window.setTimeout(()=>ae(null),1600);return()=>window.clearTimeout(C)},[I,nr]),m.useEffect(()=>{if(!w)return;const j=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=j}},[w]);const pu=j=>{l(C=>{const E=new Set(C);return E.has(j)?E.delete(j):E.add(j),E})},_j=m.useMemo(()=>Ae.map(j=>j.title),[Ae]),Sj=j=>{var E;return((E=j.punchItems)==null?void 0:E.some(q=>q.status!=="done"))?{text:"",cls:"bg-indigo-500 text-white"}:{text:"",cls:"bg-slate-500 text-white"}},di=m.useMemo(()=>ce&&Ae.find(j=>j.id===ce)||null,[ce,Ae]),$m=((Hm=di==null?void 0:di.punchItems)==null?void 0:Hm.every(j=>j.status==="done"))||!1,mu=m.useMemo(()=>ge&&Ae.find(j=>j.id===ge.groupId)||null,[ge,Ae]),mn=((Vm=mu==null?void 0:mu.punchItems)==null?void 0:Vm.every(j=>j.status==="done"))||!1,Cj=j=>{Ee(j),l(new Set)},Ej=()=>{Ee(null),l(new Set)};m.useEffect(()=>{if(!oe)return;fe(!1),Le("width");const j=()=>{const q=Pe.containerRef.current,Y=Pe.contentRef.current;if(!q||!Y)return;const H=window.getComputedStyle(q),be=(parseFloat(H.paddingLeft||"0")||0)+(parseFloat(H.paddingRight||"0")||0),Se=Math.max(0,q.clientWidth-be)/Y.offsetWidth;Number.isFinite(Se)&&Se>0&&(Pe.reset(Se),Le("width"))},C=()=>window.setTimeout(j,60),E=window.requestAnimationFrame(j);return window.addEventListener("resize",j),window.addEventListener("orientationchange",C),()=>{window.cancelAnimationFrame(E),window.removeEventListener("resize",j),window.removeEventListener("orientationchange",C)}},[oe,Pe.reset]);const Pj=j=>j==="done"?"":j==="ing"?"":"",sr=m.useCallback(()=>{var be;const j=ge==null?void 0:ge.groupId,C=es.current;if(!j||!C)return;const E=Array.from(C.querySelectorAll("[data-report-edit='1']")),q={};for(const pe of E){const Se=pe.dataset.itemId||"",Qe=pe.dataset.field;if(!Se||Qe!=="location"&&Qe!=="issue")continue;const ct=(pe.innerText||"").replace(/\u00A0/g," ").trim();q[Se]||(q[Se]={}),q[Se][Qe]=ct}E.length>0&&Qr(pe=>{const Qe={...pe[j]||{}};for(const[ct,Ge]of Object.entries(q))Qe[ct]={...Qe[ct]||{},...Ge};return{...pe,[j]:Qe}});const Y=Array.from(((be=Ut.current)==null?void 0:be.querySelectorAll("[data-report-meta]"))||[]),H={};for(const pe of Y){const Se=pe.dataset.reportMeta;if(!Se)continue;const Qe=(pe.innerText||"").replace(/\u00A0/g," ").trim();H[Se]=Qe}lt(pe=>{if(!pe||pe.groupId!==j)return pe;const Se=E.length===0?pe.rows:pe.rows.map(Qe=>{var ct,Ge;return{...Qe,location:((ct=q[Qe.id])==null?void 0:ct.location)??Qe.location,issue:((Ge=q[Qe.id])==null?void 0:Ge.issue)??Qe.issue}});return{...pe,...H,rows:Se}})},[ge==null?void 0:ge.groupId]),Ml=m.useCallback((j,C,E)=>{lt(q=>q&&{...q,rows:q.rows.map(Y=>Y.id===j?{...Y,[C]:E}:Y)}),ge!=null&&ge.groupId&&It.mutate({groupId:ge.groupId,itemId:j,field:C,value:E},{onSuccess:()=>V.success(E?" .":" .")})},[ge==null?void 0:ge.groupId,It]),Fm=m.useCallback((j,C)=>{var E;if(ge){if(mn){V.error("    .");return}sr(),$e({itemId:j,field:C}),(E=ye.current)==null||E.click()}},[sr,mn,ge]),Tj=m.useCallback(j=>{var q;const C=(q=j.target.files)==null?void 0:q[0];if(!C||!Ie){j.currentTarget.value="";return}const E=new FileReader;E.onload=Y=>{var H;Ml(Ie.itemId,Ie.field,((H=Y.target)==null?void 0:H.result)||""),$e(null)},E.readAsDataURL(C),j.currentTarget.value=""},[Ie,Ml]),Um=m.useCallback((j,C)=>{if(mn){V.error("    .");return}sr(),Ml(j,C,"")},[sr,mn,Ml]),Rj=m.useCallback(j=>{const C=j||ce||(i.size===1?Array.from(i)[0]:null);if(!C||!j&&!ce&&i.size!==1){V.error("    ");return}const E=Ae.find(H=>H.id===C);if(!E){V.error("    .");return}const q=ot[E.id]||{},Y=(E.punchItems||[]).map(H=>{var be,pe;return{id:H.id,location:((be=q[H.id])==null?void 0:be.location)??H.location??"",issue:((pe=q[H.id])==null?void 0:pe.issue)??H.issue??"",status:H.status,beforePhoto:H.beforePhoto,afterPhoto:H.afterPhoto}});lt({groupId:E.id,title:"   ",siteName:E.title,date:E.date,rows:Y}),Je(H=>H+1),fe(!1),Le("width"),Re(!0)},[ce,i,Ae,ot]),Bm=m.useCallback(()=>{sr(),Re(!1),lt(null),$e(null),fe(!1),Le("width")},[sr]);m.useCallback(()=>{if(sr(),!ge)return;const j=Ae.find(E=>E.id===ge.groupId);if(!j)return;Qr(E=>{const q={...E};return delete q[ge.groupId],q});const C=(j.punchItems||[]).map(E=>({id:E.id,location:E.location??"",issue:E.issue??"",status:E.status,beforePhoto:E.beforePhoto,afterPhoto:E.afterPhoto}));lt({groupId:j.id,title:"   ",siteName:j.title,date:j.date,rows:C}),Je(E=>E+1),$e(null),fe(!1),Le("width"),V.success(" .")},[sr,Ae,ge]);const zm=m.useCallback(()=>{const j=Pe.containerRef.current,C=Pe.contentRef.current;if(!j||!C)return;const E=window.getComputedStyle(j),q=(parseFloat(E.paddingLeft||"0")||0)+(parseFloat(E.paddingRight||"0")||0),H=Math.max(0,j.clientWidth-q)/C.offsetWidth;Number.isFinite(H)&&H>0&&(Pe.reset(H),Le("width"))},[Pe]),Wm=m.useCallback(()=>{Pe.reset(),Le("page")},[Pe]);m.useCallback(()=>{if(Oe==="width"){Wm();return}zm()},[Wm,zm,Oe]),m.useCallback(()=>{fe(j=>!j)},[]),m.useCallback(j=>{!j.ctrlKey&&!j.metaKey||Pe.onWheel(j)},[Pe]),m.useCallback(j=>{!qe&&j.touches.length===1||Pe.onTouchStart(j)},[qe,Pe]),m.useCallback(j=>{!qe&&j.touches.length===1||Pe.onTouchMove(j)},[qe,Pe]),m.useCallback(j=>{Pe.onTouchEnd(j)},[Pe]);const xu=m.useCallback(j=>new Promise((C,E)=>{const q=document.querySelector(`script[src="${j}"]`);if(q){if(q.dataset.loaded==="true"){C();return}q.addEventListener("load",()=>C(),{once:!0}),q.addEventListener("error",()=>E(new Error(`Failed to load ${j}`)),{once:!0});return}const Y=document.createElement("script");Y.src=j,Y.async=!0,Y.onload=()=>{Y.dataset.loaded="true",C()},Y.onerror=()=>E(new Error(`Failed to load ${j}`)),document.head.appendChild(Y)}),[]),$l=m.useCallback(async()=>{const j=window;j.html2canvas||await xu("https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"),j.jspdf||await xu("https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js")},[xu]),Ks=m.useCallback(async()=>{var C;if(sr(),!ge)return;const j=Ut.current;if(!j){V.error("    .");return}try{await $l();const E=window,q=E.html2canvas,Y=(C=E.jspdf)==null?void 0:C.jsPDF;if(!q||!Y){V.error("PDF   .");return}const H=j.cloneNode(!0);H.style.position="fixed",H.style.left="0",H.style.top="-10000px",H.style.transform="none",H.style.width="210mm",H.style.minHeight="297mm",H.style.background="#ffffff",H.style.margin="0",H.style.padding="20mm 10mm",H.style.boxSizing="border-box",H.style.fontFamily="Arial, sans-serif",H.style.pointerEvents="none",document.body.appendChild(H);try{H.querySelectorAll("table").forEach(bt=>{const Be=bt;Be.style.tableLayout="fixed",Be.style.width="100%",Be.style.borderCollapse="collapse"}),H.querySelectorAll("td, th").forEach(bt=>{const Be=bt;Be.style.verticalAlign="top",Be.style.lineHeight="1.4",Be.style.paddingTop="6px",Be.style.paddingBottom="10px",Be.style.paddingLeft="4px",Be.style.paddingRight="4px",Be.style.whiteSpace="normal",Be.style.wordBreak="break-word",Be.style.overflowWrap="anywhere",Be.style.boxSizing="border-box"}),H.querySelectorAll("[contenteditable='true']").forEach(bt=>{const Be=bt;Be.style.whiteSpace="pre-wrap",Be.style.wordBreak="break-word"}),H.querySelectorAll("[data-report-remove='1']").forEach(bt=>{bt.style.display="none"});const be=new Set([0,5]);H.querySelectorAll("tr").forEach(bt=>{const Be=bt.querySelectorAll("th, td");be.forEach(Mo=>{const rs=Be[Mo];rs&&(rs.style.textAlign="center",rs.style.verticalAlign="middle")})}),H.querySelectorAll("img").forEach(bt=>{const Be=bt;Be.style.display="block",Be.style.maxWidth="100%",Be.setAttribute("crossorigin","anonymous")});const pe=2,Se=Array.from(H.querySelectorAll("img"));await Promise.all(Se.map(bt=>bt.complete?Promise.resolve():new Promise(Be=>{bt.addEventListener("load",()=>Be(),{once:!0}),bt.addEventListener("error",()=>Be(),{once:!0})})));const Qe=H.getBoundingClientRect(),ct=Array.from(H.querySelectorAll("tbody tr")).map(bt=>(bt.getBoundingClientRect().bottom-Qe.top)*pe),Ge=await q(H,{scale:pe,useCORS:!0,backgroundColor:"#ffffff",logging:!1,windowWidth:H.scrollWidth||794,windowHeight:H.scrollHeight||H.getBoundingClientRect().height}),Cr=new Y("p","mm","a4"),Ul=210,ui=297,Yt=0,Lo=0,Qs=Ul-Yt*2,r2=ui-Lo*2,Km=Qs/Ge.width,Gm=Math.floor(r2/Km);let ts=0,Qm=0;for(;ts<Ge.height-1;){Qm>0&&Cr.addPage();const bt=Math.min(ts+Gm,Ge.height);let Be=bt;for(let wu=ct.length-1;wu>=0;wu--){const ju=ct[wu];if(ju>ts+40&&ju<=bt){Be=ju;break}}Be<=ts+10&&(Be=bt),(Ge.height-Be<=8||Ge.height-ts<=Gm+8)&&(Be=Ge.height);const Mo=Be-ts,rs=document.createElement("canvas");rs.width=Ge.width,rs.height=Mo;const Ym=rs.getContext("2d");Ym&&Ym.drawImage(Ge,0,ts,Ge.width,Mo,0,0,Ge.width,Mo);const o2=Mo*Km;Cr.addImage(rs.toDataURL("image/jpeg",.95),"JPEG",Yt,Lo,Qs,o2),Qm++,ts=Be}const n2=(ge.date||new Date().toISOString().split("T")[0]).slice(0,10),s2=(ge.siteName||"").replace(/[\\/:*?\"<>|]+/g,"_").trim()||"";Cr.save(`${n2}-${s2}-.pdf`)}finally{H.remove()}}catch(E){console.error(E),V.error("PDF    .")}},[$l,sr,ge]),Oj=m.useCallback(async()=>{var C;if(sr(),!ge)return;const j=Ut.current;if(!j){V.error("     .");return}if(!navigator.share){await Ks();return}try{await $l();const q=window.html2canvas;if(!q){await Ks();return}const Y=await q(j,{scale:2,useCORS:!0,backgroundColor:"#ffffff",logging:!1}),H=await new Promise(ct=>Y.toBlob(ct,"image/png",.95));if(!H){await Ks();return}const be=(ge.date||new Date().toISOString().split("T")[0]).slice(0,10),pe=(ge.siteName||"").replace(/[\\/:*?\"<>|]+/g,"_").trim()||"",Se=`${be}-${pe}-.png`,Qe=new File([H],Se,{type:"image/png"});if((C=navigator.canShare)!=null&&C.call(navigator,{files:[Qe]})){await navigator.share({title:" ",files:[Qe]}),V.success(".");return}await Ks()}catch(E){if((E==null?void 0:E.name)==="AbortError")return;await Ks()}},[$l,sr,Ks,ge]),Aj=(j,C,E)=>{ce&&It.mutate({groupId:ce,itemId:j,field:C,value:E})},Ij=j=>{ce&&confirm("   ?")&&Fr.mutate({groupId:ce,itemId:j},{onSuccess:()=>V.success(" .")})},Dj=()=>{if(!ce)return;const j={id:`pi_${Date.now()}`,location:"",issue:"",priority:"",status:"open",assignee:"",dueDate:"",date:new Date().toISOString().split("T")[0],beforePhoto:"",afterPhoto:""};at.mutate({groupId:ce,item:j},{onSuccess:()=>V.success("  .")})},Lj=(j,C)=>{if($m){V.error("    .");return}const E=document.createElement("input");E.type="file",E.accept="image/*",E.onchange=q=>{var be;const Y=(be=q.target.files)==null?void 0:be[0];if(!Y||!ce)return;const H=new FileReader;H.onload=pe=>{var Se;It.mutate({groupId:ce,itemId:j,field:C,value:(Se=pe.target)==null?void 0:Se.result},{onSuccess:()=>V.success(" .")})},H.readAsDataURL(Y)},E.click()},Mj=()=>{if(i.size!==0&&confirm(`${i.size}  ?`)){if(fr&&!ce){const j=Ae.filter(C=>!i.has(C.id));Sr.mutate(j),l(new Set),V.success(" ");return}if(Io&&!ce){const j=_i.filter(C=>i.has(`required-${C.key}`)).map(C=>C.key);j.length>0&&(D(C=>{const E=new Set(C);return j.forEach(q=>E.add(q)),E}),_(C=>{const E={...C};return j.forEach(q=>{delete E[q]}),E})),l(new Set),V.success(" ");return}l(new Set),V.success(" ")}},$j=j=>{const C=(j||"").trim();return C?C.toLowerCase().startsWith("v")?C:`v${C}`:"v1"},Gs=j=>{const C=j.currentView;return((C==="after"?j.url_after:C==="before"?j.url_before:void 0)||j.url_after||j.url_before||j.url||"").trim()},Fj=(j,C)=>({id:C.id||`${j.id}-file`,name:C.name||j.title||"file",url:Gs(C),mime:C.mime,ext:C.ext,size:C.size,createdAt:`${j.date||""} ${j.time||""}`.trim(),previewUrl:C.previewUrl}),gu=(j,C)=>{if(!C){V.error("  .");return}const E=Fj(j,C);if(!E.url){V.error("   .");return}N({isOpen:!0,file:E,title:j.title||E.name})},bu=m.useCallback((j,C)=>{const E=`${(j==null?void 0:j.docType)||""} ${(j==null?void 0:j.name)||""} ${(C==null?void 0:C.title)||""}`.toLowerCase();if(E){if(E.includes("")||E.includes(""))return"safetyEdu";if(E.includes(""))return"bankbook";if(E.includes("")||E.includes("")||E.includes(""))return"idCard";if(E.includes(""))return"medical";if(E.includes(""))return"carReg";if(E.includes(""))return"carIns";if(E.includes(""))return"senior"}},[]),Do=m.useMemo(()=>{const j={},C=_h.||[];for(const E of C){const q=[...E.files||[]].reverse();for(const Y of q){const H=bu(Y,E);!H||j[H]||P.has(H)||(j[H]={doc:E,file:Y})}}for(const E of _i)P.has(E.key)||S[E.key]&&(j[E.key]={doc:{id:`required-${E.key}`,title:E.label,author:"",date:new Date().toISOString().slice(0,10),time:"",files:[S[E.key]]},file:S[E.key]});return j},[bu,P,S]),Uj=m.useMemo(()=>_i.filter(j=>{var C;return!!((C=Do[j.key])!=null&&C.file)}).length,[Do]),vu=m.useCallback(j=>{var C;F(j),(C=ne.current)==null||C.click()},[]),Bj=m.useCallback(j=>{const C=Do[j];if(C!=null&&C.file){gu(C.doc,C.file);return}V.error(" "),M(j),window.setTimeout(()=>M(E=>E===j?null:E),700),vu(j)},[Do,vu]),zj=m.useCallback(j=>{var H,be;const C=(H=j.target.files)==null?void 0:H[0],E=z;if(j.target.value="",!C||!E)return;const q=URL.createObjectURL(C),Y={id:`${E}-${Date.now()}`,name:C.name,type:C.type.startsWith("image/")?"img":"file",url:q,size:`${(C.size/1024/1024).toFixed(2)}MB`,ext:((be=C.name.split(".").pop())==null?void 0:be.toUpperCase())||"",mime:C.type,docType:E,version:"v1"};_(pe=>({...pe,[E]:Y})),D(pe=>{if(!pe.has(E))return pe;const Se=new Set(pe);return Se.delete(E),Se}),F(null),V.success(" ")},[z]),Wj=j=>(j||"file").replace(/[\\/:*?"<>|]+/g,"_").trim()||"file",yu=(j,C)=>{const E=Wj(j);return C?/\.[a-z0-9]{1,6}$/i.test(E)?E:`${E}.${C.toLowerCase()}`:E},qj=j=>{var E;const C=(E=j.split(".").pop())==null?void 0:E.toLowerCase();return C==="jpg"||C==="jpeg"?"image/jpeg":C==="png"?"image/png":C==="webp"?"image/webp":C==="pdf"?"application/pdf":C==="hwp"?"application/x-hwp":"application/octet-stream"},Hj=(j,C)=>{const E=URL.createObjectURL(j),q=document.createElement("a");q.href=E,q.download=C,document.body.appendChild(q),q.click(),q.remove(),setTimeout(()=>URL.revokeObjectURL(E),1e3)},qm=()=>fr?Ae.filter(C=>i.has(C.id)).flatMap(C=>(C.files||[]).map(E=>({url:Gs(E),name:yu(E.name||`${C.title}_${E.id}`,E.ext||"")}))):Io?_i.flatMap(C=>{const E=`required-${C.key}`;if(!i.has(E))return[];const q=Do[C.key],Y=q==null?void 0:q.file;if(!Y)return[];const H=Gs(Y);return H?[{url:H,name:yu(Y.name||C.label,Y.ext||"")}]:[]}):(_h[wt]||[]).filter(C=>i.has(C.id)).flatMap(C=>(C.files||[]).map(E=>({url:Gs(E),name:yu(E.name||C.title,E.ext||"")}))),Vj=async()=>{const j=qm().filter(C=>!!C.url);if(j.length===0){V.error("  .");return}v(!0);try{for(const C of j){const E=await fetch(C.url);if(!E.ok)throw new Error("download_failed");const q=await E.blob();Hj(q,C.name),await new Promise(Y=>setTimeout(Y,200))}V.success(j.length===1?".":`${j.length}  .`)}catch{V.error("  .")}finally{v(!1)}},Kj=async()=>{var q;const j=qm().filter(Y=>!!Y.url);if(j.length===0){V.error("  .");return}if(!navigator.share){V.error("     . ( )");return}const E=j.slice(0,10);v(!0);try{const Y=[];for(const H of E){const be=await fetch(H.url);if(!be.ok)throw new Error("share_fetch_failed");const pe=await be.blob();Y.push(new File([pe],H.name,{type:pe.type||qj(H.name)}))}(q=navigator.canShare)!=null&&q.call(navigator,{files:Y})?(await navigator.share({title:" ",files:Y}),V.success(".")):V.error("     . ( )")}catch(Y){(Y==null?void 0:Y.name)!=="AbortError"&&V.error(" .")}finally{v(!1)}},Gj=j=>{n(j),a(""),l(new Set),d(5),u("all"),p(""),Ee(null),g(!1),x(!1),Q([]),re(""),G(null),ve(!1),je(A),tt(null),Ye(""),$(!1),te(!1),he({siteName:"",siteIsCustom:!1,affiliation:"",contractorPreset:"",contractorCustom:"",componentPreset:"",componentCustom:"",processPreset:"",processCustom:""})},Qj=j=>{const C=Array.from(j.target.files||[]);Q(E=>{const q=[...E];for(const Y of C)q.some(be=>be.name===Y.name&&be.size===Y.size&&be.lastModified===Y.lastModified)||q.push(Y);return q}),C.length>0&&V.success(`${C.length}  .`),j.target.value=""},Yj=j=>{Q(C=>C.filter((E,q)=>q!==j))},Jj=()=>{(async()=>{var C;if(W.length===0){V.error("  .");return}if(Io){v(!0);try{const E=gt.trim();if(!E){V.error(" ");return}if(!Te){V.error(" ");return}const q={};for(const H of W){const be=bu({id:"",name:H.name,type:H.type.startsWith("image/")?"img":"file",url:"",size:"",ext:"",docType:E},{id:"",title:E,author:"",date:Te,time:"",files:[]});if(!be)continue;const pe=URL.createObjectURL(H);q[be]={id:`${be}-${Date.now()}-${Math.random().toString(36).slice(2,7)}`,name:H.name,type:H.type.startsWith("image/")?"img":"file",url:pe,size:`${(H.size/1024/1024).toFixed(2)}MB`,ext:((C=H.name.split(".").pop())==null?void 0:C.toUpperCase())||"",mime:H.type,docType:be,version:"v1"}}const Y=Object.keys(q);if(Y.length===0){V.error("/   ");return}_(H=>({...H,...q})),D(H=>{const be=new Set(H);return Y.forEach(pe=>be.delete(pe)),be}),Q([]),Ye(""),je(A),x(!1),V.success(Y.length===1?" ":`${Y.length}   `)}finally{v(!1)}return}if(!ee){tt(" "),V.error(" ");return}if(!Te){V.error(" ");return}const j=W.filter(E=>E.type.startsWith("image/"));if(j.length===0){V.error("    .");return}v(!0);try{const E=await dA({site_id:ee.site_id,site_name:ee.site_name,work_date:Te,files:j});V.success(E.saved===1?" .":`${E.saved}  .`),Q([]),x(!1),re(""),G(null),ve(!1),tt(null),je(A),Ye("")}catch{V.error(" .")}finally{v(!1)}})()},Xj=()=>{Q([]),$(!1),te(!1),he({siteName:"",siteIsCustom:!1,affiliation:"",contractorPreset:"",contractorCustom:"",componentPreset:"",componentCustom:"",processPreset:"",processCustom:""})},Fl=()=>{Xj(),re(""),G(null),ve(!1),tt(null),je(A),Ye(""),x(!1)},Zj=j=>{const{siteKey:C,siteName:E,siteSource:q,affiliation:Y,contractor:H,author:be,component:pe,process:Se,files:Qe}=j;if(!E.trim()){V.error(" .");return}const ct=new Date,Ge=ct.toISOString().split("T")[0],Cr=ct.toTimeString().split(" ")[0].slice(0,5),Ul=Qe.map((Yt,Lo)=>{var Qs;return{id:`${Date.now()}_${Lo}`,name:Yt.name,type:Yt.type.startsWith("image/")?"img":"file",url:URL.createObjectURL(Yt),size:`${(Yt.size/1024).toFixed(1)}KB`,ext:((Qs=Yt.name.split(".").pop())==null?void 0:Qs.toUpperCase())||"FILE",version:"v1"}}),ui={id:`${Date.now()}_${Math.random().toString(36).substr(2,9)}`,date:Ge,time:Cr,author:be,affiliation:Y,contractor:H,component:pe,process:Se,files:Ul,version:1};if(gn[C]){const Yt=gn[C];Yt.history.unshift(ui),Yt.currentVersion+=1,Yt.lastUpdated=Ge,Yt.totalDrawings=Yt.history.reduce((Lo,Qs)=>Lo+Qs.files.length,0),ui.version=Yt.currentVersion,V.success(`${E}  . (v${Yt.currentVersion})`)}else gn[C]={id:C,siteName:E,siteSource:q,affiliation:Y,contractor:H,totalDrawings:Ul.length,currentVersion:1,lastUpdated:Ge,history:[ui]},V.success(`${E}   .`)};function e2(){return Object.values(gn).sort((j,C)=>new Date(C.lastUpdated).getTime()-new Date(j.lastUpdated).getTime())}const t2=()=>{if(W.length===0){V.error("  .");return}const j=J.siteName.trim();if(!j){V.error(" .");return}const C=J.affiliation.trim();if(!C){V.error(" /.");return}const E=J.contractorPreset===""?J.contractorCustom.trim():J.contractorPreset.trim();if(!E){V.error(J.contractorPreset===""?" .":" .");return}const q=J.componentPreset===""?J.componentCustom.trim():J.componentPreset.trim();if(!q){V.error(J.componentPreset===""?" .":" .");return}const Y=J.processPreset===""?J.processCustom.trim():J.processPreset.trim();if(!Y){V.error(J.processPreset===""?" .":" .");return}const H=J.siteIsCustom?"custom":"system",be=`sys:${j}`,pe=`custom:${j}`,Se=!!gn[be],Qe=!!gn[pe];let ct=H,Ge=H==="custom"?pe:be;Se?(H==="custom"&&V.warning("    .    ."),ct="system",Ge=be):Qe?(H==="system"&&V("   .   ."),ct="custom",Ge=pe):H==="system"&&(V(" .     ."),ct="custom",Ge=pe),Zj({siteKey:Ge,siteName:j,siteSource:ct,affiliation:C,contractor:E,author:"",component:q,process:Y,files:W}),ae(Ge),Fl()},Yr=Ce.blueprintKey?gn[Ce.blueprintKey]:null;return o.jsxs("div",{className:"animate-fade-in",children:[o.jsx(sA,{open:k.isOpen,file:k.file,title:k.title||"",onClose:()=>N({isOpen:!1})}),o.jsx("div",{className:"flex border-b border-border mb-4 -mx-4 px-1 bg-card -mt-6 pt-6 overflow-x-auto scrollbar-none",children:t.map((j,C)=>o.jsx("button",{onClick:()=>Gj(C),className:U("flex-1 min-w-0 h-12 bg-transparent border-none text-[16px] font-semibold cursor-pointer border-b-[3px] transition-all whitespace-nowrap px-1",r===C?"text-sky-500 border-b-sky-500 font-bold":"text-muted-foreground border-b-transparent"),children:j},j))}),fr&&!ce&&o.jsxs("div",{className:"relative mb-4",children:[o.jsx("input",{value:f,onChange:j=>{p(j.target.value),g(!0)},onFocus:()=>g(!0),placeholder:"   ",className:"w-full h-[50px] bg-card border border-border rounded-2xl px-5 pr-16 text-base font-medium text-foreground placeholder:text-muted-foreground transition-all outline-none hover:border-primary/50 focus:border-primary focus:shadow-[0_0_0_3px_rgba(49,163,250,0.15)]"}),f&&o.jsx("button",{onClick:()=>{p(""),g(!1)},className:"absolute right-12 top-1/2 -translate-y-1/2 w-5 h-5 rounded-full bg-muted flex items-center justify-center text-[12px] text-muted-foreground z-10",children:""}),o.jsx("button",{onClick:()=>g(!b),className:"absolute right-4 top-1/2 -translate-y-1/2",children:o.jsx(Nt,{className:"w-5 h-5 text-muted-foreground"})}),b&&o.jsx("ul",{className:"absolute z-50 w-full mt-1.5 max-h-60 overflow-auto bg-card border border-border rounded-xl shadow-lg",children:_j.filter(j=>j.toLowerCase().includes(f.toLowerCase())).map(j=>o.jsx("li",{onClick:()=>{p(j),g(!1)},className:"px-4 py-3.5 cursor-pointer border-b border-border last:border-0 text-[15px] font-medium text-foreground hover:bg-muted",children:j},j))})]}),!ce&&t[r]!==""&&o.jsxs("div",{className:"relative mb-4",children:[o.jsx("input",{value:s,onChange:j=>a(j.target.value),placeholder:["",""].includes(t[r])?" .":" .",className:"w-full h-[50px] bg-card border border-border rounded-2xl px-5 pr-12 text-base font-medium text-foreground placeholder:text-muted-foreground transition-all hover:bg-card hover:border-primary/50 focus:border-primary focus:shadow-[0_0_0_3px_rgba(49,163,250,0.15)] outline-none"}),s&&o.jsx("button",{onClick:()=>a(""),className:U("absolute top-1/2 -translate-y-1/2 w-5 h-5 rounded-full bg-muted flex items-center justify-center text-[12px] text-muted-foreground z-10",wt===""?"right-4":"right-12"),children:""}),wt!==""&&o.jsx(_r,{className:"absolute right-[18px] top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"})]}),fr&&!ce&&o.jsx("div",{className:"flex gap-2 mb-4 overflow-x-auto pb-2",children:[{key:"all",label:"",count:uu.total,cls:"bg-header-navy"},{key:"open",label:"",count:uu.open,cls:"bg-indigo-500"},{key:"done",label:"",count:uu.done,cls:"bg-slate-500"}].map(j=>o.jsxs("button",{onClick:()=>u(j.key),className:U("h-10 px-3.5 rounded-full text-[15px] font-medium cursor-pointer transition-colors whitespace-nowrap shrink-0 border shadow-none focus:outline-none",h===j.key?`${j.cls} text-white border-transparent font-bold shadow-none`:"bg-white border-border text-[#64748b] hover:border-primary/50"),children:[j.label," ",j.count]},j.key))}),ce&&di&&o.jsx(o.Fragment,{children:o.jsx(yA,{group:di,isApproved:$m,onBack:Ej,onOpenReport:Rj,onUpdateField:Aj,onDeleteItem:Ij,onAddItem:Dj,onPhotoUpload:Lj})}),!ce&&o.jsxs(o.Fragment,{children:[fr&&o.jsx("div",{className:"space-y-3 max-[640px]:space-y-2.5",children:Lm.length===0?o.jsx(H0,{}):Lm.map(j=>{var Se,Qe,ct,Ge;const C=i.has(j.id),E=Sj(j),q=(Se=j.files)==null?void 0:Se.find(Cr=>Cr.type==="img"),Y=q?(q.currentView==="after"?q.url_after:q.url_before)||q.url:null,H=((Qe=j.punchItems)==null?void 0:Qe.filter(Cr=>Cr.status!=="done").length)||0,be=((ct=j.punchItems)==null?void 0:ct.filter(Cr=>Cr.status==="done").length)||0,pe=((Ge=j.punchItems)==null?void 0:Ge.length)||0;return o.jsxs("div",{className:U("bg-card rounded-2xl p-4 max-[640px]:p-3.5 cursor-pointer transition-all shadow-soft relative overflow-hidden",C&&"border-2 border-primary bg-sky-50/50"),onClick:()=>Cj(j.id),children:[o.jsx("span",{className:U("absolute top-0 right-0 text-[11px] font-bold px-2.5 py-1 text-white rounded-bl-xl z-10",E.cls),children:E.text}),o.jsxs("div",{className:"flex gap-3 max-[640px]:gap-2.5 items-center",children:[o.jsx("div",{onClick:Cr=>{Cr.stopPropagation(),pu(j.id)},className:U("w-[20px] h-[20px] rounded-full border-2 flex items-center justify-center shrink-0 transition-all",C?"bg-sky-500 border-sky-500 shadow-[0_2px_8px_rgba(14,165,233,0.3)]":"bg-card border-muted-foreground/30"),children:C&&o.jsx(ha,{className:"w-3.5 h-3.5 text-white",strokeWidth:3})}),o.jsx("div",{className:"w-20 h-20 max-[640px]:w-16 max-[640px]:h-16 rounded-xl bg-muted border border-border overflow-hidden shrink-0",children:Y?o.jsx("img",{src:Y,alt:"",className:"w-full h-full object-cover"}):o.jsx(Dt,{className:"w-8 h-8 max-[640px]:w-7 max-[640px]:h-7 text-muted-foreground m-auto mt-6 max-[640px]:mt-5"})}),o.jsxs("div",{className:"flex-1 min-w-0 flex flex-col gap-1 max-[640px]:gap-0.5 pt-0.5 leading-tight",children:[(j.contractor||j.affiliation)&&o.jsxs("div",{className:"flex gap-1.5 flex-wrap mb-1.5",children:[j.contractor&&o.jsx("span",{className:"text-[12px] px-2.5 py-0.5 rounded-md bg-indigo-50 text-indigo-500 border border-indigo-200 font-semibold",children:j.contractor}),j.affiliation&&o.jsx("span",{className:"text-[12px] px-2.5 py-0.5 rounded-md bg-[#e0f2fe] text-[#0284c7] border border-[#bae6fd] font-semibold",children:j.affiliation})]}),o.jsx("div",{className:"text-[16px] font-[800] text-header-navy truncate leading-tight",children:j.title}),o.jsxs("div",{className:"text-[13px] font-medium text-text-sub leading-tight",children:[j.author," ",o.jsx("span",{className:"text-muted-foreground",children:"|"})," ",Cc(j.date)," ",o.jsx("span",{className:"text-muted-foreground",children:j.time})]}),o.jsxs("div",{className:"text-[13px] font-medium text-muted-foreground truncate leading-tight",children:[" ",pe," ( ",H,",  ",be,")"]})]})]})]},j.id)})}),!fr&&!nr&&o.jsxs("div",{className:"space-y-3 max-[640px]:space-y-2.5",children:[Io&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"rounded-2xl border border-sky-200 bg-sky-50 px-4 py-2.5",children:o.jsxs("div",{className:"flex items-center gap-2.5",children:[o.jsx("div",{className:"inline-flex h-5.5 w-5.5 shrink-0 items-center justify-center rounded-full border border-sky-300 bg-white text-sky-600",children:o.jsx(s1,{className:"h-3.5 w-3.5"})}),o.jsxs("div",{className:"min-w-0 text-[14px] font-semibold leading-none text-sky-800",children:[" 7  ",Math.max(0,7-Uj)," ."]})]})}),_i.map(j=>{var pe;const C=Do[j.key],E=C==null?void 0:C.file,q=!!E&&!!Gs(E),Y=`required-${j.key}`,H=i.has(Y),be=q&&(E==null?void 0:E.type)==="img"?Gs(E):"";return o.jsxs("div",{className:U("bg-card rounded-2xl p-3 max-[640px]:p-2.5 transition-all shadow-soft relative border border-border",H&&"border-2 border-primary bg-sky-50/50",T===j.key&&"ring-2 ring-indigo-300 scale-[1.01]"),children:[o.jsx("span",{className:U("status-badge absolute top-0 right-0 text-[11px] font-bold px-2.5 py-1 text-white rounded-tr-xl rounded-bl-xl z-10",q?"status-ok bg-slate-500":"status-none bg-indigo-500"),children:q?"":""}),o.jsxs("div",{className:"flex gap-2 max-[640px]:gap-1.5 items-center",children:[o.jsx("button",{type:"button",disabled:!q,onClick:Se=>{Se.stopPropagation(),q&&pu(Y)},className:U("w-[20px] h-[20px] rounded-full border-2 flex items-center justify-center shrink-0 transition-all bg-transparent p-0",H?"bg-sky-500 border-sky-500 shadow-[0_2px_8px_rgba(14,165,233,0.3)]":"bg-card border-muted-foreground/30",!q&&"opacity-40 cursor-not-allowed"),"aria-label":H?" ":"",children:H&&o.jsx(ha,{className:"w-3.5 h-3.5 text-white",strokeWidth:3})}),o.jsx("div",{className:"w-[56px] h-[56px] max-[640px]:w-[52px] max-[640px]:h-[52px] rounded-xl bg-muted border border-border overflow-hidden shrink-0 flex items-center justify-center",children:be?o.jsx("img",{src:be,alt:j.label,className:"w-full h-full object-cover"}):((pe=E==null?void 0:E.ext)==null?void 0:pe.toLowerCase())==="pdf"?o.jsx(Dt,{className:"w-7 h-7 text-red-500"}):o.jsx(Dt,{className:"w-7 h-7 text-muted-foreground"})}),o.jsxs("div",{className:"flex-1 min-w-0 flex flex-col gap-0.5 pt-0.5 leading-tight",children:[o.jsx("div",{className:"text-[16px] font-[800] text-header-navy truncate leading-tight",children:j.label}),o.jsx("div",{className:"text-[13px] font-medium text-muted-foreground leading-tight",children:q?(E==null?void 0:E.name)||" ":" "}),o.jsxs("div",{className:"grid grid-cols-2 gap-1.5 max-[640px]:gap-1.5 items-center mt-1",children:[o.jsx("div",{className:"w-full",onClick:Se=>{q||(Se.stopPropagation(),Bj(j.key))},children:o.jsxs("button",{type:"button",className:U("action-btn icon-action h-[32px] max-[640px]:h-[30px] w-full rounded-[10px] border text-[12px] font-[800] flex items-center justify-center gap-1.5 max-[640px]:gap-1 transition-all duration-200 group",q?"has-file bg-indigo-50 border-indigo-200 text-indigo-500 font-bold shadow-[0_2px_4px_rgba(99,102,241,0.1)] hover:bg-indigo-100 hover:border-indigo-300 hover:shadow-md hover:scale-[1.02] active:scale-[0.98]":"no-file bg-muted border-border text-muted-foreground opacity-60 cursor-not-allowed"),disabled:!q,onClick:Se=>{Se.stopPropagation(),q&&(C!=null&&C.doc)&&(C!=null&&C.file)&&gu(C.doc,C.file)},children:[o.jsx(En,{className:"w-3.5 h-3.5 transition-transform duration-200 group-hover:scale-110"}),""]})}),o.jsxs("button",{type:"button",className:"h-[32px] max-[640px]:h-[30px] w-full rounded-[10px] border border-[#bae6fd] bg-[#e0f2fe] px-2.5 text-[12px] font-[800] text-[#0284c7] flex items-center justify-center gap-1 transition-all duration-200 hover:bg-[#bae6fd] hover:border-[#7dd3fc] hover:shadow-md hover:scale-[1.02] active:scale-[0.98]",onClick:Se=>{Se.stopPropagation(),vu(j.key)},children:[o.jsx(_m,{className:"w-3.5 h-3.5"}),q?"":""]})]})]})]})]},j.key)})]}),!Io&&(Dm.length===0?o.jsx(H0,{}):Dm.map(j=>{var be,pe;const C=i.has(j.id),E=(be=j.files)==null?void 0:be[0],q=!!E&&!!Gs(E),Y=(pe=j.files)==null?void 0:pe.find(Se=>Se.type==="img"),H=Y?(Y.currentView==="after"?Y.url_after:Y.url_before)||Y.url:null;return o.jsxs("div",{onClick:()=>pu(j.id),className:U("bg-card rounded-2xl p-3.5 max-[640px]:p-3 cursor-pointer transition-all shadow-soft flex gap-2.5 max-[640px]:gap-2 items-center",C&&"border-2 border-primary bg-sky-50/50 shadow-[0_0_0_2px_rgba(49,163,250,0.1)]"),children:[o.jsx("div",{className:U("w-[20px] h-[20px] rounded-full border-2 flex items-center justify-center shrink-0 transition-all",C?"bg-sky-500 border-sky-500 shadow-[0_2px_8px_rgba(14,165,233,0.3)]":"bg-card border-muted-foreground/30"),children:C&&o.jsx(ha,{className:"w-3.5 h-3.5 text-white",strokeWidth:3})}),o.jsx("div",{className:"w-[64px] h-[64px] max-[640px]:w-[60px] max-[640px]:h-[60px] rounded-xl bg-muted border border-border overflow-hidden shrink-0 flex items-center justify-center",children:H?o.jsx("img",{src:H,alt:"",className:"w-full h-full object-cover"}):o.jsx(Dt,{className:"w-7 h-7 text-muted-foreground"})}),o.jsxs("div",{className:"flex-1 min-w-0 flex flex-col gap-0.5 max-[640px]:gap-0.5 pt-0.5 leading-tight",children:[j.contractor&&o.jsxs("div",{className:"flex gap-1.5 flex-wrap mb-1.5 items-center",children:[j.affiliation&&o.jsx("span",{className:"text-[12px] px-2.5 py-1 rounded-md bg-[#e0f2fe] text-[#0284c7] border border-[#bae6fd] font-bold leading-none",children:j.affiliation}),o.jsx("span",{className:"text-[12px] px-2.5 py-1 rounded-md bg-slate-50 text-slate-600 border border-slate-200 font-bold leading-none",children:j.contractor})]}),j.contractor?o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(Ft,{className:"w-4 h-4 text-text-sub shrink-0"}),o.jsx("div",{className:"text-[16px] font-[800] text-header-navy truncate flex-1 leading-tight",children:(E==null?void 0:E.name)||j.title})]}):o.jsxs("div",{className:"flex items-center gap-1.5",children:[wt!==""&&o.jsx(Dt,{className:"w-4 h-4 text-text-sub shrink-0"}),o.jsx("div",{className:"text-[16px] font-[800] text-header-navy truncate flex-1 leading-tight",children:(E==null?void 0:E.name)||j.title})]}),o.jsxs("div",{className:"flex items-center gap-1.5 text-[13px] font-medium text-text-sub leading-tight",children:[o.jsx("span",{className:"font-semibold",children:j.author}),o.jsx("span",{className:"text-muted-foreground",children:"|"}),o.jsx("span",{className:"text-muted-foreground",children:Cc(j.date)}),o.jsx("span",{className:"text-muted-foreground",children:"|"}),o.jsx("span",{className:"text-muted-foreground",children:$j((E==null?void 0:E.version)||j.version)})]}),wt===""&&o.jsx("div",{className:"mt-1.5 flex gap-2",children:o.jsxs("button",{type:"button",className:U("h-[32px] w-full rounded-[10px] border text-[12px] font-[800] flex items-center justify-center gap-1.5 transition-all duration-200",q?"bg-indigo-50 border-indigo-200 text-indigo-500 hover:bg-indigo-100 hover:border-indigo-300":"bg-muted border-border text-muted-foreground opacity-60 cursor-not-allowed"),disabled:!q,onClick:Se=>{Se.stopPropagation(),E&&gu(j,E)},children:[o.jsx(En,{className:"w-3.5 h-3.5"}),""]})})]})]},j.id)}))]}),nr&&o.jsx("div",{className:"space-y-3 max-[640px]:space-y-2.5",children:Ll.length===0?o.jsxs("div",{className:"text-center py-20",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-[60px] h-[60px] bg-muted rounded-full mb-5 max-[640px]:w-[48px] max-[640px]:h-[48px]",children:o.jsx(Dt,{className:"w-6 h-6 max-[640px]:w-5 max-[640px]:h-5 text-muted-foreground opacity-60"})}),o.jsx("p",{className:"text-base font-medium text-muted-foreground mb-2",children:s.trim()?"  ":"  "}),o.jsx("p",{className:"text-sm text-muted-foreground",children:s.trim()?"  ":"     "})]}):kj.map(j=>{const C=Qt.has(j.id),E=j.history[0];return o.jsxs("div",{ref:q=>{yt.current[j.id]=q},className:U("bg-card rounded-2xl p-4 max-[640px]:p-3.5 cursor-pointer transition-all shadow-soft relative",C&&"border-2 border-primary bg-sky-50/50",I===j.id&&"ring-2 ring-sky-400 shadow-[0_0_0_4px_rgba(49,163,250,0.15)] animate-pulse"),children:[o.jsxs("span",{className:"absolute top-0 right-0 text-[11px] font-bold px-2.5 py-1 text-white rounded-tr-xl rounded-bl-xl z-10 bg-blue-500",children:[" ",j.totalDrawings,""]}),o.jsxs("div",{className:"flex gap-3 max-[640px]:gap-2.5 items-center",children:[o.jsx("button",{type:"button",onClick:q=>{q.stopPropagation(),$r(Y=>{const H=new Set(Y);return H.has(j.id)?H.delete(j.id):H.add(j.id),H})},className:U("w-[20px] h-[20px] rounded-full border-2 flex items-center justify-center shrink-0 transition-all",C?"bg-sky-500 border-sky-500 shadow-[0_2px_8px_rgba(14,165,233,0.3)]":"bg-card border-muted-foreground/30"),children:C&&o.jsx(ha,{className:"w-3.5 h-3.5 text-white",strokeWidth:3})}),o.jsx("div",{className:"w-[64px] h-[64px] max-[640px]:w-[60px] max-[640px]:h-[60px] rounded-xl bg-muted border border-border overflow-hidden shrink-0 flex items-center justify-center",children:o.jsx(Dt,{className:"w-6 h-6 max-[640px]:w-5 max-[640px]:h-5 text-blue-500"})}),o.jsxs("div",{className:"flex-1 min-w-0 flex flex-col gap-1 max-[640px]:gap-0.5 pt-0.5 leading-tight",onClick:()=>Gt({isOpen:!0,blueprintKey:j.id}),children:[o.jsxs("div",{className:"flex gap-1.5 flex-wrap mb-1.5",children:[j.siteSource==="custom"&&o.jsxs("span",{className:"text-[12px] px-2.5 py-0.5 rounded-md bg-amber-50 text-amber-700 border border-amber-200 font-semibold inline-flex items-center gap-1",children:[o.jsx(Hc,{className:"w-3 h-3"}),""]}),j.affiliation&&o.jsx("span",{className:"text-[12px] px-2.5 py-0.5 rounded-md bg-[#e0f2fe] text-[#0284c7] border border-[#bae6fd] font-semibold",children:j.affiliation}),j.contractor&&o.jsx("span",{className:"text-[12px] px-2.5 py-0.5 rounded-md bg-indigo-50 text-indigo-500 border border-indigo-200 font-semibold",children:j.contractor})]}),o.jsx("div",{className:"text-[16px] font-[800] text-header-navy truncate leading-tight",children:j.siteName}),o.jsxs("div",{className:"text-[13px] font-medium text-text-sub leading-tight",children:[Cc(j.lastUpdated)," ",o.jsx("span",{className:"text-muted-foreground",children:"|"})," v",j.currentVersion]}),o.jsxs("div",{className:"text-[13px] font-medium text-muted-foreground truncate leading-tight",children:[E.author," | ",E.component," | ",E.process]})]})]})]},j.id)})}),Mm&&o.jsxs("button",{onClick:()=>d(j=>j+5),className:"w-full h-12 flex items-center justify-center gap-1.5 text-text-sub text-[14px] font-semibold border border-border rounded-3xl bg-card shadow-soft mt-4 cursor-pointer hover:bg-muted transition-all",children:[o.jsx("span",{children:""}),o.jsx(Nt,{className:"w-[18px] h-[18px]"})]}),!Mm&&c>5&&Nj>5&&o.jsxs("button",{onClick:()=>d(5),className:"w-full h-12 flex items-center justify-center gap-1.5 text-text-sub text-[14px] font-semibold border border-border rounded-3xl bg-card shadow-soft mt-4 cursor-pointer hover:bg-muted transition-all",children:[o.jsx("span",{children:""}),o.jsx(Il,{className:"w-[18px] h-[18px]"})]})]}),i.size>0&&!ce&&o.jsx("div",{className:"fixed bottom-[calc(65px+14px+env(safe-area-inset-bottom,0px))] left-1/2 -translate-x-1/2 z-[5000] w-[calc(100%-32px)] max-w-[420px] animate-fade-in",children:o.jsxs("div",{className:"bg-card rounded-xl px-2 py-2 grid grid-cols-3 gap-2 border border-gray-200",children:[o.jsxs("button",{type:"button",onClick:Vj,disabled:y,className:"flex-1 h-[44px] rounded-lg bg-header-navy text-[14px] font-bold text-white transition-all duration-200 hover:bg-header-navy/90 hover:shadow-sm active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[o.jsx(jm,{className:"w-4 h-4 transition-transform duration-200 group-hover:scale-110"}),""]}),o.jsxs("button",{type:"button",onClick:Kj,disabled:y,className:"flex-1 h-[44px] rounded-lg bg-header-navy text-[14px] font-bold text-white transition-all duration-200 hover:bg-header-navy/90 hover:shadow-sm active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[o.jsx(c1,{className:"w-4 h-4 transition-transform duration-200 group-hover:scale-110"}),""]}),o.jsxs("button",{type:"button",onClick:Mj,disabled:y,className:"flex-1 h-[44px] rounded-lg bg-red-500 text-[14px] font-bold text-white transition-all duration-200 hover:bg-red-600 hover:shadow-sm active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[o.jsx(Qa,{className:"w-4 h-4 transition-transform duration-200 group-hover:scale-110",strokeWidth:2.5}),""]})]})}),!ce&&wt!==""&&o.jsx("button",{onClick:()=>x(!0),className:"fixed bottom-6 right-[calc(50%-280px)] w-14 h-14 rounded-full bg-header-navy text-white shadow-lg flex items-center justify-center cursor-pointer z-30 active:scale-90 transition-transform max-[600px]:right-4",children:o.jsx(km,{className:"w-6 h-6"})}),o.jsx("input",{ref:ne,type:"file",accept:"application/pdf,image/*",onChange:zj,className:"hidden"}),w&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 bg-black/40 z-[2100]",onClick:Fl}),o.jsxs("div",{className:"fixed bottom-0 left-0 right-0 w-full max-w-[600px] mx-auto bg-card border-t border-border z-[2200] rounded-t-3xl p-6 max-h-[85vh] overflow-y-auto overscroll-contain animate-fade-in",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h3",{className:"text-[20px] font-bold text-foreground",children:nr?" ":" "}),o.jsx("button",{onClick:Fl,className:"bg-transparent border-none cursor-pointer text-foreground p-1",children:o.jsx(He,{className:"w-6 h-6"})})]}),nr?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-[15px] font-semibold text-text-sub mb-2",children:" *"}),o.jsx("input",{type:"text",placeholder:" ",value:J.siteName,onChange:j=>he(C=>({...C,siteName:j.target.value})),className:"w-full h-[50px] px-4 rounded-xl border border-border bg-card text-[18px] text-foreground placeholder:text-muted-foreground transition-all hover:bg-card hover:border-primary/50 focus:border-primary focus:shadow-[0_0_0_3px_rgba(49,163,250,0.15)] outline-none"}),o.jsx("div",{className:"mt-2 flex items-center gap-2",children:o.jsxs("button",{type:"button",onClick:()=>he(j=>({...j,siteIsCustom:!j.siteIsCustom})),className:"flex items-center gap-2 text-[13px] font-semibold text-muted-foreground","aria-pressed":J.siteIsCustom,children:[o.jsx("span",{className:U("relative inline-flex h-6 w-10 items-center rounded-full p-0.5 transition-colors",J.siteIsCustom?"bg-sky-500":"bg-muted"),children:o.jsx("span",{className:U("h-5 w-5 rounded-full bg-white shadow transition-transform",J.siteIsCustom?"translate-x-4":"translate-x-0")})}),"   (   )"]})}),J.siteIsCustom&&o.jsx("div",{className:"mt-1 text-[12px] text-muted-foreground leading-relaxed",children:"    ."})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4 max-[520px]:grid-cols-1",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[15px] font-semibold text-text-sub mb-2",children:" *"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",placeholder:"   ",value:J.affiliation,onChange:j=>{he(C=>({...C,affiliation:j.target.value})),$(!0)},onFocus:()=>$(!0),onBlur:()=>setTimeout(()=>$(!1),120),className:"w-full h-[50px] px-4 pr-14 rounded-xl border border-border bg-card text-[18px] text-foreground placeholder:text-muted-foreground transition-all hover:bg-card hover:border-primary/50 focus:border-primary focus:shadow-[0_0_0_3px_rgba(49,163,250,0.15)] outline-none"}),J.affiliation&&o.jsx("button",{type:"button",onMouseDown:j=>j.preventDefault(),onClick:()=>he(j=>({...j,affiliation:""})),className:"absolute right-10 top-1/2 -translate-y-1/2 w-6 h-6 rounded-full bg-muted flex items-center justify-center text-[12px] text-muted-foreground z-10","aria-label":" ",children:""}),o.jsx("button",{type:"button",onMouseDown:j=>j.preventDefault(),onClick:()=>$(j=>!j),className:"absolute right-4 top-1/2 -translate-y-1/2","aria-label":"  ",children:o.jsx(Nt,{className:"w-5 h-5 text-muted-foreground"})}),ke&&o.jsxs("ul",{className:"absolute z-50 left-0 right-0 top-full mt-1.5 max-h-56 overflow-auto bg-card border border-border rounded-xl shadow-lg",children:[Om.filter(j=>q0(j,J.affiliation)).map(j=>o.jsx("li",{onMouseDown:C=>{C.preventDefault(),he(E=>({...E,affiliation:j})),$(!1)},className:"px-4 py-3 cursor-pointer border-b border-border last:border-0 text-[15px] font-medium text-foreground hover:bg-muted",children:j},j)),Om.filter(j=>q0(j,J.affiliation)).length===0&&o.jsx("li",{className:"px-4 py-3 text-center text-sm text-muted-foreground",children:"  "})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[15px] font-semibold text-text-sub mb-2",children:" *"}),o.jsxs("div",{className:"relative",children:[o.jsxs("button",{type:"button",disabled:["",""].includes(J.affiliation.trim()),onClick:()=>te(j=>!j),className:U("w-full h-[50px] px-4 rounded-xl border border-border bg-card text-[18px] text-foreground transition-all hover:bg-card hover:border-primary/50 focus:border-primary focus:shadow-[0_0_0_3px_rgba(49,163,250,0.15)] outline-none flex items-center justify-between gap-2",["",""].includes(J.affiliation.trim())&&"opacity-70 cursor-not-allowed hover:border-border"),children:[o.jsx("span",{className:U("truncate text-left",!J.contractorPreset&&"text-muted-foreground"),children:J.contractorPreset||" "}),["",""].includes(J.affiliation.trim())?o.jsx(Hc,{className:"w-4 h-4 text-muted-foreground shrink-0"}):o.jsx(Nt,{className:"w-5 h-5 text-muted-foreground shrink-0"})]}),Z&&!["",""].includes(J.affiliation.trim())&&o.jsx("ul",{className:"absolute z-50 left-0 right-0 top-full mt-1.5 max-h-56 overflow-auto bg-card border border-border rounded-xl shadow-lg",children:jj.map(j=>o.jsx("li",{onMouseDown:C=>{C.preventDefault(),he(E=>({...E,contractorPreset:j,contractorCustom:j===""?E.contractorCustom:""})),te(!1)},className:"px-4 py-3 cursor-pointer border-b border-border last:border-0 text-[15px] font-medium text-foreground hover:bg-muted",children:j},j))})]}),J.contractorPreset===""&&o.jsx("input",{type:"text",placeholder:"  ",value:J.contractorCustom,onChange:j=>he(C=>({...C,contractorCustom:j.target.value})),className:"mt-2 w-full h-[50px] px-4 rounded-xl border border-border bg-card text-[18px] text-foreground placeholder:text-muted-foreground transition-all hover:bg-card hover:border-primary/50 focus:border-primary focus:shadow-[0_0_0_3px_rgba(49,163,250,0.15)] outline-none"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4 max-[520px]:grid-cols-1",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[15px] font-semibold text-text-sub mb-2",children:" *"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:fA.map(j=>o.jsx("button",{type:"button",onClick:()=>he(C=>({...C,componentPreset:j,componentCustom:j===""?C.componentCustom:""})),className:U("h-10 px-3.5 rounded-full text-[14px] font-bold cursor-pointer transition-colors whitespace-nowrap shrink-0 border shadow-none focus:outline-none",J.componentPreset===j?"bg-header-navy text-white border-transparent":"bg-white border-border text-[#64748b] hover:border-primary/50"),children:j},j))}),J.componentPreset===""&&o.jsx("input",{type:"text",placeholder:" ",value:J.componentCustom,onChange:j=>he(C=>({...C,componentCustom:j.target.value})),className:"mt-2 w-full h-[50px] px-4 rounded-xl border border-border bg-card text-[18px] text-foreground placeholder:text-muted-foreground transition-all hover:bg-card hover:border-primary/50 focus:border-primary focus:shadow-[0_0_0_3px_rgba(49,163,250,0.15)] outline-none"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[15px] font-semibold text-text-sub mb-2",children:" *"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:pA.map(j=>o.jsx("button",{type:"button",onClick:()=>he(C=>({...C,processPreset:j,processCustom:j===""?C.processCustom:""})),className:U("h-10 px-3.5 rounded-full text-[14px] font-bold cursor-pointer transition-colors whitespace-nowrap shrink-0 border shadow-none focus:outline-none",J.processPreset===j?"bg-header-navy text-white border-transparent":"bg-white border-border text-[#64748b] hover:border-primary/50"),children:j},j))}),J.processPreset===""&&o.jsx("input",{type:"text",placeholder:" ",value:J.processCustom,onChange:j=>he(C=>({...C,processCustom:j.target.value})),className:"mt-2 w-full h-[50px] px-4 rounded-xl border border-border bg-card text-[18px] text-foreground placeholder:text-muted-foreground transition-all hover:bg-card hover:border-primary/50 focus:border-primary focus:shadow-[0_0_0_3px_rgba(49,163,250,0.15)] outline-none"})]})]})]}):o.jsxs(o.Fragment,{children:[Io?o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-[15px] font-semibold text-text-sub mb-2",children:" *"}),o.jsx("input",{type:"text",placeholder:" ",value:gt,onChange:j=>Ye(j.target.value),className:"w-full h-[50px] px-4 rounded-xl border border-border bg-card text-[18px] text-foreground placeholder:text-muted-foreground transition-all hover:bg-card hover:border-primary/50 focus:border-primary focus:shadow-[0_0_0_3px_rgba(49,163,250,0.15)] outline-none"})]}):o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-[15px] font-semibold text-text-sub mb-2",children:" *"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",placeholder:" ",value:L,onChange:j=>{const C=j.target.value;re(C),tt(null),ve(!0),ee&&C!==ee.site_name&&G(null)},onFocus:()=>ve(!0),onBlur:()=>setTimeout(()=>ve(!1),120),className:"w-full h-[50px] px-4 pr-14 rounded-xl border border-border bg-card text-[18px] text-foreground placeholder:text-muted-foreground transition-all hover:bg-card hover:border-primary/50 focus:border-primary focus:shadow-[0_0_0_3px_rgba(49,163,250,0.15)] outline-none","aria-invalid":!ee&&!!et}),L&&o.jsx("button",{type:"button",onMouseDown:j=>j.preventDefault(),onClick:()=>{re(""),G(null),tt(null),ve(!1)},className:"absolute right-10 top-1/2 -translate-y-1/2 w-6 h-6 rounded-full bg-muted flex items-center justify-center text-[12px] text-muted-foreground z-10","aria-label":" ",children:""}),o.jsx("button",{type:"button",onMouseDown:j=>j.preventDefault(),onClick:()=>ve(j=>!j),className:"absolute right-4 top-1/2 -translate-y-1/2","aria-label":"  ",children:o.jsx(Nt,{className:"w-5 h-5 text-muted-foreground"})}),le&&L.trim().length>=2&&o.jsxs("ul",{className:"absolute z-50 left-0 right-0 top-full mt-1.5 max-h-60 overflow-auto bg-card border border-border rounded-xl shadow-lg",children:[At.map(j=>o.jsx("li",{onMouseDown:C=>{C.preventDefault(),G(j),re(j.site_name),ve(!1),tt(null)},className:"px-4 py-3.5 cursor-pointer border-b border-border last:border-0 text-[15px] font-medium text-foreground hover:bg-muted",children:j.site_name},j.site_id)),At.length===0&&o.jsx("li",{className:"px-4 py-3 text-center text-sm text-muted-foreground",children:"  "})]})]}),!ee&&(L.trim().length>0||!!et)&&o.jsx("div",{className:"mt-2 text-[12px] font-semibold text-red-600",children:et||" "})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-[15px] font-semibold text-text-sub mb-2",children:""}),o.jsx("input",{type:"date",value:Te,onChange:j=>je(j.target.value),className:"w-full h-[50px] px-4 rounded-xl border border-border bg-card text-[18px] text-foreground outline-none transition-all focus:border-sky-500"})]})]}),o.jsx("input",{ref:K,type:"file",multiple:!0,accept:"image/*,.pdf,.doc,.docx,.hwp,.xls,.xlsx,.ppt,.pptx",onChange:Qj,className:"hidden"}),o.jsxs("button",{type:"button",onClick:()=>{var j;return(j=K.current)==null?void 0:j.click()},className:"flex h-[50px] w-full items-center justify-center gap-2 rounded-xl border border-dashed border-sky-300 bg-sky-50 text-[15px] font-extrabold text-sky-700 transition-colors hover:bg-sky-100 active:scale-[0.98] mb-4",children:[o.jsx(r1,{className:"h-5 w-5"}),"  ( )"]}),W.length>0&&o.jsxs("div",{className:"mb-6",children:[o.jsxs("div",{className:"text-sm font-semibold text-text-sub mb-2",children:["  (",W.length,")"]}),o.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:W.map((j,C)=>o.jsxs("div",{className:"flex items-center justify-between bg-card border border-border rounded-lg p-2",children:[o.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[o.jsx(Dt,{className:"w-4 h-4 text-text-sub shrink-0"}),o.jsx("span",{className:"text-sm text-foreground truncate",children:j.name}),o.jsxs("span",{className:"text-xs text-text-sub shrink-0",children:[(j.size/1024/1024).toFixed(2)," MB"]})]}),o.jsx("button",{onClick:()=>Yj(C),className:"w-6 h-6 rounded-full bg-red-100 hover:bg-red-200 flex items-center justify-center transition-colors shrink-0",children:o.jsx(He,{className:"w-3 h-3 text-red-600"})})]},C))})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:Fl,className:"flex-1 h-[50px] rounded-xl bg-gray-200 text-[15px] font-bold text-gray-700 transition-all sm:text-base",children:""}),o.jsx("button",{onClick:nr?t2:Jj,disabled:y||!nr&&!Kt,className:U("flex-1 h-[50px] rounded-xl bg-header-navy text-[15px] font-bold text-header-navy-foreground transition-all sm:text-base",(y||!nr&&!Kt)&&"opacity-50 cursor-not-allowed"),children:""})]})]})]}),Ce.isOpen&&Ce.blueprintKey&&Yr&&o.jsx(Sc.Root,{open:Ce.isOpen,onOpenChange:j=>Gt(j?Ce:{isOpen:!1}),dismissible:!0,shouldScaleBackground:!0,children:o.jsxs(Sc.Portal,{children:[o.jsx(Sc.Overlay,{className:"fixed inset-0 z-[9999] bg-black/50 backdrop-blur-sm"}),o.jsxs(Sc.Content,{className:"fixed inset-x-0 bottom-0 z-[10000] mx-auto w-full max-w-[600px] rounded-t-3xl bg-card border border-border shadow-[0_-12px_40px_rgba(0,0,0,0.25)] outline-none",children:[o.jsx("div",{className:"pt-3 pb-2 flex items-center justify-center",children:o.jsx("div",{className:"h-1.5 w-12 rounded-full bg-muted-foreground/25"})}),o.jsxs("div",{className:"flex items-center justify-between px-5 pb-4 border-b border-border",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("h2",{className:"text-[18px] font-[800] text-foreground truncate",children:Yr.siteName}),o.jsx("p",{className:"text-[13px] text-muted-foreground mt-0.5",children:" "})]}),o.jsx("button",{type:"button",onClick:()=>Gt({isOpen:!1}),className:"w-10 h-10 rounded-full bg-muted hover:bg-muted/80 flex items-center justify-center transition-colors shrink-0","aria-label":"",children:o.jsx(He,{className:"w-5 h-5"})})]}),o.jsx("div",{className:"px-5 py-4 border-b border-border bg-muted/20",children:o.jsxs("div",{className:"flex items-center justify-between gap-3",children:[o.jsxs("div",{className:"flex gap-1.5 flex-wrap items-center",children:[Yr.siteSource==="custom"&&o.jsxs("span",{className:"text-[12px] px-2.5 py-1 rounded-md bg-amber-50 text-amber-700 border border-amber-200 font-bold leading-none inline-flex items-center gap-1",children:[o.jsx(Hc,{className:"w-3 h-3"}),""]}),Yr.affiliation&&o.jsx("span",{className:"text-[12px] px-2.5 py-1 rounded-md bg-[#e0f2fe] text-[#0284c7] border border-[#bae6fd] font-bold leading-none",children:Yr.affiliation}),Yr.contractor&&o.jsx("span",{className:"text-[12px] px-2.5 py-1 rounded-md bg-indigo-50 text-indigo-500 border border-indigo-200 font-bold leading-none",children:Yr.contractor})]}),o.jsxs("div",{className:"text-[12px] text-muted-foreground whitespace-nowrap",children:[" ",Yr.totalDrawings,"  v",Yr.currentVersion]})]})}),o.jsx("div",{className:"px-5 pb-6 pt-4 max-h-[70vh] overflow-y-auto",children:Yr.history.map((j,C)=>o.jsxs("div",{className:"relative",children:[C<Yr.history.length-1&&o.jsx("div",{className:"absolute left-6 top-12 w-0.5 h-full bg-border"}),o.jsxs("div",{className:"flex gap-4 pb-6",children:[o.jsxs("div",{className:"w-12 h-12 rounded-full bg-blue-500 flex items-center justify-center text-white font-bold text-sm shrink-0",children:["v",j.version]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("span",{className:"font-semibold text-foreground",children:j.author}),o.jsx("span",{className:"text-muted-foreground",children:""}),o.jsxs("span",{className:"text-sm text-muted-foreground",children:[Cc(j.date)," ",j.time]})]}),o.jsxs("div",{className:"text-sm text-muted-foreground mb-3",children:[j.component,"  ",j.process]}),j.files.length>0&&o.jsx("div",{className:"grid grid-cols-2 gap-2 mb-3",children:j.files.map(E=>o.jsxs("div",{className:"flex items-center gap-2 p-2 bg-muted rounded-lg",children:[o.jsx(Dt,{className:"w-4 h-4 text-muted-foreground"}),o.jsx("span",{className:"text-sm truncate",children:E.name})]},E.id))}),o.jsxs("div",{className:"flex gap-1",children:[o.jsxs("button",{className:"flex items-center gap-1 px-3 py-0.5 text-[14px] rounded-full bg-[#e0f2fe] text-[#0284c7] border border-[#bae6fd] font-semibold hover:bg-[#bae6fd] hover:border-[#7dd3fc] transition-colors",children:[o.jsx(S3,{className:"w-3.5 h-3.5"}),""]}),o.jsxs("button",{className:"flex items-center gap-1 px-3 py-0.5 text-[14px] rounded-full bg-indigo-50 text-indigo-500 border border-indigo-200 font-semibold hover:bg-indigo-100 hover:border-indigo-300 transition-colors",children:[o.jsx(En,{className:"w-3.5 h-3.5"}),""]}),o.jsxs("button",{className:"flex items-center gap-1 px-3 py-0.5 text-[14px] rounded-full bg-red-50 text-red-600 border border-red-200 font-semibold hover:bg-red-100 hover:border-red-300 transition-colors",children:[o.jsx(Qa,{className:"w-3.5 h-3.5"}),""]})]})]})]})]},j.id))})]})]})}),oe&&ge&&o.jsxs(o.Fragment,{children:[o.jsx("input",{ref:ye,type:"file",accept:"image/*",className:"hidden",onChange:Tj}),o.jsx(y1,{open:oe,title:`${ge.title}  ${ge.siteName}`,onBack:Bm,onClose:Bm,onSave:Ks,onShare:Oj,zoom:Pe,contentRef:Ut,titleClassName:"max-w-[150px] truncate sm:max-w-[320px]",maxWidthClassName:"max-w-[600px]",children:o.jsx("div",{className:"px-3 py-2",children:o.jsxs("div",{className:"bg-white shadow-lg",style:{width:"210mm",minHeight:"297mm",padding:"20mm 10mm",boxSizing:"border-box"},children:[o.jsxs("div",{className:"text-center border-b-2 border-[#1a254f] pb-3 mb-4",children:[o.jsx("div",{contentEditable:!0,suppressContentEditableWarning:!0,"data-report-meta":"title",onBlur:sr,className:"text-[24px] font-[800] text-[#1a254f] outline-none",children:ge.title}),o.jsx("div",{contentEditable:!0,suppressContentEditableWarning:!0,"data-report-meta":"siteName",onBlur:sr,className:"text-[14px] text-[#666] mt-1 outline-none",children:ge.siteName}),o.jsx("div",{contentEditable:!0,suppressContentEditableWarning:!0,"data-report-meta":"date",onBlur:sr,className:"text-[12px] text-[#666] mt-0.5 outline-none",children:ge.date})]}),o.jsxs("table",{className:"w-full border-collapse text-[12px] [table-layout:fixed] [&_th]:align-middle [&_td]:align-middle [&_th]:box-border [&_td]:box-border [&_th]:leading-[1.4] [&_td]:leading-[1.45] [&_td]:whitespace-pre-wrap [&_td]:break-keep [&_td]:[overflow-wrap:anywhere] [&_td]:px-[10px]",children:[o.jsxs("colgroup",{children:[o.jsx("col",{style:{width:"40px"}}),o.jsx("col",{style:{width:"96px"}}),o.jsx("col",{style:{minWidth:"180px"}}),o.jsx("col",{style:{width:"88px"}}),o.jsx("col",{style:{width:"88px"}}),o.jsx("col",{style:{width:"64px"}})]}),o.jsx("thead",{children:o.jsxs("tr",{className:"bg-slate-100",children:[o.jsx("th",{className:"border border-slate-300 p-2 w-10",children:"NO"}),o.jsx("th",{className:"border border-slate-300 p-2 w-24",children:""}),o.jsx("th",{className:"border border-slate-300 p-2 min-w-[180px]",children:" "}),o.jsx("th",{className:"border border-slate-300 p-2 w-[88px]",children:" "}),o.jsx("th",{className:"border border-slate-300 p-2 w-[88px]",children:" "}),o.jsx("th",{className:"border border-slate-300 p-2 w-16",children:""})]})}),o.jsx("tbody",{ref:es,id:"reportTableBody",children:ge.rows.map((j,C)=>o.jsxs("tr",{children:[o.jsx("td",{className:"border border-slate-300 p-2 text-center font-bold",children:C+1}),o.jsx("td",{className:"border border-slate-300 p-2 align-middle",children:o.jsx("div",{contentEditable:!0,suppressContentEditableWarning:!0,"data-report-edit":"1","data-item-id":j.id,"data-field":"location",className:"min-h-[18px] whitespace-pre-wrap break-keep [overflow-wrap:anywhere] [writing-mode:horizontal-tb] leading-[1.45] outline-none",children:j.location||""})}),o.jsx("td",{className:"border border-slate-300 p-2 align-middle",children:o.jsx("div",{contentEditable:!0,suppressContentEditableWarning:!0,"data-report-edit":"1","data-item-id":j.id,"data-field":"issue",className:"min-h-[18px] whitespace-pre-wrap break-keep [overflow-wrap:anywhere] [writing-mode:horizontal-tb] leading-[1.45] outline-none",children:j.issue||""})}),o.jsx("td",{className:"border border-slate-300 p-2 text-center align-middle",children:o.jsxs("div",{className:"relative",children:[o.jsx("button",{type:"button","data-no-pan":"1",disabled:mn,onClick:()=>Fm(j.id,"beforePhoto"),className:U("w-full h-[64px] flex items-center justify-center bg-transparent border-none p-0",mn?"opacity-60 cursor-not-allowed":"cursor-pointer"),children:j.beforePhoto?o.jsx("img",{src:j.beforePhoto,alt:"before",className:"w-full max-h-[64px] h-auto object-contain rounded"}):o.jsx("span",{className:"text-slate-400 text-[11px]",children:" "})}),j.beforePhoto&&!mn&&o.jsx("button",{type:"button","data-no-pan":"1","data-report-remove":"1",onClick:E=>{E.stopPropagation(),Um(j.id,"beforePhoto")},className:"absolute top-1 right-1 w-5 h-5 rounded-full bg-black/60 text-white flex items-center justify-center",children:o.jsx(He,{className:"w-3 h-3"})})]})}),o.jsx("td",{className:"border border-slate-300 p-2 text-center align-middle",children:o.jsxs("div",{className:"relative",children:[o.jsx("button",{type:"button","data-no-pan":"1",disabled:mn,onClick:()=>Fm(j.id,"afterPhoto"),className:U("w-full h-[64px] flex items-center justify-center bg-transparent border-none p-0",mn?"opacity-60 cursor-not-allowed":"cursor-pointer"),children:j.afterPhoto?o.jsx("img",{src:j.afterPhoto,alt:"after",className:"w-full max-h-[64px] h-auto object-contain rounded"}):o.jsx("span",{className:"text-slate-400 text-[11px]",children:" "})}),j.afterPhoto&&!mn&&o.jsx("button",{type:"button","data-no-pan":"1","data-report-remove":"1",onClick:E=>{E.stopPropagation(),Um(j.id,"afterPhoto")},className:"absolute top-1 right-1 w-5 h-5 rounded-full bg-black/60 text-white flex items-center justify-center",children:o.jsx(He,{className:"w-3 h-3"})})]})}),o.jsx("td",{className:"border border-slate-300 p-2 text-center font-bold",children:Pj(j.status)})]},j.id))})]})]},`${ge.groupId}-${Ue}`)})})]})]})}function H0(){return o.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[o.jsx("div",{className:"w-20 h-20 rounded-full bg-muted flex items-center justify-center mb-5",children:o.jsx(_r,{className:"w-8 h-8 text-muted-foreground opacity-60"})}),o.jsx("p",{className:"text-[16px] font-medium text-foreground mb-2",children:"  "})]})}function yA({group:e,isApproved:t,onBack:r,onOpenReport:n,onUpdateField:s,onDeleteItem:a,onAddItem:i,onPhotoUpload:l}){const c=e.punchItems||[],d=c.length,h=c.filter(f=>f.status!=="done").length,u=c.filter(f=>f.status==="done").length;return o.jsxs("div",{className:"animate-fade-in",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4 -mx-4 px-4 pb-3 border-b border-border",children:[o.jsxs("button",{onClick:r,className:"flex items-center gap-2 text-foreground font-semibold text-[16px] bg-transparent border-none cursor-pointer rounded-lg p-2 -ml-2 hover:bg-muted transition-colors",children:[o.jsx(Ha,{className:"w-6 h-6"}),o.jsx("span",{children:""})]}),o.jsx("h2",{className:"text-[18px] font-bold text-foreground flex-1 text-center px-4 truncate",children:e.title}),o.jsx("button",{className:"bg-muted text-text-sub border border-border rounded-lg px-3 py-1.5 text-[14px] font-bold cursor-pointer hover:bg-card transition-colors whitespace-nowrap",onClick:()=>n(e.id),children:""})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-2.5 mb-6",children:[o.jsxs("div",{className:"p-3 rounded-2xl text-center flex flex-col gap-1 shadow-soft bg-sky-50 text-sky-600 border border-sky-400",children:[o.jsx("span",{className:"text-[22px] font-[800] leading-tight tracking-tight",children:d}),o.jsx("span",{className:"text-[13px] font-bold opacity-90 text-sky-700",children:""})]}),o.jsxs("div",{className:"p-3 rounded-2xl text-center flex flex-col gap-1 shadow-soft bg-red-50 text-red-600 border border-red-400",children:[o.jsx("span",{className:"text-[22px] font-[800] leading-tight tracking-tight",children:h}),o.jsx("span",{className:"text-[13px] font-bold opacity-90 text-red-700",children:""})]}),o.jsxs("div",{className:"p-3 rounded-2xl text-center flex flex-col gap-1 shadow-soft bg-slate-50 text-slate-600 border border-slate-400",children:[o.jsx("span",{className:"text-[22px] font-[800] leading-tight tracking-tight",children:u}),o.jsx("span",{className:"text-[13px] font-bold opacity-90 text-slate-500",children:""})]})]}),o.jsxs("div",{className:"flex items-center gap-2 mb-4 px-1",children:[o.jsx(Dt,{className:"w-[20px] h-[20px] text-header-navy"}),o.jsxs("h3",{className:"text-[20px] font-bold text-header-navy",children:["  (",d,")"]})]}),c.length===0?o.jsxs("div",{className:"p-10 text-center text-text-sub bg-card rounded-2xl border-2 border-dashed border-border",children:["   .",o.jsx("br",{}),o.jsx("small",{className:"text-[13px] mt-2 block",children:"      ."})]}):o.jsx("div",{className:"space-y-4",children:c.map(f=>o.jsx(wA,{item:f,isApproved:t,onUpdateField:s,onDelete:a,onPhotoUpload:l},f.id))}),t?o.jsxs("div",{className:"w-full h-[50px] px-5 border border-dashed border-border rounded-xl bg-muted text-muted-foreground text-[16px] font-[800] flex items-center justify-center gap-2.5 mt-4 opacity-60",children:[o.jsx(Hc,{className:"w-6 h-6"}),o.jsx("span",{children:" -  "})]}):o.jsxs("button",{onClick:i,className:"flex h-[50px] w-full items-center justify-center gap-2 rounded-xl border border-dashed border-sky-300 bg-sky-50 text-[15px] font-extrabold text-sky-700 transition-colors hover:bg-sky-100 active:scale-[0.98] mt-4",children:[o.jsx(r1,{className:"h-5 w-5"}),o.jsx("span",{children:"   "})]})]})}function wA({item:e,isApproved:t,onUpdateField:r,onDelete:n,onPhotoUpload:s}){const a=m.useRef(null);m.useEffect(()=>{const c=a.current;c&&(c.style.height="auto",c.style.height=`${Math.min(c.scrollHeight,160)}px`)},[e.issue]);const i=[{key:"",activeBg:"bg-red-100",activeText:"text-red-600",inactiveBg:"bg-slate-50",inactiveText:"text-slate-400"},{key:"",activeBg:"bg-amber-100",activeText:"text-amber-600",inactiveBg:"bg-slate-50",inactiveText:"text-slate-400"},{key:"",activeBg:"bg-emerald-100",activeText:"text-emerald-600",inactiveBg:"bg-slate-50",inactiveText:"text-slate-400"}],l=[{key:"open",label:"",activeText:"text-red-500"},{key:"ing",label:"",activeText:"text-blue-500"},{key:"done",label:"",activeText:"text-slate-800"}];return o.jsxs("div",{className:"bg-white rounded-xl p-5 relative shadow-[0_4px_20px_rgba(0,0,0,0.08)] transition-all",children:[!t&&o.jsx("button",{onClick:()=>n(e.id),className:"absolute top-4 right-4 bg-transparent border-none text-slate-300 cursor-pointer p-1 transition-colors hover:text-destructive",children:o.jsx(Qa,{className:"w-5 h-5"})}),o.jsxs("div",{className:"flex items-center gap-2 mb-3 pb-3 border-b border-slate-100",children:[o.jsx(Ft,{className:"w-4 h-4 text-text-sub shrink-0"}),o.jsx("input",{type:"text",value:e.location||"",placeholder:" (: 101 302)",onChange:c=>r(e.id,"location",c.target.value),readOnly:t,className:U("text-[17px] font-bold text-text-sub bg-transparent p-0 border-none outline-none flex-1 min-w-0 truncate",t&&"pointer-events-none opacity-70")})]}),o.jsx("textarea",{ref:a,value:e.issue||"",placeholder:"   ...",onChange:c=>{r(e.id,"issue",c.target.value);const d=a.current;d&&(d.style.height="auto",d.style.height=`${Math.min(d.scrollHeight,160)}px`)},readOnly:t,rows:1,className:U("w-full text-[15px] font-medium text-foreground bg-transparent border-none outline-none resize-none leading-snug min-h-[28px] p-0 mb-3 overflow-y-auto transition-all",t&&"pointer-events-none opacity-70")}),o.jsxs("div",{className:"flex justify-between items-center mb-3 flex-wrap gap-2",children:[o.jsx("div",{className:"flex gap-1 flex-wrap w-[calc(50%-4px)] min-w-[120px]",children:i.map(c=>o.jsx("button",{onClick:()=>!t&&r(e.id,"priority",c.key),className:U("py-1.5 px-3 rounded-md text-[12px] font-bold border-none cursor-pointer transition-all min-h-[32px] flex-1",e.priority===c.key?`${c.activeBg} ${c.activeText}`:`${c.inactiveBg} ${c.inactiveText}`,t&&"pointer-events-none opacity-60"),children:c.key},c.key))}),o.jsx("div",{className:"flex bg-slate-100 rounded-full p-0.5 shrink-0 w-[calc(50%-4px)] min-w-[120px]",children:l.map(c=>o.jsx("button",{onClick:()=>!t&&r(e.id,"status",c.key),className:U("py-1 px-2 rounded-full text-[11px] font-bold border-none cursor-pointer transition-all min-h-[28px] flex-1 whitespace-nowrap",e.status===c.key?`bg-white ${c.activeText} shadow-sm`:"bg-transparent text-slate-400",t&&"pointer-events-none opacity-60"),children:c.label},c.key))})]}),o.jsx("div",{className:"flex gap-3 mt-3 w-full",children:["beforePhoto","afterPhoto"].map(c=>o.jsx("div",{onClick:()=>s(e.id,c),className:U("flex-1 aspect-square bg-slate-50 rounded-2xl border border-dashed border-slate-300 flex flex-col items-center justify-center cursor-pointer transition-all overflow-hidden relative hover:bg-slate-100 hover:border-slate-400",t&&"pointer-events-none opacity-60"),children:e[c]?o.jsxs(o.Fragment,{children:[o.jsx("img",{src:e[c],className:"w-full h-full object-cover absolute inset-0",alt:""}),o.jsx("div",{className:U("absolute top-2 left-2 text-white text-[11px] font-[800] px-2.5 py-1 rounded-md",c==="beforePhoto"?"bg-slate-800":"bg-sky-500"),children:c==="beforePhoto"?"":""})]}):o.jsxs(o.Fragment,{children:[o.jsx(Tn,{className:"w-7 h-7 text-slate-300 mb-1"}),o.jsx("span",{className:"text-[11px] font-[900] text-slate-400",children:c==="beforePhoto"?"":""})]})},c))})]})}const V0=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,K0=sw,jA=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return K0(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:a}=t,i=Object.keys(s).map(d=>{const h=r==null?void 0:r[d],u=a==null?void 0:a[d];if(h===null)return null;const f=V0(h)||V0(u);return s[d][f]}),l=r&&Object.entries(r).reduce((d,h)=>{let[u,f]=h;return f===void 0||(d[u]=f),d},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((d,h)=>{let{class:u,className:f,...p}=h;return Object.entries(p).every(b=>{let[g,w]=b;return Array.isArray(w)?w.includes({...a,...l}[g]):{...a,...l}[g]===w})?[...d,u,f]:d},[]);return K0(e,i,c,r==null?void 0:r.class,r==null?void 0:r.className)},kA=jA("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),op=m.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...s},a)=>{const i=n?h_:"button";return o.jsx(i,{className:U(kA({variant:t,size:r,className:e})),ref:a,...s})});op.displayName="Button";const fj=m.forwardRef(({className:e,...t},r)=>o.jsx("div",{ref:r,className:U("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));fj.displayName="Card";const pj=m.forwardRef(({className:e,...t},r)=>o.jsx("div",{ref:r,className:U("flex flex-col space-y-1.5 p-6",e),...t}));pj.displayName="CardHeader";const mj=m.forwardRef(({className:e,...t},r)=>o.jsx("h3",{ref:r,className:U("text-2xl font-semibold leading-none tracking-tight",e),...t}));mj.displayName="CardTitle";const xj=m.forwardRef(({className:e,...t},r)=>o.jsx("p",{ref:r,className:U("text-sm text-muted-foreground",e),...t}));xj.displayName="CardDescription";const gj=m.forwardRef(({className:e,...t},r)=>o.jsx("div",{ref:r,className:U("p-6 pt-0",e),...t}));gj.displayName="CardContent";const NA=m.forwardRef(({className:e,...t},r)=>o.jsx("div",{ref:r,className:U("flex items-center p-6 pt-0",e),...t}));NA.displayName="CardFooter";const _A={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},SA="https://t1.kakaocdn.net/kakao_js_sdk/2.7.9/kakao.min.js",G0="inopnc-kakao-sdk";let Ec=null;function CA(){return typeof window>"u"?Promise.resolve(!1):window.Kakao?Promise.resolve(!0):Ec||(Ec=new Promise(e=>{let t=!1;const r=l=>{t||(t=!0,window.clearTimeout(n),e(l))},n=window.setTimeout(()=>r(!!window.Kakao),5e3),s=l=>{l.addEventListener("load",()=>r(!!window.Kakao),{once:!0}),l.addEventListener("error",()=>r(!1),{once:!0})},a=document.getElementById(G0);if(a){if(window.Kakao){r(!0);return}s(a);return}const i=document.createElement("script");i.id=G0,i.src=SA,i.async=!0,i.crossOrigin="anonymous",s(i),document.head.appendChild(i)}),Ec)}function bj(){var s,a,i;const e=_A,t=((s=e.VITE_KAKAO_JS_KEY)==null?void 0:s.trim())||void 0,r=((a=e.VITE_KAKAO_CHANNEL_PUBLIC_ID)==null?void 0:a.trim())||"_xfgxdqX",n=((i=e.VITE_KAKAO_CHANNEL_URL)==null?void 0:i.trim())||"https://pf.kakao.com/_xfgxdqX";return{jsKey:t,channelPublicId:r,channelUrl:n}}async function Q0(){if(typeof window>"u")return null;const{jsKey:e}=bj();if(!e||!await CA()||!window.Kakao)return null;try{return window.Kakao.isInitialized()||window.Kakao.init(e),window.Kakao.isInitialized()?window.Kakao:null}catch{return null}}const Sh="   (  )",EA="https://pf.kakao.com/_xfgxdqX",PA="https://pf.kakao.com/_xfgxdqX/chat",TA="",RA="   (  )",OA=" ()",AA="1:1 ",IA="  ",DA="   ",LA="    ",MA=" ";function Go(e){window.open(e,"_blank","noopener,noreferrer")||(window.location.href=e)}function $A(e){return e?`${e.replace(/\/$/,"")}/chat`:PA}function FA(){const{isOnline:e}=f1(),{channelPublicId:t,channelUrl:r}=bj(),n=()=>{e||V.warning(Sh)},s=async()=>{if(!e){V.warning(Sh);return}const i=r||EA;if(!t){Go(i);return}const l=await Q0();if(!l){Go(i);return}try{const c=await l.Channel.followChannel({channelPublicId:t});if((c==null?void 0:c.status)==="success"){V.success(IA);return}V.error(DA)}catch(c){const d=typeof c=="object"&&c!==null&&"error_msg"in c&&typeof c.error_msg=="string"?c.error_msg:LA;V.error(d),Go(i)}},a=async()=>{if(!e){V.warning(Sh);return}const i=$A(r);if(!t){Go(i);return}const l=await Q0();if(!l){Go(i);return}try{l.Channel.chat({channelPublicId:t}),V.message(MA)}catch{Go(i)}};return o.jsx("div",{className:"animate-fade-in",children:o.jsx("div",{className:"mt-3 mb-2",children:o.jsxs(fj,{className:"rounded-2xl shadow-soft mb-0",children:[o.jsxs(pj,{className:"space-y-2 pb-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",className:"lucide lucide-phone-call text-header-navy",children:[o.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"}),o.jsx("path",{d:"M14.05 2a9 9 0 0 1 8 7.94"})]}),o.jsx(mj,{className:"text-xl font-bold text-header-navy",children:TA})]}),o.jsx(xj,{className:"text-base font-medium leading-relaxed text-text-sub",children:RA})]}),o.jsxs(gj,{className:"space-y-3",children:[o.jsx("div",{className:"w-full",onClick:n,children:o.jsx(op,{type:"button",variant:"outline",className:"h-[50px] w-full text-base font-semibold border-[#FEE500] text-[#3C1E1E] bg-[#FEE500]/10 hover:bg-[#FEE500]/20 transition-all",disabled:!e,onClick:s,children:OA})}),o.jsx("div",{className:"w-full",onClick:n,children:o.jsx(op,{type:"button",className:"h-[50px] w-full text-base font-semibold bg-[#FEE500] text-[#3C1E1E] hover:bg-[#FEE500]/90 transition-all shadow-sm",disabled:!e,onClick:a,children:AA})})]})]})})})}const vj="/assets/logo_b-VVYKj-ui.png";function UA(){const[e,t]=m.useState(!1),[r,n]=m.useState(!1),[s,a]=m.useState(!1),[i,l]=m.useState(!1),[c,d]=m.useState(!1),{setTestMode:h,setTestRole:u}=St(),f=Jn(),[p,b]=m.useState(""),[g,w]=m.useState(""),[x,y]=m.useState(""),[v,k]=m.useState(""),[N,S]=m.useState(""),[_,P]=m.useState(""),[D,T]=m.useState(!1),z=(L=>{let re=0;return L.length>=8&&re++,/[A-Z]/.test(L)&&re++,/[0-9]/.test(L)&&re++,/[^A-Za-z0-9]/.test(L)&&re++,re})(g),F=z===0?" ":z===1?"":z<=3?"":"",W=z===0?"bg-border":z===1?"bg-destructive":z<=3?"bg-amber-500":"bg-emerald-500",Q=async()=>{if(!p||!g){V.error("  .");return}l(!0);const{error:L}=await ue.auth.signInWithPassword({email:p,password:g});l(!1),L?V.error(L.message==="Invalid login credentials"?"    .":L.message):(V.success(" !"),f("/"))},K=async()=>{if(!v||!p||!_){V.error("   .");return}if(g.length<8){V.error(" 8  .");return}if(g!==x){V.error("  .");return}if(!D){V.error(" .");return}l(!0);const{error:L}=await ue.auth.signUp({email:p,password:g,options:{emailRedirectTo:window.location.origin,data:{name:v,phone:N,affiliation:_}}});l(!1),L?V.error(L.message):(V.success(" !  ."),t(!0))},ne=async()=>{if(!p){V.error(" .");return}l(!0);const{error:L}=await ue.auth.resetPasswordForEmail(p,{redirectTo:`${window.location.origin}/reset-password`});l(!1),L?V.error(L.message):(V.success("    ."),d(!1))},A=(L="worker",re="/")=>{u(L),h(!0),f(re)},O=()=>{c?ne():e?Q():K()};return o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center px-5 py-5",children:o.jsx("div",{className:"w-full max-w-app",children:o.jsxs("div",{className:"bg-card rounded-xl shadow-md p-8 max-[640px]:p-6 w-full",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsxs("div",{className:"mb-3 flex items-center justify-center gap-3 max-[640px]:gap-2 max-[420px]:gap-1.5",children:[o.jsx("img",{src:vj,alt:"INOPNC ",className:"h-auto w-[188px] max-[640px]:w-[138px] max-[420px]:w-[124px] shrink-0 object-contain"}),o.jsx("h1",{className:"whitespace-nowrap text-[26px] max-[640px]:text-[20px] max-[420px]:text-[18px] leading-none font-bold text-header-navy",children:c?" ":e?"":""})]}),o.jsx("p",{className:"text-[14px] text-text-sub",children:c?"  ":e?" ":"    "})]}),o.jsxs("div",{className:"flex flex-col gap-5",children:[!e&&!c&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex flex-col gap-1.5",children:[o.jsxs("label",{className:"text-[14px] font-semibold text-text-sub flex items-center gap-1",children:[" ",o.jsx("span",{className:"text-destructive text-[16px]",children:"*"})]}),o.jsxs("select",{value:_,onChange:L=>P(L.target.value),className:"h-12 max-[640px]:h-11 rounded-lg border border-border px-4 text-[16px] bg-card text-foreground appearance-none outline-none focus:border-primary bg-[length:16px] bg-[right_12px_center] bg-no-repeat",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23475569' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E")`},children:[o.jsx("option",{value:"",children:" "}),o.jsx("option",{value:"worker_inopnc",children:" ()"}),o.jsx("option",{value:"manager_inopnc",children:" ()"}),o.jsx("option",{value:"partner_company",children:""})]})]}),o.jsxs("div",{className:"flex gap-3 max-[640px]:flex-col max-[640px]:gap-5",children:[o.jsxs("div",{className:"flex-1 flex flex-col gap-1.5",children:[o.jsxs("label",{className:"text-[14px] font-semibold text-text-sub flex items-center gap-1",children:[" ",o.jsx("span",{className:"text-destructive text-[16px]",children:"*"})]}),o.jsx("input",{type:"text",value:v,onChange:L=>k(L.target.value),placeholder:" ",className:"h-12 max-[640px]:h-11 rounded-lg border border-border px-4 text-[16px] bg-card text-foreground placeholder:text-muted-foreground outline-none focus:border-primary"})]}),o.jsxs("div",{className:"flex-1 flex flex-col gap-1.5",children:[o.jsx("label",{className:"text-[14px] font-semibold text-text-sub flex items-center gap-1",children:""}),o.jsx("input",{type:"tel",value:N,onChange:L=>S(L.target.value),placeholder:"010-1234-5678",className:"h-12 max-[640px]:h-11 rounded-lg border border-border px-4 text-[16px] bg-card text-foreground placeholder:text-muted-foreground outline-none focus:border-primary"})]})]})]}),o.jsxs("div",{className:"flex flex-col gap-1.5",children:[o.jsxs("label",{className:"text-[14px] font-semibold text-text-sub flex items-center gap-1",children:[" ",o.jsx("span",{className:"text-destructive text-[16px]",children:"*"})]}),o.jsx("input",{type:"email",value:p,onChange:L=>b(L.target.value),placeholder:"example@email.com",className:"h-12 max-[640px]:h-11 rounded-lg border border-border px-4 text-[16px] bg-card text-foreground placeholder:text-muted-foreground outline-none focus:border-primary"})]}),!c&&o.jsxs("div",{className:"flex flex-col gap-1.5",children:[o.jsxs("label",{className:"text-[14px] font-semibold text-text-sub flex items-center gap-1",children:[" ",o.jsx("span",{className:"text-destructive text-[16px]",children:"*"})]}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:r?"text":"password",value:g,onChange:L=>w(L.target.value),placeholder:e?" ":", ,   8 ",className:"w-full h-12 max-[640px]:h-11 rounded-lg border border-border px-4 pr-12 text-[16px] bg-card text-foreground placeholder:text-muted-foreground outline-none focus:border-primary"}),o.jsx("button",{onClick:()=>n(!r),className:"absolute right-4 top-1/2 -translate-y-1/2 bg-transparent border-none cursor-pointer text-muted-foreground",children:r?o.jsx(Ed,{className:"w-5 h-5"}):o.jsx(En,{className:"w-5 h-5"})})]}),!e&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"flex gap-1 mt-2",children:[0,1,2,3].map(L=>o.jsx("div",{className:U("h-1 flex-1 rounded-sm transition-colors",L<z?W:"bg-border")},L))}),o.jsxs("span",{className:"text-[12px] text-text-sub mt-1",children:[" : ",F]})]}),e&&o.jsx("button",{onClick:()=>d(!0),className:"self-end text-[13px] text-primary bg-transparent border-none cursor-pointer hover:underline mt-1",children:" ?"})]}),!e&&!c&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex flex-col gap-1.5",children:[o.jsxs("label",{className:"text-[14px] font-semibold text-text-sub flex items-center gap-1",children:["  ",o.jsx("span",{className:"text-destructive text-[16px]",children:"*"})]}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:s?"text":"password",value:x,onChange:L=>y(L.target.value),placeholder:"  ",className:"w-full h-12 max-[640px]:h-11 rounded-lg border border-border px-4 pr-12 text-[16px] bg-card text-foreground placeholder:text-muted-foreground outline-none focus:border-primary"}),o.jsx("button",{onClick:()=>a(!s),className:"absolute right-4 top-1/2 -translate-y-1/2 bg-transparent border-none cursor-pointer text-muted-foreground",children:s?o.jsx(Ed,{className:"w-5 h-5"}):o.jsx(En,{className:"w-5 h-5"})})]})]}),o.jsx("div",{className:"flex flex-col gap-2 mt-1",children:o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:D,onChange:L=>T(L.target.checked),className:"w-[18px] h-[18px] accent-primary"}),o.jsxs("span",{className:"text-[14px] max-[640px]:text-[13px] text-text-sub whitespace-nowrap",children:["  ",o.jsx("span",{className:"text-destructive",children:"*"})]})]})})]}),o.jsxs("button",{onClick:O,disabled:i,className:"w-full h-12 max-[640px]:h-11 bg-header-navy text-white rounded-lg border-none text-[16px] font-semibold cursor-pointer transition-all hover:opacity-90 active:scale-[0.98] disabled:opacity-50 flex items-center justify-center gap-2",children:[i&&o.jsx(o1,{className:"w-5 h-5 animate-spin"}),c?"  ":e?"":""]}),o.jsx("div",{className:"text-center mt-4 text-[14px] text-text-sub",children:c?o.jsx("button",{onClick:()=>d(!1),className:"text-primary font-semibold bg-transparent border-none cursor-pointer hover:underline",children:"  "}):e?o.jsxs(o.Fragment,{children:[" ? ",o.jsx("button",{onClick:()=>t(!1),className:"text-primary font-semibold bg-transparent border-none cursor-pointer hover:underline",children:""})]}):o.jsxs(o.Fragment,{children:["  ? ",o.jsx("button",{onClick:()=>t(!0),className:"text-primary font-semibold bg-transparent border-none cursor-pointer hover:underline",children:""})]})}),o.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>A("worker"),className:"flex-1 h-10 bg-transparent border border-primary text-primary rounded-lg text-[14px] font-semibold cursor-pointer transition-all hover:bg-primary/5",children:" "}),o.jsx("button",{onClick:()=>A("admin"),className:"flex-1 h-10 bg-transparent border border-header-navy text-header-navy rounded-lg text-[14px] font-semibold cursor-pointer transition-all hover:bg-header-navy/5",children:" "}),o.jsx("button",{onClick:()=>A("partner"),className:"flex-1 h-10 bg-transparent border border-accent text-accent-foreground rounded-lg text-[14px] font-semibold cursor-pointer transition-all hover:bg-accent/10",children:" "})]}),o.jsx("button",{onClick:()=>A("admin","/admin"),className:"w-full h-10 bg-header-navy text-white rounded-lg text-[14px] font-semibold cursor-pointer transition-all hover:opacity-90 active:scale-[0.98] flex items-center justify-center gap-1.5",children:"   "})]})]})]})})})}function BA(){const[e,t]=m.useState(""),[r,n]=m.useState(""),[s,a]=m.useState(!1),[i,l]=m.useState(!1),[c,d]=m.useState(!1),h=Jn();m.useEffect(()=>{window.location.hash.includes("type=recovery")||(V.error("    ."),h("/auth"))},[h]);const u=async()=>{if(e.length<8){V.error(" 8  .");return}if(e!==r){V.error("  .");return}l(!0);const{error:f}=await ue.auth.updateUser({password:e});l(!1),f?V.error(f.message):(d(!0),setTimeout(()=>h("/"),2e3))};return c?o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center px-5",children:o.jsxs("div",{className:"text-center",children:[o.jsx(e1,{className:"w-16 h-16 text-emerald-500 mx-auto mb-4"}),o.jsx("h2",{className:"text-xl font-bold text-foreground",children:" "}),o.jsx("p",{className:"text-muted-foreground mt-2",children:"   ..."})]})}):o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center px-5",children:o.jsx("div",{className:"w-full max-w-app",children:o.jsxs("div",{className:"bg-card rounded-xl shadow-md p-8 max-[640px]:p-6",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("img",{src:vj,alt:"INOPNC",className:"w-[200px] h-auto mx-auto mb-5 object-contain"}),o.jsx("h1",{className:"text-xl font-bold text-foreground",children:"  "})]}),o.jsxs("div",{className:"flex flex-col gap-4",children:[o.jsxs("div",{className:"flex flex-col gap-1.5",children:[o.jsx("label",{className:"text-sm font-semibold text-muted-foreground",children:" "}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:s?"text":"password",value:e,onChange:f=>t(f.target.value),placeholder:"8  ",className:"w-full h-12 rounded-lg border border-border px-4 pr-12 text-base bg-card text-foreground placeholder:text-muted-foreground outline-none focus:border-primary"}),o.jsx("button",{onClick:()=>a(!s),className:"absolute right-4 top-1/2 -translate-y-1/2 text-muted-foreground bg-transparent border-none cursor-pointer",children:s?o.jsx(Ed,{className:"w-5 h-5"}):o.jsx(En,{className:"w-5 h-5"})})]})]}),o.jsxs("div",{className:"flex flex-col gap-1.5",children:[o.jsx("label",{className:"text-sm font-semibold text-muted-foreground",children:" "}),o.jsx("input",{type:"password",value:r,onChange:f=>n(f.target.value),placeholder:"  ",className:"w-full h-12 rounded-lg border border-border px-4 text-base bg-card text-foreground placeholder:text-muted-foreground outline-none focus:border-primary"})]}),o.jsx("button",{onClick:u,disabled:i,className:"w-full h-12 bg-header-navy text-white rounded-lg border-none text-base font-semibold cursor-pointer transition-all hover:opacity-90 disabled:opacity-50",children:i?" ...":" "})]})]})})})}const zA=()=>{const e=Ol();return m.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),o.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),o.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),o.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})},WA={sites:5,workers:12,partners:3,pending:4,totalWorklogs:28,docs:15,recentWorklogs:[{id:"m1",site_name:"  ",status:"submitted",work_date:"2026-02-23",created_at:""},{id:"m2",site_name:" ",status:"approved",work_date:"2026-02-22",created_at:""},{id:"m3",site_name:" ",status:"rejected",work_date:"2026-02-21",created_at:""},{id:"m4",site_name:" ",status:"submitted",work_date:"2026-02-21",created_at:""},{id:"m5",site_name:" T2 ",status:"draft",work_date:"2026-02-20",created_at:""}]};function qA({onNavigate:e}){const{isTestMode:t}=St(),{data:r,isLoading:n}=$t({queryKey:["admin-dashboard-stats",t],queryFn:async()=>{if(t)return WA;const[{count:a},{count:i},{count:l},{count:c},{count:d},{count:h},{data:u}]=await Promise.all([ue.from("sites").select("*",{count:"exact",head:!0}),ue.from("user_roles").select("*",{count:"exact",head:!0}).eq("role","worker"),ue.from("user_roles").select("*",{count:"exact",head:!0}).eq("role","partner"),ue.from("worklogs").select("*",{count:"exact",head:!0}).in("status",["submitted","pending","draft"]),ue.from("worklogs").select("*",{count:"exact",head:!0}),ue.from("documents").select("*",{count:"exact",head:!0}),ue.from("worklogs").select("id, site_name, status, work_date, created_at").order("created_at",{ascending:!1}).limit(5)]);return{sites:a||0,workers:i||0,partners:l||0,pending:c||0,totalWorklogs:d||0,docs:h||0,recentWorklogs:u||[]}}}),s=m.useMemo(()=>[{key:"site",label:" ",value:(r==null?void 0:r.sites)??0,icon:Ft,color:"text-blue-500",bg:"bg-blue-50",border:"border-blue-200",tab:"site"},{key:"worker",label:"",value:(r==null?void 0:r.workers)??0,icon:bl,color:"text-emerald-600",bg:"bg-emerald-50",border:"border-emerald-200",tab:"user"},{key:"partner",label:"",value:(r==null?void 0:r.partners)??0,icon:Td,color:"text-violet-600",bg:"bg-violet-50",border:"border-violet-200",tab:"partner"},{key:"pending",label:"",value:(r==null?void 0:r.pending)??0,icon:O3,color:"text-amber-600",bg:"bg-amber-50",border:"border-amber-200",tab:"worklog"},{key:"worklogs",label:" ",value:(r==null?void 0:r.totalWorklogs)??0,icon:kr,color:"text-primary",bg:"bg-primary/5",border:"border-primary/20",tab:"worklog"},{key:"docs",label:"",value:(r==null?void 0:r.docs)??0,icon:Ga,color:"text-text-sub",bg:"bg-muted",border:"border-border",tab:"doc"}],[r]);return n?o.jsx("div",{className:"flex items-center justify-center py-20",children:o.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):o.jsxs("div",{className:"animate-fade-in",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h1",{className:"text-xl-app font-[800] text-header-navy mb-1",children:""}),o.jsx("p",{className:"text-[15px] text-text-sub font-medium",children:"   "})]}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 mb-6",children:s.map(a=>o.jsxs("button",{onClick:()=>e(a.tab),className:U("p-4 rounded-2xl border flex flex-col gap-2 cursor-pointer transition-all active:scale-[0.98] hover:shadow-md text-left",a.bg,a.border),children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(a.icon,{className:U("w-5 h-5",a.color)}),o.jsx(m0,{className:"w-4 h-4 text-muted-foreground"})]}),o.jsx("span",{className:U("text-[28px] font-[800] leading-tight",a.color),children:a.value}),o.jsx("span",{className:"text-[13px] font-bold text-text-sub",children:a.label})]},a.key))}),o.jsxs("div",{className:"bg-card rounded-2xl shadow-soft p-5 mb-6",children:[o.jsxs("h3",{className:"text-[17px] font-[800] text-header-navy mb-4 flex items-center gap-2",children:[o.jsx(R3,{className:"w-5 h-5"}),"  "]}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:[{label:" ",tab:"worklog",icon:kr,cls:"bg-indigo-50 text-indigo-600 border-indigo-200"},{label:" ",tab:"site",icon:Ft,cls:"bg-blue-50 text-blue-600 border-blue-200"},{label:" ",tab:"partner",icon:Td,cls:"bg-violet-50 text-violet-600 border-violet-200"},{label:" ",tab:"user",icon:bl,cls:"bg-emerald-50 text-emerald-600 border-emerald-200"},{label:" ",tab:"doc",icon:Ga,cls:"bg-muted text-text-sub border-border"}].map(a=>o.jsxs("button",{onClick:()=>e(a.tab),className:U("h-[52px] rounded-xl border flex items-center justify-center gap-2 text-[14px] font-bold cursor-pointer transition-all active:scale-[0.98]",a.cls),children:[o.jsx(a.icon,{className:"w-4 h-4"}),a.label]},a.label))})]}),o.jsxs("div",{className:"bg-card rounded-2xl shadow-soft p-5",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h3",{className:"text-[17px] font-[800] text-header-navy flex items-center gap-2",children:[o.jsx(kr,{className:"w-5 h-5"}),"  "]}),o.jsxs("button",{onClick:()=>e("worklog"),className:"text-[13px] font-bold text-primary bg-transparent border-none cursor-pointer flex items-center gap-1",children:[" ",o.jsx(m0,{className:"w-3.5 h-3.5"})]})]}),((r==null?void 0:r.recentWorklogs)||[]).length===0?o.jsx("p",{className:"text-[14px] text-muted-foreground text-center py-6",children:"  "}):o.jsx("div",{className:"space-y-2",children:((r==null?void 0:r.recentWorklogs)||[]).map(a=>o.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-dashed border-border last:border-0",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"text-[15px] font-bold text-foreground truncate",children:a.site_name}),o.jsx("div",{className:"text-[13px] text-text-sub font-medium",children:a.work_date})]}),o.jsx("span",{className:U("text-[12px] font-bold px-2.5 py-1 rounded-full",a.status==="approved"?"bg-muted text-muted-foreground":a.status==="rejected"?"bg-red-50 text-red-600":"bg-indigo-50 text-indigo-600"),children:a.status==="approved"?"":a.status==="rejected"?"":""})]},a.id))})]})]})}function HA(){const{isTestMode:e}=St(),[t,r]=m.useState(""),[n,s]=m.useState("latest"),[a,i]=m.useState("all"),[l,c]=m.useState(10),[d,h]=m.useState(()=>{try{return new Set(JSON.parse(localStorage.getItem("admin_pinned_ids")||"[]"))}catch{return new Set}}),[u,f]=m.useState(null),[p,b]=m.useState(""),g=Vt(),w=[{id:"mw1",name:"",role:"",affiliation:"",site:"  ",siteId:"",member:"",process:"",workType:"",location:"A 3",man:8,cumDays:15,cumMan:120,task:"  ",status:"pending",latestDate:"2026-02-23T09:00:00",phone:"010-1234-5678",pinned:!1,worklogId:"mw1",materials:" D13 (50)"},{id:"mw2",name:"",role:"",affiliation:"",site:" ",siteId:"",member:"",process:"",workType:"",location:"B 1",man:12,cumDays:22,cumMan:264,task:"  ",status:"pending",latestDate:"2026-02-22T14:30:00",phone:"010-5678-1234",pinned:!1,worklogId:"mw2",materials:" (20kg)"},{id:"mw3",name:"",role:"",affiliation:"",site:" ",siteId:"",member:"",process:"",workType:"",location:"C",man:6,cumDays:8,cumMan:48,task:"  ",status:"approved",latestDate:"2026-02-21T16:00:00",phone:"010-9876-5432",pinned:!1,worklogId:"mw3",materials:" 25-21-15 (40)"},{id:"mw4",name:"",role:"",affiliation:"",site:" ",siteId:"",member:"",process:"",workType:"",location:"4",man:10,cumDays:30,cumMan:300,task:"  ",status:"rejected",latestDate:"2026-02-20T11:00:00",phone:"010-1111-2222",pinned:!1,worklogId:"mw4",materials:" D16 (30)   (5kg)"},{id:"mw5",name:"",role:"",affiliation:"",site:" T2 ",siteId:"",member:"",process:"",workType:"",location:" E",man:14,cumDays:45,cumMan:630,task:"  ",status:"pending",latestDate:"2026-02-23T08:00:00",phone:"",pinned:!1,worklogId:"mw5",materials:" (120)   (80)"}],{data:x=[],isLoading:y}=$t({queryKey:["admin-all-worklogs",e],queryFn:async()=>{if(e)return w;const{data:T,error:M}=await ue.from("worklogs").select(`
          id, site_name, site_id, work_date, status, created_by, created_at, dept, weather,
          worklog_manpower(worker_name, work_hours),
          worklog_worksets(member, process, work_type, block, dong, floor),
          worklog_materials(name, qty)
        `).order("created_at",{ascending:!1}).limit(200);if(M)throw M;const z=[...new Set((T||[]).map(Q=>Q.created_by))],{data:F}=await ue.from("profiles").select("user_id, name, phone, affiliation").in("user_id",z),W={};return F==null||F.forEach(Q=>{W[Q.user_id]=Q}),(T||[]).map(Q=>{const K=W[Q.created_by],ne=Q.worklog_manpower||[],A=Q.worklog_worksets||[],O=Q.worklog_materials||[],L=A[0],re=ne.reduce((G,le)=>G+(le.work_hours||0),0),ee=L&&[L.block,L.dong,L.floor].filter(Boolean).join(" ")||"";return{id:Q.id,name:(K==null?void 0:K.name)||"",role:"",affiliation:(K==null?void 0:K.affiliation)||"",site:Q.site_name,siteId:Q.site_id,member:(L==null?void 0:L.member)||"-",process:(L==null?void 0:L.process)||"-",workType:(L==null?void 0:L.work_type)||"-",location:ee,man:re,cumDays:0,cumMan:0,task:A.map(G=>`${G.member||""} ${G.process||""}`).join(", ")||"  ",status:Q.status==="draft"||Q.status==="submitted"?"pending":Q.status,latestDate:Q.created_at,phone:(K==null?void 0:K.phone)||"",pinned:!1,worklogId:Q.id,materials:O.map(G=>`${G.name} (${G.qty})`).join("  ")||"-"}})}}),v=tr({mutationFn:async({worklogId:T,newStatus:M})=>{const{error:z}=await ue.from("worklogs").update({status:M}).eq("id",T);if(z)throw z},onSuccess:()=>{g.invalidateQueries({queryKey:["admin-all-worklogs"]}),f(null),b(""),V.success(" ")}}),k=m.useCallback(T=>{h(M=>{const z=new Set(M);return z.has(T)?z.delete(T):z.add(T),localStorage.setItem("admin_pinned_ids",JSON.stringify([...z])),z})},[]),N=m.useMemo(()=>x.map(T=>({...T,pinned:d.has(T.id)})),[x,d]),S=m.useMemo(()=>{let T=N.filter(M=>{const z=t.toLowerCase(),F=!z||M.name.toLowerCase().includes(z)||M.site.toLowerCase().includes(z),W=a==="all"||M.status===a;return F&&W});return T.sort((M,z)=>M.pinned!==z.pinned?M.pinned?-1:1:n==="name"?M.name.localeCompare(z.name,"ko"):new Date(z.latestDate).getTime()-new Date(M.latestDate).getTime()),T},[N,t,a,n]),_=S.slice(0,l),P=m.useMemo(()=>({all:N.length,pending:N.filter(T=>T.status==="pending").length,approved:N.filter(T=>T.status==="approved").length,rejected:N.filter(T=>T.status==="rejected").length}),[N]),D=T=>{if(!T)return"";const M=new Date(T);return`${String(M.getMonth()+1).padStart(2,"0")}.${String(M.getDate()).padStart(2,"0")}`};return y?o.jsx("div",{className:"py-20 text-center text-muted-foreground",children:" ..."}):o.jsxs("div",{className:"animate-fade-in",children:[o.jsx("h1",{className:"text-xl-app font-[800] text-header-navy mb-1",children:" "}),o.jsx("p",{className:"text-[15px] text-text-sub font-medium mb-5",children:"   /"}),o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx("input",{value:t,onChange:T=>r(T.target.value),placeholder:"   ",className:"w-full h-[48px] bg-card border border-border rounded-xl pl-4 pr-10 text-[15px] font-medium text-foreground placeholder:text-muted-foreground outline-none transition-all focus:border-primary focus:shadow-input-focus"}),t?o.jsx("button",{onClick:()=>r(""),className:"absolute right-3 top-1/2 -translate-y-1/2",children:o.jsx(He,{className:"w-4 h-4 text-muted-foreground"})}):o.jsx(_r,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"})]}),o.jsxs("select",{value:n,onChange:T=>s(T.target.value),className:"w-[90px] h-[48px] bg-card border border-border rounded-xl px-3 text-[14px] font-semibold text-foreground appearance-none cursor-pointer outline-none",children:[o.jsx("option",{value:"latest",children:""}),o.jsx("option",{value:"name",children:""})]})]}),o.jsx("div",{className:"grid grid-cols-4 gap-2 mb-5",children:[{key:"all",label:"",val:P.all,cls:"bg-blue-50 text-blue-500 border-blue-200"},{key:"pending",label:"",val:P.pending,cls:"bg-indigo-50 text-indigo-600 border-indigo-200"},{key:"approved",label:"",val:P.approved,cls:"bg-muted text-text-sub border-border"},{key:"rejected",label:"",val:P.rejected,cls:"bg-red-50 text-red-600 border-red-200"}].map(T=>o.jsxs("button",{onClick:()=>i(T.key),className:U("p-3 rounded-xl text-center flex flex-col items-center gap-0.5 border cursor-pointer transition-all active:scale-[0.98]",T.cls,a===T.key&&"ring-2 ring-primary/30"),children:[o.jsx("span",{className:"text-[20px] font-[800]",children:T.val}),o.jsx("span",{className:"text-[12px] font-bold",children:T.label})]},T.key))}),S.length===0?o.jsx("div",{className:"text-center py-16 text-muted-foreground",children:" "}):o.jsx("div",{className:"space-y-3",children:_.map(T=>o.jsxs("div",{className:U("bg-card rounded-2xl shadow-soft overflow-hidden relative",T.pinned&&"border-2 border-primary"),children:[o.jsx("span",{className:U("absolute top-0 right-0 text-[11px] font-bold px-3 py-1.5 text-white rounded-bl-xl z-10",T.status==="pending"?"bg-indigo-500":T.status==="approved"?"bg-muted-foreground":"bg-destructive"),children:T.status==="pending"?"":T.status==="approved"?"":""}),o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("span",{className:"text-[18px] font-[800] text-header-navy",children:T.name}),o.jsx("span",{className:"text-[13px] font-semibold text-text-sub",children:T.affiliation}),o.jsx("button",{onClick:()=>k(T.id),className:U("ml-auto p-1",T.pinned?"text-primary":"text-border"),children:T.pinned?o.jsx(lu,{className:"w-4 h-4 fill-current"}):o.jsx(iu,{className:"w-4 h-4"})})]}),o.jsx("div",{className:"text-[15px] font-bold text-primary mb-1",children:T.site}),o.jsxs("div",{className:"text-[13px] text-text-sub font-medium mb-2",children:[D(T.latestDate),"  ",T.member,"  ",T.process,"  ",T.location]}),o.jsxs("div",{className:"grid grid-cols-3 bg-muted/50 rounded-xl p-2.5 border border-border/50 mb-3",children:[o.jsxs("div",{className:"text-center border-r border-border",children:[o.jsx("span",{className:"block text-[16px] font-[800] text-primary",children:T.man}),o.jsx("span",{className:"block text-[10px] font-bold text-text-sub",children:" "})]}),o.jsxs("div",{className:"text-center border-r border-border",children:[o.jsxs("span",{className:"block text-[16px] font-[800] text-primary",children:[T.cumDays,""]}),o.jsx("span",{className:"block text-[10px] font-bold text-text-sub",children:" "})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("span",{className:"block text-[16px] font-[800] text-primary",children:T.cumMan}),o.jsx("span",{className:"block text-[10px] font-bold text-text-sub",children:" "})]})]}),o.jsxs("div",{className:"flex gap-2",children:[T.status==="pending"&&o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:()=>v.mutate({worklogId:T.worklogId,newStatus:"approved"}),className:"flex-1 h-10 bg-emerald-50 text-emerald-700 border border-emerald-200 rounded-xl font-bold text-[13px] flex items-center justify-center gap-1 cursor-pointer active:scale-[0.98]",children:[o.jsx(ha,{className:"w-3.5 h-3.5"})," "]}),o.jsxs("button",{onClick:()=>{f(T),b("")},className:"flex-1 h-10 bg-red-50 text-red-600 border border-red-200 rounded-xl font-bold text-[13px] flex items-center justify-center gap-1 cursor-pointer active:scale-[0.98]",children:[o.jsx(Nm,{className:"w-3.5 h-3.5"})," "]})]}),T.phone&&o.jsx("a",{href:`tel:${T.phone}`,className:"h-10 px-4 bg-blue-50 text-blue-600 border border-blue-200 rounded-xl font-bold text-[13px] flex items-center justify-center gap-1 no-underline",children:o.jsx(zs,{className:"w-3.5 h-3.5"})}),o.jsxs("button",{onClick:()=>f(T),className:"h-10 px-4 bg-muted text-text-sub border border-border rounded-xl font-bold text-[13px] flex items-center justify-center gap-1 cursor-pointer active:scale-[0.98]",children:[o.jsx(Ga,{className:"w-3.5 h-3.5"})," "]})]})]})]},T.id))}),l<S.length&&o.jsxs("button",{onClick:()=>c(T=>T+10),className:"w-full h-[48px] mt-4 bg-card border border-border rounded-full text-text-sub font-semibold text-[14px] flex items-center justify-center gap-1 cursor-pointer hover:bg-muted",children:["  ",o.jsx(Nt,{className:"w-4 h-4"})]}),u&&o.jsx("div",{className:"fixed inset-0 bg-black/50 z-[2000] flex items-end md:items-center justify-center",onClick:()=>f(null),children:o.jsxs("div",{className:"w-full max-w-[500px] bg-card rounded-t-[20px] md:rounded-2xl p-6 max-h-[85vh] overflow-y-auto animate-slide-up",onClick:T=>T.stopPropagation(),children:[o.jsxs("div",{className:"flex items-center justify-between mb-5",children:[o.jsx("h3",{className:"text-[18px] font-[800] text-header-navy",children:" "}),o.jsx("button",{onClick:()=>f(null),className:"bg-transparent border-none cursor-pointer p-1",children:o.jsx(He,{className:"w-5 h-5 text-text-sub"})})]}),o.jsxs("div",{className:"space-y-3 mb-4",children:[o.jsx(Qo,{label:"",value:`${u.name} (${u.affiliation})`}),o.jsx(Qo,{label:"",value:u.site}),o.jsx(Qo,{label:"",value:u.task}),o.jsx(Qo,{label:"",value:`${u.member}  ${u.process}  ${u.location}`}),o.jsx(Qo,{label:"",value:`${u.man} `}),o.jsx(Qo,{label:"",value:u.materials})]}),u.status==="pending"&&o.jsxs("div",{className:"border-t border-border pt-4",children:[o.jsx("textarea",{value:p,onChange:T=>b(T.target.value),placeholder:"   (  )",className:"w-full min-h-[80px] p-3 border border-border rounded-xl text-[14px] resize-none outline-none focus:border-primary mb-3"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>v.mutate({worklogId:u.worklogId,newStatus:"approved"}),className:"flex-1 h-12 bg-primary text-primary-foreground rounded-xl font-bold text-[15px] cursor-pointer active:scale-[0.98]",children:""}),o.jsx("button",{onClick:()=>{if(!p.trim()){V.error("  ");return}v.mutate({worklogId:u.worklogId,newStatus:"rejected"})},className:"flex-1 h-12 bg-destructive text-destructive-foreground rounded-xl font-bold text-[15px] cursor-pointer active:scale-[0.98]",children:""})]})]})]})})]})}function Qo({label:e,value:t}){return o.jsxs("div",{className:"bg-muted/50 rounded-xl p-3 border border-border/50",children:[o.jsx("div",{className:"text-[12px] font-bold text-text-sub mb-1",children:e}),o.jsx("div",{className:"text-[15px] font-bold text-foreground",children:t})]})}function VA(){const{user:e,isTestMode:t}=St(),{isAdmin:r}=Zn(),n=Vt(),[s,a]=m.useState(""),[i,l]=m.useState("all"),[c,d]=m.useState(!1),[h,u]=m.useState(null),[f,p]=m.useState(null),[b,g]=m.useState(""),[w,x]=m.useState(""),[y,v]=m.useState(""),[k,N]=m.useState(""),[S,_]=m.useState(""),P=[{id:"s1",name:"  ",address:"   123",status:"",manager_name:"",manager_phone:"010-1111-2222",created_at:"2026-01-15",memberCount:8},{id:"s2",name:" ",address:"    456",status:"",manager_name:"",manager_phone:"010-9999-0000",created_at:"2026-01-20",memberCount:12},{id:"s3",name:" ",address:"   789",status:"",manager_name:null,manager_phone:null,created_at:"2026-02-01",memberCount:0},{id:"s4",name:" ",address:"   101",status:"",manager_name:"",manager_phone:"010-9876-5432",created_at:"2025-11-01",memberCount:6},{id:"s5",name:" T2 ",address:"    272",status:"",manager_name:"",manager_phone:"010-3333-4444",created_at:"2025-10-15",memberCount:15}],{data:D=[],isLoading:T}=$t({queryKey:["admin-sites",t],queryFn:async()=>{if(t)return P;const{data:O,error:L}=await ue.from("sites").select("*").order("created_at",{ascending:!1});if(L)throw L;const{data:re}=await ue.from("site_members").select("site_id"),ee={};return re==null||re.forEach(G=>{ee[G.site_id]=(ee[G.site_id]||0)+1}),(O||[]).map(G=>({...G,memberCount:ee[G.id]||0}))}}),M=()=>r?!0:(V.error("  ."),!1),z=tr({mutationFn:async O=>{if(!M())throw new Error("admin_only");const{error:L}=await ue.from("sites").insert({...O,created_by:e==null?void 0:e.id});if(L)throw L},onSuccess:()=>{n.invalidateQueries({queryKey:["admin-sites"]}),d(!1),Q(),V.success(" ")},onError:()=>V.error(" ")}),F=tr({mutationFn:async({id:O,...L})=>{if(!M())throw new Error("admin_only");const{error:re}=await ue.from("sites").update(L).eq("id",O);if(re)throw re},onSuccess:()=>{n.invalidateQueries({queryKey:["admin-sites"]}),u(null),Q(),V.success("  ")}}),W=tr({mutationFn:async O=>{if(!M())throw new Error("admin_only");const{error:L}=await ue.from("sites").delete().eq("id",O);if(L)throw L},onSuccess:()=>{n.invalidateQueries({queryKey:["admin-sites"]}),V.success(" ")}}),Q=()=>{g(""),x(""),v(""),N(""),_("")},K=O=>{u(O),g(O.name),x(O.address||""),v(O.status),N(O.manager_name||""),_(O.manager_phone||"")},ne=m.useMemo(()=>D.filter(O=>{const L=s.toLowerCase(),re=!L||O.name.toLowerCase().includes(L)||(O.address||"").toLowerCase().includes(L),ee=i==="all"||O.status===i;return re&&ee}),[D,s,i]),A=m.useMemo(()=>({total:D.length,ing:D.filter(O=>O.status==="").length,wait:D.filter(O=>O.status==="").length,done:D.filter(O=>O.status==="").length}),[D]);return T?o.jsx("div",{className:"py-20 text-center text-muted-foreground",children:" ..."}):o.jsxs("div",{className:"animate-fade-in",children:[o.jsxs("div",{className:"flex items-center justify-between mb-5",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl-app font-[800] text-header-navy mb-1",children:" "}),o.jsx("p",{className:"text-[15px] text-text-sub font-medium",children:" , ,  "})]}),o.jsxs("button",{onClick:()=>{M()&&(Q(),d(!0))},className:"h-10 px-4 bg-primary text-primary-foreground rounded-xl font-bold text-[14px] flex items-center gap-1.5 cursor-pointer active:scale-[0.98]",children:[o.jsx(km,{className:"w-4 h-4"})," "]})]}),o.jsx("div",{className:"grid grid-cols-4 gap-2 mb-4",children:[{key:"all",label:"",val:A.total,cls:"bg-blue-50 text-blue-500 border-blue-200"},{key:"",label:"",val:A.ing,cls:"bg-emerald-50 text-emerald-600 border-emerald-200"},{key:"",label:"",val:A.wait,cls:"bg-violet-50 text-violet-600 border-violet-200"},{key:"",label:"",val:A.done,cls:"bg-muted text-text-sub border-border"}].map(O=>o.jsxs("button",{onClick:()=>l(O.key),className:U("p-2.5 rounded-xl text-center border cursor-pointer transition-all active:scale-[0.98]",O.cls,i===O.key&&"ring-2 ring-primary/30"),children:[o.jsx("div",{className:"text-[18px] font-[800]",children:O.val}),o.jsx("div",{className:"text-[11px] font-bold",children:O.label})]},O.key))}),o.jsxs("div",{className:"relative mb-4",children:[o.jsx("input",{value:s,onChange:O=>a(O.target.value),placeholder:"   ",className:"w-full h-[48px] bg-card border border-border rounded-xl pl-4 pr-10 text-[15px] font-medium outline-none focus:border-primary focus:shadow-input-focus"}),s?o.jsx("button",{onClick:()=>a(""),className:"absolute right-3 top-1/2 -translate-y-1/2",children:o.jsx(He,{className:"w-4 h-4 text-muted-foreground"})}):o.jsx(_r,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"})]}),o.jsx("div",{className:"space-y-3",children:ne.map(O=>o.jsxs("div",{className:"bg-card rounded-2xl shadow-soft p-4",children:[o.jsxs("div",{className:"flex items-start justify-between mb-2",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"text-[17px] font-[800] text-header-navy truncate",children:O.name}),O.address&&o.jsx("div",{className:"text-[13px] text-text-sub mt-0.5 truncate",children:O.address})]}),o.jsx("span",{className:U("text-[11px] font-bold px-2.5 py-1 rounded-full text-white ml-2 flex-shrink-0",O.status===""?"bg-blue-500":O.status===""?"bg-violet-500":"bg-muted-foreground"),children:O.status})]}),o.jsxs("div",{className:"flex items-center gap-3 text-[13px] text-text-sub font-medium mb-3",children:[O.manager_name&&o.jsxs("span",{children:[" ",O.manager_name]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(bl,{className:"w-3.5 h-3.5"})," ",O.memberCount,""]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>{M()&&K(O)},className:"flex-1 h-9 bg-blue-50 text-blue-600 border border-blue-200 rounded-lg font-bold text-[13px] flex items-center justify-center gap-1 cursor-pointer active:scale-[0.98]",children:[o.jsx(i1,{className:"w-3.5 h-3.5"})," "]}),o.jsxs("button",{onClick:()=>p(O.id),className:"flex-1 h-9 bg-violet-50 text-violet-600 border border-violet-200 rounded-lg font-bold text-[13px] flex items-center justify-center gap-1 cursor-pointer active:scale-[0.98]",children:[o.jsx(Sm,{className:"w-3.5 h-3.5"})," "]}),o.jsx("button",{onClick:()=>{M()&&confirm(" ?")&&W.mutate(O.id)},className:"h-9 px-3 bg-red-50 text-red-600 border border-red-200 rounded-lg cursor-pointer active:scale-[0.98]",children:o.jsx(Qa,{className:"w-3.5 h-3.5"})})]})]},O.id))}),(c||h)&&o.jsx(KA,{title:h?" ":" ",name:b,setName:g,addr:w,setAddr:x,status:y,setStatus:v,manager:k,setManager:N,phone:S,setPhone:_,onClose:()=>{d(!1),u(null),Q()},onSubmit:()=>{if(M()){if(!b.trim()){V.error(" ");return}h?F.mutate({id:h.id,name:b,address:w,status:y,manager_name:k,manager_phone:S}):z.mutate({name:b,address:w,status:y,manager_name:k,manager_phone:S})}},isEdit:!!h}),f&&o.jsx(GA,{siteId:f,onClose:()=>p(null)})]})}function KA({title:e,name:t,setName:r,addr:n,setAddr:s,status:a,setStatus:i,manager:l,setManager:c,phone:d,setPhone:h,onClose:u,onSubmit:f,isEdit:p}){return o.jsx("div",{className:"fixed inset-0 bg-black/50 z-[2000] flex items-end md:items-center justify-center",onClick:u,children:o.jsxs("div",{className:"w-full max-w-[500px] bg-card rounded-t-[20px] md:rounded-2xl p-6 animate-slide-up",onClick:b=>b.stopPropagation(),children:[o.jsxs("div",{className:"flex items-center justify-between mb-5",children:[o.jsx("h3",{className:"text-[18px] font-[800] text-header-navy",children:e}),o.jsx("button",{onClick:u,className:"bg-transparent border-none cursor-pointer",children:o.jsx(He,{className:"w-5 h-5 text-text-sub"})})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(Pc,{label:" *",value:t,onChange:r,placeholder:" "}),o.jsx(Pc,{label:"",value:n,onChange:s,placeholder:" "}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[13px] font-bold text-text-sub mb-1",children:""}),o.jsxs("select",{value:a,onChange:b=>i(b.target.value),className:"w-full h-[44px] bg-card border border-border rounded-xl px-3 text-[14px] font-medium outline-none",children:[o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""})]})]}),o.jsx(Pc,{label:"",value:l,onChange:c,placeholder:""}),o.jsx(Pc,{label:"",value:d,onChange:h,placeholder:"010-0000-0000"})]}),o.jsx("button",{onClick:f,className:"w-full h-12 mt-5 bg-primary text-primary-foreground rounded-xl font-bold text-[15px] cursor-pointer active:scale-[0.98]",children:p?" ":""})]})})}function Pc({label:e,value:t,onChange:r,placeholder:n}){return o.jsxs("div",{children:[o.jsx("label",{className:"block text-[13px] font-bold text-text-sub mb-1",children:e}),o.jsx("input",{value:t,onChange:s=>r(s.target.value),placeholder:n,className:"w-full h-[44px] bg-card border border-border rounded-xl px-3 text-[14px] font-medium outline-none focus:border-primary"})]})}function GA({siteId:e,onClose:t}){const r=Vt(),[n,s]=m.useState(""),{data:a=[]}=$t({queryKey:["site-members",e],queryFn:async()=>{const{data:u,error:f}=await ue.from("site_members").select("*, profiles:user_id(name, affiliation, phone)").eq("site_id",e);if(f)throw f;return u||[]}}),{data:i=[]}=$t({queryKey:["all-users-for-assign"],queryFn:async()=>{const{data:u,error:f}=await ue.from("profiles").select("user_id, name, affiliation, phone");if(f)throw f;return u||[]}}),l=new Set(a.map(u=>u.user_id)),c=i.filter(u=>!l.has(u.user_id)&&(!n||u.name.toLowerCase().includes(n.toLowerCase())||(u.affiliation||"").toLowerCase().includes(n.toLowerCase()))),d=tr({mutationFn:async u=>{const{error:f}=await ue.from("site_members").insert({site_id:e,user_id:u,role:"worker"});if(f)throw f},onSuccess:()=>{r.invalidateQueries({queryKey:["site-members",e]}),r.invalidateQueries({queryKey:["admin-sites"]}),V.success(" ")}}),h=tr({mutationFn:async u=>{const{error:f}=await ue.from("site_members").delete().eq("id",u);if(f)throw f},onSuccess:()=>{r.invalidateQueries({queryKey:["site-members",e]}),r.invalidateQueries({queryKey:["admin-sites"]}),V.success(" ")}});return o.jsx("div",{className:"fixed inset-0 bg-black/50 z-[2000] flex items-end md:items-center justify-center",onClick:t,children:o.jsxs("div",{className:"w-full max-w-[500px] bg-card rounded-t-[20px] md:rounded-2xl p-6 max-h-[85vh] overflow-y-auto animate-slide-up",onClick:u=>u.stopPropagation(),children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-[18px] font-[800] text-header-navy",children:" "}),o.jsx("button",{onClick:t,className:"bg-transparent border-none cursor-pointer",children:o.jsx(He,{className:"w-5 h-5 text-text-sub"})})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"text-[14px] font-bold text-text-sub mb-2",children:["   (",a.length,")"]}),a.length===0?o.jsx("p",{className:"text-[13px] text-muted-foreground",children:"  "}):o.jsx("div",{className:"space-y-2",children:a.map(u=>{var f,p;return o.jsxs("div",{className:"flex items-center justify-between bg-muted/50 rounded-xl p-3",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-[14px] font-bold text-foreground",children:((f=u.profiles)==null?void 0:f.name)||""}),o.jsx("span",{className:"text-[12px] text-text-sub ml-2",children:((p=u.profiles)==null?void 0:p.affiliation)||""})]}),o.jsx("button",{onClick:()=>h.mutate(u.id),className:"text-destructive bg-transparent border-none cursor-pointer p-1",children:o.jsx(Qa,{className:"w-4 h-4"})})]},u.id)})})]}),o.jsxs("div",{className:"border-t border-border pt-4",children:[o.jsx("div",{className:"text-[14px] font-bold text-text-sub mb-2",children:" "}),o.jsx("input",{value:n,onChange:u=>s(u.target.value),placeholder:"   ",className:"w-full h-[44px] bg-card border border-border rounded-xl px-3 text-[14px] font-medium outline-none focus:border-primary mb-3"}),o.jsx("div",{className:"space-y-2 max-h-[200px] overflow-y-auto",children:c.slice(0,20).map(u=>o.jsxs("div",{className:"flex items-center justify-between bg-card border border-border rounded-xl p-3",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-[14px] font-bold text-foreground",children:u.name}),o.jsx("span",{className:"text-[12px] text-text-sub ml-2",children:u.affiliation||""})]}),o.jsx("button",{onClick:()=>d.mutate(u.user_id),className:"h-8 px-3 bg-primary/10 text-primary rounded-lg font-bold text-[12px] cursor-pointer active:scale-[0.98]",children:o.jsx(Sm,{className:"w-3.5 h-3.5"})})]},u.user_id))})]})]})})}function QA(){const{isTestMode:e}=St(),[t,r]=m.useState(""),[n,s]=m.useState("all"),a=[{user_id:"u1",name:"",phone:"010-1234-5678",affiliation:"",role:"worker",siteCount:3,worklogCount:15},{user_id:"u2",name:"",phone:"010-5678-1234",affiliation:"",role:"worker",siteCount:2,worklogCount:22},{user_id:"u3",name:"",phone:"010-9876-5432",affiliation:"",role:"worker",siteCount:1,worklogCount:8},{user_id:"u4",name:"",phone:"010-1111-2222",affiliation:"",role:"admin",siteCount:5,worklogCount:0},{user_id:"u5",name:"",phone:"010-3333-4444",affiliation:"",role:"worker",siteCount:4,worklogCount:45},{user_id:"u6",name:"",phone:"010-5555-6666",affiliation:"",role:"partner",siteCount:2,worklogCount:0},{user_id:"u7",name:"",phone:"010-7777-8888",affiliation:"",role:"partner",siteCount:3,worklogCount:0},{user_id:"u8",name:"",phone:"010-9999-0000",affiliation:"",role:"admin",siteCount:5,worklogCount:0}],{data:i=[],isLoading:l}=$t({queryKey:["admin-users",e],queryFn:async()=>{if(e)return a;const{data:f,error:p}=await ue.from("profiles").select("user_id, name, phone, affiliation");if(p)throw p;const{data:b,error:g}=await ue.from("user_roles").select("user_id, role");if(g)throw g;const{data:w}=await ue.from("site_members").select("user_id"),x={};w==null||w.forEach(N=>{x[N.user_id]=(x[N.user_id]||0)+1});const{data:y}=await ue.from("worklogs").select("created_by"),v={};y==null||y.forEach(N=>{v[N.created_by]=(v[N.created_by]||0)+1});const k={};return b==null||b.forEach(N=>{k[N.user_id]=N.role}),(f||[]).map(N=>({user_id:N.user_id,name:N.name||"",phone:N.phone,affiliation:N.affiliation,role:k[N.user_id]||"worker",siteCount:x[N.user_id]||0,worklogCount:v[N.user_id]||0}))}}),c=m.useMemo(()=>i.filter(f=>{const p=t.toLowerCase(),b=!p||f.name.toLowerCase().includes(p)||(f.affiliation||"").toLowerCase().includes(p),g=n==="all"||f.role===n;return b&&g}),[i,t,n]),d=m.useMemo(()=>({total:i.length,worker:i.filter(f=>f.role==="worker").length,admin:i.filter(f=>f.role==="admin").length,partner:i.filter(f=>f.role==="partner").length}),[i]),h={admin:"",worker:"",partner:""},u={admin:"bg-amber-50 text-amber-700 border-amber-200",worker:"bg-blue-50 text-blue-600 border-blue-200",partner:"bg-violet-50 text-violet-600 border-violet-200"};return l?o.jsx("div",{className:"py-20 text-center text-muted-foreground",children:" ..."}):o.jsxs("div",{className:"animate-fade-in",children:[o.jsx("h1",{className:"text-xl-app font-[800] text-header-navy mb-1",children:" "}),o.jsx("p",{className:"text-[15px] text-text-sub font-medium mb-5",children:"     "}),o.jsx("div",{className:"grid grid-cols-4 gap-2 mb-4",children:[{key:"all",label:"",val:d.total,cls:"bg-blue-50 text-blue-500 border-blue-200"},{key:"worker",label:"",val:d.worker,cls:"bg-emerald-50 text-emerald-600 border-emerald-200"},{key:"admin",label:"",val:d.admin,cls:"bg-amber-50 text-amber-700 border-amber-200"},{key:"partner",label:"",val:d.partner,cls:"bg-violet-50 text-violet-600 border-violet-200"}].map(f=>o.jsxs("button",{onClick:()=>s(f.key),className:U("p-2.5 rounded-xl text-center border cursor-pointer transition-all active:scale-[0.98]",f.cls,n===f.key&&"ring-2 ring-primary/30"),children:[o.jsx("div",{className:"text-[18px] font-[800]",children:f.val}),o.jsx("div",{className:"text-[11px] font-bold",children:f.label})]},f.key))}),o.jsxs("div",{className:"relative mb-4",children:[o.jsx("input",{value:t,onChange:f=>r(f.target.value),placeholder:"   ",className:"w-full h-[48px] bg-card border border-border rounded-xl pl-4 pr-10 text-[15px] font-medium outline-none focus:border-primary focus:shadow-input-focus"}),t?o.jsx("button",{onClick:()=>r(""),className:"absolute right-3 top-1/2 -translate-y-1/2",children:o.jsx(He,{className:"w-4 h-4 text-muted-foreground"})}):o.jsx(_r,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"})]}),c.length===0?o.jsx("div",{className:"text-center py-16 text-muted-foreground",children:" "}):o.jsx("div",{className:"space-y-2",children:c.map(f=>o.jsxs("div",{className:"bg-card rounded-2xl shadow-soft p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center text-[16px] font-[800] text-primary",children:f.name.charAt(0)}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[16px] font-[800] text-header-navy",children:f.name}),o.jsx("div",{className:"text-[13px] text-text-sub font-medium",children:f.affiliation||" "})]})]}),o.jsx("span",{className:U("text-[11px] font-bold px-2.5 py-1 rounded-full border",u[f.role]||u.worker),children:h[f.role]||f.role})]}),o.jsxs("div",{className:"flex items-center gap-4 text-[13px] text-text-sub font-medium",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Ft,{className:"w-3.5 h-3.5"}),"  ",f.siteCount,""]}),o.jsxs("span",{children:[" ",f.worklogCount,""]}),f.phone&&o.jsxs("a",{href:`tel:${f.phone}`,className:"flex items-center gap-1 text-blue-500 no-underline ml-auto",children:[o.jsx(zs,{className:"w-3.5 h-3.5"})," ",f.phone]})]})]},f.user_id))})]})}function YA(){const{isTestMode:e}=St();Vt();const[t,r]=m.useState(""),[n,s]=m.useState(null),[a,i]=m.useState(null),l=[{user_id:"p1",name:"",affiliation:"",phone:"010-5555-6666",siteCount:2,deploymentCount:8},{user_id:"p2",name:"",affiliation:"",phone:"010-7777-8888",siteCount:3,deploymentCount:15},{user_id:"p3",name:"",affiliation:"",phone:"010-4444-3333",siteCount:1,deploymentCount:5}],{data:c=[],isLoading:d}=$t({queryKey:["admin-partners",e],queryFn:async()=>{if(e)return l;const{data:u,error:f}=await ue.from("user_roles").select("user_id").eq("role","partner");if(f)throw f;const p=(u||[]).map(k=>k.user_id);if(p.length===0)return[];const{data:b,error:g}=await ue.from("profiles").select("user_id, name, affiliation, phone").in("user_id",p);if(g)throw g;const{data:w}=await ue.from("site_members").select("user_id").in("user_id",p),x={};w==null||w.forEach(k=>{x[k.user_id]=(x[k.user_id]||0)+1});const{data:y}=await ue.from("partner_deployments").select("partner_user_id").in("partner_user_id",p),v={};return y==null||y.forEach(k=>{v[k.partner_user_id]=(v[k.partner_user_id]||0)+1}),(b||[]).map(k=>({user_id:k.user_id,name:k.name||"",affiliation:k.affiliation,phone:k.phone,siteCount:x[k.user_id]||0,deploymentCount:v[k.user_id]||0}))}}),h=m.useMemo(()=>{const u=t.toLowerCase();return c.filter(f=>!u||f.name.toLowerCase().includes(u)||(f.affiliation||"").toLowerCase().includes(u))},[c,t]);return d?o.jsx("div",{className:"py-20 text-center text-muted-foreground",children:" ..."}):o.jsxs("div",{className:"animate-fade-in",children:[o.jsx("h1",{className:"text-xl-app font-[800] text-header-navy mb-1",children:" "}),o.jsx("p",{className:"text-[15px] text-text-sub font-medium mb-5",children:"     "}),o.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[o.jsxs("div",{className:"p-3.5 rounded-xl text-center bg-violet-50 border border-violet-200",children:[o.jsx("div",{className:"text-[22px] font-[800] text-violet-600",children:c.length}),o.jsx("div",{className:"text-[12px] font-bold text-violet-600",children:""})]}),o.jsxs("div",{className:"p-3.5 rounded-xl text-center bg-blue-50 border border-blue-200",children:[o.jsx("div",{className:"text-[22px] font-[800] text-blue-500",children:c.reduce((u,f)=>u+f.siteCount,0)}),o.jsx("div",{className:"text-[12px] font-bold text-blue-500",children:" "})]}),o.jsxs("div",{className:"p-3.5 rounded-xl text-center bg-emerald-50 border border-emerald-200",children:[o.jsx("div",{className:"text-[22px] font-[800] text-emerald-600",children:c.reduce((u,f)=>u+f.deploymentCount,0)}),o.jsx("div",{className:"text-[12px] font-bold text-emerald-600",children:" "})]})]}),o.jsxs("div",{className:"relative mb-4",children:[o.jsx("input",{value:t,onChange:u=>r(u.target.value),placeholder:"    ",className:"w-full h-[48px] bg-card border border-border rounded-xl pl-4 pr-10 text-[15px] font-medium outline-none focus:border-primary focus:shadow-input-focus"}),t?o.jsx("button",{onClick:()=>r(""),className:"absolute right-3 top-1/2 -translate-y-1/2",children:o.jsx(He,{className:"w-4 h-4 text-muted-foreground"})}):o.jsx(_r,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"})]}),h.length===0?o.jsxs("div",{className:"text-center py-16 text-muted-foreground flex flex-col items-center gap-2",children:[o.jsx(Td,{className:"w-10 h-10 opacity-50"}),o.jsx("p",{children:"  "})]}):o.jsx("div",{className:"space-y-3",children:h.map(u=>o.jsxs("div",{className:"bg-card rounded-2xl shadow-soft p-4",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-violet-100 flex items-center justify-center text-[18px] font-[800] text-violet-600",children:u.name.charAt(0)}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"text-[17px] font-[800] text-header-navy",children:u.name}),o.jsx("div",{className:"text-[13px] text-text-sub font-medium",children:u.affiliation||""})]}),o.jsx("span",{className:"text-[11px] font-bold px-2.5 py-1 rounded-full bg-violet-50 text-violet-600 border border-violet-200",children:""})]}),o.jsxs("div",{className:"grid grid-cols-3 bg-muted/50 rounded-xl p-2.5 border border-border/50 mb-3",children:[o.jsxs("div",{className:"text-center border-r border-border",children:[o.jsx("span",{className:"block text-[16px] font-[800] text-primary",children:u.siteCount}),o.jsx("span",{className:"block text-[10px] font-bold text-text-sub",children:" "})]}),o.jsxs("div",{className:"text-center border-r border-border",children:[o.jsx("span",{className:"block text-[16px] font-[800] text-primary",children:u.deploymentCount}),o.jsx("span",{className:"block text-[10px] font-bold text-text-sub",children:" "})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("span",{className:"block text-[16px] font-[800] text-primary",children:u.phone?"":"-"}),o.jsx("span",{className:"block text-[10px] font-bold text-text-sub",children:""})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>i(u.user_id),className:"flex-1 h-10 bg-violet-50 text-violet-600 border border-violet-200 rounded-xl font-bold text-[13px] flex items-center justify-center gap-1 cursor-pointer active:scale-[0.98]",children:[o.jsx(Sm,{className:"w-3.5 h-3.5"}),"  "]}),o.jsxs("button",{onClick:()=>s(u),className:"flex-1 h-10 bg-blue-50 text-blue-600 border border-blue-200 rounded-xl font-bold text-[13px] flex items-center justify-center gap-1 cursor-pointer active:scale-[0.98]",children:[o.jsx(En,{className:"w-3.5 h-3.5"}),"  "]})]})]},u.user_id))}),a&&o.jsx(JA,{partnerId:a,onClose:()=>i(null)}),n&&o.jsx(XA,{partner:n,onClose:()=>s(null)})]})}function JA({partnerId:e,onClose:t}){const r=Vt(),[n,s]=m.useState(""),{data:a=[]}=$t({queryKey:["partner-sites",e],queryFn:async()=>{const{data:u}=await ue.from("site_members").select("id, site_id, sites:site_id(name, status)").eq("user_id",e);return u||[]}}),{data:i=[]}=$t({queryKey:["all-sites-for-assign"],queryFn:async()=>{const{data:u}=await ue.from("sites").select("id, name, status");return u||[]}}),l=new Set(a.map(u=>u.site_id)),c=i.filter(u=>!l.has(u.id)&&(!n||u.name.toLowerCase().includes(n.toLowerCase()))),d=tr({mutationFn:async u=>{const{error:f}=await ue.from("site_members").insert({site_id:u,user_id:e,role:"partner"});if(f)throw f},onSuccess:()=>{r.invalidateQueries({queryKey:["partner-sites",e]}),r.invalidateQueries({queryKey:["admin-partners"]}),V.success(" ")}}),h=tr({mutationFn:async u=>{const{error:f}=await ue.from("site_members").delete().eq("id",u);if(f)throw f},onSuccess:()=>{r.invalidateQueries({queryKey:["partner-sites",e]}),r.invalidateQueries({queryKey:["admin-partners"]}),V.success(" ")}});return o.jsx("div",{className:"fixed inset-0 bg-black/50 z-[2000] flex items-end md:items-center justify-center",onClick:t,children:o.jsxs("div",{className:"w-full max-w-[500px] bg-card rounded-t-[20px] md:rounded-2xl p-6 max-h-[85vh] overflow-y-auto animate-slide-up",onClick:u=>u.stopPropagation(),children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-[18px] font-[800] text-header-navy",children:"  "}),o.jsx("button",{onClick:t,className:"bg-transparent border-none cursor-pointer",children:o.jsx(He,{className:"w-5 h-5 text-text-sub"})})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"text-[14px] font-bold text-text-sub mb-2",children:["  (",a.length,")"]}),a.length===0?o.jsx("p",{className:"text-[13px] text-muted-foreground",children:"  "}):o.jsx("div",{className:"space-y-2",children:a.map(u=>{var f,p,b,g;return o.jsxs("div",{className:"flex items-center justify-between bg-muted/50 rounded-xl p-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ft,{className:"w-4 h-4 text-primary"}),o.jsx("span",{className:"text-[14px] font-bold text-foreground",children:((f=u.sites)==null?void 0:f.name)||""}),o.jsx("span",{className:U("text-[10px] font-bold px-1.5 py-0.5 rounded-full text-white",((p=u.sites)==null?void 0:p.status)===""?"bg-blue-500":((b=u.sites)==null?void 0:b.status)===""?"bg-violet-500":"bg-muted-foreground"),children:(g=u.sites)==null?void 0:g.status})]}),o.jsx("button",{onClick:()=>h.mutate(u.id),className:"text-destructive text-[12px] font-bold bg-transparent border-none cursor-pointer",children:""})]},u.id)})})]}),o.jsxs("div",{className:"border-t border-border pt-4",children:[o.jsx("div",{className:"text-[14px] font-bold text-text-sub mb-2",children:"  "}),o.jsx("input",{value:n,onChange:u=>s(u.target.value),placeholder:" ",className:"w-full h-[44px] bg-card border border-border rounded-xl px-3 text-[14px] font-medium outline-none focus:border-primary mb-3"}),o.jsx("div",{className:"space-y-2 max-h-[200px] overflow-y-auto",children:c.map(u=>o.jsxs("div",{className:"flex items-center justify-between bg-card border border-border rounded-xl p-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ft,{className:"w-4 h-4 text-text-sub"}),o.jsx("span",{className:"text-[14px] font-bold text-foreground",children:u.name})]}),o.jsx("button",{onClick:()=>d.mutate(u.id),className:"h-8 px-3 bg-violet-100 text-violet-600 rounded-lg font-bold text-[12px] cursor-pointer active:scale-[0.98]",children:""})]},u.id))})]})]})})}function XA({partner:e,onClose:t}){const{data:r=[]}=$t({queryKey:["partner-deployments-detail",e.user_id],queryFn:async()=>{const{data:n}=await ue.from("partner_deployments").select("*").eq("partner_user_id",e.user_id).order("deploy_date",{ascending:!1}).limit(20);return n||[]}});return o.jsx("div",{className:"fixed inset-0 bg-black/50 z-[2000] flex items-end md:items-center justify-center",onClick:t,children:o.jsxs("div",{className:"w-full max-w-[500px] bg-card rounded-t-[20px] md:rounded-2xl p-6 max-h-[85vh] overflow-y-auto animate-slide-up",onClick:n=>n.stopPropagation(),children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h3",{className:"text-[18px] font-[800] text-header-navy",children:[e.name," "]}),o.jsx("button",{onClick:t,className:"bg-transparent border-none cursor-pointer",children:o.jsx(He,{className:"w-5 h-5 text-text-sub"})})]}),o.jsx("div",{className:"bg-muted/50 rounded-xl p-4 mb-4 border border-border/50",children:o.jsxs("div",{className:"grid grid-cols-2 gap-3 text-[14px]",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-text-sub font-medium",children:""}),o.jsx("div",{className:"font-bold text-foreground",children:e.name})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-text-sub font-medium",children:""}),o.jsx("div",{className:"font-bold text-foreground",children:e.affiliation||"-"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-text-sub font-medium",children:""}),o.jsx("div",{className:"font-bold text-foreground",children:e.phone||"-"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-text-sub font-medium",children:" "}),o.jsxs("div",{className:"font-bold text-foreground",children:[e.siteCount,""]})]})]})}),o.jsxs("div",{className:"text-[14px] font-bold text-text-sub mb-2",children:["   (",r.length,")"]}),r.length===0?o.jsx("p",{className:"text-[13px] text-muted-foreground text-center py-4",children:"  "}):o.jsx("div",{className:"space-y-2",children:r.map(n=>o.jsxs("div",{className:"bg-card border border-border rounded-xl p-3",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("span",{className:"text-[14px] font-bold text-foreground",children:n.site_name}),o.jsx("span",{className:"text-[12px] text-text-sub",children:n.deploy_date})]}),o.jsxs("div",{className:"text-[13px] text-text-sub font-medium",children:[" ",n.people_count," ",n.note&&` ${n.note}`]})]},n.id))})]})})}function ZA(){const{isTestMode:e}=St(),[t,r]=m.useState(""),[n,s]=m.useState("all"),a=[{id:"d1",title:"  3   ",doc_type:"photo",file_ext:"jpg",site_name:"  ",work_date:"2026-02-23",created_at:"2026-02-23T10:00:00Z",file_url:null},{id:"d2",title:"    v3",doc_type:"drawing",file_ext:"pdf",site_name:" ",work_date:"2026-02-22",created_at:"2026-02-22T14:00:00Z",file_url:null},{id:"d3",title:"    ",doc_type:"cert",file_ext:"pdf",site_name:" ",work_date:"2026-02-21",created_at:"2026-02-21T16:30:00Z",file_url:null},{id:"d4",title:"2026  ",doc_type:"company",file_ext:"pdf",site_name:null,work_date:null,created_at:"2026-02-20T09:00:00Z",file_url:null},{id:"d5",title:"    ",doc_type:"photo",file_ext:"jpg",site_name:" ",work_date:"2026-02-20",created_at:"2026-02-20T11:00:00Z",file_url:null},{id:"d6",title:" T2   ",doc_type:"photo",file_ext:"png",site_name:" T2 ",work_date:"2026-02-19",created_at:"2026-02-19T15:00:00Z",file_url:null},{id:"d7",title:"   ",doc_type:"drawing",file_ext:"dwg",site_name:" ",work_date:"2026-02-18",created_at:"2026-02-18T10:00:00Z",file_url:null},{id:"d8",title:"  ",doc_type:"cert",file_ext:"pdf",site_name:"  ",work_date:"2026-02-17",created_at:"2026-02-17T17:00:00Z",file_url:null}],{data:i=[],isLoading:l}=$t({queryKey:["admin-docs",e],queryFn:async()=>{if(e)return a;const{data:u,error:f}=await ue.from("documents").select("id, title, doc_type, file_ext, site_name, work_date, created_at, file_url").order("created_at",{ascending:!1}).limit(200);if(f)throw f;return u||[]}}),c=m.useMemo(()=>i.filter(u=>{const f=t.toLowerCase(),p=!f||u.title.toLowerCase().includes(f)||(u.site_name||"").toLowerCase().includes(f),b=n==="all"||u.doc_type===n;return p&&b}),[i,t,n]),d=m.useMemo(()=>({total:i.length,photo:i.filter(u=>u.doc_type==="photo").length,drawing:i.filter(u=>u.doc_type==="drawing").length,cert:i.filter(u=>u.doc_type==="cert"||u.doc_type==="completion").length,company:i.filter(u=>u.doc_type==="company").length}),[i]),h={photo:"",drawing:"",cert:"",completion:"",company:"",other:""};return l?o.jsx("div",{className:"py-20 text-center text-muted-foreground",children:" ..."}):o.jsxs("div",{className:"animate-fade-in",children:[o.jsx("h1",{className:"text-xl-app font-[800] text-header-navy mb-1",children:" "}),o.jsx("p",{className:"text-[15px] text-text-sub font-medium mb-5",children:"   "}),o.jsx("div",{className:"grid grid-cols-5 gap-1.5 mb-4",children:[{key:"all",label:"",val:d.total},{key:"photo",label:"",val:d.photo},{key:"drawing",label:"",val:d.drawing},{key:"cert",label:"",val:d.cert},{key:"company",label:"",val:d.company}].map(u=>o.jsxs("button",{onClick:()=>s(u.key),className:U("p-2 rounded-xl text-center border cursor-pointer transition-all active:scale-[0.98]","bg-card border-border",n===u.key&&"ring-2 ring-primary/30 bg-primary/5"),children:[o.jsx("div",{className:"text-[16px] font-[800] text-primary",children:u.val}),o.jsx("div",{className:"text-[10px] font-bold text-text-sub",children:u.label})]},u.key))}),o.jsxs("div",{className:"relative mb-4",children:[o.jsx("input",{value:t,onChange:u=>r(u.target.value),placeholder:"   ",className:"w-full h-[48px] bg-card border border-border rounded-xl pl-4 pr-10 text-[15px] font-medium outline-none focus:border-primary focus:shadow-input-focus"}),t?o.jsx("button",{onClick:()=>r(""),className:"absolute right-3 top-1/2 -translate-y-1/2",children:o.jsx(He,{className:"w-4 h-4 text-muted-foreground"})}):o.jsx(_r,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"})]}),c.length===0?o.jsx("div",{className:"text-center py-16 text-muted-foreground",children:" "}):o.jsx("div",{className:"space-y-2",children:c.map(u=>o.jsxs("div",{className:"bg-card rounded-xl shadow-soft p-4 flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0",children:o.jsx(Dt,{className:"w-5 h-5 text-primary"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"text-[14px] font-bold text-foreground truncate",children:u.title}),o.jsxs("div",{className:"text-[12px] text-text-sub font-medium flex items-center gap-2",children:[o.jsx("span",{className:"bg-muted px-1.5 py-0.5 rounded text-[10px] font-bold",children:h[u.doc_type]||u.doc_type}),u.site_name&&o.jsx("span",{className:"truncate",children:u.site_name}),o.jsx("span",{children:new Date(u.created_at).toLocaleDateString("ko-KR")})]})]}),u.file_ext&&o.jsx("span",{className:"text-[10px] font-bold text-muted-foreground bg-muted px-2 py-1 rounded uppercase flex-shrink-0",children:u.file_ext})]},u.id))})]})}const Ch=[{key:"dashboard",label:"",icon:w3},{key:"worklog",label:"",icon:kr},{key:"site",label:"",icon:Ft},{key:"user",label:"",icon:bl},{key:"partner",label:"",icon:Td},{key:"doc",label:"",icon:Dt}];function e6(){const{isAdmin:e,loading:t}=Zn(),r=Jn(),[n,s]=m.useState("dashboard"),[a,i]=m.useState(!1);if(t)return o.jsx("div",{className:"flex items-center justify-center min-h-screen bg-background",children:o.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})});if(!e)return o.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-background gap-4 p-6",children:[o.jsx("div",{className:"text-[48px]",children:""}),o.jsx("h2",{className:"text-xl-app font-[800] text-header-navy",children:"  "}),o.jsx("p",{className:"text-text-sub text-center",children:"  ."}),o.jsx("button",{onClick:()=>r("/"),className:"mt-4 h-12 px-6 bg-primary text-primary-foreground rounded-xl font-bold cursor-pointer",children:" "})]});const l=()=>{switch(n){case"dashboard":return o.jsx(qA,{onNavigate:c=>s(c)});case"worklog":return o.jsx(HA,{});case"site":return o.jsx(VA,{});case"user":return o.jsx(QA,{});case"partner":return o.jsx(YA,{});case"doc":return o.jsx(ZA,{})}};return o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsxs("aside",{className:"hidden md:flex fixed left-0 top-0 bottom-0 w-[240px] bg-card border-r border-border flex-col z-50",children:[o.jsxs("div",{className:"h-[60px] px-5 flex items-center border-b border-border",children:[o.jsx("button",{onClick:()=>r("/"),className:"flex items-center gap-2 bg-transparent border-none cursor-pointer",children:o.jsx(Ha,{className:"w-5 h-5 text-text-sub"})}),o.jsx("span",{className:"text-lg-app font-[800] text-header-navy ml-2",children:" "})]}),o.jsx("nav",{className:"flex-1 py-3 px-3 space-y-1 overflow-y-auto",children:Ch.map(c=>o.jsxs("button",{onClick:()=>s(c.key),className:U("w-full h-[46px] flex items-center gap-3 px-4 rounded-xl text-[15px] font-semibold border-none cursor-pointer transition-all",n===c.key?"bg-primary/10 text-primary font-[800]":"bg-transparent text-text-sub hover:bg-muted"),children:[o.jsx(c.icon,{className:"w-5 h-5 flex-shrink-0"}),c.label]},c.key))}),o.jsx("div",{className:"p-4 border-t border-border",children:o.jsx("div",{className:"text-[12px] text-muted-foreground text-center",children:"INOPNC  v1.0"})})]}),o.jsxs("header",{className:"md:hidden fixed top-0 left-0 right-0 bg-card border-b border-border z-50",children:[o.jsxs("div",{className:"h-[56px] px-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>r("/"),className:"bg-transparent border-none cursor-pointer p-1",children:o.jsx(Ha,{className:"w-5 h-5 text-text-sub"})}),o.jsx("span",{className:"text-lg-app font-[800] text-header-navy",children:" "})]}),o.jsx("button",{onClick:()=>i(!a),className:"bg-transparent border-none cursor-pointer p-1",children:a?o.jsx(He,{className:"w-6 h-6 text-text-sub"}):o.jsx(a1,{className:"w-6 h-6 text-text-sub"})})]}),o.jsx("nav",{className:"h-[48px] flex items-center gap-0 overflow-x-auto no-scrollbar border-t border-border/50 px-2",children:Ch.map(c=>o.jsxs("button",{onClick:()=>{s(c.key),i(!1)},className:U("h-full flex items-center gap-1.5 px-3 whitespace-nowrap text-[14px] font-bold border-none bg-transparent cursor-pointer transition-colors border-b-2 flex-shrink-0",n===c.key?"text-primary border-b-primary":"text-text-sub border-b-transparent"),children:[o.jsx(c.icon,{className:"w-4 h-4"}),c.label]},c.key))})]}),a&&o.jsxs("div",{className:"md:hidden fixed inset-0 z-[60]",onClick:()=>i(!1),children:[o.jsx("div",{className:"absolute inset-0 bg-black/30"}),o.jsxs("div",{className:"absolute top-0 right-0 w-[260px] h-full bg-card shadow-lg animate-slide-in-right",onClick:c=>c.stopPropagation(),children:[o.jsxs("div",{className:"h-[56px] px-5 flex items-center justify-between border-b border-border",children:[o.jsx("span",{className:"text-lg-app font-[800] text-header-navy",children:""}),o.jsx("button",{onClick:()=>i(!1),className:"bg-transparent border-none cursor-pointer",children:o.jsx(He,{className:"w-5 h-5 text-text-sub"})})]}),o.jsx("nav",{className:"py-3 px-3 space-y-1",children:Ch.map(c=>o.jsxs("button",{onClick:()=>{s(c.key),i(!1)},className:U("w-full h-[46px] flex items-center gap-3 px-4 rounded-xl text-[15px] font-semibold border-none cursor-pointer transition-all",n===c.key?"bg-primary/10 text-primary font-[800]":"bg-transparent text-text-sub hover:bg-muted"),children:[o.jsx(c.icon,{className:"w-5 h-5 flex-shrink-0"}),c.label]},c.key))})]})]}),o.jsx("main",{className:U("min-h-screen pt-[104px] md:pt-0 md:ml-[240px]","px-4 md:px-8 pb-8 md:py-8"),children:o.jsx("div",{className:"max-w-[960px] mx-auto",children:l()})})]})}const t6=new yE,r6=()=>o.jsx(_E,{client:t6,children:o.jsxs(nE,{children:[o.jsx(c_,{}),o.jsx(T5,{children:o.jsx(c3,{children:o.jsxs(C5,{children:[o.jsx(or,{path:"/auth",element:o.jsx(UA,{})}),o.jsx(or,{path:"/reset-password",element:o.jsx(BA,{})}),o.jsx(or,{path:"/admin",element:o.jsx(p0,{children:o.jsx(e6,{})})}),o.jsx(or,{path:"/home",element:o.jsx(qc,{to:"/",replace:!0})}),o.jsx(or,{path:"/home/*",element:o.jsx(qc,{to:"/",replace:!0})}),o.jsx(or,{path:"/home.html",element:o.jsx(qc,{to:"/",replace:!0})}),o.jsxs(or,{element:o.jsx(p0,{children:o.jsx(xT,{})}),children:[o.jsx(or,{path:"/",element:o.jsx(PT,{})}),o.jsx(or,{path:"/site",element:o.jsx(iR,{})}),o.jsx(or,{path:"/worklog",element:o.jsx(fR,{})}),o.jsx(or,{path:"/output",element:o.jsx(yR,{})}),o.jsx(or,{path:"/doc",element:o.jsx(bA,{})}),o.jsx(or,{path:"/request",element:o.jsx(FA,{})})]}),o.jsx(or,{path:"*",element:o.jsx(zA,{})})]})})})]})}),n6={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},ap=n6??{},yj=String(ap.VERCEL_GIT_COMMIT_SHA??Date.now()),wj=new Date().toISOString(),s6=ap.PROD===!0||ap.MODE==="production",o6=()=>{if(typeof document>"u")return;const e=`BUILD_SHA=${yj} BUILD_TIME=${wj}`,t=document.getElementById("__inopnc_build_meta");if(t){t.textContent=e;return}const r=document.createElement("div");r.id="__inopnc_build_meta",r.setAttribute("aria-hidden","true"),r.textContent=e,Object.assign(r.style,{position:"fixed",left:"0",bottom:"0",padding:"2px 4px",fontSize:"10px",lineHeight:"1",whiteSpace:"nowrap",color:"#000",opacity:"0",pointerEvents:"none",userSelect:"text",zIndex:"2147483647"}),document.body.appendChild(r)},a6=async()=>{if(!(typeof window>"u"||!s6)){try{if("caches"in window){const e=await caches.keys();await Promise.all(e.map(t=>caches.delete(t)))}}catch(e){console.warn("[cache-cleanup] failed to clear caches",e)}if("serviceWorker"in navigator){try{const e=await navigator.serviceWorker.getRegistrations();await Promise.all(e.map(t=>t.unregister()))}catch(e){console.warn("[sw-cleanup] failed to unregister old workers",e)}try{await navigator.serviceWorker.register("/sw.js")}catch(e){console.warn("[sw-register] failed",e)}}}};console.info("[build-meta]",{BUILD_SHA:yj,BUILD_TIME:wj});a6();yy(document.getElementById("root")).render(o.jsx(r6,{}));o6();
