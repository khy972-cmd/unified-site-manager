var Hg=e=>{throw TypeError(e)};var ff=(e,t,r)=>t.has(e)||Hg("Cannot "+r);var A=(e,t,r)=>(ff(e,t,"read from private field"),r?r.call(e):t.get(e)),$e=(e,t,r)=>t.has(e)?Hg("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),be=(e,t,r,n)=>(ff(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),tt=(e,t,r)=>(ff(e,t,"access private method"),r);var od=(e,t,r,n)=>({set _(o){be(e,t,o,r)},get _(){return A(e,t,n)}});function q2(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const o in n)if(o!=="default"&&!(o in e)){const a=Object.getOwnPropertyDescriptor(n,o);a&&Object.defineProperty(e,o,a.get?a:{enumerable:!0,get:()=>n[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=r(o);fetch(o.href,a)}})();function uv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var hv={exports:{}},gh={},fv={exports:{}},at={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lc=Symbol.for("react.element"),H2=Symbol.for("react.portal"),K2=Symbol.for("react.fragment"),G2=Symbol.for("react.strict_mode"),Q2=Symbol.for("react.profiler"),Y2=Symbol.for("react.provider"),J2=Symbol.for("react.context"),X2=Symbol.for("react.forward_ref"),Z2=Symbol.for("react.suspense"),ek=Symbol.for("react.memo"),tk=Symbol.for("react.lazy"),Kg=Symbol.iterator;function rk(e){return e===null||typeof e!="object"?null:(e=Kg&&e[Kg]||e["@@iterator"],typeof e=="function"?e:null)}var pv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},mv=Object.assign,xv={};function Zi(e,t,r){this.props=e,this.context=t,this.refs=xv,this.updater=r||pv}Zi.prototype.isReactComponent={};Zi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Zi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function gv(){}gv.prototype=Zi.prototype;function rx(e,t,r){this.props=e,this.context=t,this.refs=xv,this.updater=r||pv}var nx=rx.prototype=new gv;nx.constructor=rx;mv(nx,Zi.prototype);nx.isPureReactComponent=!0;var Gg=Array.isArray,bv=Object.prototype.hasOwnProperty,sx={current:null},yv={key:!0,ref:!0,__self:!0,__source:!0};function vv(e,t,r){var n,o={},a=null,i=null;if(t!=null)for(n in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(a=""+t.key),t)bv.call(t,n)&&!yv.hasOwnProperty(n)&&(o[n]=t[n]);var l=arguments.length-2;if(l===1)o.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];o.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)o[n]===void 0&&(o[n]=l[n]);return{$$typeof:Lc,type:e,key:a,ref:i,props:o,_owner:sx.current}}function nk(e,t){return{$$typeof:Lc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ox(e){return typeof e=="object"&&e!==null&&e.$$typeof===Lc}function sk(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Qg=/\/+/g;function pf(e,t){return typeof e=="object"&&e!==null&&e.key!=null?sk(""+e.key):t.toString(36)}function Jd(e,t,r,n,o){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(a){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Lc:case H2:i=!0}}if(i)return i=e,o=o(i),e=n===""?"."+pf(i,0):n,Gg(o)?(r="",e!=null&&(r=e.replace(Qg,"$&/")+"/"),Jd(o,t,r,"",function(d){return d})):o!=null&&(ox(o)&&(o=nk(o,r+(!o.key||i&&i.key===o.key?"":(""+o.key).replace(Qg,"$&/")+"/")+e)),t.push(o)),1;if(i=0,n=n===""?".":n+":",Gg(e))for(var l=0;l<e.length;l++){a=e[l];var c=n+pf(a,l);i+=Jd(a,t,r,c,o)}else if(c=rk(e),typeof c=="function")for(e=c.call(e),l=0;!(a=e.next()).done;)a=a.value,c=n+pf(a,l++),i+=Jd(a,t,r,c,o);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function ad(e,t,r){if(e==null)return e;var n=[],o=0;return Jd(e,n,"","",function(a){return t.call(r,a,o++)}),n}function ok(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var $r={current:null},Xd={transition:null},ak={ReactCurrentDispatcher:$r,ReactCurrentBatchConfig:Xd,ReactCurrentOwner:sx};function wv(){throw Error("act(...) is not supported in production builds of React.")}at.Children={map:ad,forEach:function(e,t,r){ad(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return ad(e,function(){t++}),t},toArray:function(e){return ad(e,function(t){return t})||[]},only:function(e){if(!ox(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};at.Component=Zi;at.Fragment=K2;at.Profiler=Q2;at.PureComponent=rx;at.StrictMode=G2;at.Suspense=Z2;at.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ak;at.act=wv;at.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=mv({},e.props),o=e.key,a=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,i=sx.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)bv.call(t,c)&&!yv.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:Lc,type:e.type,key:o,ref:a,props:n,_owner:i}};at.createContext=function(e){return e={$$typeof:J2,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Y2,_context:e},e.Consumer=e};at.createElement=vv;at.createFactory=function(e){var t=vv.bind(null,e);return t.type=e,t};at.createRef=function(){return{current:null}};at.forwardRef=function(e){return{$$typeof:X2,render:e}};at.isValidElement=ox;at.lazy=function(e){return{$$typeof:tk,_payload:{_status:-1,_result:e},_init:ok}};at.memo=function(e,t){return{$$typeof:ek,type:e,compare:t===void 0?null:t}};at.startTransition=function(e){var t=Xd.transition;Xd.transition={};try{e()}finally{Xd.transition=t}};at.unstable_act=wv;at.useCallback=function(e,t){return $r.current.useCallback(e,t)};at.useContext=function(e){return $r.current.useContext(e)};at.useDebugValue=function(){};at.useDeferredValue=function(e){return $r.current.useDeferredValue(e)};at.useEffect=function(e,t){return $r.current.useEffect(e,t)};at.useId=function(){return $r.current.useId()};at.useImperativeHandle=function(e,t,r){return $r.current.useImperativeHandle(e,t,r)};at.useInsertionEffect=function(e,t){return $r.current.useInsertionEffect(e,t)};at.useLayoutEffect=function(e,t){return $r.current.useLayoutEffect(e,t)};at.useMemo=function(e,t){return $r.current.useMemo(e,t)};at.useReducer=function(e,t,r){return $r.current.useReducer(e,t,r)};at.useRef=function(e){return $r.current.useRef(e)};at.useState=function(e){return $r.current.useState(e)};at.useSyncExternalStore=function(e,t,r){return $r.current.useSyncExternalStore(e,t,r)};at.useTransition=function(){return $r.current.useTransition()};at.version="18.3.1";fv.exports=at;var p=fv.exports;const Q=uv(p),ax=q2({__proto__:null,default:Q},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ik=p,lk=Symbol.for("react.element"),ck=Symbol.for("react.fragment"),dk=Object.prototype.hasOwnProperty,uk=ik.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,hk={key:!0,ref:!0,__self:!0,__source:!0};function jv(e,t,r){var n,o={},a=null,i=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(i=t.ref);for(n in t)dk.call(t,n)&&!hk.hasOwnProperty(n)&&(o[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)o[n]===void 0&&(o[n]=t[n]);return{$$typeof:lk,type:e,key:a,ref:i,props:o,_owner:uk.current}}gh.Fragment=ck;gh.jsx=jv;gh.jsxs=jv;hv.exports=gh;var s=hv.exports,Nv={exports:{}},un={},kv={exports:{}},Sv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(B,$){var K=B.length;B.push($);e:for(;0<K;){var ce=K-1>>>1,ue=B[ce];if(0<o(ue,$))B[ce]=$,B[K]=ue,K=ce;else break e}}function r(B){return B.length===0?null:B[0]}function n(B){if(B.length===0)return null;var $=B[0],K=B.pop();if(K!==$){B[0]=K;e:for(var ce=0,ue=B.length,Z=ue>>>1;ce<Z;){var fe=2*(ce+1)-1,ve=B[fe],Oe=fe+1,le=B[Oe];if(0>o(ve,K))Oe<ue&&0>o(le,ve)?(B[ce]=le,B[Oe]=K,ce=Oe):(B[ce]=ve,B[fe]=K,ce=fe);else if(Oe<ue&&0>o(le,K))B[ce]=le,B[Oe]=K,ce=Oe;else break e}}return $}function o(B,$){var K=B.sortIndex-$.sortIndex;return K!==0?K:B.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var c=[],d=[],h=1,u=null,f=3,m=!1,g=!1,x=!1,N=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(B){for(var $=r(d);$!==null;){if($.callback===null)n(d);else if($.startTime<=B)n(d),$.sortIndex=$.expirationTime,t(c,$);else break;$=r(d)}}function k(B){if(x=!1,v(B),!g)if(r(c)!==null)g=!0,te(S);else{var $=r(d);$!==null&&ie(k,$.startTime-B)}}function S(B,$){g=!1,x&&(x=!1,b(R),R=-1),m=!0;var K=f;try{for(v($),u=r(c);u!==null&&(!(u.expirationTime>$)||B&&!V());){var ce=u.callback;if(typeof ce=="function"){u.callback=null,f=u.priorityLevel;var ue=ce(u.expirationTime<=$);$=e.unstable_now(),typeof ue=="function"?u.callback=ue:u===r(c)&&n(c),v($)}else n(c);u=r(c)}if(u!==null)var Z=!0;else{var fe=r(d);fe!==null&&ie(k,fe.startTime-$),Z=!1}return Z}finally{u=null,f=K,m=!1}}var E=!1,C=null,R=-1,F=5,T=-1;function V(){return!(e.unstable_now()-T<F)}function Y(){if(C!==null){var B=e.unstable_now();T=B;var $=!0;try{$=C(!0,B)}finally{$?W():(E=!1,C=null)}}else E=!1}var W;if(typeof y=="function")W=function(){y(Y)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,ne=X.port2;X.port1.onmessage=Y,W=function(){ne.postMessage(null)}}else W=function(){N(Y,0)};function te(B){C=B,E||(E=!0,W())}function ie(B,$){R=N(function(){B(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_continueExecution=function(){g||m||(g=!0,te(S))},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<B?Math.floor(1e3/B):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(B){switch(f){case 1:case 2:case 3:var $=3;break;default:$=f}var K=f;f=$;try{return B()}finally{f=K}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(B,$){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var K=f;f=B;try{return $()}finally{f=K}},e.unstable_scheduleCallback=function(B,$,K){var ce=e.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?ce+K:ce):K=ce,B){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=K+ue,B={id:h++,callback:$,priorityLevel:B,startTime:K,expirationTime:ue,sortIndex:-1},K>ce?(B.sortIndex=K,t(d,B),r(c)===null&&B===r(d)&&(x?(b(R),R=-1):x=!0,ie(k,K-ce))):(B.sortIndex=ue,t(c,B),g||m||(g=!0,te(S))),B},e.unstable_shouldYield=V,e.unstable_wrapCallback=function(B){var $=f;return function(){var K=f;f=$;try{return B.apply(this,arguments)}finally{f=K}}}})(Sv);kv.exports=Sv;var fk=kv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pk=p,dn=fk;function ae(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _v=new Set,Xl={};function Ra(e,t){Fi(e,t),Fi(e+"Capture",t)}function Fi(e,t){for(Xl[e]=t,e=0;e<t.length;e++)_v.add(t[e])}var Cs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jp=Object.prototype.hasOwnProperty,mk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Yg={},Jg={};function xk(e){return jp.call(Jg,e)?!0:jp.call(Yg,e)?!1:mk.test(e)?Jg[e]=!0:(Yg[e]=!0,!1)}function gk(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function bk(e,t,r,n){if(t===null||typeof t>"u"||gk(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Lr(e,t,r,n,o,a,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=o,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var jr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){jr[e]=new Lr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];jr[t]=new Lr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){jr[e]=new Lr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){jr[e]=new Lr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){jr[e]=new Lr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){jr[e]=new Lr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){jr[e]=new Lr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){jr[e]=new Lr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){jr[e]=new Lr(e,5,!1,e.toLowerCase(),null,!1,!1)});var ix=/[\-:]([a-z])/g;function lx(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ix,lx);jr[t]=new Lr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ix,lx);jr[t]=new Lr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ix,lx);jr[t]=new Lr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){jr[e]=new Lr(e,1,!1,e.toLowerCase(),null,!1,!1)});jr.xlinkHref=new Lr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){jr[e]=new Lr(e,1,!1,e.toLowerCase(),null,!0,!0)});function cx(e,t,r,n){var o=jr.hasOwnProperty(t)?jr[t]:null;(o!==null?o.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(bk(t,r,o,n)&&(r=null),n||o===null?xk(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):o.mustUseProperty?e[o.propertyName]=r===null?o.type===3?!1:"":r:(t=o.attributeName,n=o.attributeNamespace,r===null?e.removeAttribute(t):(o=o.type,r=o===3||o===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Os=pk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,id=Symbol.for("react.element"),ti=Symbol.for("react.portal"),ri=Symbol.for("react.fragment"),dx=Symbol.for("react.strict_mode"),Np=Symbol.for("react.profiler"),Cv=Symbol.for("react.provider"),Ev=Symbol.for("react.context"),ux=Symbol.for("react.forward_ref"),kp=Symbol.for("react.suspense"),Sp=Symbol.for("react.suspense_list"),hx=Symbol.for("react.memo"),Gs=Symbol.for("react.lazy"),Pv=Symbol.for("react.offscreen"),Xg=Symbol.iterator;function bl(e){return e===null||typeof e!="object"?null:(e=Xg&&e[Xg]||e["@@iterator"],typeof e=="function"?e:null)}var Ut=Object.assign,mf;function Ol(e){if(mf===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);mf=t&&t[1]||""}return`
`+mf+e}var xf=!1;function gf(e,t){if(!e||xf)return"";xf=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var o=d.stack.split(`
`),a=n.stack.split(`
`),i=o.length-1,l=a.length-1;1<=i&&0<=l&&o[i]!==a[l];)l--;for(;1<=i&&0<=l;i--,l--)if(o[i]!==a[l]){if(i!==1||l!==1)do if(i--,l--,0>l||o[i]!==a[l]){var c=`
`+o[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=l);break}}}finally{xf=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Ol(e):""}function yk(e){switch(e.tag){case 5:return Ol(e.type);case 16:return Ol("Lazy");case 13:return Ol("Suspense");case 19:return Ol("SuspenseList");case 0:case 2:case 15:return e=gf(e.type,!1),e;case 11:return e=gf(e.type.render,!1),e;case 1:return e=gf(e.type,!0),e;default:return""}}function _p(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ri:return"Fragment";case ti:return"Portal";case Np:return"Profiler";case dx:return"StrictMode";case kp:return"Suspense";case Sp:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ev:return(e.displayName||"Context")+".Consumer";case Cv:return(e._context.displayName||"Context")+".Provider";case ux:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case hx:return t=e.displayName||null,t!==null?t:_p(e.type)||"Memo";case Gs:t=e._payload,e=e._init;try{return _p(e(t))}catch{}}return null}function vk(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _p(t);case 8:return t===dx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function So(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Rv(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function wk(e){var t=Rv(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var o=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(i){n=""+i,a.call(this,i)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ld(e){e._valueTracker||(e._valueTracker=wk(e))}function Tv(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Rv(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function wu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Cp(e,t){var r=t.checked;return Ut({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Zg(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=So(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Av(e,t){t=t.checked,t!=null&&cx(e,"checked",t,!1)}function Ep(e,t){Av(e,t);var r=So(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Pp(e,t.type,r):t.hasOwnProperty("defaultValue")&&Pp(e,t.type,So(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function eb(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Pp(e,t,r){(t!=="number"||wu(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Dl=Array.isArray;function mi(e,t,r,n){if(e=e.options,t){t={};for(var o=0;o<r.length;o++)t["$"+r[o]]=!0;for(r=0;r<e.length;r++)o=t.hasOwnProperty("$"+e[r].value),e[r].selected!==o&&(e[r].selected=o),o&&n&&(e[r].defaultSelected=!0)}else{for(r=""+So(r),t=null,o=0;o<e.length;o++){if(e[o].value===r){e[o].selected=!0,n&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Rp(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ae(91));return Ut({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function tb(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ae(92));if(Dl(r)){if(1<r.length)throw Error(ae(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:So(r)}}function Ov(e,t){var r=So(t.value),n=So(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function rb(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Dv(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Tp(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Dv(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var cd,Iv=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,o){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(cd=cd||document.createElement("div"),cd.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=cd.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Zl(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Fl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jk=["Webkit","ms","Moz","O"];Object.keys(Fl).forEach(function(e){jk.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Fl[t]=Fl[e]})});function Mv(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Fl.hasOwnProperty(e)&&Fl[e]?(""+t).trim():t+"px"}function $v(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,o=Mv(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,o):e[r]=o}}var Nk=Ut({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ap(e,t){if(t){if(Nk[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ae(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ae(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ae(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ae(62))}}function Op(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dp=null;function fx(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ip=null,xi=null,gi=null;function nb(e){if(e=Bc(e)){if(typeof Ip!="function")throw Error(ae(280));var t=e.stateNode;t&&(t=jh(t),Ip(e.stateNode,e.type,t))}}function Lv(e){xi?gi?gi.push(e):gi=[e]:xi=e}function Fv(){if(xi){var e=xi,t=gi;if(gi=xi=null,nb(e),t)for(e=0;e<t.length;e++)nb(t[e])}}function Uv(e,t){return e(t)}function Bv(){}var bf=!1;function zv(e,t,r){if(bf)return e(t,r);bf=!0;try{return Uv(e,t,r)}finally{bf=!1,(xi!==null||gi!==null)&&(Bv(),Fv())}}function ec(e,t){var r=e.stateNode;if(r===null)return null;var n=jh(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ae(231,t,typeof r));return r}var Mp=!1;if(Cs)try{var yl={};Object.defineProperty(yl,"passive",{get:function(){Mp=!0}}),window.addEventListener("test",yl,yl),window.removeEventListener("test",yl,yl)}catch{Mp=!1}function kk(e,t,r,n,o,a,i,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(h){this.onError(h)}}var Ul=!1,ju=null,Nu=!1,$p=null,Sk={onError:function(e){Ul=!0,ju=e}};function _k(e,t,r,n,o,a,i,l,c){Ul=!1,ju=null,kk.apply(Sk,arguments)}function Ck(e,t,r,n,o,a,i,l,c){if(_k.apply(this,arguments),Ul){if(Ul){var d=ju;Ul=!1,ju=null}else throw Error(ae(198));Nu||(Nu=!0,$p=d)}}function Ta(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Vv(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function sb(e){if(Ta(e)!==e)throw Error(ae(188))}function Ek(e){var t=e.alternate;if(!t){if(t=Ta(e),t===null)throw Error(ae(188));return t!==e?null:e}for(var r=e,n=t;;){var o=r.return;if(o===null)break;var a=o.alternate;if(a===null){if(n=o.return,n!==null){r=n;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===r)return sb(o),e;if(a===n)return sb(o),t;a=a.sibling}throw Error(ae(188))}if(r.return!==n.return)r=o,n=a;else{for(var i=!1,l=o.child;l;){if(l===r){i=!0,r=o,n=a;break}if(l===n){i=!0,n=o,r=a;break}l=l.sibling}if(!i){for(l=a.child;l;){if(l===r){i=!0,r=a,n=o;break}if(l===n){i=!0,n=a,r=o;break}l=l.sibling}if(!i)throw Error(ae(189))}}if(r.alternate!==n)throw Error(ae(190))}if(r.tag!==3)throw Error(ae(188));return r.stateNode.current===r?e:t}function Wv(e){return e=Ek(e),e!==null?qv(e):null}function qv(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=qv(e);if(t!==null)return t;e=e.sibling}return null}var Hv=dn.unstable_scheduleCallback,ob=dn.unstable_cancelCallback,Pk=dn.unstable_shouldYield,Rk=dn.unstable_requestPaint,Gt=dn.unstable_now,Tk=dn.unstable_getCurrentPriorityLevel,px=dn.unstable_ImmediatePriority,Kv=dn.unstable_UserBlockingPriority,ku=dn.unstable_NormalPriority,Ak=dn.unstable_LowPriority,Gv=dn.unstable_IdlePriority,bh=null,ts=null;function Ok(e){if(ts&&typeof ts.onCommitFiberRoot=="function")try{ts.onCommitFiberRoot(bh,e,void 0,(e.current.flags&128)===128)}catch{}}var In=Math.clz32?Math.clz32:Mk,Dk=Math.log,Ik=Math.LN2;function Mk(e){return e>>>=0,e===0?32:31-(Dk(e)/Ik|0)|0}var dd=64,ud=4194304;function Il(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Su(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,o=e.suspendedLanes,a=e.pingedLanes,i=r&268435455;if(i!==0){var l=i&~o;l!==0?n=Il(l):(a&=i,a!==0&&(n=Il(a)))}else i=r&~o,i!==0?n=Il(i):a!==0&&(n=Il(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&o)&&(o=n&-n,a=t&-t,o>=a||o===16&&(a&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-In(t),o=1<<r,n|=e[r],t&=~o;return n}function $k(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lk(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,o=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-In(a),l=1<<i,c=o[i];c===-1?(!(l&r)||l&n)&&(o[i]=$k(l,t)):c<=t&&(e.expiredLanes|=l),a&=~l}}function Lp(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Qv(){var e=dd;return dd<<=1,!(dd&4194240)&&(dd=64),e}function yf(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Fc(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-In(t),e[t]=r}function Fk(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var o=31-In(r),a=1<<o;t[o]=0,n[o]=-1,e[o]=-1,r&=~a}}function mx(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-In(r),o=1<<n;o&t|e[n]&t&&(e[n]|=t),r&=~o}}var St=0;function Yv(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Jv,xx,Xv,Zv,ew,Fp=!1,hd=[],mo=null,xo=null,go=null,tc=new Map,rc=new Map,Js=[],Uk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ab(e,t){switch(e){case"focusin":case"focusout":mo=null;break;case"dragenter":case"dragleave":xo=null;break;case"mouseover":case"mouseout":go=null;break;case"pointerover":case"pointerout":tc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":rc.delete(t.pointerId)}}function vl(e,t,r,n,o,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[o]},t!==null&&(t=Bc(t),t!==null&&xx(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function Bk(e,t,r,n,o){switch(t){case"focusin":return mo=vl(mo,e,t,r,n,o),!0;case"dragenter":return xo=vl(xo,e,t,r,n,o),!0;case"mouseover":return go=vl(go,e,t,r,n,o),!0;case"pointerover":var a=o.pointerId;return tc.set(a,vl(tc.get(a)||null,e,t,r,n,o)),!0;case"gotpointercapture":return a=o.pointerId,rc.set(a,vl(rc.get(a)||null,e,t,r,n,o)),!0}return!1}function tw(e){var t=Zo(e.target);if(t!==null){var r=Ta(t);if(r!==null){if(t=r.tag,t===13){if(t=Vv(r),t!==null){e.blockedOn=t,ew(e.priority,function(){Xv(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Zd(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Up(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Dp=n,r.target.dispatchEvent(n),Dp=null}else return t=Bc(r),t!==null&&xx(t),e.blockedOn=r,!1;t.shift()}return!0}function ib(e,t,r){Zd(e)&&r.delete(t)}function zk(){Fp=!1,mo!==null&&Zd(mo)&&(mo=null),xo!==null&&Zd(xo)&&(xo=null),go!==null&&Zd(go)&&(go=null),tc.forEach(ib),rc.forEach(ib)}function wl(e,t){e.blockedOn===t&&(e.blockedOn=null,Fp||(Fp=!0,dn.unstable_scheduleCallback(dn.unstable_NormalPriority,zk)))}function nc(e){function t(o){return wl(o,e)}if(0<hd.length){wl(hd[0],e);for(var r=1;r<hd.length;r++){var n=hd[r];n.blockedOn===e&&(n.blockedOn=null)}}for(mo!==null&&wl(mo,e),xo!==null&&wl(xo,e),go!==null&&wl(go,e),tc.forEach(t),rc.forEach(t),r=0;r<Js.length;r++)n=Js[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Js.length&&(r=Js[0],r.blockedOn===null);)tw(r),r.blockedOn===null&&Js.shift()}var bi=Os.ReactCurrentBatchConfig,_u=!0;function Vk(e,t,r,n){var o=St,a=bi.transition;bi.transition=null;try{St=1,gx(e,t,r,n)}finally{St=o,bi.transition=a}}function Wk(e,t,r,n){var o=St,a=bi.transition;bi.transition=null;try{St=4,gx(e,t,r,n)}finally{St=o,bi.transition=a}}function gx(e,t,r,n){if(_u){var o=Up(e,t,r,n);if(o===null)Pf(e,t,n,Cu,r),ab(e,n);else if(Bk(o,e,t,r,n))n.stopPropagation();else if(ab(e,n),t&4&&-1<Uk.indexOf(e)){for(;o!==null;){var a=Bc(o);if(a!==null&&Jv(a),a=Up(e,t,r,n),a===null&&Pf(e,t,n,Cu,r),a===o)break;o=a}o!==null&&n.stopPropagation()}else Pf(e,t,n,null,r)}}var Cu=null;function Up(e,t,r,n){if(Cu=null,e=fx(n),e=Zo(e),e!==null)if(t=Ta(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Vv(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Cu=e,null}function rw(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Tk()){case px:return 1;case Kv:return 4;case ku:case Ak:return 16;case Gv:return 536870912;default:return 16}default:return 16}}var uo=null,bx=null,eu=null;function nw(){if(eu)return eu;var e,t=bx,r=t.length,n,o="value"in uo?uo.value:uo.textContent,a=o.length;for(e=0;e<r&&t[e]===o[e];e++);var i=r-e;for(n=1;n<=i&&t[r-n]===o[a-n];n++);return eu=o.slice(e,1<n?1-n:void 0)}function tu(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function fd(){return!0}function lb(){return!1}function hn(e){function t(r,n,o,a,i){this._reactName=r,this._targetInst=o,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?fd:lb,this.isPropagationStopped=lb,this}return Ut(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=fd)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=fd)},persist:function(){},isPersistent:fd}),t}var el={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yx=hn(el),Uc=Ut({},el,{view:0,detail:0}),qk=hn(Uc),vf,wf,jl,yh=Ut({},Uc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vx,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==jl&&(jl&&e.type==="mousemove"?(vf=e.screenX-jl.screenX,wf=e.screenY-jl.screenY):wf=vf=0,jl=e),vf)},movementY:function(e){return"movementY"in e?e.movementY:wf}}),cb=hn(yh),Hk=Ut({},yh,{dataTransfer:0}),Kk=hn(Hk),Gk=Ut({},Uc,{relatedTarget:0}),jf=hn(Gk),Qk=Ut({},el,{animationName:0,elapsedTime:0,pseudoElement:0}),Yk=hn(Qk),Jk=Ut({},el,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Xk=hn(Jk),Zk=Ut({},el,{data:0}),db=hn(Zk),eS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nS(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=rS[e])?!!t[e]:!1}function vx(){return nS}var sS=Ut({},Uc,{key:function(e){if(e.key){var t=eS[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=tu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?tS[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vx,charCode:function(e){return e.type==="keypress"?tu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?tu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),oS=hn(sS),aS=Ut({},yh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ub=hn(aS),iS=Ut({},Uc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vx}),lS=hn(iS),cS=Ut({},el,{propertyName:0,elapsedTime:0,pseudoElement:0}),dS=hn(cS),uS=Ut({},yh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),hS=hn(uS),fS=[9,13,27,32],wx=Cs&&"CompositionEvent"in window,Bl=null;Cs&&"documentMode"in document&&(Bl=document.documentMode);var pS=Cs&&"TextEvent"in window&&!Bl,sw=Cs&&(!wx||Bl&&8<Bl&&11>=Bl),hb=" ",fb=!1;function ow(e,t){switch(e){case"keyup":return fS.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function aw(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ni=!1;function mS(e,t){switch(e){case"compositionend":return aw(t);case"keypress":return t.which!==32?null:(fb=!0,hb);case"textInput":return e=t.data,e===hb&&fb?null:e;default:return null}}function xS(e,t){if(ni)return e==="compositionend"||!wx&&ow(e,t)?(e=nw(),eu=bx=uo=null,ni=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return sw&&t.locale!=="ko"?null:t.data;default:return null}}var gS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!gS[e.type]:t==="textarea"}function iw(e,t,r,n){Lv(n),t=Eu(t,"onChange"),0<t.length&&(r=new yx("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var zl=null,sc=null;function bS(e){bw(e,0)}function vh(e){var t=ai(e);if(Tv(t))return e}function yS(e,t){if(e==="change")return t}var lw=!1;if(Cs){var Nf;if(Cs){var kf="oninput"in document;if(!kf){var mb=document.createElement("div");mb.setAttribute("oninput","return;"),kf=typeof mb.oninput=="function"}Nf=kf}else Nf=!1;lw=Nf&&(!document.documentMode||9<document.documentMode)}function xb(){zl&&(zl.detachEvent("onpropertychange",cw),sc=zl=null)}function cw(e){if(e.propertyName==="value"&&vh(sc)){var t=[];iw(t,sc,e,fx(e)),zv(bS,t)}}function vS(e,t,r){e==="focusin"?(xb(),zl=t,sc=r,zl.attachEvent("onpropertychange",cw)):e==="focusout"&&xb()}function wS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return vh(sc)}function jS(e,t){if(e==="click")return vh(t)}function NS(e,t){if(e==="input"||e==="change")return vh(t)}function kS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var $n=typeof Object.is=="function"?Object.is:kS;function oc(e,t){if($n(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var o=r[n];if(!jp.call(t,o)||!$n(e[o],t[o]))return!1}return!0}function gb(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function bb(e,t){var r=gb(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=gb(r)}}function dw(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?dw(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function uw(){for(var e=window,t=wu();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=wu(e.document)}return t}function jx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function SS(e){var t=uw(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&dw(r.ownerDocument.documentElement,r)){if(n!==null&&jx(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=r.textContent.length,a=Math.min(n.start,o);n=n.end===void 0?a:Math.min(n.end,o),!e.extend&&a>n&&(o=n,n=a,a=o),o=bb(r,a);var i=bb(r,n);o&&i&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var _S=Cs&&"documentMode"in document&&11>=document.documentMode,si=null,Bp=null,Vl=null,zp=!1;function yb(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;zp||si==null||si!==wu(n)||(n=si,"selectionStart"in n&&jx(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Vl&&oc(Vl,n)||(Vl=n,n=Eu(Bp,"onSelect"),0<n.length&&(t=new yx("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=si)))}function pd(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var oi={animationend:pd("Animation","AnimationEnd"),animationiteration:pd("Animation","AnimationIteration"),animationstart:pd("Animation","AnimationStart"),transitionend:pd("Transition","TransitionEnd")},Sf={},hw={};Cs&&(hw=document.createElement("div").style,"AnimationEvent"in window||(delete oi.animationend.animation,delete oi.animationiteration.animation,delete oi.animationstart.animation),"TransitionEvent"in window||delete oi.transitionend.transition);function wh(e){if(Sf[e])return Sf[e];if(!oi[e])return e;var t=oi[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in hw)return Sf[e]=t[r];return e}var fw=wh("animationend"),pw=wh("animationiteration"),mw=wh("animationstart"),xw=wh("transitionend"),gw=new Map,vb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Oo(e,t){gw.set(e,t),Ra(t,[e])}for(var _f=0;_f<vb.length;_f++){var Cf=vb[_f],CS=Cf.toLowerCase(),ES=Cf[0].toUpperCase()+Cf.slice(1);Oo(CS,"on"+ES)}Oo(fw,"onAnimationEnd");Oo(pw,"onAnimationIteration");Oo(mw,"onAnimationStart");Oo("dblclick","onDoubleClick");Oo("focusin","onFocus");Oo("focusout","onBlur");Oo(xw,"onTransitionEnd");Fi("onMouseEnter",["mouseout","mouseover"]);Fi("onMouseLeave",["mouseout","mouseover"]);Fi("onPointerEnter",["pointerout","pointerover"]);Fi("onPointerLeave",["pointerout","pointerover"]);Ra("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ra("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ra("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ra("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ra("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ra("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ml="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),PS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ml));function wb(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Ck(n,t,void 0,e),e.currentTarget=null}function bw(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],o=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var i=n.length-1;0<=i;i--){var l=n[i],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==a&&o.isPropagationStopped())break e;wb(o,l,d),a=c}else for(i=0;i<n.length;i++){if(l=n[i],c=l.instance,d=l.currentTarget,l=l.listener,c!==a&&o.isPropagationStopped())break e;wb(o,l,d),a=c}}}if(Nu)throw e=$p,Nu=!1,$p=null,e}function Tt(e,t){var r=t[Kp];r===void 0&&(r=t[Kp]=new Set);var n=e+"__bubble";r.has(n)||(yw(t,e,2,!1),r.add(n))}function Ef(e,t,r){var n=0;t&&(n|=4),yw(r,e,n,t)}var md="_reactListening"+Math.random().toString(36).slice(2);function ac(e){if(!e[md]){e[md]=!0,_v.forEach(function(r){r!=="selectionchange"&&(PS.has(r)||Ef(r,!1,e),Ef(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[md]||(t[md]=!0,Ef("selectionchange",!1,t))}}function yw(e,t,r,n){switch(rw(t)){case 1:var o=Vk;break;case 4:o=Wk;break;default:o=gx}r=o.bind(null,t,r,e),o=void 0,!Mp||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),n?o!==void 0?e.addEventListener(t,r,{capture:!0,passive:o}):e.addEventListener(t,r,!0):o!==void 0?e.addEventListener(t,r,{passive:o}):e.addEventListener(t,r,!1)}function Pf(e,t,r,n,o){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var l=n.stateNode.containerInfo;if(l===o||l.nodeType===8&&l.parentNode===o)break;if(i===4)for(i=n.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===o||c.nodeType===8&&c.parentNode===o))return;i=i.return}for(;l!==null;){if(i=Zo(l),i===null)return;if(c=i.tag,c===5||c===6){n=a=i;continue e}l=l.parentNode}}n=n.return}zv(function(){var d=a,h=fx(r),u=[];e:{var f=gw.get(e);if(f!==void 0){var m=yx,g=e;switch(e){case"keypress":if(tu(r)===0)break e;case"keydown":case"keyup":m=oS;break;case"focusin":g="focus",m=jf;break;case"focusout":g="blur",m=jf;break;case"beforeblur":case"afterblur":m=jf;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=cb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Kk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=lS;break;case fw:case pw:case mw:m=Yk;break;case xw:m=dS;break;case"scroll":m=qk;break;case"wheel":m=hS;break;case"copy":case"cut":case"paste":m=Xk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=ub}var x=(t&4)!==0,N=!x&&e==="scroll",b=x?f!==null?f+"Capture":null:f;x=[];for(var y=d,v;y!==null;){v=y;var k=v.stateNode;if(v.tag===5&&k!==null&&(v=k,b!==null&&(k=ec(y,b),k!=null&&x.push(ic(y,k,v)))),N)break;y=y.return}0<x.length&&(f=new m(f,g,null,r,h),u.push({event:f,listeners:x}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",f&&r!==Dp&&(g=r.relatedTarget||r.fromElement)&&(Zo(g)||g[Es]))break e;if((m||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,m?(g=r.relatedTarget||r.toElement,m=d,g=g?Zo(g):null,g!==null&&(N=Ta(g),g!==N||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=d),m!==g)){if(x=cb,k="onMouseLeave",b="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(x=ub,k="onPointerLeave",b="onPointerEnter",y="pointer"),N=m==null?f:ai(m),v=g==null?f:ai(g),f=new x(k,y+"leave",m,r,h),f.target=N,f.relatedTarget=v,k=null,Zo(h)===d&&(x=new x(b,y+"enter",g,r,h),x.target=v,x.relatedTarget=N,k=x),N=k,m&&g)t:{for(x=m,b=g,y=0,v=x;v;v=La(v))y++;for(v=0,k=b;k;k=La(k))v++;for(;0<y-v;)x=La(x),y--;for(;0<v-y;)b=La(b),v--;for(;y--;){if(x===b||b!==null&&x===b.alternate)break t;x=La(x),b=La(b)}x=null}else x=null;m!==null&&jb(u,f,m,x,!1),g!==null&&N!==null&&jb(u,N,g,x,!0)}}e:{if(f=d?ai(d):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var S=yS;else if(pb(f))if(lw)S=NS;else{S=wS;var E=vS}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=jS);if(S&&(S=S(e,d))){iw(u,S,r,h);break e}E&&E(e,f,d),e==="focusout"&&(E=f._wrapperState)&&E.controlled&&f.type==="number"&&Pp(f,"number",f.value)}switch(E=d?ai(d):window,e){case"focusin":(pb(E)||E.contentEditable==="true")&&(si=E,Bp=d,Vl=null);break;case"focusout":Vl=Bp=si=null;break;case"mousedown":zp=!0;break;case"contextmenu":case"mouseup":case"dragend":zp=!1,yb(u,r,h);break;case"selectionchange":if(_S)break;case"keydown":case"keyup":yb(u,r,h)}var C;if(wx)e:{switch(e){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else ni?ow(e,r)&&(R="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(R="onCompositionStart");R&&(sw&&r.locale!=="ko"&&(ni||R!=="onCompositionStart"?R==="onCompositionEnd"&&ni&&(C=nw()):(uo=h,bx="value"in uo?uo.value:uo.textContent,ni=!0)),E=Eu(d,R),0<E.length&&(R=new db(R,e,null,r,h),u.push({event:R,listeners:E}),C?R.data=C:(C=aw(r),C!==null&&(R.data=C)))),(C=pS?mS(e,r):xS(e,r))&&(d=Eu(d,"onBeforeInput"),0<d.length&&(h=new db("onBeforeInput","beforeinput",null,r,h),u.push({event:h,listeners:d}),h.data=C))}bw(u,t)})}function ic(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Eu(e,t){for(var r=t+"Capture",n=[];e!==null;){var o=e,a=o.stateNode;o.tag===5&&a!==null&&(o=a,a=ec(e,r),a!=null&&n.unshift(ic(e,a,o)),a=ec(e,t),a!=null&&n.push(ic(e,a,o))),e=e.return}return n}function La(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function jb(e,t,r,n,o){for(var a=t._reactName,i=[];r!==null&&r!==n;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,o?(c=ec(r,a),c!=null&&i.unshift(ic(r,c,l))):o||(c=ec(r,a),c!=null&&i.push(ic(r,c,l)))),r=r.return}i.length!==0&&e.push({event:t,listeners:i})}var RS=/\r\n?/g,TS=/\u0000|\uFFFD/g;function Nb(e){return(typeof e=="string"?e:""+e).replace(RS,`
`).replace(TS,"")}function xd(e,t,r){if(t=Nb(t),Nb(e)!==t&&r)throw Error(ae(425))}function Pu(){}var Vp=null,Wp=null;function qp(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Hp=typeof setTimeout=="function"?setTimeout:void 0,AS=typeof clearTimeout=="function"?clearTimeout:void 0,kb=typeof Promise=="function"?Promise:void 0,OS=typeof queueMicrotask=="function"?queueMicrotask:typeof kb<"u"?function(e){return kb.resolve(null).then(e).catch(DS)}:Hp;function DS(e){setTimeout(function(){throw e})}function Rf(e,t){var r=t,n=0;do{var o=r.nextSibling;if(e.removeChild(r),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(n===0){e.removeChild(o),nc(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=o}while(r);nc(t)}function bo(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Sb(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var tl=Math.random().toString(36).slice(2),Xn="__reactFiber$"+tl,lc="__reactProps$"+tl,Es="__reactContainer$"+tl,Kp="__reactEvents$"+tl,IS="__reactListeners$"+tl,MS="__reactHandles$"+tl;function Zo(e){var t=e[Xn];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Es]||r[Xn]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Sb(e);e!==null;){if(r=e[Xn])return r;e=Sb(e)}return t}e=r,r=e.parentNode}return null}function Bc(e){return e=e[Xn]||e[Es],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ai(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ae(33))}function jh(e){return e[lc]||null}var Gp=[],ii=-1;function Do(e){return{current:e}}function At(e){0>ii||(e.current=Gp[ii],Gp[ii]=null,ii--)}function Pt(e,t){ii++,Gp[ii]=e.current,e.current=t}var _o={},Rr=Do(_o),Hr=Do(!1),ya=_o;function Ui(e,t){var r=e.type.contextTypes;if(!r)return _o;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var o={},a;for(a in r)o[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Kr(e){return e=e.childContextTypes,e!=null}function Ru(){At(Hr),At(Rr)}function _b(e,t,r){if(Rr.current!==_o)throw Error(ae(168));Pt(Rr,t),Pt(Hr,r)}function vw(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var o in n)if(!(o in t))throw Error(ae(108,vk(e)||"Unknown",o));return Ut({},r,n)}function Tu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||_o,ya=Rr.current,Pt(Rr,e),Pt(Hr,Hr.current),!0}function Cb(e,t,r){var n=e.stateNode;if(!n)throw Error(ae(169));r?(e=vw(e,t,ya),n.__reactInternalMemoizedMergedChildContext=e,At(Hr),At(Rr),Pt(Rr,e)):At(Hr),Pt(Hr,r)}var ys=null,Nh=!1,Tf=!1;function ww(e){ys===null?ys=[e]:ys.push(e)}function $S(e){Nh=!0,ww(e)}function Io(){if(!Tf&&ys!==null){Tf=!0;var e=0,t=St;try{var r=ys;for(St=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}ys=null,Nh=!1}catch(o){throw ys!==null&&(ys=ys.slice(e+1)),Hv(px,Io),o}finally{St=t,Tf=!1}}return null}var li=[],ci=0,Au=null,Ou=0,xn=[],gn=0,va=null,js=1,Ns="";function Ho(e,t){li[ci++]=Ou,li[ci++]=Au,Au=e,Ou=t}function jw(e,t,r){xn[gn++]=js,xn[gn++]=Ns,xn[gn++]=va,va=e;var n=js;e=Ns;var o=32-In(n)-1;n&=~(1<<o),r+=1;var a=32-In(t)+o;if(30<a){var i=o-o%5;a=(n&(1<<i)-1).toString(32),n>>=i,o-=i,js=1<<32-In(t)+o|r<<o|n,Ns=a+e}else js=1<<a|r<<o|n,Ns=e}function Nx(e){e.return!==null&&(Ho(e,1),jw(e,1,0))}function kx(e){for(;e===Au;)Au=li[--ci],li[ci]=null,Ou=li[--ci],li[ci]=null;for(;e===va;)va=xn[--gn],xn[gn]=null,Ns=xn[--gn],xn[gn]=null,js=xn[--gn],xn[gn]=null}var ln=null,sn=null,Dt=!1,Dn=null;function Nw(e,t){var r=bn(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Eb(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ln=e,sn=bo(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ln=e,sn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=va!==null?{id:js,overflow:Ns}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=bn(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,ln=e,sn=null,!0):!1;default:return!1}}function Qp(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Yp(e){if(Dt){var t=sn;if(t){var r=t;if(!Eb(e,t)){if(Qp(e))throw Error(ae(418));t=bo(r.nextSibling);var n=ln;t&&Eb(e,t)?Nw(n,r):(e.flags=e.flags&-4097|2,Dt=!1,ln=e)}}else{if(Qp(e))throw Error(ae(418));e.flags=e.flags&-4097|2,Dt=!1,ln=e}}}function Pb(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ln=e}function gd(e){if(e!==ln)return!1;if(!Dt)return Pb(e),Dt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!qp(e.type,e.memoizedProps)),t&&(t=sn)){if(Qp(e))throw kw(),Error(ae(418));for(;t;)Nw(e,t),t=bo(t.nextSibling)}if(Pb(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ae(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){sn=bo(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}sn=null}}else sn=ln?bo(e.stateNode.nextSibling):null;return!0}function kw(){for(var e=sn;e;)e=bo(e.nextSibling)}function Bi(){sn=ln=null,Dt=!1}function Sx(e){Dn===null?Dn=[e]:Dn.push(e)}var LS=Os.ReactCurrentBatchConfig;function Nl(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ae(309));var n=r.stateNode}if(!n)throw Error(ae(147,e));var o=n,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(i){var l=o.refs;i===null?delete l[a]:l[a]=i},t._stringRef=a,t)}if(typeof e!="string")throw Error(ae(284));if(!r._owner)throw Error(ae(290,e))}return e}function bd(e,t){throw e=Object.prototype.toString.call(t),Error(ae(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Rb(e){var t=e._init;return t(e._payload)}function Sw(e){function t(b,y){if(e){var v=b.deletions;v===null?(b.deletions=[y],b.flags|=16):v.push(y)}}function r(b,y){if(!e)return null;for(;y!==null;)t(b,y),y=y.sibling;return null}function n(b,y){for(b=new Map;y!==null;)y.key!==null?b.set(y.key,y):b.set(y.index,y),y=y.sibling;return b}function o(b,y){return b=jo(b,y),b.index=0,b.sibling=null,b}function a(b,y,v){return b.index=v,e?(v=b.alternate,v!==null?(v=v.index,v<y?(b.flags|=2,y):v):(b.flags|=2,y)):(b.flags|=1048576,y)}function i(b){return e&&b.alternate===null&&(b.flags|=2),b}function l(b,y,v,k){return y===null||y.tag!==6?(y=Lf(v,b.mode,k),y.return=b,y):(y=o(y,v),y.return=b,y)}function c(b,y,v,k){var S=v.type;return S===ri?h(b,y,v.props.children,k,v.key):y!==null&&(y.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Gs&&Rb(S)===y.type)?(k=o(y,v.props),k.ref=Nl(b,y,v),k.return=b,k):(k=lu(v.type,v.key,v.props,null,b.mode,k),k.ref=Nl(b,y,v),k.return=b,k)}function d(b,y,v,k){return y===null||y.tag!==4||y.stateNode.containerInfo!==v.containerInfo||y.stateNode.implementation!==v.implementation?(y=Ff(v,b.mode,k),y.return=b,y):(y=o(y,v.children||[]),y.return=b,y)}function h(b,y,v,k,S){return y===null||y.tag!==7?(y=fa(v,b.mode,k,S),y.return=b,y):(y=o(y,v),y.return=b,y)}function u(b,y,v){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Lf(""+y,b.mode,v),y.return=b,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case id:return v=lu(y.type,y.key,y.props,null,b.mode,v),v.ref=Nl(b,null,y),v.return=b,v;case ti:return y=Ff(y,b.mode,v),y.return=b,y;case Gs:var k=y._init;return u(b,k(y._payload),v)}if(Dl(y)||bl(y))return y=fa(y,b.mode,v,null),y.return=b,y;bd(b,y)}return null}function f(b,y,v,k){var S=y!==null?y.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return S!==null?null:l(b,y,""+v,k);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case id:return v.key===S?c(b,y,v,k):null;case ti:return v.key===S?d(b,y,v,k):null;case Gs:return S=v._init,f(b,y,S(v._payload),k)}if(Dl(v)||bl(v))return S!==null?null:h(b,y,v,k,null);bd(b,v)}return null}function m(b,y,v,k,S){if(typeof k=="string"&&k!==""||typeof k=="number")return b=b.get(v)||null,l(y,b,""+k,S);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case id:return b=b.get(k.key===null?v:k.key)||null,c(y,b,k,S);case ti:return b=b.get(k.key===null?v:k.key)||null,d(y,b,k,S);case Gs:var E=k._init;return m(b,y,v,E(k._payload),S)}if(Dl(k)||bl(k))return b=b.get(v)||null,h(y,b,k,S,null);bd(y,k)}return null}function g(b,y,v,k){for(var S=null,E=null,C=y,R=y=0,F=null;C!==null&&R<v.length;R++){C.index>R?(F=C,C=null):F=C.sibling;var T=f(b,C,v[R],k);if(T===null){C===null&&(C=F);break}e&&C&&T.alternate===null&&t(b,C),y=a(T,y,R),E===null?S=T:E.sibling=T,E=T,C=F}if(R===v.length)return r(b,C),Dt&&Ho(b,R),S;if(C===null){for(;R<v.length;R++)C=u(b,v[R],k),C!==null&&(y=a(C,y,R),E===null?S=C:E.sibling=C,E=C);return Dt&&Ho(b,R),S}for(C=n(b,C);R<v.length;R++)F=m(C,b,R,v[R],k),F!==null&&(e&&F.alternate!==null&&C.delete(F.key===null?R:F.key),y=a(F,y,R),E===null?S=F:E.sibling=F,E=F);return e&&C.forEach(function(V){return t(b,V)}),Dt&&Ho(b,R),S}function x(b,y,v,k){var S=bl(v);if(typeof S!="function")throw Error(ae(150));if(v=S.call(v),v==null)throw Error(ae(151));for(var E=S=null,C=y,R=y=0,F=null,T=v.next();C!==null&&!T.done;R++,T=v.next()){C.index>R?(F=C,C=null):F=C.sibling;var V=f(b,C,T.value,k);if(V===null){C===null&&(C=F);break}e&&C&&V.alternate===null&&t(b,C),y=a(V,y,R),E===null?S=V:E.sibling=V,E=V,C=F}if(T.done)return r(b,C),Dt&&Ho(b,R),S;if(C===null){for(;!T.done;R++,T=v.next())T=u(b,T.value,k),T!==null&&(y=a(T,y,R),E===null?S=T:E.sibling=T,E=T);return Dt&&Ho(b,R),S}for(C=n(b,C);!T.done;R++,T=v.next())T=m(C,b,R,T.value,k),T!==null&&(e&&T.alternate!==null&&C.delete(T.key===null?R:T.key),y=a(T,y,R),E===null?S=T:E.sibling=T,E=T);return e&&C.forEach(function(Y){return t(b,Y)}),Dt&&Ho(b,R),S}function N(b,y,v,k){if(typeof v=="object"&&v!==null&&v.type===ri&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case id:e:{for(var S=v.key,E=y;E!==null;){if(E.key===S){if(S=v.type,S===ri){if(E.tag===7){r(b,E.sibling),y=o(E,v.props.children),y.return=b,b=y;break e}}else if(E.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Gs&&Rb(S)===E.type){r(b,E.sibling),y=o(E,v.props),y.ref=Nl(b,E,v),y.return=b,b=y;break e}r(b,E);break}else t(b,E);E=E.sibling}v.type===ri?(y=fa(v.props.children,b.mode,k,v.key),y.return=b,b=y):(k=lu(v.type,v.key,v.props,null,b.mode,k),k.ref=Nl(b,y,v),k.return=b,b=k)}return i(b);case ti:e:{for(E=v.key;y!==null;){if(y.key===E)if(y.tag===4&&y.stateNode.containerInfo===v.containerInfo&&y.stateNode.implementation===v.implementation){r(b,y.sibling),y=o(y,v.children||[]),y.return=b,b=y;break e}else{r(b,y);break}else t(b,y);y=y.sibling}y=Ff(v,b.mode,k),y.return=b,b=y}return i(b);case Gs:return E=v._init,N(b,y,E(v._payload),k)}if(Dl(v))return g(b,y,v,k);if(bl(v))return x(b,y,v,k);bd(b,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,y!==null&&y.tag===6?(r(b,y.sibling),y=o(y,v),y.return=b,b=y):(r(b,y),y=Lf(v,b.mode,k),y.return=b,b=y),i(b)):r(b,y)}return N}var zi=Sw(!0),_w=Sw(!1),Du=Do(null),Iu=null,di=null,_x=null;function Cx(){_x=di=Iu=null}function Ex(e){var t=Du.current;At(Du),e._currentValue=t}function Jp(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function yi(e,t){Iu=e,_x=di=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(qr=!0),e.firstContext=null)}function wn(e){var t=e._currentValue;if(_x!==e)if(e={context:e,memoizedValue:t,next:null},di===null){if(Iu===null)throw Error(ae(308));di=e,Iu.dependencies={lanes:0,firstContext:e}}else di=di.next=e;return t}var ea=null;function Px(e){ea===null?ea=[e]:ea.push(e)}function Cw(e,t,r,n){var o=t.interleaved;return o===null?(r.next=r,Px(t)):(r.next=o.next,o.next=r),t.interleaved=r,Ps(e,n)}function Ps(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Qs=!1;function Rx(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ew(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ks(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function yo(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,mt&2){var o=n.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),n.pending=t,Ps(e,r)}return o=n.interleaved,o===null?(t.next=t,Px(n)):(t.next=o.next,o.next=t),n.interleaved=t,Ps(e,r)}function ru(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,mx(e,r)}}function Tb(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var o=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?o=a=i:a=a.next=i,r=r.next}while(r!==null);a===null?o=a=t:a=a.next=t}else o=a=t;r={baseState:n.baseState,firstBaseUpdate:o,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Mu(e,t,r,n){var o=e.updateQueue;Qs=!1;var a=o.firstBaseUpdate,i=o.lastBaseUpdate,l=o.shared.pending;if(l!==null){o.shared.pending=null;var c=l,d=c.next;c.next=null,i===null?a=d:i.next=d,i=c;var h=e.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==i&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(a!==null){var u=o.baseState;i=0,h=d=c=null,l=a;do{var f=l.lane,m=l.eventTime;if((n&f)===f){h!==null&&(h=h.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,x=l;switch(f=t,m=r,x.tag){case 1:if(g=x.payload,typeof g=="function"){u=g.call(m,u,f);break e}u=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=x.payload,f=typeof g=="function"?g.call(m,u,f):g,f==null)break e;u=Ut({},u,f);break e;case 2:Qs=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=o.effects,f===null?o.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=m,c=u):h=h.next=m,i|=f;if(l=l.next,l===null){if(l=o.shared.pending,l===null)break;f=l,l=f.next,f.next=null,o.lastBaseUpdate=f,o.shared.pending=null}}while(!0);if(h===null&&(c=u),o.baseState=c,o.firstBaseUpdate=d,o.lastBaseUpdate=h,t=o.shared.interleaved,t!==null){o=t;do i|=o.lane,o=o.next;while(o!==t)}else a===null&&(o.shared.lanes=0);ja|=i,e.lanes=i,e.memoizedState=u}}function Ab(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],o=n.callback;if(o!==null){if(n.callback=null,n=r,typeof o!="function")throw Error(ae(191,o));o.call(n)}}}var zc={},rs=Do(zc),cc=Do(zc),dc=Do(zc);function ta(e){if(e===zc)throw Error(ae(174));return e}function Tx(e,t){switch(Pt(dc,t),Pt(cc,e),Pt(rs,zc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Tp(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Tp(t,e)}At(rs),Pt(rs,t)}function Vi(){At(rs),At(cc),At(dc)}function Pw(e){ta(dc.current);var t=ta(rs.current),r=Tp(t,e.type);t!==r&&(Pt(cc,e),Pt(rs,r))}function Ax(e){cc.current===e&&(At(rs),At(cc))}var $t=Do(0);function $u(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Af=[];function Ox(){for(var e=0;e<Af.length;e++)Af[e]._workInProgressVersionPrimary=null;Af.length=0}var nu=Os.ReactCurrentDispatcher,Of=Os.ReactCurrentBatchConfig,wa=0,Ft=null,or=null,ur=null,Lu=!1,Wl=!1,uc=0,FS=0;function kr(){throw Error(ae(321))}function Dx(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!$n(e[r],t[r]))return!1;return!0}function Ix(e,t,r,n,o,a){if(wa=a,Ft=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,nu.current=e===null||e.memoizedState===null?VS:WS,e=r(n,o),Wl){a=0;do{if(Wl=!1,uc=0,25<=a)throw Error(ae(301));a+=1,ur=or=null,t.updateQueue=null,nu.current=qS,e=r(n,o)}while(Wl)}if(nu.current=Fu,t=or!==null&&or.next!==null,wa=0,ur=or=Ft=null,Lu=!1,t)throw Error(ae(300));return e}function Mx(){var e=uc!==0;return uc=0,e}function Hn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ur===null?Ft.memoizedState=ur=e:ur=ur.next=e,ur}function jn(){if(or===null){var e=Ft.alternate;e=e!==null?e.memoizedState:null}else e=or.next;var t=ur===null?Ft.memoizedState:ur.next;if(t!==null)ur=t,or=e;else{if(e===null)throw Error(ae(310));or=e,e={memoizedState:or.memoizedState,baseState:or.baseState,baseQueue:or.baseQueue,queue:or.queue,next:null},ur===null?Ft.memoizedState=ur=e:ur=ur.next=e}return ur}function hc(e,t){return typeof t=="function"?t(e):t}function Df(e){var t=jn(),r=t.queue;if(r===null)throw Error(ae(311));r.lastRenderedReducer=e;var n=or,o=n.baseQueue,a=r.pending;if(a!==null){if(o!==null){var i=o.next;o.next=a.next,a.next=i}n.baseQueue=o=a,r.pending=null}if(o!==null){a=o.next,n=n.baseState;var l=i=null,c=null,d=a;do{var h=d.lane;if((wa&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var u={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=u,i=n):c=c.next=u,Ft.lanes|=h,ja|=h}d=d.next}while(d!==null&&d!==a);c===null?i=n:c.next=l,$n(n,t.memoizedState)||(qr=!0),t.memoizedState=n,t.baseState=i,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){o=e;do a=o.lane,Ft.lanes|=a,ja|=a,o=o.next;while(o!==e)}else o===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function If(e){var t=jn(),r=t.queue;if(r===null)throw Error(ae(311));r.lastRenderedReducer=e;var n=r.dispatch,o=r.pending,a=t.memoizedState;if(o!==null){r.pending=null;var i=o=o.next;do a=e(a,i.action),i=i.next;while(i!==o);$n(a,t.memoizedState)||(qr=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function Rw(){}function Tw(e,t){var r=Ft,n=jn(),o=t(),a=!$n(n.memoizedState,o);if(a&&(n.memoizedState=o,qr=!0),n=n.queue,$x(Dw.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||ur!==null&&ur.memoizedState.tag&1){if(r.flags|=2048,fc(9,Ow.bind(null,r,n,o,t),void 0,null),hr===null)throw Error(ae(349));wa&30||Aw(r,t,o)}return o}function Aw(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ft.updateQueue,t===null?(t={lastEffect:null,stores:null},Ft.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Ow(e,t,r,n){t.value=r,t.getSnapshot=n,Iw(t)&&Mw(e)}function Dw(e,t,r){return r(function(){Iw(t)&&Mw(e)})}function Iw(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!$n(e,r)}catch{return!0}}function Mw(e){var t=Ps(e,1);t!==null&&Mn(t,e,1,-1)}function Ob(e){var t=Hn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hc,lastRenderedState:e},t.queue=e,e=e.dispatch=zS.bind(null,Ft,e),[t.memoizedState,e]}function fc(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Ft.updateQueue,t===null?(t={lastEffect:null,stores:null},Ft.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function $w(){return jn().memoizedState}function su(e,t,r,n){var o=Hn();Ft.flags|=e,o.memoizedState=fc(1|t,r,void 0,n===void 0?null:n)}function kh(e,t,r,n){var o=jn();n=n===void 0?null:n;var a=void 0;if(or!==null){var i=or.memoizedState;if(a=i.destroy,n!==null&&Dx(n,i.deps)){o.memoizedState=fc(t,r,a,n);return}}Ft.flags|=e,o.memoizedState=fc(1|t,r,a,n)}function Db(e,t){return su(8390656,8,e,t)}function $x(e,t){return kh(2048,8,e,t)}function Lw(e,t){return kh(4,2,e,t)}function Fw(e,t){return kh(4,4,e,t)}function Uw(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Bw(e,t,r){return r=r!=null?r.concat([e]):null,kh(4,4,Uw.bind(null,t,e),r)}function Lx(){}function zw(e,t){var r=jn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Dx(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Vw(e,t){var r=jn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Dx(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Ww(e,t,r){return wa&21?($n(r,t)||(r=Qv(),Ft.lanes|=r,ja|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,qr=!0),e.memoizedState=r)}function US(e,t){var r=St;St=r!==0&&4>r?r:4,e(!0);var n=Of.transition;Of.transition={};try{e(!1),t()}finally{St=r,Of.transition=n}}function qw(){return jn().memoizedState}function BS(e,t,r){var n=wo(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Hw(e))Kw(t,r);else if(r=Cw(e,t,r,n),r!==null){var o=Ir();Mn(r,e,n,o),Gw(r,t,n)}}function zS(e,t,r){var n=wo(e),o={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Hw(e))Kw(t,o);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var i=t.lastRenderedState,l=a(i,r);if(o.hasEagerState=!0,o.eagerState=l,$n(l,i)){var c=t.interleaved;c===null?(o.next=o,Px(t)):(o.next=c.next,c.next=o),t.interleaved=o;return}}catch{}finally{}r=Cw(e,t,o,n),r!==null&&(o=Ir(),Mn(r,e,n,o),Gw(r,t,n))}}function Hw(e){var t=e.alternate;return e===Ft||t!==null&&t===Ft}function Kw(e,t){Wl=Lu=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Gw(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,mx(e,r)}}var Fu={readContext:wn,useCallback:kr,useContext:kr,useEffect:kr,useImperativeHandle:kr,useInsertionEffect:kr,useLayoutEffect:kr,useMemo:kr,useReducer:kr,useRef:kr,useState:kr,useDebugValue:kr,useDeferredValue:kr,useTransition:kr,useMutableSource:kr,useSyncExternalStore:kr,useId:kr,unstable_isNewReconciler:!1},VS={readContext:wn,useCallback:function(e,t){return Hn().memoizedState=[e,t===void 0?null:t],e},useContext:wn,useEffect:Db,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,su(4194308,4,Uw.bind(null,t,e),r)},useLayoutEffect:function(e,t){return su(4194308,4,e,t)},useInsertionEffect:function(e,t){return su(4,2,e,t)},useMemo:function(e,t){var r=Hn();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Hn();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=BS.bind(null,Ft,e),[n.memoizedState,e]},useRef:function(e){var t=Hn();return e={current:e},t.memoizedState=e},useState:Ob,useDebugValue:Lx,useDeferredValue:function(e){return Hn().memoizedState=e},useTransition:function(){var e=Ob(!1),t=e[0];return e=US.bind(null,e[1]),Hn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Ft,o=Hn();if(Dt){if(r===void 0)throw Error(ae(407));r=r()}else{if(r=t(),hr===null)throw Error(ae(349));wa&30||Aw(n,t,r)}o.memoizedState=r;var a={value:r,getSnapshot:t};return o.queue=a,Db(Dw.bind(null,n,a,e),[e]),n.flags|=2048,fc(9,Ow.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=Hn(),t=hr.identifierPrefix;if(Dt){var r=Ns,n=js;r=(n&~(1<<32-In(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=uc++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=FS++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},WS={readContext:wn,useCallback:zw,useContext:wn,useEffect:$x,useImperativeHandle:Bw,useInsertionEffect:Lw,useLayoutEffect:Fw,useMemo:Vw,useReducer:Df,useRef:$w,useState:function(){return Df(hc)},useDebugValue:Lx,useDeferredValue:function(e){var t=jn();return Ww(t,or.memoizedState,e)},useTransition:function(){var e=Df(hc)[0],t=jn().memoizedState;return[e,t]},useMutableSource:Rw,useSyncExternalStore:Tw,useId:qw,unstable_isNewReconciler:!1},qS={readContext:wn,useCallback:zw,useContext:wn,useEffect:$x,useImperativeHandle:Bw,useInsertionEffect:Lw,useLayoutEffect:Fw,useMemo:Vw,useReducer:If,useRef:$w,useState:function(){return If(hc)},useDebugValue:Lx,useDeferredValue:function(e){var t=jn();return or===null?t.memoizedState=e:Ww(t,or.memoizedState,e)},useTransition:function(){var e=If(hc)[0],t=jn().memoizedState;return[e,t]},useMutableSource:Rw,useSyncExternalStore:Tw,useId:qw,unstable_isNewReconciler:!1};function Cn(e,t){if(e&&e.defaultProps){t=Ut({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Xp(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Ut({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Sh={isMounted:function(e){return(e=e._reactInternals)?Ta(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Ir(),o=wo(e),a=ks(n,o);a.payload=t,r!=null&&(a.callback=r),t=yo(e,a,o),t!==null&&(Mn(t,e,o,n),ru(t,e,o))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Ir(),o=wo(e),a=ks(n,o);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=yo(e,a,o),t!==null&&(Mn(t,e,o,n),ru(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ir(),n=wo(e),o=ks(r,n);o.tag=2,t!=null&&(o.callback=t),t=yo(e,o,n),t!==null&&(Mn(t,e,n,r),ru(t,e,n))}};function Ib(e,t,r,n,o,a,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,i):t.prototype&&t.prototype.isPureReactComponent?!oc(r,n)||!oc(o,a):!0}function Qw(e,t,r){var n=!1,o=_o,a=t.contextType;return typeof a=="object"&&a!==null?a=wn(a):(o=Kr(t)?ya:Rr.current,n=t.contextTypes,a=(n=n!=null)?Ui(e,o):_o),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Sh,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=a),t}function Mb(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Sh.enqueueReplaceState(t,t.state,null)}function Zp(e,t,r,n){var o=e.stateNode;o.props=r,o.state=e.memoizedState,o.refs={},Rx(e);var a=t.contextType;typeof a=="object"&&a!==null?o.context=wn(a):(a=Kr(t)?ya:Rr.current,o.context=Ui(e,a)),o.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Xp(e,t,a,r),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&Sh.enqueueReplaceState(o,o.state,null),Mu(e,r,o,n),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function Wi(e,t){try{var r="",n=t;do r+=yk(n),n=n.return;while(n);var o=r}catch(a){o=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:o,digest:null}}function Mf(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function em(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var HS=typeof WeakMap=="function"?WeakMap:Map;function Yw(e,t,r){r=ks(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Bu||(Bu=!0,dm=n),em(e,t)},r}function Jw(e,t,r){r=ks(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var o=t.value;r.payload=function(){return n(o)},r.callback=function(){em(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){em(e,t),typeof n!="function"&&(vo===null?vo=new Set([this]):vo.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),r}function $b(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new HS;var o=new Set;n.set(t,o)}else o=n.get(t),o===void 0&&(o=new Set,n.set(t,o));o.has(r)||(o.add(r),e=a_.bind(null,e,t,r),t.then(e,e))}function Lb(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Fb(e,t,r,n,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=ks(-1,1),t.tag=2,yo(r,t,1))),r.lanes|=1),e)}var KS=Os.ReactCurrentOwner,qr=!1;function Or(e,t,r,n){t.child=e===null?_w(t,null,r,n):zi(t,e.child,r,n)}function Ub(e,t,r,n,o){r=r.render;var a=t.ref;return yi(t,o),n=Ix(e,t,r,n,a,o),r=Mx(),e!==null&&!qr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Rs(e,t,o)):(Dt&&r&&Nx(t),t.flags|=1,Or(e,t,n,o),t.child)}function Bb(e,t,r,n,o){if(e===null){var a=r.type;return typeof a=="function"&&!Hx(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,Xw(e,t,a,n,o)):(e=lu(r.type,null,n,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&o)){var i=a.memoizedProps;if(r=r.compare,r=r!==null?r:oc,r(i,n)&&e.ref===t.ref)return Rs(e,t,o)}return t.flags|=1,e=jo(a,n),e.ref=t.ref,e.return=t,t.child=e}function Xw(e,t,r,n,o){if(e!==null){var a=e.memoizedProps;if(oc(a,n)&&e.ref===t.ref)if(qr=!1,t.pendingProps=n=a,(e.lanes&o)!==0)e.flags&131072&&(qr=!0);else return t.lanes=e.lanes,Rs(e,t,o)}return tm(e,t,r,n,o)}function Zw(e,t,r){var n=t.pendingProps,o=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pt(hi,tn),tn|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Pt(hi,tn),tn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,Pt(hi,tn),tn|=n}else a!==null?(n=a.baseLanes|r,t.memoizedState=null):n=r,Pt(hi,tn),tn|=n;return Or(e,t,o,r),t.child}function e1(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function tm(e,t,r,n,o){var a=Kr(r)?ya:Rr.current;return a=Ui(t,a),yi(t,o),r=Ix(e,t,r,n,a,o),n=Mx(),e!==null&&!qr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Rs(e,t,o)):(Dt&&n&&Nx(t),t.flags|=1,Or(e,t,r,o),t.child)}function zb(e,t,r,n,o){if(Kr(r)){var a=!0;Tu(t)}else a=!1;if(yi(t,o),t.stateNode===null)ou(e,t),Qw(t,r,n),Zp(t,r,n,o),n=!0;else if(e===null){var i=t.stateNode,l=t.memoizedProps;i.props=l;var c=i.context,d=r.contextType;typeof d=="object"&&d!==null?d=wn(d):(d=Kr(r)?ya:Rr.current,d=Ui(t,d));var h=r.getDerivedStateFromProps,u=typeof h=="function"||typeof i.getSnapshotBeforeUpdate=="function";u||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==n||c!==d)&&Mb(t,i,n,d),Qs=!1;var f=t.memoizedState;i.state=f,Mu(t,n,i,o),c=t.memoizedState,l!==n||f!==c||Hr.current||Qs?(typeof h=="function"&&(Xp(t,r,h,n),c=t.memoizedState),(l=Qs||Ib(t,r,l,n,f,c,d))?(u||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),i.props=n,i.state=c,i.context=d,n=l):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,Ew(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:Cn(t.type,l),i.props=d,u=t.pendingProps,f=i.context,c=r.contextType,typeof c=="object"&&c!==null?c=wn(c):(c=Kr(r)?ya:Rr.current,c=Ui(t,c));var m=r.getDerivedStateFromProps;(h=typeof m=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==u||f!==c)&&Mb(t,i,n,c),Qs=!1,f=t.memoizedState,i.state=f,Mu(t,n,i,o);var g=t.memoizedState;l!==u||f!==g||Hr.current||Qs?(typeof m=="function"&&(Xp(t,r,m,n),g=t.memoizedState),(d=Qs||Ib(t,r,d,n,f,g,c)||!1)?(h||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,g,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,g,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=g),i.props=n,i.state=g,i.context=c,n=d):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return rm(e,t,r,n,a,o)}function rm(e,t,r,n,o,a){e1(e,t);var i=(t.flags&128)!==0;if(!n&&!i)return o&&Cb(t,r,!1),Rs(e,t,a);n=t.stateNode,KS.current=t;var l=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&i?(t.child=zi(t,e.child,null,a),t.child=zi(t,null,l,a)):Or(e,t,l,a),t.memoizedState=n.state,o&&Cb(t,r,!0),t.child}function t1(e){var t=e.stateNode;t.pendingContext?_b(e,t.pendingContext,t.pendingContext!==t.context):t.context&&_b(e,t.context,!1),Tx(e,t.containerInfo)}function Vb(e,t,r,n,o){return Bi(),Sx(o),t.flags|=256,Or(e,t,r,n),t.child}var nm={dehydrated:null,treeContext:null,retryLane:0};function sm(e){return{baseLanes:e,cachePool:null,transitions:null}}function r1(e,t,r){var n=t.pendingProps,o=$t.current,a=!1,i=(t.flags&128)!==0,l;if((l=i)||(l=e!==null&&e.memoizedState===null?!1:(o&2)!==0),l?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),Pt($t,o&1),e===null)return Yp(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=n.children,e=n.fallback,a?(n=t.mode,a=t.child,i={mode:"hidden",children:i},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=i):a=Eh(i,n,0,null),e=fa(e,n,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=sm(r),t.memoizedState=nm,e):Fx(t,i));if(o=e.memoizedState,o!==null&&(l=o.dehydrated,l!==null))return GS(e,t,i,n,l,o,r);if(a){a=n.fallback,i=t.mode,o=e.child,l=o.sibling;var c={mode:"hidden",children:n.children};return!(i&1)&&t.child!==o?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=jo(o,c),n.subtreeFlags=o.subtreeFlags&14680064),l!==null?a=jo(l,a):(a=fa(a,i,r,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,i=e.child.memoizedState,i=i===null?sm(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},a.memoizedState=i,a.childLanes=e.childLanes&~r,t.memoizedState=nm,n}return a=e.child,e=a.sibling,n=jo(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Fx(e,t){return t=Eh({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function yd(e,t,r,n){return n!==null&&Sx(n),zi(t,e.child,null,r),e=Fx(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function GS(e,t,r,n,o,a,i){if(r)return t.flags&256?(t.flags&=-257,n=Mf(Error(ae(422))),yd(e,t,i,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=n.fallback,o=t.mode,n=Eh({mode:"visible",children:n.children},o,0,null),a=fa(a,o,i,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&zi(t,e.child,null,i),t.child.memoizedState=sm(i),t.memoizedState=nm,a);if(!(t.mode&1))return yd(e,t,i,null);if(o.data==="$!"){if(n=o.nextSibling&&o.nextSibling.dataset,n)var l=n.dgst;return n=l,a=Error(ae(419)),n=Mf(a,n,void 0),yd(e,t,i,n)}if(l=(i&e.childLanes)!==0,qr||l){if(n=hr,n!==null){switch(i&-i){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(n.suspendedLanes|i)?0:o,o!==0&&o!==a.retryLane&&(a.retryLane=o,Ps(e,o),Mn(n,e,o,-1))}return qx(),n=Mf(Error(ae(421))),yd(e,t,i,n)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=i_.bind(null,e),o._reactRetry=t,null):(e=a.treeContext,sn=bo(o.nextSibling),ln=t,Dt=!0,Dn=null,e!==null&&(xn[gn++]=js,xn[gn++]=Ns,xn[gn++]=va,js=e.id,Ns=e.overflow,va=t),t=Fx(t,n.children),t.flags|=4096,t)}function Wb(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Jp(e.return,t,r)}function $f(e,t,r,n,o){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=o)}function n1(e,t,r){var n=t.pendingProps,o=n.revealOrder,a=n.tail;if(Or(e,t,n.children,r),n=$t.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Wb(e,r,t);else if(e.tag===19)Wb(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Pt($t,n),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(r=t.child,o=null;r!==null;)e=r.alternate,e!==null&&$u(e)===null&&(o=r),r=r.sibling;r=o,r===null?(o=t.child,t.child=null):(o=r.sibling,r.sibling=null),$f(t,!1,o,r,a);break;case"backwards":for(r=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&$u(e)===null){t.child=o;break}e=o.sibling,o.sibling=r,r=o,o=e}$f(t,!0,r,null,a);break;case"together":$f(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ou(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Rs(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),ja|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ae(153));if(t.child!==null){for(e=t.child,r=jo(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=jo(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function QS(e,t,r){switch(t.tag){case 3:t1(t),Bi();break;case 5:Pw(t);break;case 1:Kr(t.type)&&Tu(t);break;case 4:Tx(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,o=t.memoizedProps.value;Pt(Du,n._currentValue),n._currentValue=o;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Pt($t,$t.current&1),t.flags|=128,null):r&t.child.childLanes?r1(e,t,r):(Pt($t,$t.current&1),e=Rs(e,t,r),e!==null?e.sibling:null);Pt($t,$t.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return n1(e,t,r);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Pt($t,$t.current),n)break;return null;case 22:case 23:return t.lanes=0,Zw(e,t,r)}return Rs(e,t,r)}var s1,om,o1,a1;s1=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};om=function(){};o1=function(e,t,r,n){var o=e.memoizedProps;if(o!==n){e=t.stateNode,ta(rs.current);var a=null;switch(r){case"input":o=Cp(e,o),n=Cp(e,n),a=[];break;case"select":o=Ut({},o,{value:void 0}),n=Ut({},n,{value:void 0}),a=[];break;case"textarea":o=Rp(e,o),n=Rp(e,n),a=[];break;default:typeof o.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Pu)}Ap(r,n);var i;r=null;for(d in o)if(!n.hasOwnProperty(d)&&o.hasOwnProperty(d)&&o[d]!=null)if(d==="style"){var l=o[d];for(i in l)l.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Xl.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in n){var c=n[d];if(l=o!=null?o[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(a||(a=[]),a.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Xl.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Tt("scroll",e),a||l===c||(a=[])):(a=a||[]).push(d,c))}r&&(a=a||[]).push("style",r);var d=a;(t.updateQueue=d)&&(t.flags|=4)}};a1=function(e,t,r,n){r!==n&&(t.flags|=4)};function kl(e,t){if(!Dt)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Sr(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var o=e.child;o!==null;)r|=o.lanes|o.childLanes,n|=o.subtreeFlags&14680064,n|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)r|=o.lanes|o.childLanes,n|=o.subtreeFlags,n|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function YS(e,t,r){var n=t.pendingProps;switch(kx(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Sr(t),null;case 1:return Kr(t.type)&&Ru(),Sr(t),null;case 3:return n=t.stateNode,Vi(),At(Hr),At(Rr),Ox(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(gd(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Dn!==null&&(fm(Dn),Dn=null))),om(e,t),Sr(t),null;case 5:Ax(t);var o=ta(dc.current);if(r=t.type,e!==null&&t.stateNode!=null)o1(e,t,r,n,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(ae(166));return Sr(t),null}if(e=ta(rs.current),gd(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[Xn]=t,n[lc]=a,e=(t.mode&1)!==0,r){case"dialog":Tt("cancel",n),Tt("close",n);break;case"iframe":case"object":case"embed":Tt("load",n);break;case"video":case"audio":for(o=0;o<Ml.length;o++)Tt(Ml[o],n);break;case"source":Tt("error",n);break;case"img":case"image":case"link":Tt("error",n),Tt("load",n);break;case"details":Tt("toggle",n);break;case"input":Zg(n,a),Tt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Tt("invalid",n);break;case"textarea":tb(n,a),Tt("invalid",n)}Ap(r,a),o=null;for(var i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="children"?typeof l=="string"?n.textContent!==l&&(a.suppressHydrationWarning!==!0&&xd(n.textContent,l,e),o=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&xd(n.textContent,l,e),o=["children",""+l]):Xl.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&Tt("scroll",n)}switch(r){case"input":ld(n),eb(n,a,!0);break;case"textarea":ld(n),rb(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Pu)}n=o,t.updateQueue=n,n!==null&&(t.flags|=4)}else{i=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Dv(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=i.createElement(r,{is:n.is}):(e=i.createElement(r),r==="select"&&(i=e,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):e=i.createElementNS(e,r),e[Xn]=t,e[lc]=n,s1(e,t,!1,!1),t.stateNode=e;e:{switch(i=Op(r,n),r){case"dialog":Tt("cancel",e),Tt("close",e),o=n;break;case"iframe":case"object":case"embed":Tt("load",e),o=n;break;case"video":case"audio":for(o=0;o<Ml.length;o++)Tt(Ml[o],e);o=n;break;case"source":Tt("error",e),o=n;break;case"img":case"image":case"link":Tt("error",e),Tt("load",e),o=n;break;case"details":Tt("toggle",e),o=n;break;case"input":Zg(e,n),o=Cp(e,n),Tt("invalid",e);break;case"option":o=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},o=Ut({},n,{value:void 0}),Tt("invalid",e);break;case"textarea":tb(e,n),o=Rp(e,n),Tt("invalid",e);break;default:o=n}Ap(r,o),l=o;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?$v(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Iv(e,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Zl(e,c):typeof c=="number"&&Zl(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Xl.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Tt("scroll",e):c!=null&&cx(e,a,c,i))}switch(r){case"input":ld(e),eb(e,n,!1);break;case"textarea":ld(e),rb(e);break;case"option":n.value!=null&&e.setAttribute("value",""+So(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?mi(e,!!n.multiple,a,!1):n.defaultValue!=null&&mi(e,!!n.multiple,n.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Pu)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Sr(t),null;case 6:if(e&&t.stateNode!=null)a1(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(ae(166));if(r=ta(dc.current),ta(rs.current),gd(t)){if(n=t.stateNode,r=t.memoizedProps,n[Xn]=t,(a=n.nodeValue!==r)&&(e=ln,e!==null))switch(e.tag){case 3:xd(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&xd(n.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Xn]=t,t.stateNode=n}return Sr(t),null;case 13:if(At($t),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Dt&&sn!==null&&t.mode&1&&!(t.flags&128))kw(),Bi(),t.flags|=98560,a=!1;else if(a=gd(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(ae(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ae(317));a[Xn]=t}else Bi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Sr(t),a=!1}else Dn!==null&&(fm(Dn),Dn=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||$t.current&1?ir===0&&(ir=3):qx())),t.updateQueue!==null&&(t.flags|=4),Sr(t),null);case 4:return Vi(),om(e,t),e===null&&ac(t.stateNode.containerInfo),Sr(t),null;case 10:return Ex(t.type._context),Sr(t),null;case 17:return Kr(t.type)&&Ru(),Sr(t),null;case 19:if(At($t),a=t.memoizedState,a===null)return Sr(t),null;if(n=(t.flags&128)!==0,i=a.rendering,i===null)if(n)kl(a,!1);else{if(ir!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=$u(e),i!==null){for(t.flags|=128,kl(a,!1),n=i.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)a=r,e=n,a.flags&=14680066,i=a.alternate,i===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,a.type=i.type,e=i.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Pt($t,$t.current&1|2),t.child}e=e.sibling}a.tail!==null&&Gt()>qi&&(t.flags|=128,n=!0,kl(a,!1),t.lanes=4194304)}else{if(!n)if(e=$u(i),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),kl(a,!0),a.tail===null&&a.tailMode==="hidden"&&!i.alternate&&!Dt)return Sr(t),null}else 2*Gt()-a.renderingStartTime>qi&&r!==1073741824&&(t.flags|=128,n=!0,kl(a,!1),t.lanes=4194304);a.isBackwards?(i.sibling=t.child,t.child=i):(r=a.last,r!==null?r.sibling=i:t.child=i,a.last=i)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Gt(),t.sibling=null,r=$t.current,Pt($t,n?r&1|2:r&1),t):(Sr(t),null);case 22:case 23:return Wx(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?tn&1073741824&&(Sr(t),t.subtreeFlags&6&&(t.flags|=8192)):Sr(t),null;case 24:return null;case 25:return null}throw Error(ae(156,t.tag))}function JS(e,t){switch(kx(t),t.tag){case 1:return Kr(t.type)&&Ru(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Vi(),At(Hr),At(Rr),Ox(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ax(t),null;case 13:if(At($t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ae(340));Bi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return At($t),null;case 4:return Vi(),null;case 10:return Ex(t.type._context),null;case 22:case 23:return Wx(),null;case 24:return null;default:return null}}var vd=!1,Er=!1,XS=typeof WeakSet=="function"?WeakSet:Set,Ne=null;function ui(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){qt(e,t,n)}else r.current=null}function am(e,t,r){try{r()}catch(n){qt(e,t,n)}}var qb=!1;function ZS(e,t){if(Vp=_u,e=uw(),jx(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var o=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var i=0,l=-1,c=-1,d=0,h=0,u=e,f=null;t:for(;;){for(var m;u!==r||o!==0&&u.nodeType!==3||(l=i+o),u!==a||n!==0&&u.nodeType!==3||(c=i+n),u.nodeType===3&&(i+=u.nodeValue.length),(m=u.firstChild)!==null;)f=u,u=m;for(;;){if(u===e)break t;if(f===r&&++d===o&&(l=i),f===a&&++h===n&&(c=i),(m=u.nextSibling)!==null)break;u=f,f=u.parentNode}u=m}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Wp={focusedElem:e,selectionRange:r},_u=!1,Ne=t;Ne!==null;)if(t=Ne,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ne=e;else for(;Ne!==null;){t=Ne;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var x=g.memoizedProps,N=g.memoizedState,b=t.stateNode,y=b.getSnapshotBeforeUpdate(t.elementType===t.type?x:Cn(t.type,x),N);b.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(k){qt(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,Ne=e;break}Ne=t.return}return g=qb,qb=!1,g}function ql(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var o=n=n.next;do{if((o.tag&e)===e){var a=o.destroy;o.destroy=void 0,a!==void 0&&am(t,r,a)}o=o.next}while(o!==n)}}function _h(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function im(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function i1(e){var t=e.alternate;t!==null&&(e.alternate=null,i1(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Xn],delete t[lc],delete t[Kp],delete t[IS],delete t[MS])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function l1(e){return e.tag===5||e.tag===3||e.tag===4}function Hb(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||l1(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function lm(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Pu));else if(n!==4&&(e=e.child,e!==null))for(lm(e,t,r),e=e.sibling;e!==null;)lm(e,t,r),e=e.sibling}function cm(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(cm(e,t,r),e=e.sibling;e!==null;)cm(e,t,r),e=e.sibling}var br=null,Tn=!1;function Bs(e,t,r){for(r=r.child;r!==null;)c1(e,t,r),r=r.sibling}function c1(e,t,r){if(ts&&typeof ts.onCommitFiberUnmount=="function")try{ts.onCommitFiberUnmount(bh,r)}catch{}switch(r.tag){case 5:Er||ui(r,t);case 6:var n=br,o=Tn;br=null,Bs(e,t,r),br=n,Tn=o,br!==null&&(Tn?(e=br,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):br.removeChild(r.stateNode));break;case 18:br!==null&&(Tn?(e=br,r=r.stateNode,e.nodeType===8?Rf(e.parentNode,r):e.nodeType===1&&Rf(e,r),nc(e)):Rf(br,r.stateNode));break;case 4:n=br,o=Tn,br=r.stateNode.containerInfo,Tn=!0,Bs(e,t,r),br=n,Tn=o;break;case 0:case 11:case 14:case 15:if(!Er&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){o=n=n.next;do{var a=o,i=a.destroy;a=a.tag,i!==void 0&&(a&2||a&4)&&am(r,t,i),o=o.next}while(o!==n)}Bs(e,t,r);break;case 1:if(!Er&&(ui(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){qt(r,t,l)}Bs(e,t,r);break;case 21:Bs(e,t,r);break;case 22:r.mode&1?(Er=(n=Er)||r.memoizedState!==null,Bs(e,t,r),Er=n):Bs(e,t,r);break;default:Bs(e,t,r)}}function Kb(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new XS),t.forEach(function(n){var o=l_.bind(null,e,n);r.has(n)||(r.add(n),n.then(o,o))})}}function kn(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var o=r[n];try{var a=e,i=t,l=i;e:for(;l!==null;){switch(l.tag){case 5:br=l.stateNode,Tn=!1;break e;case 3:br=l.stateNode.containerInfo,Tn=!0;break e;case 4:br=l.stateNode.containerInfo,Tn=!0;break e}l=l.return}if(br===null)throw Error(ae(160));c1(a,i,o),br=null,Tn=!1;var c=o.alternate;c!==null&&(c.return=null),o.return=null}catch(d){qt(o,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)d1(t,e),t=t.sibling}function d1(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(kn(t,e),qn(e),n&4){try{ql(3,e,e.return),_h(3,e)}catch(x){qt(e,e.return,x)}try{ql(5,e,e.return)}catch(x){qt(e,e.return,x)}}break;case 1:kn(t,e),qn(e),n&512&&r!==null&&ui(r,r.return);break;case 5:if(kn(t,e),qn(e),n&512&&r!==null&&ui(r,r.return),e.flags&32){var o=e.stateNode;try{Zl(o,"")}catch(x){qt(e,e.return,x)}}if(n&4&&(o=e.stateNode,o!=null)){var a=e.memoizedProps,i=r!==null?r.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&Av(o,a),Op(l,i);var d=Op(l,a);for(i=0;i<c.length;i+=2){var h=c[i],u=c[i+1];h==="style"?$v(o,u):h==="dangerouslySetInnerHTML"?Iv(o,u):h==="children"?Zl(o,u):cx(o,h,u,d)}switch(l){case"input":Ep(o,a);break;case"textarea":Ov(o,a);break;case"select":var f=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!a.multiple;var m=a.value;m!=null?mi(o,!!a.multiple,m,!1):f!==!!a.multiple&&(a.defaultValue!=null?mi(o,!!a.multiple,a.defaultValue,!0):mi(o,!!a.multiple,a.multiple?[]:"",!1))}o[lc]=a}catch(x){qt(e,e.return,x)}}break;case 6:if(kn(t,e),qn(e),n&4){if(e.stateNode===null)throw Error(ae(162));o=e.stateNode,a=e.memoizedProps;try{o.nodeValue=a}catch(x){qt(e,e.return,x)}}break;case 3:if(kn(t,e),qn(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{nc(t.containerInfo)}catch(x){qt(e,e.return,x)}break;case 4:kn(t,e),qn(e);break;case 13:kn(t,e),qn(e),o=e.child,o.flags&8192&&(a=o.memoizedState!==null,o.stateNode.isHidden=a,!a||o.alternate!==null&&o.alternate.memoizedState!==null||(zx=Gt())),n&4&&Kb(e);break;case 22:if(h=r!==null&&r.memoizedState!==null,e.mode&1?(Er=(d=Er)||h,kn(t,e),Er=d):kn(t,e),qn(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!h&&e.mode&1)for(Ne=e,h=e.child;h!==null;){for(u=Ne=h;Ne!==null;){switch(f=Ne,m=f.child,f.tag){case 0:case 11:case 14:case 15:ql(4,f,f.return);break;case 1:ui(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(x){qt(n,r,x)}}break;case 5:ui(f,f.return);break;case 22:if(f.memoizedState!==null){Qb(u);continue}}m!==null?(m.return=f,Ne=m):Qb(u)}h=h.sibling}e:for(h=null,u=e;;){if(u.tag===5){if(h===null){h=u;try{o=u.stateNode,d?(a=o.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=u.stateNode,c=u.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Mv("display",i))}catch(x){qt(e,e.return,x)}}}else if(u.tag===6){if(h===null)try{u.stateNode.nodeValue=d?"":u.memoizedProps}catch(x){qt(e,e.return,x)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===e)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;u.sibling===null;){if(u.return===null||u.return===e)break e;h===u&&(h=null),u=u.return}h===u&&(h=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:kn(t,e),qn(e),n&4&&Kb(e);break;case 21:break;default:kn(t,e),qn(e)}}function qn(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(l1(r)){var n=r;break e}r=r.return}throw Error(ae(160))}switch(n.tag){case 5:var o=n.stateNode;n.flags&32&&(Zl(o,""),n.flags&=-33);var a=Hb(e);cm(e,a,o);break;case 3:case 4:var i=n.stateNode.containerInfo,l=Hb(e);lm(e,l,i);break;default:throw Error(ae(161))}}catch(c){qt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function e_(e,t,r){Ne=e,u1(e)}function u1(e,t,r){for(var n=(e.mode&1)!==0;Ne!==null;){var o=Ne,a=o.child;if(o.tag===22&&n){var i=o.memoizedState!==null||vd;if(!i){var l=o.alternate,c=l!==null&&l.memoizedState!==null||Er;l=vd;var d=Er;if(vd=i,(Er=c)&&!d)for(Ne=o;Ne!==null;)i=Ne,c=i.child,i.tag===22&&i.memoizedState!==null?Yb(o):c!==null?(c.return=i,Ne=c):Yb(o);for(;a!==null;)Ne=a,u1(a),a=a.sibling;Ne=o,vd=l,Er=d}Gb(e)}else o.subtreeFlags&8772&&a!==null?(a.return=o,Ne=a):Gb(e)}}function Gb(e){for(;Ne!==null;){var t=Ne;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Er||_h(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Er)if(r===null)n.componentDidMount();else{var o=t.elementType===t.type?r.memoizedProps:Cn(t.type,r.memoizedProps);n.componentDidUpdate(o,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&Ab(t,a,n);break;case 3:var i=t.updateQueue;if(i!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Ab(t,i,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var u=h.dehydrated;u!==null&&nc(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}Er||t.flags&512&&im(t)}catch(f){qt(t,t.return,f)}}if(t===e){Ne=null;break}if(r=t.sibling,r!==null){r.return=t.return,Ne=r;break}Ne=t.return}}function Qb(e){for(;Ne!==null;){var t=Ne;if(t===e){Ne=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Ne=r;break}Ne=t.return}}function Yb(e){for(;Ne!==null;){var t=Ne;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{_h(4,t)}catch(c){qt(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var o=t.return;try{n.componentDidMount()}catch(c){qt(t,o,c)}}var a=t.return;try{im(t)}catch(c){qt(t,a,c)}break;case 5:var i=t.return;try{im(t)}catch(c){qt(t,i,c)}}}catch(c){qt(t,t.return,c)}if(t===e){Ne=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Ne=l;break}Ne=t.return}}var t_=Math.ceil,Uu=Os.ReactCurrentDispatcher,Ux=Os.ReactCurrentOwner,yn=Os.ReactCurrentBatchConfig,mt=0,hr=null,Jt=null,vr=0,tn=0,hi=Do(0),ir=0,pc=null,ja=0,Ch=0,Bx=0,Hl=null,Vr=null,zx=0,qi=1/0,gs=null,Bu=!1,dm=null,vo=null,wd=!1,ho=null,zu=0,Kl=0,um=null,au=-1,iu=0;function Ir(){return mt&6?Gt():au!==-1?au:au=Gt()}function wo(e){return e.mode&1?mt&2&&vr!==0?vr&-vr:LS.transition!==null?(iu===0&&(iu=Qv()),iu):(e=St,e!==0||(e=window.event,e=e===void 0?16:rw(e.type)),e):1}function Mn(e,t,r,n){if(50<Kl)throw Kl=0,um=null,Error(ae(185));Fc(e,r,n),(!(mt&2)||e!==hr)&&(e===hr&&(!(mt&2)&&(Ch|=r),ir===4&&Xs(e,vr)),Gr(e,n),r===1&&mt===0&&!(t.mode&1)&&(qi=Gt()+500,Nh&&Io()))}function Gr(e,t){var r=e.callbackNode;Lk(e,t);var n=Su(e,e===hr?vr:0);if(n===0)r!==null&&ob(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&ob(r),t===1)e.tag===0?$S(Jb.bind(null,e)):ww(Jb.bind(null,e)),OS(function(){!(mt&6)&&Io()}),r=null;else{switch(Yv(n)){case 1:r=px;break;case 4:r=Kv;break;case 16:r=ku;break;case 536870912:r=Gv;break;default:r=ku}r=y1(r,h1.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function h1(e,t){if(au=-1,iu=0,mt&6)throw Error(ae(327));var r=e.callbackNode;if(vi()&&e.callbackNode!==r)return null;var n=Su(e,e===hr?vr:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Vu(e,n);else{t=n;var o=mt;mt|=2;var a=p1();(hr!==e||vr!==t)&&(gs=null,qi=Gt()+500,ha(e,t));do try{s_();break}catch(l){f1(e,l)}while(!0);Cx(),Uu.current=a,mt=o,Jt!==null?t=0:(hr=null,vr=0,t=ir)}if(t!==0){if(t===2&&(o=Lp(e),o!==0&&(n=o,t=hm(e,o))),t===1)throw r=pc,ha(e,0),Xs(e,n),Gr(e,Gt()),r;if(t===6)Xs(e,n);else{if(o=e.current.alternate,!(n&30)&&!r_(o)&&(t=Vu(e,n),t===2&&(a=Lp(e),a!==0&&(n=a,t=hm(e,a))),t===1))throw r=pc,ha(e,0),Xs(e,n),Gr(e,Gt()),r;switch(e.finishedWork=o,e.finishedLanes=n,t){case 0:case 1:throw Error(ae(345));case 2:Ko(e,Vr,gs);break;case 3:if(Xs(e,n),(n&130023424)===n&&(t=zx+500-Gt(),10<t)){if(Su(e,0)!==0)break;if(o=e.suspendedLanes,(o&n)!==n){Ir(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Hp(Ko.bind(null,e,Vr,gs),t);break}Ko(e,Vr,gs);break;case 4:if(Xs(e,n),(n&4194240)===n)break;for(t=e.eventTimes,o=-1;0<n;){var i=31-In(n);a=1<<i,i=t[i],i>o&&(o=i),n&=~a}if(n=o,n=Gt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*t_(n/1960))-n,10<n){e.timeoutHandle=Hp(Ko.bind(null,e,Vr,gs),n);break}Ko(e,Vr,gs);break;case 5:Ko(e,Vr,gs);break;default:throw Error(ae(329))}}}return Gr(e,Gt()),e.callbackNode===r?h1.bind(null,e):null}function hm(e,t){var r=Hl;return e.current.memoizedState.isDehydrated&&(ha(e,t).flags|=256),e=Vu(e,t),e!==2&&(t=Vr,Vr=r,t!==null&&fm(t)),e}function fm(e){Vr===null?Vr=e:Vr.push.apply(Vr,e)}function r_(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var o=r[n],a=o.getSnapshot;o=o.value;try{if(!$n(a(),o))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Xs(e,t){for(t&=~Bx,t&=~Ch,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-In(t),n=1<<r;e[r]=-1,t&=~n}}function Jb(e){if(mt&6)throw Error(ae(327));vi();var t=Su(e,0);if(!(t&1))return Gr(e,Gt()),null;var r=Vu(e,t);if(e.tag!==0&&r===2){var n=Lp(e);n!==0&&(t=n,r=hm(e,n))}if(r===1)throw r=pc,ha(e,0),Xs(e,t),Gr(e,Gt()),r;if(r===6)throw Error(ae(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ko(e,Vr,gs),Gr(e,Gt()),null}function Vx(e,t){var r=mt;mt|=1;try{return e(t)}finally{mt=r,mt===0&&(qi=Gt()+500,Nh&&Io())}}function Na(e){ho!==null&&ho.tag===0&&!(mt&6)&&vi();var t=mt;mt|=1;var r=yn.transition,n=St;try{if(yn.transition=null,St=1,e)return e()}finally{St=n,yn.transition=r,mt=t,!(mt&6)&&Io()}}function Wx(){tn=hi.current,At(hi)}function ha(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,AS(r)),Jt!==null)for(r=Jt.return;r!==null;){var n=r;switch(kx(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ru();break;case 3:Vi(),At(Hr),At(Rr),Ox();break;case 5:Ax(n);break;case 4:Vi();break;case 13:At($t);break;case 19:At($t);break;case 10:Ex(n.type._context);break;case 22:case 23:Wx()}r=r.return}if(hr=e,Jt=e=jo(e.current,null),vr=tn=t,ir=0,pc=null,Bx=Ch=ja=0,Vr=Hl=null,ea!==null){for(t=0;t<ea.length;t++)if(r=ea[t],n=r.interleaved,n!==null){r.interleaved=null;var o=n.next,a=r.pending;if(a!==null){var i=a.next;a.next=o,n.next=i}r.pending=n}ea=null}return e}function f1(e,t){do{var r=Jt;try{if(Cx(),nu.current=Fu,Lu){for(var n=Ft.memoizedState;n!==null;){var o=n.queue;o!==null&&(o.pending=null),n=n.next}Lu=!1}if(wa=0,ur=or=Ft=null,Wl=!1,uc=0,Ux.current=null,r===null||r.return===null){ir=1,pc=t,Jt=null;break}e:{var a=e,i=r.return,l=r,c=t;if(t=vr,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=l,u=h.tag;if(!(h.mode&1)&&(u===0||u===11||u===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=Lb(i);if(m!==null){m.flags&=-257,Fb(m,i,l,a,t),m.mode&1&&$b(a,d,t),t=m,c=d;var g=t.updateQueue;if(g===null){var x=new Set;x.add(c),t.updateQueue=x}else g.add(c);break e}else{if(!(t&1)){$b(a,d,t),qx();break e}c=Error(ae(426))}}else if(Dt&&l.mode&1){var N=Lb(i);if(N!==null){!(N.flags&65536)&&(N.flags|=256),Fb(N,i,l,a,t),Sx(Wi(c,l));break e}}a=c=Wi(c,l),ir!==4&&(ir=2),Hl===null?Hl=[a]:Hl.push(a),a=i;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var b=Yw(a,c,t);Tb(a,b);break e;case 1:l=c;var y=a.type,v=a.stateNode;if(!(a.flags&128)&&(typeof y.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(vo===null||!vo.has(v)))){a.flags|=65536,t&=-t,a.lanes|=t;var k=Jw(a,l,t);Tb(a,k);break e}}a=a.return}while(a!==null)}x1(r)}catch(S){t=S,Jt===r&&r!==null&&(Jt=r=r.return);continue}break}while(!0)}function p1(){var e=Uu.current;return Uu.current=Fu,e===null?Fu:e}function qx(){(ir===0||ir===3||ir===2)&&(ir=4),hr===null||!(ja&268435455)&&!(Ch&268435455)||Xs(hr,vr)}function Vu(e,t){var r=mt;mt|=2;var n=p1();(hr!==e||vr!==t)&&(gs=null,ha(e,t));do try{n_();break}catch(o){f1(e,o)}while(!0);if(Cx(),mt=r,Uu.current=n,Jt!==null)throw Error(ae(261));return hr=null,vr=0,ir}function n_(){for(;Jt!==null;)m1(Jt)}function s_(){for(;Jt!==null&&!Pk();)m1(Jt)}function m1(e){var t=b1(e.alternate,e,tn);e.memoizedProps=e.pendingProps,t===null?x1(e):Jt=t,Ux.current=null}function x1(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=JS(r,t),r!==null){r.flags&=32767,Jt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ir=6,Jt=null;return}}else if(r=YS(r,t,tn),r!==null){Jt=r;return}if(t=t.sibling,t!==null){Jt=t;return}Jt=t=e}while(t!==null);ir===0&&(ir=5)}function Ko(e,t,r){var n=St,o=yn.transition;try{yn.transition=null,St=1,o_(e,t,r,n)}finally{yn.transition=o,St=n}return null}function o_(e,t,r,n){do vi();while(ho!==null);if(mt&6)throw Error(ae(327));r=e.finishedWork;var o=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ae(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(Fk(e,a),e===hr&&(Jt=hr=null,vr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||wd||(wd=!0,y1(ku,function(){return vi(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=yn.transition,yn.transition=null;var i=St;St=1;var l=mt;mt|=4,Ux.current=null,ZS(e,r),d1(r,e),SS(Wp),_u=!!Vp,Wp=Vp=null,e.current=r,e_(r),Rk(),mt=l,St=i,yn.transition=a}else e.current=r;if(wd&&(wd=!1,ho=e,zu=o),a=e.pendingLanes,a===0&&(vo=null),Ok(r.stateNode),Gr(e,Gt()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)o=t[r],n(o.value,{componentStack:o.stack,digest:o.digest});if(Bu)throw Bu=!1,e=dm,dm=null,e;return zu&1&&e.tag!==0&&vi(),a=e.pendingLanes,a&1?e===um?Kl++:(Kl=0,um=e):Kl=0,Io(),null}function vi(){if(ho!==null){var e=Yv(zu),t=yn.transition,r=St;try{if(yn.transition=null,St=16>e?16:e,ho===null)var n=!1;else{if(e=ho,ho=null,zu=0,mt&6)throw Error(ae(331));var o=mt;for(mt|=4,Ne=e.current;Ne!==null;){var a=Ne,i=a.child;if(Ne.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(Ne=d;Ne!==null;){var h=Ne;switch(h.tag){case 0:case 11:case 15:ql(8,h,a)}var u=h.child;if(u!==null)u.return=h,Ne=u;else for(;Ne!==null;){h=Ne;var f=h.sibling,m=h.return;if(i1(h),h===d){Ne=null;break}if(f!==null){f.return=m,Ne=f;break}Ne=m}}}var g=a.alternate;if(g!==null){var x=g.child;if(x!==null){g.child=null;do{var N=x.sibling;x.sibling=null,x=N}while(x!==null)}}Ne=a}}if(a.subtreeFlags&2064&&i!==null)i.return=a,Ne=i;else e:for(;Ne!==null;){if(a=Ne,a.flags&2048)switch(a.tag){case 0:case 11:case 15:ql(9,a,a.return)}var b=a.sibling;if(b!==null){b.return=a.return,Ne=b;break e}Ne=a.return}}var y=e.current;for(Ne=y;Ne!==null;){i=Ne;var v=i.child;if(i.subtreeFlags&2064&&v!==null)v.return=i,Ne=v;else e:for(i=y;Ne!==null;){if(l=Ne,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:_h(9,l)}}catch(S){qt(l,l.return,S)}if(l===i){Ne=null;break e}var k=l.sibling;if(k!==null){k.return=l.return,Ne=k;break e}Ne=l.return}}if(mt=o,Io(),ts&&typeof ts.onPostCommitFiberRoot=="function")try{ts.onPostCommitFiberRoot(bh,e)}catch{}n=!0}return n}finally{St=r,yn.transition=t}}return!1}function Xb(e,t,r){t=Wi(r,t),t=Yw(e,t,1),e=yo(e,t,1),t=Ir(),e!==null&&(Fc(e,1,t),Gr(e,t))}function qt(e,t,r){if(e.tag===3)Xb(e,e,r);else for(;t!==null;){if(t.tag===3){Xb(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(vo===null||!vo.has(n))){e=Wi(r,e),e=Jw(t,e,1),t=yo(t,e,1),e=Ir(),t!==null&&(Fc(t,1,e),Gr(t,e));break}}t=t.return}}function a_(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Ir(),e.pingedLanes|=e.suspendedLanes&r,hr===e&&(vr&r)===r&&(ir===4||ir===3&&(vr&130023424)===vr&&500>Gt()-zx?ha(e,0):Bx|=r),Gr(e,t)}function g1(e,t){t===0&&(e.mode&1?(t=ud,ud<<=1,!(ud&130023424)&&(ud=4194304)):t=1);var r=Ir();e=Ps(e,t),e!==null&&(Fc(e,t,r),Gr(e,r))}function i_(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),g1(e,r)}function l_(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,o=e.memoizedState;o!==null&&(r=o.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(ae(314))}n!==null&&n.delete(t),g1(e,r)}var b1;b1=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Hr.current)qr=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return qr=!1,QS(e,t,r);qr=!!(e.flags&131072)}else qr=!1,Dt&&t.flags&1048576&&jw(t,Ou,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;ou(e,t),e=t.pendingProps;var o=Ui(t,Rr.current);yi(t,r),o=Ix(null,t,n,e,o,r);var a=Mx();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Kr(n)?(a=!0,Tu(t)):a=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Rx(t),o.updater=Sh,t.stateNode=o,o._reactInternals=t,Zp(t,n,e,r),t=rm(null,t,n,!0,a,r)):(t.tag=0,Dt&&a&&Nx(t),Or(null,t,o,r),t=t.child),t;case 16:n=t.elementType;e:{switch(ou(e,t),e=t.pendingProps,o=n._init,n=o(n._payload),t.type=n,o=t.tag=d_(n),e=Cn(n,e),o){case 0:t=tm(null,t,n,e,r);break e;case 1:t=zb(null,t,n,e,r);break e;case 11:t=Ub(null,t,n,e,r);break e;case 14:t=Bb(null,t,n,Cn(n.type,e),r);break e}throw Error(ae(306,n,""))}return t;case 0:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:Cn(n,o),tm(e,t,n,o,r);case 1:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:Cn(n,o),zb(e,t,n,o,r);case 3:e:{if(t1(t),e===null)throw Error(ae(387));n=t.pendingProps,a=t.memoizedState,o=a.element,Ew(e,t),Mu(t,n,null,r);var i=t.memoizedState;if(n=i.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){o=Wi(Error(ae(423)),t),t=Vb(e,t,n,r,o);break e}else if(n!==o){o=Wi(Error(ae(424)),t),t=Vb(e,t,n,r,o);break e}else for(sn=bo(t.stateNode.containerInfo.firstChild),ln=t,Dt=!0,Dn=null,r=_w(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Bi(),n===o){t=Rs(e,t,r);break e}Or(e,t,n,r)}t=t.child}return t;case 5:return Pw(t),e===null&&Yp(t),n=t.type,o=t.pendingProps,a=e!==null?e.memoizedProps:null,i=o.children,qp(n,o)?i=null:a!==null&&qp(n,a)&&(t.flags|=32),e1(e,t),Or(e,t,i,r),t.child;case 6:return e===null&&Yp(t),null;case 13:return r1(e,t,r);case 4:return Tx(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=zi(t,null,n,r):Or(e,t,n,r),t.child;case 11:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:Cn(n,o),Ub(e,t,n,o,r);case 7:return Or(e,t,t.pendingProps,r),t.child;case 8:return Or(e,t,t.pendingProps.children,r),t.child;case 12:return Or(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,o=t.pendingProps,a=t.memoizedProps,i=o.value,Pt(Du,n._currentValue),n._currentValue=i,a!==null)if($n(a.value,i)){if(a.children===o.children&&!Hr.current){t=Rs(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){i=a.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=ks(-1,r&-r),c.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),Jp(a.return,r,t),l.lanes|=r;break}c=c.next}}else if(a.tag===10)i=a.type===t.type?null:a.child;else if(a.tag===18){if(i=a.return,i===null)throw Error(ae(341));i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),Jp(i,r,t),i=a.sibling}else i=a.child;if(i!==null)i.return=a;else for(i=a;i!==null;){if(i===t){i=null;break}if(a=i.sibling,a!==null){a.return=i.return,i=a;break}i=i.return}a=i}Or(e,t,o.children,r),t=t.child}return t;case 9:return o=t.type,n=t.pendingProps.children,yi(t,r),o=wn(o),n=n(o),t.flags|=1,Or(e,t,n,r),t.child;case 14:return n=t.type,o=Cn(n,t.pendingProps),o=Cn(n.type,o),Bb(e,t,n,o,r);case 15:return Xw(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:Cn(n,o),ou(e,t),t.tag=1,Kr(n)?(e=!0,Tu(t)):e=!1,yi(t,r),Qw(t,n,o),Zp(t,n,o,r),rm(null,t,n,!0,e,r);case 19:return n1(e,t,r);case 22:return Zw(e,t,r)}throw Error(ae(156,t.tag))};function y1(e,t){return Hv(e,t)}function c_(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(e,t,r,n){return new c_(e,t,r,n)}function Hx(e){return e=e.prototype,!(!e||!e.isReactComponent)}function d_(e){if(typeof e=="function")return Hx(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ux)return 11;if(e===hx)return 14}return 2}function jo(e,t){var r=e.alternate;return r===null?(r=bn(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function lu(e,t,r,n,o,a){var i=2;if(n=e,typeof e=="function")Hx(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case ri:return fa(r.children,o,a,t);case dx:i=8,o|=8;break;case Np:return e=bn(12,r,t,o|2),e.elementType=Np,e.lanes=a,e;case kp:return e=bn(13,r,t,o),e.elementType=kp,e.lanes=a,e;case Sp:return e=bn(19,r,t,o),e.elementType=Sp,e.lanes=a,e;case Pv:return Eh(r,o,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Cv:i=10;break e;case Ev:i=9;break e;case ux:i=11;break e;case hx:i=14;break e;case Gs:i=16,n=null;break e}throw Error(ae(130,e==null?e:typeof e,""))}return t=bn(i,r,t,o),t.elementType=e,t.type=n,t.lanes=a,t}function fa(e,t,r,n){return e=bn(7,e,n,t),e.lanes=r,e}function Eh(e,t,r,n){return e=bn(22,e,n,t),e.elementType=Pv,e.lanes=r,e.stateNode={isHidden:!1},e}function Lf(e,t,r){return e=bn(6,e,null,t),e.lanes=r,e}function Ff(e,t,r){return t=bn(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function u_(e,t,r,n,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yf(0),this.expirationTimes=yf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yf(0),this.identifierPrefix=n,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Kx(e,t,r,n,o,a,i,l,c){return e=new u_(e,t,r,l,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=bn(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rx(a),e}function h_(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ti,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function v1(e){if(!e)return _o;e=e._reactInternals;e:{if(Ta(e)!==e||e.tag!==1)throw Error(ae(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Kr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ae(171))}if(e.tag===1){var r=e.type;if(Kr(r))return vw(e,r,t)}return t}function w1(e,t,r,n,o,a,i,l,c){return e=Kx(r,n,!0,e,o,a,i,l,c),e.context=v1(null),r=e.current,n=Ir(),o=wo(r),a=ks(n,o),a.callback=t??null,yo(r,a,o),e.current.lanes=o,Fc(e,o,n),Gr(e,n),e}function Ph(e,t,r,n){var o=t.current,a=Ir(),i=wo(o);return r=v1(r),t.context===null?t.context=r:t.pendingContext=r,t=ks(a,i),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=yo(o,t,i),e!==null&&(Mn(e,o,i,a),ru(e,o,i)),i}function Wu(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Zb(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Gx(e,t){Zb(e,t),(e=e.alternate)&&Zb(e,t)}function f_(){return null}var j1=typeof reportError=="function"?reportError:function(e){console.error(e)};function Qx(e){this._internalRoot=e}Rh.prototype.render=Qx.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ae(409));Ph(e,t,null,null)};Rh.prototype.unmount=Qx.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Na(function(){Ph(null,e,null,null)}),t[Es]=null}};function Rh(e){this._internalRoot=e}Rh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Zv();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Js.length&&t!==0&&t<Js[r].priority;r++);Js.splice(r,0,e),r===0&&tw(e)}};function Yx(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Th(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function e0(){}function p_(e,t,r,n,o){if(o){if(typeof n=="function"){var a=n;n=function(){var d=Wu(i);a.call(d)}}var i=w1(t,n,e,0,null,!1,!1,"",e0);return e._reactRootContainer=i,e[Es]=i.current,ac(e.nodeType===8?e.parentNode:e),Na(),i}for(;o=e.lastChild;)e.removeChild(o);if(typeof n=="function"){var l=n;n=function(){var d=Wu(c);l.call(d)}}var c=Kx(e,0,!1,null,null,!1,!1,"",e0);return e._reactRootContainer=c,e[Es]=c.current,ac(e.nodeType===8?e.parentNode:e),Na(function(){Ph(t,c,r,n)}),c}function Ah(e,t,r,n,o){var a=r._reactRootContainer;if(a){var i=a;if(typeof o=="function"){var l=o;o=function(){var c=Wu(i);l.call(c)}}Ph(t,i,e,o)}else i=p_(r,t,e,o,n);return Wu(i)}Jv=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Il(t.pendingLanes);r!==0&&(mx(t,r|1),Gr(t,Gt()),!(mt&6)&&(qi=Gt()+500,Io()))}break;case 13:Na(function(){var n=Ps(e,1);if(n!==null){var o=Ir();Mn(n,e,1,o)}}),Gx(e,1)}};xx=function(e){if(e.tag===13){var t=Ps(e,134217728);if(t!==null){var r=Ir();Mn(t,e,134217728,r)}Gx(e,134217728)}};Xv=function(e){if(e.tag===13){var t=wo(e),r=Ps(e,t);if(r!==null){var n=Ir();Mn(r,e,t,n)}Gx(e,t)}};Zv=function(){return St};ew=function(e,t){var r=St;try{return St=e,t()}finally{St=r}};Ip=function(e,t,r){switch(t){case"input":if(Ep(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var o=jh(n);if(!o)throw Error(ae(90));Tv(n),Ep(n,o)}}}break;case"textarea":Ov(e,r);break;case"select":t=r.value,t!=null&&mi(e,!!r.multiple,t,!1)}};Uv=Vx;Bv=Na;var m_={usingClientEntryPoint:!1,Events:[Bc,ai,jh,Lv,Fv,Vx]},Sl={findFiberByHostInstance:Zo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},x_={bundleType:Sl.bundleType,version:Sl.version,rendererPackageName:Sl.rendererPackageName,rendererConfig:Sl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Os.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Wv(e),e===null?null:e.stateNode},findFiberByHostInstance:Sl.findFiberByHostInstance||f_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jd.isDisabled&&jd.supportsFiber)try{bh=jd.inject(x_),ts=jd}catch{}}un.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=m_;un.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Yx(t))throw Error(ae(200));return h_(e,t,null,r)};un.createRoot=function(e,t){if(!Yx(e))throw Error(ae(299));var r=!1,n="",o=j1;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=Kx(e,1,!1,null,null,r,!1,n,o),e[Es]=t.current,ac(e.nodeType===8?e.parentNode:e),new Qx(t)};un.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ae(188)):(e=Object.keys(e).join(","),Error(ae(268,e)));return e=Wv(t),e=e===null?null:e.stateNode,e};un.flushSync=function(e){return Na(e)};un.hydrate=function(e,t,r){if(!Th(t))throw Error(ae(200));return Ah(null,e,t,!0,r)};un.hydrateRoot=function(e,t,r){if(!Yx(e))throw Error(ae(405));var n=r!=null&&r.hydratedSources||null,o=!1,a="",i=j1;if(r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),t=w1(t,null,e,1,r??null,o,!1,a,i),e[Es]=t.current,ac(e),n)for(e=0;e<n.length;e++)r=n[e],o=r._getVersion,o=o(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,o]:t.mutableSourceEagerHydrationData.push(r,o);return new Rh(t)};un.render=function(e,t,r){if(!Th(t))throw Error(ae(200));return Ah(null,e,t,!1,r)};un.unmountComponentAtNode=function(e){if(!Th(e))throw Error(ae(40));return e._reactRootContainer?(Na(function(){Ah(null,null,e,!1,function(){e._reactRootContainer=null,e[Es]=null})}),!0):!1};un.unstable_batchedUpdates=Vx;un.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Th(r))throw Error(ae(200));if(e==null||e._reactInternals===void 0)throw Error(ae(38));return Ah(e,t,r,!1,n)};un.version="18.3.1-next-f1338f8080-20240426";function N1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(N1)}catch(e){console.error(e)}}N1(),Nv.exports=un;var Oh=Nv.exports;const k1=uv(Oh);var S1,t0=Oh;S1=t0.createRoot,t0.hydrateRoot;var r0=["light","dark"],g_="(prefers-color-scheme: dark)",b_=p.createContext(void 0),y_={setTheme:e=>{},themes:[]},v_=()=>{var e;return(e=p.useContext(b_))!=null?e:y_};p.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:n,enableColorScheme:o,defaultTheme:a,value:i,attrs:l,nonce:c})=>{let d=a==="system",h=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(g=>`'${g}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,u=o?r0.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(g,x=!1,N=!0)=>{let b=i?i[g]:g,y=x?g+"|| ''":`'${b}'`,v="";return o&&N&&!x&&r0.includes(g)&&(v+=`d.style.colorScheme = '${g}';`),r==="class"?x||b?v+=`c.add(${y})`:v+="null":b&&(v+=`d[s](n,${y})`),v},m=e?`!function(){${h}${f(e)}}()`:n?`!function(){try{${h}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${d})){var t='${g_}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${i?`var x=${JSON.stringify(i)};`:""}${f(i?"x[e]":"e",!0)}}${d?"":"else{"+f(a,!1,!1)+"}"}${u}}catch(e){}}()`:`!function(){try{${h}var e=localStorage.getItem('${t}');if(e){${i?`var x=${JSON.stringify(i)};`:""}${f(i?"x[e]":"e",!0)}}else{${f(a,!1,!1)};}${u}}catch(t){}}();`;return p.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:m}})});var w_=e=>{switch(e){case"success":return k_;case"info":return __;case"warning":return S_;case"error":return C_;default:return null}},j_=Array(12).fill(0),N_=({visible:e,className:t})=>Q.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},Q.createElement("div",{className:"sonner-spinner"},j_.map((r,n)=>Q.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),k_=Q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Q.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),S_=Q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Q.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),__=Q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Q.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),C_=Q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Q.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),E_=Q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Q.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Q.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),P_=()=>{let[e,t]=Q.useState(document.hidden);return Q.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},pm=1,R_=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...n}=e,o=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:pm++,a=this.toasts.find(l=>l.id===o),i=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),a?this.toasts=this.toasts.map(l=>l.id===o?(this.publish({...l,...e,id:o,title:r}),{...l,...e,id:o,dismissible:i,title:r}):l):this.addToast({title:r,...n,dismissible:i,id:o}),o},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let n=e instanceof Promise?e:e(),o=r!==void 0,a,i=n.then(async c=>{if(a=["resolve",c],Q.isValidElement(c))o=!1,this.create({id:r,type:"default",message:c});else if(A_(c)&&!c.ok){o=!1;let d=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,h=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:r,type:"error",message:d,description:h})}else if(t.success!==void 0){o=!1;let d=typeof t.success=="function"?await t.success(c):t.success,h=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"success",message:d,description:h})}}).catch(async c=>{if(a=["reject",c],t.error!==void 0){o=!1;let d=typeof t.error=="function"?await t.error(c):t.error,h=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"error",message:d,description:h})}}).finally(()=>{var c;o&&(this.dismiss(r),r=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,d)=>i.then(()=>a[0]==="reject"?d(a[1]):c(a[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||pm++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},zr=new R_,T_=(e,t)=>{let r=(t==null?void 0:t.id)||pm++;return zr.addToast({title:e,...t,id:r}),r},A_=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",O_=T_,D_=()=>zr.toasts,I_=()=>zr.getActiveToasts(),q=Object.assign(O_,{success:zr.success,info:zr.info,warning:zr.warning,error:zr.error,custom:zr.custom,message:zr.message,promise:zr.promise,dismiss:zr.dismiss,loading:zr.loading},{getHistory:D_,getToasts:I_});function M_(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}M_(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Nd(e){return e.label!==void 0}var $_=3,L_="32px",F_="16px",n0=4e3,U_=356,B_=14,z_=20,V_=200;function Sn(...e){return e.filter(Boolean).join(" ")}function W_(e){let[t,r]=e.split("-"),n=[];return t&&n.push(t),r&&n.push(r),n}var q_=e=>{var t,r,n,o,a,i,l,c,d,h,u;let{invert:f,toast:m,unstyled:g,interacting:x,setHeights:N,visibleToasts:b,heights:y,index:v,toasts:k,expanded:S,removeToast:E,defaultRichColors:C,closeButton:R,style:F,cancelButtonStyle:T,actionButtonStyle:V,className:Y="",descriptionClassName:W="",duration:X,position:ne,gap:te,loadingIcon:ie,expandByDefault:B,classNames:$,icons:K,closeButtonAriaLabel:ce="Close toast",pauseWhenPageIsHidden:ue}=e,[Z,fe]=Q.useState(null),[ve,Oe]=Q.useState(null),[le,Ze]=Q.useState(!1),[gt,Ae]=Q.useState(!1),[rt,et]=Q.useState(!1),[je,_t]=Q.useState(!1),[Ee,It]=Q.useState(!1),[ot,bt]=Q.useState(0),[yt,cr]=Q.useState(0),dr=Q.useRef(m.duration||X||n0),jt=Q.useRef(null),ft=Q.useRef(null),Ot=v===0,J=v+1<=b,pe=m.type,Se=m.dismissible!==!1,we=m.className||"",ze=m.descriptionClassName||"",Pe=Q.useMemo(()=>y.findIndex(ye=>ye.toastId===m.id)||0,[y,m.id]),De=Q.useMemo(()=>{var ye;return(ye=m.closeButton)!=null?ye:R},[m.closeButton,R]),he=Q.useMemo(()=>m.duration||X||n0,[m.duration,X]),vt=Q.useRef(0),Ke=Q.useRef(0),Zt=Q.useRef(0),Ct=Q.useRef(null),[Ht,de]=ne.split("-"),Ie=Q.useMemo(()=>y.reduce((ye,qe,He)=>He>=Pe?ye:ye+qe.height,0),[y,Pe]),Ge=P_(),Me=m.invert||f,Qe=pe==="loading";Ke.current=Q.useMemo(()=>Pe*te+Ie,[Pe,Ie]),Q.useEffect(()=>{dr.current=he},[he]),Q.useEffect(()=>{Ze(!0)},[]),Q.useEffect(()=>{let ye=ft.current;if(ye){let qe=ye.getBoundingClientRect().height;return cr(qe),N(He=>[{toastId:m.id,height:qe,position:m.position},...He]),()=>N(He=>He.filter(Ve=>Ve.toastId!==m.id))}},[N,m.id]),Q.useLayoutEffect(()=>{if(!le)return;let ye=ft.current,qe=ye.style.height;ye.style.height="auto";let He=ye.getBoundingClientRect().height;ye.style.height=qe,cr(He),N(Ve=>Ve.find(it=>it.toastId===m.id)?Ve.map(it=>it.toastId===m.id?{...it,height:He}:it):[{toastId:m.id,height:He,position:m.position},...Ve])},[le,m.title,m.description,N,m.id]);let pt=Q.useCallback(()=>{Ae(!0),bt(Ke.current),N(ye=>ye.filter(qe=>qe.toastId!==m.id)),setTimeout(()=>{E(m)},V_)},[m,E,N,Ke]);Q.useEffect(()=>{if(m.promise&&pe==="loading"||m.duration===1/0||m.type==="loading")return;let ye;return S||x||ue&&Ge?(()=>{if(Zt.current<vt.current){let qe=new Date().getTime()-vt.current;dr.current=dr.current-qe}Zt.current=new Date().getTime()})():dr.current!==1/0&&(vt.current=new Date().getTime(),ye=setTimeout(()=>{var qe;(qe=m.onAutoClose)==null||qe.call(m,m),pt()},dr.current)),()=>clearTimeout(ye)},[S,x,m,pe,ue,Ge,pt]),Q.useEffect(()=>{m.delete&&pt()},[pt,m.delete]);function nt(){var ye,qe,He;return K!=null&&K.loading?Q.createElement("div",{className:Sn($==null?void 0:$.loader,(ye=m==null?void 0:m.classNames)==null?void 0:ye.loader,"sonner-loader"),"data-visible":pe==="loading"},K.loading):ie?Q.createElement("div",{className:Sn($==null?void 0:$.loader,(qe=m==null?void 0:m.classNames)==null?void 0:qe.loader,"sonner-loader"),"data-visible":pe==="loading"},ie):Q.createElement(N_,{className:Sn($==null?void 0:$.loader,(He=m==null?void 0:m.classNames)==null?void 0:He.loader),visible:pe==="loading"})}return Q.createElement("li",{tabIndex:0,ref:ft,className:Sn(Y,we,$==null?void 0:$.toast,(t=m==null?void 0:m.classNames)==null?void 0:t.toast,$==null?void 0:$.default,$==null?void 0:$[pe],(r=m==null?void 0:m.classNames)==null?void 0:r[pe]),"data-sonner-toast":"","data-rich-colors":(n=m.richColors)!=null?n:C,"data-styled":!(m.jsx||m.unstyled||g),"data-mounted":le,"data-promise":!!m.promise,"data-swiped":Ee,"data-removed":gt,"data-visible":J,"data-y-position":Ht,"data-x-position":de,"data-index":v,"data-front":Ot,"data-swiping":rt,"data-dismissible":Se,"data-type":pe,"data-invert":Me,"data-swipe-out":je,"data-swipe-direction":ve,"data-expanded":!!(S||B&&le),style:{"--index":v,"--toasts-before":v,"--z-index":k.length-v,"--offset":`${gt?ot:Ke.current}px`,"--initial-height":B?"auto":`${yt}px`,...F,...m.style},onDragEnd:()=>{et(!1),fe(null),Ct.current=null},onPointerDown:ye=>{Qe||!Se||(jt.current=new Date,bt(Ke.current),ye.target.setPointerCapture(ye.pointerId),ye.target.tagName!=="BUTTON"&&(et(!0),Ct.current={x:ye.clientX,y:ye.clientY}))},onPointerUp:()=>{var ye,qe,He,Ve;if(je||!Se)return;Ct.current=null;let it=Number(((ye=ft.current)==null?void 0:ye.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),w=Number(((qe=ft.current)==null?void 0:qe.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),I=new Date().getTime()-((He=jt.current)==null?void 0:He.getTime()),H=Z==="x"?it:w,se=Math.abs(H)/I;if(Math.abs(H)>=z_||se>.11){bt(Ke.current),(Ve=m.onDismiss)==null||Ve.call(m,m),Oe(Z==="x"?it>0?"right":"left":w>0?"down":"up"),pt(),_t(!0),It(!1);return}et(!1),fe(null)},onPointerMove:ye=>{var qe,He,Ve,it;if(!Ct.current||!Se||((qe=window.getSelection())==null?void 0:qe.toString().length)>0)return;let w=ye.clientY-Ct.current.y,I=ye.clientX-Ct.current.x,H=(He=e.swipeDirections)!=null?He:W_(ne);!Z&&(Math.abs(I)>1||Math.abs(w)>1)&&fe(Math.abs(I)>Math.abs(w)?"x":"y");let se={x:0,y:0};Z==="y"?(H.includes("top")||H.includes("bottom"))&&(H.includes("top")&&w<0||H.includes("bottom")&&w>0)&&(se.y=w):Z==="x"&&(H.includes("left")||H.includes("right"))&&(H.includes("left")&&I<0||H.includes("right")&&I>0)&&(se.x=I),(Math.abs(se.x)>0||Math.abs(se.y)>0)&&It(!0),(Ve=ft.current)==null||Ve.style.setProperty("--swipe-amount-x",`${se.x}px`),(it=ft.current)==null||it.style.setProperty("--swipe-amount-y",`${se.y}px`)}},De&&!m.jsx?Q.createElement("button",{"aria-label":ce,"data-disabled":Qe,"data-close-button":!0,onClick:Qe||!Se?()=>{}:()=>{var ye;pt(),(ye=m.onDismiss)==null||ye.call(m,m)},className:Sn($==null?void 0:$.closeButton,(o=m==null?void 0:m.classNames)==null?void 0:o.closeButton)},(a=K==null?void 0:K.close)!=null?a:E_):null,m.jsx||p.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:Q.createElement(Q.Fragment,null,pe||m.icon||m.promise?Q.createElement("div",{"data-icon":"",className:Sn($==null?void 0:$.icon,(i=m==null?void 0:m.classNames)==null?void 0:i.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||nt():null,m.type!=="loading"?m.icon||(K==null?void 0:K[pe])||w_(pe):null):null,Q.createElement("div",{"data-content":"",className:Sn($==null?void 0:$.content,(l=m==null?void 0:m.classNames)==null?void 0:l.content)},Q.createElement("div",{"data-title":"",className:Sn($==null?void 0:$.title,(c=m==null?void 0:m.classNames)==null?void 0:c.title)},typeof m.title=="function"?m.title():m.title),m.description?Q.createElement("div",{"data-description":"",className:Sn(W,ze,$==null?void 0:$.description,(d=m==null?void 0:m.classNames)==null?void 0:d.description)},typeof m.description=="function"?m.description():m.description):null),p.isValidElement(m.cancel)?m.cancel:m.cancel&&Nd(m.cancel)?Q.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||T,onClick:ye=>{var qe,He;Nd(m.cancel)&&Se&&((He=(qe=m.cancel).onClick)==null||He.call(qe,ye),pt())},className:Sn($==null?void 0:$.cancelButton,(h=m==null?void 0:m.classNames)==null?void 0:h.cancelButton)},m.cancel.label):null,p.isValidElement(m.action)?m.action:m.action&&Nd(m.action)?Q.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||V,onClick:ye=>{var qe,He;Nd(m.action)&&((He=(qe=m.action).onClick)==null||He.call(qe,ye),!ye.defaultPrevented&&pt())},className:Sn($==null?void 0:$.actionButton,(u=m==null?void 0:m.classNames)==null?void 0:u.actionButton)},m.action.label):null))};function s0(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function H_(e,t){let r={};return[e,t].forEach((n,o)=>{let a=o===1,i=a?"--mobile-offset":"--offset",l=a?F_:L_;function c(d){["top","right","bottom","left"].forEach(h=>{r[`${i}-${h}`]=typeof d=="number"?`${d}px`:d})}typeof n=="number"||typeof n=="string"?c(n):typeof n=="object"?["top","right","bottom","left"].forEach(d=>{n[d]===void 0?r[`${i}-${d}`]=l:r[`${i}-${d}`]=typeof n[d]=="number"?`${n[d]}px`:n[d]}):c(l)}),r}var K_=p.forwardRef(function(e,t){let{invert:r,position:n="bottom-right",hotkey:o=["altKey","KeyT"],expand:a,closeButton:i,className:l,offset:c,mobileOffset:d,theme:h="light",richColors:u,duration:f,style:m,visibleToasts:g=$_,toastOptions:x,dir:N=s0(),gap:b=B_,loadingIcon:y,icons:v,containerAriaLabel:k="Notifications",pauseWhenPageIsHidden:S}=e,[E,C]=Q.useState([]),R=Q.useMemo(()=>Array.from(new Set([n].concat(E.filter(ue=>ue.position).map(ue=>ue.position)))),[E,n]),[F,T]=Q.useState([]),[V,Y]=Q.useState(!1),[W,X]=Q.useState(!1),[ne,te]=Q.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ie=Q.useRef(null),B=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),$=Q.useRef(null),K=Q.useRef(!1),ce=Q.useCallback(ue=>{C(Z=>{var fe;return(fe=Z.find(ve=>ve.id===ue.id))!=null&&fe.delete||zr.dismiss(ue.id),Z.filter(({id:ve})=>ve!==ue.id)})},[]);return Q.useEffect(()=>zr.subscribe(ue=>{if(ue.dismiss){C(Z=>Z.map(fe=>fe.id===ue.id?{...fe,delete:!0}:fe));return}setTimeout(()=>{k1.flushSync(()=>{C(Z=>{let fe=Z.findIndex(ve=>ve.id===ue.id);return fe!==-1?[...Z.slice(0,fe),{...Z[fe],...ue},...Z.slice(fe+1)]:[ue,...Z]})})})}),[]),Q.useEffect(()=>{if(h!=="system"){te(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?te("dark"):te("light")),typeof window>"u")return;let ue=window.matchMedia("(prefers-color-scheme: dark)");try{ue.addEventListener("change",({matches:Z})=>{te(Z?"dark":"light")})}catch{ue.addListener(({matches:fe})=>{try{te(fe?"dark":"light")}catch(ve){console.error(ve)}})}},[h]),Q.useEffect(()=>{E.length<=1&&Y(!1)},[E]),Q.useEffect(()=>{let ue=Z=>{var fe,ve;o.every(Oe=>Z[Oe]||Z.code===Oe)&&(Y(!0),(fe=ie.current)==null||fe.focus()),Z.code==="Escape"&&(document.activeElement===ie.current||(ve=ie.current)!=null&&ve.contains(document.activeElement))&&Y(!1)};return document.addEventListener("keydown",ue),()=>document.removeEventListener("keydown",ue)},[o]),Q.useEffect(()=>{if(ie.current)return()=>{$.current&&($.current.focus({preventScroll:!0}),$.current=null,K.current=!1)}},[ie.current]),Q.createElement("section",{ref:t,"aria-label":`${k} ${B}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},R.map((ue,Z)=>{var fe;let[ve,Oe]=ue.split("-");return E.length?Q.createElement("ol",{key:ue,dir:N==="auto"?s0():N,tabIndex:-1,ref:ie,className:l,"data-sonner-toaster":!0,"data-theme":ne,"data-y-position":ve,"data-lifted":V&&E.length>1&&!a,"data-x-position":Oe,style:{"--front-toast-height":`${((fe=F[0])==null?void 0:fe.height)||0}px`,"--width":`${U_}px`,"--gap":`${b}px`,...m,...H_(c,d)},onBlur:le=>{K.current&&!le.currentTarget.contains(le.relatedTarget)&&(K.current=!1,$.current&&($.current.focus({preventScroll:!0}),$.current=null))},onFocus:le=>{le.target instanceof HTMLElement&&le.target.dataset.dismissible==="false"||K.current||(K.current=!0,$.current=le.relatedTarget)},onMouseEnter:()=>Y(!0),onMouseMove:()=>Y(!0),onMouseLeave:()=>{W||Y(!1)},onDragEnd:()=>Y(!1),onPointerDown:le=>{le.target instanceof HTMLElement&&le.target.dataset.dismissible==="false"||X(!0)},onPointerUp:()=>X(!1)},E.filter(le=>!le.position&&Z===0||le.position===ue).map((le,Ze)=>{var gt,Ae;return Q.createElement(q_,{key:le.id,icons:v,index:Ze,toast:le,defaultRichColors:u,duration:(gt=x==null?void 0:x.duration)!=null?gt:f,className:x==null?void 0:x.className,descriptionClassName:x==null?void 0:x.descriptionClassName,invert:r,visibleToasts:g,closeButton:(Ae=x==null?void 0:x.closeButton)!=null?Ae:i,interacting:W,position:ue,style:x==null?void 0:x.style,unstyled:x==null?void 0:x.unstyled,classNames:x==null?void 0:x.classNames,cancelButtonStyle:x==null?void 0:x.cancelButtonStyle,actionButtonStyle:x==null?void 0:x.actionButtonStyle,removeToast:ce,toasts:E.filter(rt=>rt.position==le.position),heights:F.filter(rt=>rt.position==le.position),setHeights:T,expandByDefault:a,gap:b,loadingIcon:y,expanded:V,pauseWhenPageIsHidden:S,swipeDirections:e.swipeDirections})})):null}))});const G_=({...e})=>{const{theme:t="system"}=v_();return s.jsx(K_,{theme:t,position:"bottom-center",className:"toaster group pointer-events-none fixed bottom-0 left-1/2 -translate-x-1/2 w-full max-w-[420px] px-3 pb-[calc(env(safe-area-inset-bottom)+12px)] pt-[env(safe-area-inset-top)] z-[120] sm:px-0",toastOptions:{classNames:{toast:"group toast pointer-events-auto w-full group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};function Wr(e,t,{checkForDefaultPrevented:r=!0}={}){return function(o){if(e==null||e(o),r===!1||!o.defaultPrevented)return t==null?void 0:t(o)}}function o0(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function _1(...e){return t=>{let r=!1;const n=e.map(o=>{const a=o0(o,t);return!r&&typeof a=="function"&&(r=!0),a});if(r)return()=>{for(let o=0;o<n.length;o++){const a=n[o];typeof a=="function"?a():o0(e[o],null)}}}}function Un(...e){return p.useCallback(_1(...e),e)}function Q_(e,t){const r=p.createContext(t),n=a=>{const{children:i,...l}=a,c=p.useMemo(()=>l,Object.values(l));return s.jsx(r.Provider,{value:c,children:i})};n.displayName=e+"Provider";function o(a){const i=p.useContext(r);if(i)return i;if(t!==void 0)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}return[n,o]}function Jx(e,t=[]){let r=[];function n(a,i){const l=p.createContext(i),c=r.length;r=[...r,i];const d=u=>{var b;const{scope:f,children:m,...g}=u,x=((b=f==null?void 0:f[e])==null?void 0:b[c])||l,N=p.useMemo(()=>g,Object.values(g));return s.jsx(x.Provider,{value:N,children:m})};d.displayName=a+"Provider";function h(u,f){var x;const m=((x=f==null?void 0:f[e])==null?void 0:x[c])||l,g=p.useContext(m);if(g)return g;if(i!==void 0)return i;throw new Error(`\`${u}\` must be used within \`${a}\``)}return[d,h]}const o=()=>{const a=r.map(i=>p.createContext(i));return function(l){const c=(l==null?void 0:l[e])||a;return p.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return o.scopeName=e,[n,Y_(o,...t)]}function Y_(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(a){const i=n.reduce((l,{useScope:c,scopeName:d})=>{const u=c(a)[`__scope${d}`];return{...l,...u}},{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}function Xx(e){const t=X_(e),r=p.forwardRef((n,o)=>{const{children:a,...i}=n,l=p.Children.toArray(a),c=l.find(eC);if(c){const d=c.props.children,h=l.map(u=>u===c?p.Children.count(d)>1?p.Children.only(null):p.isValidElement(d)?d.props.children:null:u);return s.jsx(t,{...i,ref:o,children:p.isValidElement(d)?p.cloneElement(d,void 0,h):null})}return s.jsx(t,{...i,ref:o,children:a})});return r.displayName=`${e}.Slot`,r}var J_=Xx("Slot");function X_(e){const t=p.forwardRef((r,n)=>{const{children:o,...a}=r;if(p.isValidElement(o)){const i=rC(o),l=tC(a,o.props);return o.type!==p.Fragment&&(l.ref=n?_1(n,i):i),p.cloneElement(o,l)}return p.Children.count(o)>1?p.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var C1=Symbol("radix.slottable");function Z_(e){const t=({children:r})=>s.jsx(s.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=C1,t}function eC(e){return p.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===C1}function tC(e,t){const r={...t};for(const n in t){const o=e[n],a=t[n];/^on[A-Z]/.test(n)?o&&a?r[n]=(...l)=>{const c=a(...l);return o(...l),c}:o&&(r[n]=o):n==="style"?r[n]={...o,...a}:n==="className"&&(r[n]=[o,a].filter(Boolean).join(" "))}return{...e,...r}}function rC(e){var n,o;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var nC=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Qr=nC.reduce((e,t)=>{const r=Xx(`Primitive.${t}`),n=p.forwardRef((o,a)=>{const{asChild:i,...l}=o,c=i?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(c,{...l,ref:a})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function sC(e,t){e&&Oh.flushSync(()=>e.dispatchEvent(t))}function Hi(e){const t=p.useRef(e);return p.useEffect(()=>{t.current=e}),p.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function oC(e,t=globalThis==null?void 0:globalThis.document){const r=Hi(e);p.useEffect(()=>{const n=o=>{o.key==="Escape"&&r(o)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var aC="DismissableLayer",mm="dismissableLayer.update",iC="dismissableLayer.pointerDownOutside",lC="dismissableLayer.focusOutside",a0,E1=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Zx=p.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:o,onFocusOutside:a,onInteractOutside:i,onDismiss:l,...c}=e,d=p.useContext(E1),[h,u]=p.useState(null),f=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=p.useState({}),g=Un(t,C=>u(C)),x=Array.from(d.layers),[N]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),b=x.indexOf(N),y=h?x.indexOf(h):-1,v=d.layersWithOutsidePointerEventsDisabled.size>0,k=y>=b,S=uC(C=>{const R=C.target,F=[...d.branches].some(T=>T.contains(R));!k||F||(o==null||o(C),i==null||i(C),C.defaultPrevented||l==null||l())},f),E=hC(C=>{const R=C.target;[...d.branches].some(T=>T.contains(R))||(a==null||a(C),i==null||i(C),C.defaultPrevented||l==null||l())},f);return oC(C=>{y===d.layers.size-1&&(n==null||n(C),!C.defaultPrevented&&l&&(C.preventDefault(),l()))},f),p.useEffect(()=>{if(h)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(a0=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),i0(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=a0)}},[h,f,r,d]),p.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),i0())},[h,d]),p.useEffect(()=>{const C=()=>m({});return document.addEventListener(mm,C),()=>document.removeEventListener(mm,C)},[]),s.jsx(Qr.div,{...c,ref:g,style:{pointerEvents:v?k?"auto":"none":void 0,...e.style},onFocusCapture:Wr(e.onFocusCapture,E.onFocusCapture),onBlurCapture:Wr(e.onBlurCapture,E.onBlurCapture),onPointerDownCapture:Wr(e.onPointerDownCapture,S.onPointerDownCapture)})});Zx.displayName=aC;var cC="DismissableLayerBranch",dC=p.forwardRef((e,t)=>{const r=p.useContext(E1),n=p.useRef(null),o=Un(t,n);return p.useEffect(()=>{const a=n.current;if(a)return r.branches.add(a),()=>{r.branches.delete(a)}},[r.branches]),s.jsx(Qr.div,{...e,ref:o})});dC.displayName=cC;function uC(e,t=globalThis==null?void 0:globalThis.document){const r=Hi(e),n=p.useRef(!1),o=p.useRef(()=>{});return p.useEffect(()=>{const a=l=>{if(l.target&&!n.current){let c=function(){P1(iC,r,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",o.current),o.current=c,t.addEventListener("click",o.current,{once:!0})):c()}else t.removeEventListener("click",o.current);n.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",a),t.removeEventListener("click",o.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function hC(e,t=globalThis==null?void 0:globalThis.document){const r=Hi(e),n=p.useRef(!1);return p.useEffect(()=>{const o=a=>{a.target&&!n.current&&P1(lC,r,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",o),()=>t.removeEventListener("focusin",o)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function i0(){const e=new CustomEvent(mm);document.dispatchEvent(e)}function P1(e,t,r,{discrete:n}){const o=r.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&o.addEventListener(e,t,{once:!0}),n?sC(o,a):o.dispatchEvent(a)}var Co=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},fC=ax[" useId ".trim().toString()]||(()=>{}),pC=0;function Uf(e){const[t,r]=p.useState(fC());return Co(()=>{e||r(n=>n??String(pC++))},[e]),e||(t?`radix-${t}`:"")}const mC=["top","right","bottom","left"],Eo=Math.min,rn=Math.max,qu=Math.round,kd=Math.floor,ns=e=>({x:e,y:e}),xC={left:"right",right:"left",bottom:"top",top:"bottom"},gC={start:"end",end:"start"};function xm(e,t,r){return rn(e,Eo(t,r))}function Ts(e,t){return typeof e=="function"?e(t):e}function As(e){return e.split("-")[0]}function rl(e){return e.split("-")[1]}function eg(e){return e==="x"?"y":"x"}function tg(e){return e==="y"?"height":"width"}const bC=new Set(["top","bottom"]);function es(e){return bC.has(As(e))?"y":"x"}function rg(e){return eg(es(e))}function yC(e,t,r){r===void 0&&(r=!1);const n=rl(e),o=rg(e),a=tg(o);let i=o==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(i=Hu(i)),[i,Hu(i)]}function vC(e){const t=Hu(e);return[gm(e),t,gm(t)]}function gm(e){return e.replace(/start|end/g,t=>gC[t])}const l0=["left","right"],c0=["right","left"],wC=["top","bottom"],jC=["bottom","top"];function NC(e,t,r){switch(e){case"top":case"bottom":return r?t?c0:l0:t?l0:c0;case"left":case"right":return t?wC:jC;default:return[]}}function kC(e,t,r,n){const o=rl(e);let a=NC(As(e),r==="start",n);return o&&(a=a.map(i=>i+"-"+o),t&&(a=a.concat(a.map(gm)))),a}function Hu(e){return e.replace(/left|right|bottom|top/g,t=>xC[t])}function SC(e){return{top:0,right:0,bottom:0,left:0,...e}}function R1(e){return typeof e!="number"?SC(e):{top:e,right:e,bottom:e,left:e}}function Ku(e){const{x:t,y:r,width:n,height:o}=e;return{width:n,height:o,top:r,left:t,right:t+n,bottom:r+o,x:t,y:r}}function d0(e,t,r){let{reference:n,floating:o}=e;const a=es(t),i=rg(t),l=tg(i),c=As(t),d=a==="y",h=n.x+n.width/2-o.width/2,u=n.y+n.height/2-o.height/2,f=n[l]/2-o[l]/2;let m;switch(c){case"top":m={x:h,y:n.y-o.height};break;case"bottom":m={x:h,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:u};break;case"left":m={x:n.x-o.width,y:u};break;default:m={x:n.x,y:n.y}}switch(rl(t)){case"start":m[i]-=f*(r&&d?-1:1);break;case"end":m[i]+=f*(r&&d?-1:1);break}return m}const _C=async(e,t,r)=>{const{placement:n="bottom",strategy:o="absolute",middleware:a=[],platform:i}=r,l=a.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(t));let d=await i.getElementRects({reference:e,floating:t,strategy:o}),{x:h,y:u}=d0(d,n,c),f=n,m={},g=0;for(let x=0;x<l.length;x++){const{name:N,fn:b}=l[x],{x:y,y:v,data:k,reset:S}=await b({x:h,y:u,initialPlacement:n,placement:f,strategy:o,middlewareData:m,rects:d,platform:i,elements:{reference:e,floating:t}});h=y??h,u=v??u,m={...m,[N]:{...m[N],...k}},S&&g<=50&&(g++,typeof S=="object"&&(S.placement&&(f=S.placement),S.rects&&(d=S.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:o}):S.rects),{x:h,y:u}=d0(d,f,c)),x=-1)}return{x:h,y:u,placement:f,strategy:o,middlewareData:m}};async function mc(e,t){var r;t===void 0&&(t={});const{x:n,y:o,platform:a,rects:i,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:h="viewport",elementContext:u="floating",altBoundary:f=!1,padding:m=0}=Ts(t,e),g=R1(m),N=l[f?u==="floating"?"reference":"floating":u],b=Ku(await a.getClippingRect({element:(r=await(a.isElement==null?void 0:a.isElement(N)))==null||r?N:N.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:d,rootBoundary:h,strategy:c})),y=u==="floating"?{x:n,y:o,width:i.floating.width,height:i.floating.height}:i.reference,v=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),k=await(a.isElement==null?void 0:a.isElement(v))?await(a.getScale==null?void 0:a.getScale(v))||{x:1,y:1}:{x:1,y:1},S=Ku(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:y,offsetParent:v,strategy:c}):y);return{top:(b.top-S.top+g.top)/k.y,bottom:(S.bottom-b.bottom+g.bottom)/k.y,left:(b.left-S.left+g.left)/k.x,right:(S.right-b.right+g.right)/k.x}}const CC=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:o,rects:a,platform:i,elements:l,middlewareData:c}=t,{element:d,padding:h=0}=Ts(e,t)||{};if(d==null)return{};const u=R1(h),f={x:r,y:n},m=rg(o),g=tg(m),x=await i.getDimensions(d),N=m==="y",b=N?"top":"left",y=N?"bottom":"right",v=N?"clientHeight":"clientWidth",k=a.reference[g]+a.reference[m]-f[m]-a.floating[g],S=f[m]-a.reference[m],E=await(i.getOffsetParent==null?void 0:i.getOffsetParent(d));let C=E?E[v]:0;(!C||!await(i.isElement==null?void 0:i.isElement(E)))&&(C=l.floating[v]||a.floating[g]);const R=k/2-S/2,F=C/2-x[g]/2-1,T=Eo(u[b],F),V=Eo(u[y],F),Y=T,W=C-x[g]-V,X=C/2-x[g]/2+R,ne=xm(Y,X,W),te=!c.arrow&&rl(o)!=null&&X!==ne&&a.reference[g]/2-(X<Y?T:V)-x[g]/2<0,ie=te?X<Y?X-Y:X-W:0;return{[m]:f[m]+ie,data:{[m]:ne,centerOffset:X-ne-ie,...te&&{alignmentOffset:ie}},reset:te}}}),EC=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:o,middlewareData:a,rects:i,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:h=!0,crossAxis:u=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:x=!0,...N}=Ts(e,t);if((r=a.arrow)!=null&&r.alignmentOffset)return{};const b=As(o),y=es(l),v=As(l)===l,k=await(c.isRTL==null?void 0:c.isRTL(d.floating)),S=f||(v||!x?[Hu(l)]:vC(l)),E=g!=="none";!f&&E&&S.push(...kC(l,x,g,k));const C=[l,...S],R=await mc(t,N),F=[];let T=((n=a.flip)==null?void 0:n.overflows)||[];if(h&&F.push(R[b]),u){const X=yC(o,i,k);F.push(R[X[0]],R[X[1]])}if(T=[...T,{placement:o,overflows:F}],!F.every(X=>X<=0)){var V,Y;const X=(((V=a.flip)==null?void 0:V.index)||0)+1,ne=C[X];if(ne&&(!(u==="alignment"?y!==es(ne):!1)||T.every(B=>B.overflows[0]>0&&es(B.placement)===y)))return{data:{index:X,overflows:T},reset:{placement:ne}};let te=(Y=T.filter(ie=>ie.overflows[0]<=0).sort((ie,B)=>ie.overflows[1]-B.overflows[1])[0])==null?void 0:Y.placement;if(!te)switch(m){case"bestFit":{var W;const ie=(W=T.filter(B=>{if(E){const $=es(B.placement);return $===y||$==="y"}return!0}).map(B=>[B.placement,B.overflows.filter($=>$>0).reduce(($,K)=>$+K,0)]).sort((B,$)=>B[1]-$[1])[0])==null?void 0:W[0];ie&&(te=ie);break}case"initialPlacement":te=l;break}if(o!==te)return{reset:{placement:te}}}return{}}}};function u0(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function h0(e){return mC.some(t=>e[t]>=0)}const PC=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...o}=Ts(e,t);switch(n){case"referenceHidden":{const a=await mc(t,{...o,elementContext:"reference"}),i=u0(a,r.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:h0(i)}}}case"escaped":{const a=await mc(t,{...o,altBoundary:!0}),i=u0(a,r.floating);return{data:{escapedOffsets:i,escaped:h0(i)}}}default:return{}}}}},T1=new Set(["left","top"]);async function RC(e,t){const{placement:r,platform:n,elements:o}=e,a=await(n.isRTL==null?void 0:n.isRTL(o.floating)),i=As(r),l=rl(r),c=es(r)==="y",d=T1.has(i)?-1:1,h=a&&c?-1:1,u=Ts(t,e);let{mainAxis:f,crossAxis:m,alignmentAxis:g}=typeof u=="number"?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return l&&typeof g=="number"&&(m=l==="end"?g*-1:g),c?{x:m*h,y:f*d}:{x:f*d,y:m*h}}const TC=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:o,y:a,placement:i,middlewareData:l}=t,c=await RC(t,e);return i===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:o+c.x,y:a+c.y,data:{...c,placement:i}}}}},AC=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:o}=t,{mainAxis:a=!0,crossAxis:i=!1,limiter:l={fn:N=>{let{x:b,y}=N;return{x:b,y}}},...c}=Ts(e,t),d={x:r,y:n},h=await mc(t,c),u=es(As(o)),f=eg(u);let m=d[f],g=d[u];if(a){const N=f==="y"?"top":"left",b=f==="y"?"bottom":"right",y=m+h[N],v=m-h[b];m=xm(y,m,v)}if(i){const N=u==="y"?"top":"left",b=u==="y"?"bottom":"right",y=g+h[N],v=g-h[b];g=xm(y,g,v)}const x=l.fn({...t,[f]:m,[u]:g});return{...x,data:{x:x.x-r,y:x.y-n,enabled:{[f]:a,[u]:i}}}}}},OC=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:o,rects:a,middlewareData:i}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=Ts(e,t),h={x:r,y:n},u=es(o),f=eg(u);let m=h[f],g=h[u];const x=Ts(l,t),N=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(c){const v=f==="y"?"height":"width",k=a.reference[f]-a.floating[v]+N.mainAxis,S=a.reference[f]+a.reference[v]-N.mainAxis;m<k?m=k:m>S&&(m=S)}if(d){var b,y;const v=f==="y"?"width":"height",k=T1.has(As(o)),S=a.reference[u]-a.floating[v]+(k&&((b=i.offset)==null?void 0:b[u])||0)+(k?0:N.crossAxis),E=a.reference[u]+a.reference[v]+(k?0:((y=i.offset)==null?void 0:y[u])||0)-(k?N.crossAxis:0);g<S?g=S:g>E&&(g=E)}return{[f]:m,[u]:g}}}},DC=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:o,rects:a,platform:i,elements:l}=t,{apply:c=()=>{},...d}=Ts(e,t),h=await mc(t,d),u=As(o),f=rl(o),m=es(o)==="y",{width:g,height:x}=a.floating;let N,b;u==="top"||u==="bottom"?(N=u,b=f===(await(i.isRTL==null?void 0:i.isRTL(l.floating))?"start":"end")?"left":"right"):(b=u,N=f==="end"?"top":"bottom");const y=x-h.top-h.bottom,v=g-h.left-h.right,k=Eo(x-h[N],y),S=Eo(g-h[b],v),E=!t.middlewareData.shift;let C=k,R=S;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(R=v),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(C=y),E&&!f){const T=rn(h.left,0),V=rn(h.right,0),Y=rn(h.top,0),W=rn(h.bottom,0);m?R=g-2*(T!==0||V!==0?T+V:rn(h.left,h.right)):C=x-2*(Y!==0||W!==0?Y+W:rn(h.top,h.bottom))}await c({...t,availableWidth:R,availableHeight:C});const F=await i.getDimensions(l.floating);return g!==F.width||x!==F.height?{reset:{rects:!0}}:{}}}};function Dh(){return typeof window<"u"}function nl(e){return A1(e)?(e.nodeName||"").toLowerCase():"#document"}function cn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function is(e){var t;return(t=(A1(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function A1(e){return Dh()?e instanceof Node||e instanceof cn(e).Node:!1}function Ln(e){return Dh()?e instanceof Element||e instanceof cn(e).Element:!1}function ss(e){return Dh()?e instanceof HTMLElement||e instanceof cn(e).HTMLElement:!1}function f0(e){return!Dh()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof cn(e).ShadowRoot}const IC=new Set(["inline","contents"]);function Vc(e){const{overflow:t,overflowX:r,overflowY:n,display:o}=Fn(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!IC.has(o)}const MC=new Set(["table","td","th"]);function $C(e){return MC.has(nl(e))}const LC=[":popover-open",":modal"];function Ih(e){return LC.some(t=>{try{return e.matches(t)}catch{return!1}})}const FC=["transform","translate","scale","rotate","perspective"],UC=["transform","translate","scale","rotate","perspective","filter"],BC=["paint","layout","strict","content"];function ng(e){const t=sg(),r=Ln(e)?Fn(e):e;return FC.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||UC.some(n=>(r.willChange||"").includes(n))||BC.some(n=>(r.contain||"").includes(n))}function zC(e){let t=Po(e);for(;ss(t)&&!Ki(t);){if(ng(t))return t;if(Ih(t))return null;t=Po(t)}return null}function sg(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const VC=new Set(["html","body","#document"]);function Ki(e){return VC.has(nl(e))}function Fn(e){return cn(e).getComputedStyle(e)}function Mh(e){return Ln(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Po(e){if(nl(e)==="html")return e;const t=e.assignedSlot||e.parentNode||f0(e)&&e.host||is(e);return f0(t)?t.host:t}function O1(e){const t=Po(e);return Ki(t)?e.ownerDocument?e.ownerDocument.body:e.body:ss(t)&&Vc(t)?t:O1(t)}function xc(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const o=O1(e),a=o===((n=e.ownerDocument)==null?void 0:n.body),i=cn(o);if(a){const l=bm(i);return t.concat(i,i.visualViewport||[],Vc(o)?o:[],l&&r?xc(l):[])}return t.concat(o,xc(o,[],r))}function bm(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function D1(e){const t=Fn(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const o=ss(e),a=o?e.offsetWidth:r,i=o?e.offsetHeight:n,l=qu(r)!==a||qu(n)!==i;return l&&(r=a,n=i),{width:r,height:n,$:l}}function og(e){return Ln(e)?e:e.contextElement}function wi(e){const t=og(e);if(!ss(t))return ns(1);const r=t.getBoundingClientRect(),{width:n,height:o,$:a}=D1(t);let i=(a?qu(r.width):r.width)/n,l=(a?qu(r.height):r.height)/o;return(!i||!Number.isFinite(i))&&(i=1),(!l||!Number.isFinite(l))&&(l=1),{x:i,y:l}}const WC=ns(0);function I1(e){const t=cn(e);return!sg()||!t.visualViewport?WC:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function qC(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==cn(e)?!1:t}function ka(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const o=e.getBoundingClientRect(),a=og(e);let i=ns(1);t&&(n?Ln(n)&&(i=wi(n)):i=wi(e));const l=qC(a,r,n)?I1(a):ns(0);let c=(o.left+l.x)/i.x,d=(o.top+l.y)/i.y,h=o.width/i.x,u=o.height/i.y;if(a){const f=cn(a),m=n&&Ln(n)?cn(n):n;let g=f,x=bm(g);for(;x&&n&&m!==g;){const N=wi(x),b=x.getBoundingClientRect(),y=Fn(x),v=b.left+(x.clientLeft+parseFloat(y.paddingLeft))*N.x,k=b.top+(x.clientTop+parseFloat(y.paddingTop))*N.y;c*=N.x,d*=N.y,h*=N.x,u*=N.y,c+=v,d+=k,g=cn(x),x=bm(g)}}return Ku({width:h,height:u,x:c,y:d})}function ag(e,t){const r=Mh(e).scrollLeft;return t?t.left+r:ka(is(e)).left+r}function M1(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),o=n.left+t.scrollLeft-(r?0:ag(e,n)),a=n.top+t.scrollTop;return{x:o,y:a}}function HC(e){let{elements:t,rect:r,offsetParent:n,strategy:o}=e;const a=o==="fixed",i=is(n),l=t?Ih(t.floating):!1;if(n===i||l&&a)return r;let c={scrollLeft:0,scrollTop:0},d=ns(1);const h=ns(0),u=ss(n);if((u||!u&&!a)&&((nl(n)!=="body"||Vc(i))&&(c=Mh(n)),ss(n))){const m=ka(n);d=wi(n),h.x=m.x+n.clientLeft,h.y=m.y+n.clientTop}const f=i&&!u&&!a?M1(i,c,!0):ns(0);return{width:r.width*d.x,height:r.height*d.y,x:r.x*d.x-c.scrollLeft*d.x+h.x+f.x,y:r.y*d.y-c.scrollTop*d.y+h.y+f.y}}function KC(e){return Array.from(e.getClientRects())}function GC(e){const t=is(e),r=Mh(e),n=e.ownerDocument.body,o=rn(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),a=rn(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let i=-r.scrollLeft+ag(e);const l=-r.scrollTop;return Fn(n).direction==="rtl"&&(i+=rn(t.clientWidth,n.clientWidth)-o),{width:o,height:a,x:i,y:l}}function QC(e,t){const r=cn(e),n=is(e),o=r.visualViewport;let a=n.clientWidth,i=n.clientHeight,l=0,c=0;if(o){a=o.width,i=o.height;const d=sg();(!d||d&&t==="fixed")&&(l=o.offsetLeft,c=o.offsetTop)}return{width:a,height:i,x:l,y:c}}const YC=new Set(["absolute","fixed"]);function JC(e,t){const r=ka(e,!0,t==="fixed"),n=r.top+e.clientTop,o=r.left+e.clientLeft,a=ss(e)?wi(e):ns(1),i=e.clientWidth*a.x,l=e.clientHeight*a.y,c=o*a.x,d=n*a.y;return{width:i,height:l,x:c,y:d}}function p0(e,t,r){let n;if(t==="viewport")n=QC(e,r);else if(t==="document")n=GC(is(e));else if(Ln(t))n=JC(t,r);else{const o=I1(e);n={x:t.x-o.x,y:t.y-o.y,width:t.width,height:t.height}}return Ku(n)}function $1(e,t){const r=Po(e);return r===t||!Ln(r)||Ki(r)?!1:Fn(r).position==="fixed"||$1(r,t)}function XC(e,t){const r=t.get(e);if(r)return r;let n=xc(e,[],!1).filter(l=>Ln(l)&&nl(l)!=="body"),o=null;const a=Fn(e).position==="fixed";let i=a?Po(e):e;for(;Ln(i)&&!Ki(i);){const l=Fn(i),c=ng(i);!c&&l.position==="fixed"&&(o=null),(a?!c&&!o:!c&&l.position==="static"&&!!o&&YC.has(o.position)||Vc(i)&&!c&&$1(e,i))?n=n.filter(h=>h!==i):o=l,i=Po(i)}return t.set(e,n),n}function ZC(e){let{element:t,boundary:r,rootBoundary:n,strategy:o}=e;const i=[...r==="clippingAncestors"?Ih(t)?[]:XC(t,this._c):[].concat(r),n],l=i[0],c=i.reduce((d,h)=>{const u=p0(t,h,o);return d.top=rn(u.top,d.top),d.right=Eo(u.right,d.right),d.bottom=Eo(u.bottom,d.bottom),d.left=rn(u.left,d.left),d},p0(t,l,o));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function e5(e){const{width:t,height:r}=D1(e);return{width:t,height:r}}function t5(e,t,r){const n=ss(t),o=is(t),a=r==="fixed",i=ka(e,!0,a,t);let l={scrollLeft:0,scrollTop:0};const c=ns(0);function d(){c.x=ag(o)}if(n||!n&&!a)if((nl(t)!=="body"||Vc(o))&&(l=Mh(t)),n){const m=ka(t,!0,a,t);c.x=m.x+t.clientLeft,c.y=m.y+t.clientTop}else o&&d();a&&!n&&o&&d();const h=o&&!n&&!a?M1(o,l):ns(0),u=i.left+l.scrollLeft-c.x-h.x,f=i.top+l.scrollTop-c.y-h.y;return{x:u,y:f,width:i.width,height:i.height}}function Bf(e){return Fn(e).position==="static"}function m0(e,t){if(!ss(e)||Fn(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return is(e)===r&&(r=r.ownerDocument.body),r}function L1(e,t){const r=cn(e);if(Ih(e))return r;if(!ss(e)){let o=Po(e);for(;o&&!Ki(o);){if(Ln(o)&&!Bf(o))return o;o=Po(o)}return r}let n=m0(e,t);for(;n&&$C(n)&&Bf(n);)n=m0(n,t);return n&&Ki(n)&&Bf(n)&&!ng(n)?r:n||zC(e)||r}const r5=async function(e){const t=this.getOffsetParent||L1,r=this.getDimensions,n=await r(e.floating);return{reference:t5(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function n5(e){return Fn(e).direction==="rtl"}const s5={convertOffsetParentRelativeRectToViewportRelativeRect:HC,getDocumentElement:is,getClippingRect:ZC,getOffsetParent:L1,getElementRects:r5,getClientRects:KC,getDimensions:e5,getScale:wi,isElement:Ln,isRTL:n5};function F1(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function o5(e,t){let r=null,n;const o=is(e);function a(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function i(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const d=e.getBoundingClientRect(),{left:h,top:u,width:f,height:m}=d;if(l||t(),!f||!m)return;const g=kd(u),x=kd(o.clientWidth-(h+f)),N=kd(o.clientHeight-(u+m)),b=kd(h),v={rootMargin:-g+"px "+-x+"px "+-N+"px "+-b+"px",threshold:rn(0,Eo(1,c))||1};let k=!0;function S(E){const C=E[0].intersectionRatio;if(C!==c){if(!k)return i();C?i(!1,C):n=setTimeout(()=>{i(!1,1e-7)},1e3)}C===1&&!F1(d,e.getBoundingClientRect())&&i(),k=!1}try{r=new IntersectionObserver(S,{...v,root:o.ownerDocument})}catch{r=new IntersectionObserver(S,v)}r.observe(e)}return i(!0),a}function a5(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:o=!0,ancestorResize:a=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,d=og(e),h=o||a?[...d?xc(d):[],...xc(t)]:[];h.forEach(b=>{o&&b.addEventListener("scroll",r,{passive:!0}),a&&b.addEventListener("resize",r)});const u=d&&l?o5(d,r):null;let f=-1,m=null;i&&(m=new ResizeObserver(b=>{let[y]=b;y&&y.target===d&&m&&(m.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var v;(v=m)==null||v.observe(t)})),r()}),d&&!c&&m.observe(d),m.observe(t));let g,x=c?ka(e):null;c&&N();function N(){const b=ka(e);x&&!F1(x,b)&&r(),x=b,g=requestAnimationFrame(N)}return r(),()=>{var b;h.forEach(y=>{o&&y.removeEventListener("scroll",r),a&&y.removeEventListener("resize",r)}),u==null||u(),(b=m)==null||b.disconnect(),m=null,c&&cancelAnimationFrame(g)}}const i5=TC,l5=AC,c5=EC,d5=DC,u5=PC,x0=CC,h5=OC,f5=(e,t,r)=>{const n=new Map,o={platform:s5,...r},a={...o.platform,_c:n};return _C(e,t,{...o,platform:a})};var p5=typeof document<"u",m5=function(){},cu=p5?p.useLayoutEffect:m5;function Gu(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,o;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!Gu(e[n],t[n]))return!1;return!0}if(o=Object.keys(e),r=o.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,o[n]))return!1;for(n=r;n--!==0;){const a=o[n];if(!(a==="_owner"&&e.$$typeof)&&!Gu(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function U1(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function g0(e,t){const r=U1(e);return Math.round(t*r)/r}function zf(e){const t=p.useRef(e);return cu(()=>{t.current=e}),t}function x5(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:o,elements:{reference:a,floating:i}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[h,u]=p.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[f,m]=p.useState(n);Gu(f,n)||m(n);const[g,x]=p.useState(null),[N,b]=p.useState(null),y=p.useCallback(B=>{B!==E.current&&(E.current=B,x(B))},[]),v=p.useCallback(B=>{B!==C.current&&(C.current=B,b(B))},[]),k=a||g,S=i||N,E=p.useRef(null),C=p.useRef(null),R=p.useRef(h),F=c!=null,T=zf(c),V=zf(o),Y=zf(d),W=p.useCallback(()=>{if(!E.current||!C.current)return;const B={placement:t,strategy:r,middleware:f};V.current&&(B.platform=V.current),f5(E.current,C.current,B).then($=>{const K={...$,isPositioned:Y.current!==!1};X.current&&!Gu(R.current,K)&&(R.current=K,Oh.flushSync(()=>{u(K)}))})},[f,t,r,V,Y]);cu(()=>{d===!1&&R.current.isPositioned&&(R.current.isPositioned=!1,u(B=>({...B,isPositioned:!1})))},[d]);const X=p.useRef(!1);cu(()=>(X.current=!0,()=>{X.current=!1}),[]),cu(()=>{if(k&&(E.current=k),S&&(C.current=S),k&&S){if(T.current)return T.current(k,S,W);W()}},[k,S,W,T,F]);const ne=p.useMemo(()=>({reference:E,floating:C,setReference:y,setFloating:v}),[y,v]),te=p.useMemo(()=>({reference:k,floating:S}),[k,S]),ie=p.useMemo(()=>{const B={position:r,left:0,top:0};if(!te.floating)return B;const $=g0(te.floating,h.x),K=g0(te.floating,h.y);return l?{...B,transform:"translate("+$+"px, "+K+"px)",...U1(te.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:$,top:K}},[r,l,te.floating,h.x,h.y]);return p.useMemo(()=>({...h,update:W,refs:ne,elements:te,floatingStyles:ie}),[h,W,ne,te,ie])}const g5=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:o}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?x0({element:n.current,padding:o}).fn(r):{}:n?x0({element:n,padding:o}).fn(r):{}}}},b5=(e,t)=>({...i5(e),options:[e,t]}),y5=(e,t)=>({...l5(e),options:[e,t]}),v5=(e,t)=>({...h5(e),options:[e,t]}),w5=(e,t)=>({...c5(e),options:[e,t]}),j5=(e,t)=>({...d5(e),options:[e,t]}),N5=(e,t)=>({...u5(e),options:[e,t]}),k5=(e,t)=>({...g5(e),options:[e,t]});var S5="Arrow",B1=p.forwardRef((e,t)=>{const{children:r,width:n=10,height:o=5,...a}=e;return s.jsx(Qr.svg,{...a,ref:t,width:n,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});B1.displayName=S5;var _5=B1;function C5(e){const[t,r]=p.useState(void 0);return Co(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const a=o[0];let i,l;if("borderBoxSize"in a){const c=a.borderBoxSize,d=Array.isArray(c)?c[0]:c;i=d.inlineSize,l=d.blockSize}else i=e.offsetWidth,l=e.offsetHeight;r({width:i,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var z1="Popper",[V1,W1]=Jx(z1),[zI,q1]=V1(z1),H1="PopperAnchor",K1=p.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...o}=e,a=q1(H1,r),i=p.useRef(null),l=Un(t,i);return p.useEffect(()=>{a.onAnchorChange((n==null?void 0:n.current)||i.current)}),n?null:s.jsx(Qr.div,{...o,ref:l})});K1.displayName=H1;var ig="PopperContent",[E5,P5]=V1(ig),G1=p.forwardRef((e,t)=>{var le,Ze,gt,Ae,rt,et;const{__scopePopper:r,side:n="bottom",sideOffset:o=0,align:a="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:h=0,sticky:u="partial",hideWhenDetached:f=!1,updatePositionStrategy:m="optimized",onPlaced:g,...x}=e,N=q1(ig,r),[b,y]=p.useState(null),v=Un(t,je=>y(je)),[k,S]=p.useState(null),E=C5(k),C=(E==null?void 0:E.width)??0,R=(E==null?void 0:E.height)??0,F=n+(a!=="center"?"-"+a:""),T=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},V=Array.isArray(d)?d:[d],Y=V.length>0,W={padding:T,boundary:V.filter(T5),altBoundary:Y},{refs:X,floatingStyles:ne,placement:te,isPositioned:ie,middlewareData:B}=x5({strategy:"fixed",placement:F,whileElementsMounted:(...je)=>a5(...je,{animationFrame:m==="always"}),elements:{reference:N.anchor},middleware:[b5({mainAxis:o+R,alignmentAxis:i}),c&&y5({mainAxis:!0,crossAxis:!1,limiter:u==="partial"?v5():void 0,...W}),c&&w5({...W}),j5({...W,apply:({elements:je,rects:_t,availableWidth:Ee,availableHeight:It})=>{const{width:ot,height:bt}=_t.reference,yt=je.floating.style;yt.setProperty("--radix-popper-available-width",`${Ee}px`),yt.setProperty("--radix-popper-available-height",`${It}px`),yt.setProperty("--radix-popper-anchor-width",`${ot}px`),yt.setProperty("--radix-popper-anchor-height",`${bt}px`)}}),k&&k5({element:k,padding:l}),A5({arrowWidth:C,arrowHeight:R}),f&&N5({strategy:"referenceHidden",...W})]}),[$,K]=J1(te),ce=Hi(g);Co(()=>{ie&&(ce==null||ce())},[ie,ce]);const ue=(le=B.arrow)==null?void 0:le.x,Z=(Ze=B.arrow)==null?void 0:Ze.y,fe=((gt=B.arrow)==null?void 0:gt.centerOffset)!==0,[ve,Oe]=p.useState();return Co(()=>{b&&Oe(window.getComputedStyle(b).zIndex)},[b]),s.jsx("div",{ref:X.setFloating,"data-radix-popper-content-wrapper":"",style:{...ne,transform:ie?ne.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ve,"--radix-popper-transform-origin":[(Ae=B.transformOrigin)==null?void 0:Ae.x,(rt=B.transformOrigin)==null?void 0:rt.y].join(" "),...((et=B.hide)==null?void 0:et.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(E5,{scope:r,placedSide:$,onArrowChange:S,arrowX:ue,arrowY:Z,shouldHideArrow:fe,children:s.jsx(Qr.div,{"data-side":$,"data-align":K,...x,ref:v,style:{...x.style,animation:ie?void 0:"none"}})})})});G1.displayName=ig;var Q1="PopperArrow",R5={top:"bottom",right:"left",bottom:"top",left:"right"},Y1=p.forwardRef(function(t,r){const{__scopePopper:n,...o}=t,a=P5(Q1,n),i=R5[a.placedSide];return s.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:s.jsx(_5,{...o,ref:r,style:{...o.style,display:"block"}})})});Y1.displayName=Q1;function T5(e){return e!==null}var A5=e=>({name:"transformOrigin",options:e,fn(t){var N,b,y;const{placement:r,rects:n,middlewareData:o}=t,i=((N=o.arrow)==null?void 0:N.centerOffset)!==0,l=i?0:e.arrowWidth,c=i?0:e.arrowHeight,[d,h]=J1(r),u={start:"0%",center:"50%",end:"100%"}[h],f=(((b=o.arrow)==null?void 0:b.x)??0)+l/2,m=(((y=o.arrow)==null?void 0:y.y)??0)+c/2;let g="",x="";return d==="bottom"?(g=i?u:`${f}px`,x=`${-c}px`):d==="top"?(g=i?u:`${f}px`,x=`${n.floating.height+c}px`):d==="right"?(g=`${-c}px`,x=i?u:`${m}px`):d==="left"&&(g=`${n.floating.width+c}px`,x=i?u:`${m}px`),{data:{x:g,y:x}}}});function J1(e){const[t,r="center"]=e.split("-");return[t,r]}var O5=K1,D5=G1,I5=Y1,M5="Portal",X1=p.forwardRef((e,t)=>{var l;const{container:r,...n}=e,[o,a]=p.useState(!1);Co(()=>a(!0),[]);const i=r||o&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return i?k1.createPortal(s.jsx(Qr.div,{...n,ref:t}),i):null});X1.displayName=M5;function $5(e,t){return p.useReducer((r,n)=>t[r][n]??r,e)}var Wc=e=>{const{present:t,children:r}=e,n=L5(t),o=typeof r=="function"?r({present:n.isPresent}):p.Children.only(r),a=Un(n.ref,F5(o));return typeof r=="function"||n.isPresent?p.cloneElement(o,{ref:a}):null};Wc.displayName="Presence";function L5(e){const[t,r]=p.useState(),n=p.useRef(null),o=p.useRef(e),a=p.useRef("none"),i=e?"mounted":"unmounted",[l,c]=$5(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const d=Sd(n.current);a.current=l==="mounted"?d:"none"},[l]),Co(()=>{const d=n.current,h=o.current;if(h!==e){const f=a.current,m=Sd(d);e?c("MOUNT"):m==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(h&&f!==m?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,c]),Co(()=>{if(t){let d;const h=t.ownerDocument.defaultView??window,u=m=>{const x=Sd(n.current).includes(m.animationName);if(m.target===t&&x&&(c("ANIMATION_END"),!o.current)){const N=t.style.animationFillMode;t.style.animationFillMode="forwards",d=h.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=N)})}},f=m=>{m.target===t&&(a.current=Sd(n.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",u),t.addEventListener("animationend",u),()=>{h.clearTimeout(d),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",u),t.removeEventListener("animationend",u)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:p.useCallback(d=>{n.current=d?getComputedStyle(d):null,r(d)},[])}}function Sd(e){return(e==null?void 0:e.animationName)||"none"}function F5(e){var n,o;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var U5=ax[" useInsertionEffect ".trim().toString()]||Co;function B5({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[o,a,i]=z5({defaultProp:t,onChange:r}),l=e!==void 0,c=l?e:o;{const h=p.useRef(e!==void 0);p.useEffect(()=>{const u=h.current;u!==l&&console.warn(`${n} is changing from ${u?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=l},[l,n])}const d=p.useCallback(h=>{var u;if(l){const f=V5(h)?h(e):h;f!==e&&((u=i.current)==null||u.call(i,f))}else a(h)},[l,e,a,i]);return[c,d]}function z5({defaultProp:e,onChange:t}){const[r,n]=p.useState(e),o=p.useRef(r),a=p.useRef(t);return U5(()=>{a.current=t},[t]),p.useEffect(()=>{var i;o.current!==r&&((i=a.current)==null||i.call(a,r),o.current=r)},[r,o]),[r,n,a]}function V5(e){return typeof e=="function"}var W5=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),q5="VisuallyHidden",Z1=p.forwardRef((e,t)=>s.jsx(Qr.span,{...e,ref:t,style:{...W5,...e.style}}));Z1.displayName=q5;var H5=Z1,[$h,VI]=Jx("Tooltip",[W1]),lg=W1(),ej="TooltipProvider",K5=700,b0="tooltip.open",[G5,tj]=$h(ej),rj=e=>{const{__scopeTooltip:t,delayDuration:r=K5,skipDelayDuration:n=300,disableHoverableContent:o=!1,children:a}=e,i=p.useRef(!0),l=p.useRef(!1),c=p.useRef(0);return p.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),s.jsx(G5,{scope:t,isOpenDelayedRef:i,delayDuration:r,onOpen:p.useCallback(()=>{window.clearTimeout(c.current),i.current=!1},[]),onClose:p.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>i.current=!0,n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:p.useCallback(d=>{l.current=d},[]),disableHoverableContent:o,children:a})};rj.displayName=ej;var nj="Tooltip",[WI,Lh]=$h(nj),ym="TooltipTrigger",Q5=p.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,o=Lh(ym,r),a=tj(ym,r),i=lg(r),l=p.useRef(null),c=Un(t,l,o.onTriggerChange),d=p.useRef(!1),h=p.useRef(!1),u=p.useCallback(()=>d.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",u),[u]),s.jsx(O5,{asChild:!0,...i,children:s.jsx(Qr.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...n,ref:c,onPointerMove:Wr(e.onPointerMove,f=>{f.pointerType!=="touch"&&!h.current&&!a.isPointerInTransitRef.current&&(o.onTriggerEnter(),h.current=!0)}),onPointerLeave:Wr(e.onPointerLeave,()=>{o.onTriggerLeave(),h.current=!1}),onPointerDown:Wr(e.onPointerDown,()=>{o.open&&o.onClose(),d.current=!0,document.addEventListener("pointerup",u,{once:!0})}),onFocus:Wr(e.onFocus,()=>{d.current||o.onOpen()}),onBlur:Wr(e.onBlur,o.onClose),onClick:Wr(e.onClick,o.onClose)})})});Q5.displayName=ym;var Y5="TooltipPortal",[qI,J5]=$h(Y5,{forceMount:void 0}),Gi="TooltipContent",sj=p.forwardRef((e,t)=>{const r=J5(Gi,e.__scopeTooltip),{forceMount:n=r.forceMount,side:o="top",...a}=e,i=Lh(Gi,e.__scopeTooltip);return s.jsx(Wc,{present:n||i.open,children:i.disableHoverableContent?s.jsx(oj,{side:o,...a,ref:t}):s.jsx(X5,{side:o,...a,ref:t})})}),X5=p.forwardRef((e,t)=>{const r=Lh(Gi,e.__scopeTooltip),n=tj(Gi,e.__scopeTooltip),o=p.useRef(null),a=Un(t,o),[i,l]=p.useState(null),{trigger:c,onClose:d}=r,h=o.current,{onPointerInTransitChange:u}=n,f=p.useCallback(()=>{l(null),u(!1)},[u]),m=p.useCallback((g,x)=>{const N=g.currentTarget,b={x:g.clientX,y:g.clientY},y=nE(b,N.getBoundingClientRect()),v=sE(b,y),k=oE(x.getBoundingClientRect()),S=iE([...v,...k]);l(S),u(!0)},[u]);return p.useEffect(()=>()=>f(),[f]),p.useEffect(()=>{if(c&&h){const g=N=>m(N,h),x=N=>m(N,c);return c.addEventListener("pointerleave",g),h.addEventListener("pointerleave",x),()=>{c.removeEventListener("pointerleave",g),h.removeEventListener("pointerleave",x)}}},[c,h,m,f]),p.useEffect(()=>{if(i){const g=x=>{const N=x.target,b={x:x.clientX,y:x.clientY},y=(c==null?void 0:c.contains(N))||(h==null?void 0:h.contains(N)),v=!aE(b,i);y?f():v&&(f(),d())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[c,h,i,d,f]),s.jsx(oj,{...e,ref:a})}),[Z5,eE]=$h(nj,{isInside:!1}),tE=Z_("TooltipContent"),oj=p.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":o,onEscapeKeyDown:a,onPointerDownOutside:i,...l}=e,c=Lh(Gi,r),d=lg(r),{onClose:h}=c;return p.useEffect(()=>(document.addEventListener(b0,h),()=>document.removeEventListener(b0,h)),[h]),p.useEffect(()=>{if(c.trigger){const u=f=>{const m=f.target;m!=null&&m.contains(c.trigger)&&h()};return window.addEventListener("scroll",u,{capture:!0}),()=>window.removeEventListener("scroll",u,{capture:!0})}},[c.trigger,h]),s.jsx(Zx,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:u=>u.preventDefault(),onDismiss:h,children:s.jsxs(D5,{"data-state":c.stateAttribute,...d,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx(tE,{children:n}),s.jsx(Z5,{scope:r,isInside:!0,children:s.jsx(H5,{id:c.contentId,role:"tooltip",children:o||n})})]})})});sj.displayName=Gi;var aj="TooltipArrow",rE=p.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,o=lg(r);return eE(aj,r).isInside?null:s.jsx(I5,{...o,...n,ref:t})});rE.displayName=aj;function nE(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),o=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(r,n,o,a)){case a:return"left";case o:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function sE(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function oE(e){const{top:t,right:r,bottom:n,left:o}=e;return[{x:o,y:t},{x:r,y:t},{x:r,y:n},{x:o,y:n}]}function aE(e,t){const{x:r,y:n}=e;let o=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const l=t[a],c=t[i],d=l.x,h=l.y,u=c.x,f=c.y;h>n!=f>n&&r<(u-d)*(n-h)/(f-h)+d&&(o=!o)}return o}function iE(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),lE(t)}function lE(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const o=e[n];for(;t.length>=2;){const a=t[t.length-1],i=t[t.length-2];if((a.x-i.x)*(o.y-i.y)>=(a.y-i.y)*(o.x-i.x))t.pop();else break}t.push(o)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const o=e[n];for(;r.length>=2;){const a=r[r.length-1],i=r[r.length-2];if((a.x-i.x)*(o.y-i.y)>=(a.y-i.y)*(o.x-i.x))r.pop();else break}r.push(o)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var cE=rj,ij=sj;function lj(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(r=lj(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function cj(){for(var e,t,r=0,n="",o=arguments.length;r<o;r++)(e=arguments[r])&&(t=lj(e))&&(n&&(n+=" "),n+=t);return n}const cg="-",dE=e=>{const t=hE(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:i=>{const l=i.split(cg);return l[0]===""&&l.length!==1&&l.shift(),dj(l,t)||uE(i)},getConflictingClassGroupIds:(i,l)=>{const c=r[i]||[];return l&&n[i]?[...c,...n[i]]:c}}},dj=(e,t)=>{var i;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),o=n?dj(e.slice(1),n):void 0;if(o)return o;if(t.validators.length===0)return;const a=e.join(cg);return(i=t.validators.find(({validator:l})=>l(a)))==null?void 0:i.classGroupId},y0=/^\[(.+)\]$/,uE=e=>{if(y0.test(e)){const t=y0.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},hE=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return pE(Object.entries(e.classGroups),r).forEach(([a,i])=>{vm(i,n,a,t)}),n},vm=(e,t,r,n)=>{e.forEach(o=>{if(typeof o=="string"){const a=o===""?t:v0(t,o);a.classGroupId=r;return}if(typeof o=="function"){if(fE(o)){vm(o(n),t,r,n);return}t.validators.push({validator:o,classGroupId:r});return}Object.entries(o).forEach(([a,i])=>{vm(i,v0(t,a),r,n)})})},v0=(e,t)=>{let r=e;return t.split(cg).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},fE=e=>e.isThemeGetter,pE=(e,t)=>t?e.map(([r,n])=>{const o=n.map(a=>typeof a=="string"?t+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([i,l])=>[t+i,l])):a);return[r,o]}):e,mE=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const o=(a,i)=>{r.set(a,i),t++,t>e&&(t=0,n=r,r=new Map)};return{get(a){let i=r.get(a);if(i!==void 0)return i;if((i=n.get(a))!==void 0)return o(a,i),i},set(a,i){r.has(a)?r.set(a,i):o(a,i)}}},uj="!",xE=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,o=t[0],a=t.length,i=l=>{const c=[];let d=0,h=0,u;for(let N=0;N<l.length;N++){let b=l[N];if(d===0){if(b===o&&(n||l.slice(N,N+a)===t)){c.push(l.slice(h,N)),h=N+a;continue}if(b==="/"){u=N;continue}}b==="["?d++:b==="]"&&d--}const f=c.length===0?l:l.substring(h),m=f.startsWith(uj),g=m?f.substring(1):f,x=u&&u>h?u-h:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:g,maybePostfixModifierPosition:x}};return r?l=>r({className:l,parseClassName:i}):i},gE=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},bE=e=>({cache:mE(e.cacheSize),parseClassName:xE(e),...dE(e)}),yE=/\s+/,vE=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:o}=t,a=[],i=e.trim().split(yE);let l="";for(let c=i.length-1;c>=0;c-=1){const d=i[c],{modifiers:h,hasImportantModifier:u,baseClassName:f,maybePostfixModifierPosition:m}=r(d);let g=!!m,x=n(g?f.substring(0,m):f);if(!x){if(!g){l=d+(l.length>0?" "+l:l);continue}if(x=n(f),!x){l=d+(l.length>0?" "+l:l);continue}g=!1}const N=gE(h).join(":"),b=u?N+uj:N,y=b+x;if(a.includes(y))continue;a.push(y);const v=o(x,g);for(let k=0;k<v.length;++k){const S=v[k];a.push(b+S)}l=d+(l.length>0?" "+l:l)}return l};function wE(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=hj(t))&&(n&&(n+=" "),n+=r);return n}const hj=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=hj(e[n]))&&(r&&(r+=" "),r+=t);return r};function jE(e,...t){let r,n,o,a=i;function i(c){const d=t.reduce((h,u)=>u(h),e());return r=bE(d),n=r.cache.get,o=r.cache.set,a=l,l(c)}function l(c){const d=n(c);if(d)return d;const h=vE(c,r);return o(c,h),h}return function(){return a(wE.apply(null,arguments))}}const Rt=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},fj=/^\[(?:([a-z-]+):)?(.+)\]$/i,NE=/^\d+\/\d+$/,kE=new Set(["px","full","screen"]),SE=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,_E=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,CE=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,EE=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,PE=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ps=e=>ji(e)||kE.has(e)||NE.test(e),zs=e=>sl(e,"length",$E),ji=e=>!!e&&!Number.isNaN(Number(e)),Vf=e=>sl(e,"number",ji),_l=e=>!!e&&Number.isInteger(Number(e)),RE=e=>e.endsWith("%")&&ji(e.slice(0,-1)),Xe=e=>fj.test(e),Vs=e=>SE.test(e),TE=new Set(["length","size","percentage"]),AE=e=>sl(e,TE,pj),OE=e=>sl(e,"position",pj),DE=new Set(["image","url"]),IE=e=>sl(e,DE,FE),ME=e=>sl(e,"",LE),Cl=()=>!0,sl=(e,t,r)=>{const n=fj.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},$E=e=>_E.test(e)&&!CE.test(e),pj=()=>!1,LE=e=>EE.test(e),FE=e=>PE.test(e),UE=()=>{const e=Rt("colors"),t=Rt("spacing"),r=Rt("blur"),n=Rt("brightness"),o=Rt("borderColor"),a=Rt("borderRadius"),i=Rt("borderSpacing"),l=Rt("borderWidth"),c=Rt("contrast"),d=Rt("grayscale"),h=Rt("hueRotate"),u=Rt("invert"),f=Rt("gap"),m=Rt("gradientColorStops"),g=Rt("gradientColorStopPositions"),x=Rt("inset"),N=Rt("margin"),b=Rt("opacity"),y=Rt("padding"),v=Rt("saturate"),k=Rt("scale"),S=Rt("sepia"),E=Rt("skew"),C=Rt("space"),R=Rt("translate"),F=()=>["auto","contain","none"],T=()=>["auto","hidden","clip","visible","scroll"],V=()=>["auto",Xe,t],Y=()=>[Xe,t],W=()=>["",ps,zs],X=()=>["auto",ji,Xe],ne=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],te=()=>["solid","dashed","dotted","double","none"],ie=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],B=()=>["start","end","center","between","around","evenly","stretch"],$=()=>["","0",Xe],K=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ce=()=>[ji,Xe];return{cacheSize:500,separator:":",theme:{colors:[Cl],spacing:[ps,zs],blur:["none","",Vs,Xe],brightness:ce(),borderColor:[e],borderRadius:["none","","full",Vs,Xe],borderSpacing:Y(),borderWidth:W(),contrast:ce(),grayscale:$(),hueRotate:ce(),invert:$(),gap:Y(),gradientColorStops:[e],gradientColorStopPositions:[RE,zs],inset:V(),margin:V(),opacity:ce(),padding:Y(),saturate:ce(),scale:ce(),sepia:$(),skew:ce(),space:Y(),translate:Y()},classGroups:{aspect:[{aspect:["auto","square","video",Xe]}],container:["container"],columns:[{columns:[Vs]}],"break-after":[{"break-after":K()}],"break-before":[{"break-before":K()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ne(),Xe]}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:F()}],"overscroll-x":[{"overscroll-x":F()}],"overscroll-y":[{"overscroll-y":F()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",_l,Xe]}],basis:[{basis:V()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Xe]}],grow:[{grow:$()}],shrink:[{shrink:$()}],order:[{order:["first","last","none",_l,Xe]}],"grid-cols":[{"grid-cols":[Cl]}],"col-start-end":[{col:["auto",{span:["full",_l,Xe]},Xe]}],"col-start":[{"col-start":X()}],"col-end":[{"col-end":X()}],"grid-rows":[{"grid-rows":[Cl]}],"row-start-end":[{row:["auto",{span:[_l,Xe]},Xe]}],"row-start":[{"row-start":X()}],"row-end":[{"row-end":X()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Xe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Xe]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...B()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...B(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...B(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[N]}],mx:[{mx:[N]}],my:[{my:[N]}],ms:[{ms:[N]}],me:[{me:[N]}],mt:[{mt:[N]}],mr:[{mr:[N]}],mb:[{mb:[N]}],ml:[{ml:[N]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Xe,t]}],"min-w":[{"min-w":[Xe,t,"min","max","fit"]}],"max-w":[{"max-w":[Xe,t,"none","full","min","max","fit","prose",{screen:[Vs]},Vs]}],h:[{h:[Xe,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Xe,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Xe,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Xe,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Vs,zs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Vf]}],"font-family":[{font:[Cl]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Xe]}],"line-clamp":[{"line-clamp":["none",ji,Vf]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ps,Xe]}],"list-image":[{"list-image":["none",Xe]}],"list-style-type":[{list:["none","disc","decimal",Xe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...te(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ps,zs]}],"underline-offset":[{"underline-offset":["auto",ps,Xe]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:Y()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Xe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Xe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ne(),OE]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",AE]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},IE]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...te(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:te()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-s":[{"border-s":[o]}],"border-color-e":[{"border-e":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:["",...te()]}],"outline-offset":[{"outline-offset":[ps,Xe]}],"outline-w":[{outline:[ps,zs]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:W()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[ps,zs]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Vs,ME]}],"shadow-color":[{shadow:[Cl]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...ie(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ie()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Vs,Xe]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[u]}],saturate:[{saturate:[v]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Xe]}],duration:[{duration:ce()}],ease:[{ease:["linear","in","out","in-out",Xe]}],delay:[{delay:ce()}],animate:[{animate:["none","spin","ping","pulse","bounce",Xe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[_l,Xe]}],"translate-x":[{"translate-x":[R]}],"translate-y":[{"translate-y":[R]}],"skew-x":[{"skew-x":[E]}],"skew-y":[{"skew-y":[E]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Xe]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Xe]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":Y()}],"scroll-mx":[{"scroll-mx":Y()}],"scroll-my":[{"scroll-my":Y()}],"scroll-ms":[{"scroll-ms":Y()}],"scroll-me":[{"scroll-me":Y()}],"scroll-mt":[{"scroll-mt":Y()}],"scroll-mr":[{"scroll-mr":Y()}],"scroll-mb":[{"scroll-mb":Y()}],"scroll-ml":[{"scroll-ml":Y()}],"scroll-p":[{"scroll-p":Y()}],"scroll-px":[{"scroll-px":Y()}],"scroll-py":[{"scroll-py":Y()}],"scroll-ps":[{"scroll-ps":Y()}],"scroll-pe":[{"scroll-pe":Y()}],"scroll-pt":[{"scroll-pt":Y()}],"scroll-pr":[{"scroll-pr":Y()}],"scroll-pb":[{"scroll-pb":Y()}],"scroll-pl":[{"scroll-pl":Y()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Xe]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[ps,zs,Vf]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},BE=jE(UE);function U(...e){return BE(cj(e))}const zE=cE,VE=p.forwardRef(({className:e,sideOffset:t=4,...r},n)=>s.jsx(ij,{ref:n,sideOffset:t,className:U("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));VE.displayName=ij.displayName;var ol=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Sa=typeof window>"u"||"Deno"in globalThis;function Dr(){}function WE(e,t){return typeof e=="function"?e(t):e}function wm(e){return typeof e=="number"&&e>=0&&e!==1/0}function mj(e,t){return Math.max(e+(t||0)-Date.now(),0)}function No(e,t){return typeof e=="function"?e(t):e}function mn(e,t){return typeof e=="function"?e(t):e}function w0(e,t){const{type:r="all",exact:n,fetchStatus:o,predicate:a,queryKey:i,stale:l}=e;if(i){if(n){if(t.queryHash!==dg(i,t.options))return!1}else if(!gc(t.queryKey,i))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||o&&o!==t.state.fetchStatus||a&&!a(t))}function j0(e,t){const{exact:r,status:n,predicate:o,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(r){if(_a(t.options.mutationKey)!==_a(a))return!1}else if(!gc(t.options.mutationKey,a))return!1}return!(n&&t.state.status!==n||o&&!o(t))}function dg(e,t){return((t==null?void 0:t.queryKeyHashFn)||_a)(e)}function _a(e){return JSON.stringify(e,(t,r)=>jm(r)?Object.keys(r).sort().reduce((n,o)=>(n[o]=r[o],n),{}):r)}function gc(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>gc(e[r],t[r])):!1}function xj(e,t){if(e===t)return e;const r=N0(e)&&N0(t);if(r||jm(e)&&jm(t)){const n=r?e:Object.keys(e),o=n.length,a=r?t:Object.keys(t),i=a.length,l=r?[]:{},c=new Set(n);let d=0;for(let h=0;h<i;h++){const u=r?h:a[h];(!r&&c.has(u)||r)&&e[u]===void 0&&t[u]===void 0?(l[u]=void 0,d++):(l[u]=xj(e[u],t[u]),l[u]===e[u]&&e[u]!==void 0&&d++)}return o===i&&d===o?e:l}return t}function Qu(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function N0(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function jm(e){if(!k0(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!k0(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function k0(e){return Object.prototype.toString.call(e)==="[object Object]"}function qE(e){return new Promise(t=>{setTimeout(t,e)})}function Nm(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?xj(e,t):t}function HE(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function KE(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var ug=Symbol();function gj(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===ug?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function bj(e,t){return typeof e=="function"?e(...t):!!e}var na,eo,Ci,tv,GE=(tv=class extends ol{constructor(){super();$e(this,na);$e(this,eo);$e(this,Ci);be(this,Ci,t=>{if(!Sa&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){A(this,eo)||this.setEventListener(A(this,Ci))}onUnsubscribe(){var t;this.hasListeners()||((t=A(this,eo))==null||t.call(this),be(this,eo,void 0))}setEventListener(t){var r;be(this,Ci,t),(r=A(this,eo))==null||r.call(this),be(this,eo,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){A(this,na)!==t&&(be(this,na,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof A(this,na)=="boolean"?A(this,na):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},na=new WeakMap,eo=new WeakMap,Ci=new WeakMap,tv),hg=new GE,Ei,to,Pi,rv,QE=(rv=class extends ol{constructor(){super();$e(this,Ei,!0);$e(this,to);$e(this,Pi);be(this,Pi,t=>{if(!Sa&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){A(this,to)||this.setEventListener(A(this,Pi))}onUnsubscribe(){var t;this.hasListeners()||((t=A(this,to))==null||t.call(this),be(this,to,void 0))}setEventListener(t){var r;be(this,Pi,t),(r=A(this,to))==null||r.call(this),be(this,to,t(this.setOnline.bind(this)))}setOnline(t){A(this,Ei)!==t&&(be(this,Ei,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return A(this,Ei)}},Ei=new WeakMap,to=new WeakMap,Pi=new WeakMap,rv),Yu=new QE;function km(){let e,t;const r=new Promise((o,a)=>{e=o,t=a});r.status="pending",r.catch(()=>{});function n(o){Object.assign(r,o),delete r.resolve,delete r.reject}return r.resolve=o=>{n({status:"fulfilled",value:o}),e(o)},r.reject=o=>{n({status:"rejected",reason:o}),t(o)},r}function YE(e){return Math.min(1e3*2**e,3e4)}function yj(e){return(e??"online")==="online"?Yu.isOnline():!0}var vj=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Wf(e){return e instanceof vj}function wj(e){let t=!1,r=0,n=!1,o;const a=km(),i=x=>{var N;n||(f(new vj(x)),(N=e.abort)==null||N.call(e))},l=()=>{t=!0},c=()=>{t=!1},d=()=>hg.isFocused()&&(e.networkMode==="always"||Yu.isOnline())&&e.canRun(),h=()=>yj(e.networkMode)&&e.canRun(),u=x=>{var N;n||(n=!0,(N=e.onSuccess)==null||N.call(e,x),o==null||o(),a.resolve(x))},f=x=>{var N;n||(n=!0,(N=e.onError)==null||N.call(e,x),o==null||o(),a.reject(x))},m=()=>new Promise(x=>{var N;o=b=>{(n||d())&&x(b)},(N=e.onPause)==null||N.call(e)}).then(()=>{var x;o=void 0,n||(x=e.onContinue)==null||x.call(e)}),g=()=>{if(n)return;let x;const N=r===0?e.initialPromise:void 0;try{x=N??e.fn()}catch(b){x=Promise.reject(b)}Promise.resolve(x).then(u).catch(b=>{var E;if(n)return;const y=e.retry??(Sa?0:3),v=e.retryDelay??YE,k=typeof v=="function"?v(r,b):v,S=y===!0||typeof y=="number"&&r<y||typeof y=="function"&&y(r,b);if(t||!S){f(b);return}r++,(E=e.onFail)==null||E.call(e,r,b),qE(k).then(()=>d()?void 0:m()).then(()=>{t?f(b):g()})})};return{promise:a,cancel:i,continue:()=>(o==null||o(),a),cancelRetry:l,continueRetry:c,canStart:h,start:()=>(h()?g():m().then(g),a)}}var JE=e=>setTimeout(e,0);function XE(){let e=[],t=0,r=l=>{l()},n=l=>{l()},o=JE;const a=l=>{t?e.push(l):o(()=>{r(l)})},i=()=>{const l=e;e=[],l.length&&o(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||i()}return c},batchCalls:l=>(...c)=>{a(()=>{l(...c)})},schedule:a,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{o=l}}}var ar=XE(),sa,nv,jj=(nv=class{constructor(){$e(this,sa)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),wm(this.gcTime)&&be(this,sa,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Sa?1/0:5*60*1e3))}clearGcTimeout(){A(this,sa)&&(clearTimeout(A(this,sa)),be(this,sa,void 0))}},sa=new WeakMap,nv),Ri,oa,pn,aa,Cr,Dc,ia,Pn,xs,sv,ZE=(sv=class extends jj{constructor(t){super();$e(this,Pn);$e(this,Ri);$e(this,oa);$e(this,pn);$e(this,aa);$e(this,Cr);$e(this,Dc);$e(this,ia);be(this,ia,!1),be(this,Dc,t.defaultOptions),this.setOptions(t.options),this.observers=[],be(this,aa,t.client),be(this,pn,A(this,aa).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,be(this,Ri,e4(this.options)),this.state=t.state??A(this,Ri),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=A(this,Cr))==null?void 0:t.promise}setOptions(t){this.options={...A(this,Dc),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&A(this,pn).remove(this)}setData(t,r){const n=Nm(this.state.data,t,this.options);return tt(this,Pn,xs).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){tt(this,Pn,xs).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,o;const r=(n=A(this,Cr))==null?void 0:n.promise;return(o=A(this,Cr))==null||o.cancel(t),r?r.then(Dr).catch(Dr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(A(this,Ri))}isActive(){return this.observers.some(t=>mn(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ug||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>No(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!mj(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=A(this,Cr))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=A(this,Cr))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),A(this,pn).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(A(this,Cr)&&(A(this,ia)?A(this,Cr).cancel({revert:!0}):A(this,Cr).cancelRetry()),this.scheduleGc()),A(this,pn).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||tt(this,Pn,xs).call(this,{type:"invalidate"})}fetch(t,r){var d,h,u;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(A(this,Cr))return A(this,Cr).continueRetry(),A(this,Cr).promise}if(t&&this.setOptions(t),!this.options.queryFn){const f=this.observers.find(m=>m.options.queryFn);f&&this.setOptions(f.options)}const n=new AbortController,o=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(be(this,ia,!0),n.signal)})},a=()=>{const f=gj(this.options,r),g=(()=>{const x={client:A(this,aa),queryKey:this.queryKey,meta:this.meta};return o(x),x})();return be(this,ia,!1),this.options.persister?this.options.persister(f,g,this):f(g)},l=(()=>{const f={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:A(this,aa),state:this.state,fetchFn:a};return o(f),f})();(d=this.options.behavior)==null||d.onFetch(l,this),be(this,oa,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&tt(this,Pn,xs).call(this,{type:"fetch",meta:(u=l.fetchOptions)==null?void 0:u.meta});const c=f=>{var m,g,x,N;Wf(f)&&f.silent||tt(this,Pn,xs).call(this,{type:"error",error:f}),Wf(f)||((g=(m=A(this,pn).config).onError)==null||g.call(m,f,this),(N=(x=A(this,pn).config).onSettled)==null||N.call(x,this.state.data,f,this)),this.scheduleGc()};return be(this,Cr,wj({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:n.abort.bind(n),onSuccess:f=>{var m,g,x,N;if(f===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(b){c(b);return}(g=(m=A(this,pn).config).onSuccess)==null||g.call(m,f,this),(N=(x=A(this,pn).config).onSettled)==null||N.call(x,f,this.state.error,this),this.scheduleGc()},onError:c,onFail:(f,m)=>{tt(this,Pn,xs).call(this,{type:"failed",failureCount:f,error:m})},onPause:()=>{tt(this,Pn,xs).call(this,{type:"pause"})},onContinue:()=>{tt(this,Pn,xs).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),A(this,Cr).start()}},Ri=new WeakMap,oa=new WeakMap,pn=new WeakMap,aa=new WeakMap,Cr=new WeakMap,Dc=new WeakMap,ia=new WeakMap,Pn=new WeakSet,xs=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Nj(n.data,this.options),fetchMeta:t.meta??null};case"success":return be(this,oa,void 0),{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const o=t.error;return Wf(o)&&o.revert&&A(this,oa)?{...A(this,oa),fetchStatus:"idle"}:{...n,error:o,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),ar.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),A(this,pn).notify({query:this,type:"updated",action:t})})},sv);function Nj(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:yj(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function e4(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Qn,ov,t4=(ov=class extends ol{constructor(t={}){super();$e(this,Qn);this.config=t,be(this,Qn,new Map)}build(t,r,n){const o=r.queryKey,a=r.queryHash??dg(o,r);let i=this.get(a);return i||(i=new ZE({client:t,queryKey:o,queryHash:a,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(o)}),this.add(i)),i}add(t){A(this,Qn).has(t.queryHash)||(A(this,Qn).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=A(this,Qn).get(t.queryHash);r&&(t.destroy(),r===t&&A(this,Qn).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){ar.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return A(this,Qn).get(t)}getAll(){return[...A(this,Qn).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>w0(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>w0(t,n)):r}notify(t){ar.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){ar.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){ar.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Qn=new WeakMap,ov),Yn,Tr,la,Jn,Hs,av,r4=(av=class extends jj{constructor(t){super();$e(this,Jn);$e(this,Yn);$e(this,Tr);$e(this,la);this.mutationId=t.mutationId,be(this,Tr,t.mutationCache),be(this,Yn,[]),this.state=t.state||kj(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){A(this,Yn).includes(t)||(A(this,Yn).push(t),this.clearGcTimeout(),A(this,Tr).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){be(this,Yn,A(this,Yn).filter(r=>r!==t)),this.scheduleGc(),A(this,Tr).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){A(this,Yn).length||(this.state.status==="pending"?this.scheduleGc():A(this,Tr).remove(this))}continue(){var t;return((t=A(this,la))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var a,i,l,c,d,h,u,f,m,g,x,N,b,y,v,k,S,E,C,R;const r=()=>{tt(this,Jn,Hs).call(this,{type:"continue"})};be(this,la,wj({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(F,T)=>{tt(this,Jn,Hs).call(this,{type:"failed",failureCount:F,error:T})},onPause:()=>{tt(this,Jn,Hs).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>A(this,Tr).canRun(this)}));const n=this.state.status==="pending",o=!A(this,la).canStart();try{if(n)r();else{tt(this,Jn,Hs).call(this,{type:"pending",variables:t,isPaused:o}),await((i=(a=A(this,Tr).config).onMutate)==null?void 0:i.call(a,t,this));const T=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));T!==this.state.context&&tt(this,Jn,Hs).call(this,{type:"pending",context:T,variables:t,isPaused:o})}const F=await A(this,la).start();return await((h=(d=A(this,Tr).config).onSuccess)==null?void 0:h.call(d,F,t,this.state.context,this)),await((f=(u=this.options).onSuccess)==null?void 0:f.call(u,F,t,this.state.context)),await((g=(m=A(this,Tr).config).onSettled)==null?void 0:g.call(m,F,null,this.state.variables,this.state.context,this)),await((N=(x=this.options).onSettled)==null?void 0:N.call(x,F,null,t,this.state.context)),tt(this,Jn,Hs).call(this,{type:"success",data:F}),F}catch(F){try{throw await((y=(b=A(this,Tr).config).onError)==null?void 0:y.call(b,F,t,this.state.context,this)),await((k=(v=this.options).onError)==null?void 0:k.call(v,F,t,this.state.context)),await((E=(S=A(this,Tr).config).onSettled)==null?void 0:E.call(S,void 0,F,this.state.variables,this.state.context,this)),await((R=(C=this.options).onSettled)==null?void 0:R.call(C,void 0,F,t,this.state.context)),F}finally{tt(this,Jn,Hs).call(this,{type:"error",error:F})}}finally{A(this,Tr).runNext(this)}}},Yn=new WeakMap,Tr=new WeakMap,la=new WeakMap,Jn=new WeakSet,Hs=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),ar.batch(()=>{A(this,Yn).forEach(n=>{n.onMutationUpdate(t)}),A(this,Tr).notify({mutation:this,type:"updated",action:t})})},av);function kj(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var vs,Rn,Ic,iv,n4=(iv=class extends ol{constructor(t={}){super();$e(this,vs);$e(this,Rn);$e(this,Ic);this.config=t,be(this,vs,new Set),be(this,Rn,new Map),be(this,Ic,0)}build(t,r,n){const o=new r4({mutationCache:this,mutationId:++od(this,Ic)._,options:t.defaultMutationOptions(r),state:n});return this.add(o),o}add(t){A(this,vs).add(t);const r=_d(t);if(typeof r=="string"){const n=A(this,Rn).get(r);n?n.push(t):A(this,Rn).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(A(this,vs).delete(t)){const r=_d(t);if(typeof r=="string"){const n=A(this,Rn).get(r);if(n)if(n.length>1){const o=n.indexOf(t);o!==-1&&n.splice(o,1)}else n[0]===t&&A(this,Rn).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=_d(t);if(typeof r=="string"){const n=A(this,Rn).get(r),o=n==null?void 0:n.find(a=>a.state.status==="pending");return!o||o===t}else return!0}runNext(t){var n;const r=_d(t);if(typeof r=="string"){const o=(n=A(this,Rn).get(r))==null?void 0:n.find(a=>a!==t&&a.state.isPaused);return(o==null?void 0:o.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ar.batch(()=>{A(this,vs).forEach(t=>{this.notify({type:"removed",mutation:t})}),A(this,vs).clear(),A(this,Rn).clear()})}getAll(){return Array.from(A(this,vs))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>j0(r,n))}findAll(t={}){return this.getAll().filter(r=>j0(t,r))}notify(t){ar.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return ar.batch(()=>Promise.all(t.map(r=>r.continue().catch(Dr))))}},vs=new WeakMap,Rn=new WeakMap,Ic=new WeakMap,iv);function _d(e){var t;return(t=e.options.scope)==null?void 0:t.id}function S0(e){return{onFetch:(t,r)=>{var h,u,f,m,g;const n=t.options,o=(f=(u=(h=t.fetchOptions)==null?void 0:h.meta)==null?void 0:u.fetchMore)==null?void 0:f.direction,a=((m=t.state.data)==null?void 0:m.pages)||[],i=((g=t.state.data)==null?void 0:g.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let x=!1;const N=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(t.signal.aborted?x=!0:t.signal.addEventListener("abort",()=>{x=!0}),t.signal)})},b=gj(t.options,t.fetchOptions),y=async(v,k,S)=>{if(x)return Promise.reject();if(k==null&&v.pages.length)return Promise.resolve(v);const C=(()=>{const V={client:t.client,queryKey:t.queryKey,pageParam:k,direction:S?"backward":"forward",meta:t.options.meta};return N(V),V})(),R=await b(C),{maxPages:F}=t.options,T=S?KE:HE;return{pages:T(v.pages,R,F),pageParams:T(v.pageParams,k,F)}};if(o&&a.length){const v=o==="backward",k=v?s4:_0,S={pages:a,pageParams:i},E=k(n,S);l=await y(S,E,v)}else{const v=e??a.length;do{const k=c===0?i[0]??n.initialPageParam:_0(n,l);if(c>0&&k==null)break;l=await y(l,k),c++}while(c<v)}return l};t.options.persister?t.fetchFn=()=>{var x,N;return(N=(x=t.options).persister)==null?void 0:N.call(x,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=d}}}function _0(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function s4(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var Vt,ro,no,Ti,Ai,so,Oi,Di,lv,o4=(lv=class{constructor(e={}){$e(this,Vt);$e(this,ro);$e(this,no);$e(this,Ti);$e(this,Ai);$e(this,so);$e(this,Oi);$e(this,Di);be(this,Vt,e.queryCache||new t4),be(this,ro,e.mutationCache||new n4),be(this,no,e.defaultOptions||{}),be(this,Ti,new Map),be(this,Ai,new Map),be(this,so,0)}mount(){od(this,so)._++,A(this,so)===1&&(be(this,Oi,hg.subscribe(async e=>{e&&(await this.resumePausedMutations(),A(this,Vt).onFocus())})),be(this,Di,Yu.subscribe(async e=>{e&&(await this.resumePausedMutations(),A(this,Vt).onOnline())})))}unmount(){var e,t;od(this,so)._--,A(this,so)===0&&((e=A(this,Oi))==null||e.call(this),be(this,Oi,void 0),(t=A(this,Di))==null||t.call(this),be(this,Di,void 0))}isFetching(e){return A(this,Vt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return A(this,ro).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=A(this,Vt).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=A(this,Vt).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(No(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return A(this,Vt).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),o=A(this,Vt).get(n.queryHash),a=o==null?void 0:o.state.data,i=WE(t,a);if(i!==void 0)return A(this,Vt).build(this,n).setData(i,{...r,manual:!0})}setQueriesData(e,t,r){return ar.batch(()=>A(this,Vt).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=A(this,Vt).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=A(this,Vt);ar.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=A(this,Vt);return ar.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=ar.batch(()=>A(this,Vt).findAll(e).map(o=>o.cancel(r)));return Promise.all(n).then(Dr).catch(Dr)}invalidateQueries(e,t={}){return ar.batch(()=>(A(this,Vt).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=ar.batch(()=>A(this,Vt).findAll(e).filter(o=>!o.isDisabled()&&!o.isStatic()).map(o=>{let a=o.fetch(void 0,r);return r.throwOnError||(a=a.catch(Dr)),o.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(n).then(Dr)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=A(this,Vt).build(this,t);return r.isStaleByTime(No(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Dr).catch(Dr)}fetchInfiniteQuery(e){return e.behavior=S0(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Dr).catch(Dr)}ensureInfiniteQueryData(e){return e.behavior=S0(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Yu.isOnline()?A(this,ro).resumePausedMutations():Promise.resolve()}getQueryCache(){return A(this,Vt)}getMutationCache(){return A(this,ro)}getDefaultOptions(){return A(this,no)}setDefaultOptions(e){be(this,no,e)}setQueryDefaults(e,t){A(this,Ti).set(_a(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...A(this,Ti).values()],r={};return t.forEach(n=>{gc(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){A(this,Ai).set(_a(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...A(this,Ai).values()],r={};return t.forEach(n=>{gc(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...A(this,no).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=dg(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===ug&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...A(this,no).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){A(this,Vt).clear(),A(this,ro).clear()}},Vt=new WeakMap,ro=new WeakMap,no=new WeakMap,Ti=new WeakMap,Ai=new WeakMap,so=new WeakMap,Oi=new WeakMap,Di=new WeakMap,lv),Ur,ut,Mc,Ar,ca,Ii,oo,ao,$c,Mi,$i,da,ua,io,Li,Nt,$l,Sm,_m,Cm,Em,Pm,Rm,Tm,Sj,cv,a4=(cv=class extends ol{constructor(t,r){super();$e(this,Nt);$e(this,Ur);$e(this,ut);$e(this,Mc);$e(this,Ar);$e(this,ca);$e(this,Ii);$e(this,oo);$e(this,ao);$e(this,$c);$e(this,Mi);$e(this,$i);$e(this,da);$e(this,ua);$e(this,io);$e(this,Li,new Set);this.options=r,be(this,Ur,t),be(this,ao,null),be(this,oo,km()),this.options.experimental_prefetchInRender||A(this,oo).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(A(this,ut).addObserver(this),C0(A(this,ut),this.options)?tt(this,Nt,$l).call(this):this.updateResult(),tt(this,Nt,Em).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Am(A(this,ut),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Am(A(this,ut),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,tt(this,Nt,Pm).call(this),tt(this,Nt,Rm).call(this),A(this,ut).removeObserver(this)}setOptions(t){const r=this.options,n=A(this,ut);if(this.options=A(this,Ur).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof mn(this.options.enabled,A(this,ut))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");tt(this,Nt,Tm).call(this),A(this,ut).setOptions(this.options),r._defaulted&&!Qu(this.options,r)&&A(this,Ur).getQueryCache().notify({type:"observerOptionsUpdated",query:A(this,ut),observer:this});const o=this.hasListeners();o&&E0(A(this,ut),n,this.options,r)&&tt(this,Nt,$l).call(this),this.updateResult(),o&&(A(this,ut)!==n||mn(this.options.enabled,A(this,ut))!==mn(r.enabled,A(this,ut))||No(this.options.staleTime,A(this,ut))!==No(r.staleTime,A(this,ut)))&&tt(this,Nt,Sm).call(this);const a=tt(this,Nt,_m).call(this);o&&(A(this,ut)!==n||mn(this.options.enabled,A(this,ut))!==mn(r.enabled,A(this,ut))||a!==A(this,io))&&tt(this,Nt,Cm).call(this,a)}getOptimisticResult(t){const r=A(this,Ur).getQueryCache().build(A(this,Ur),t),n=this.createResult(r,t);return l4(this,n)&&(be(this,Ar,n),be(this,Ii,this.options),be(this,ca,A(this,ut).state)),n}getCurrentResult(){return A(this,Ar)}trackResult(t,r){return new Proxy(t,{get:(n,o)=>(this.trackProp(o),r==null||r(o),Reflect.get(n,o))})}trackProp(t){A(this,Li).add(t)}getCurrentQuery(){return A(this,ut)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=A(this,Ur).defaultQueryOptions(t),n=A(this,Ur).getQueryCache().build(A(this,Ur),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return tt(this,Nt,$l).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),A(this,Ar)))}createResult(t,r){var F;const n=A(this,ut),o=this.options,a=A(this,Ar),i=A(this,ca),l=A(this,Ii),d=t!==n?t.state:A(this,Mc),{state:h}=t;let u={...h},f=!1,m;if(r._optimisticResults){const T=this.hasListeners(),V=!T&&C0(t,r),Y=T&&E0(t,n,r,o);(V||Y)&&(u={...u,...Nj(h.data,t.options)}),r._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:g,errorUpdatedAt:x,status:N}=u;m=u.data;let b=!1;if(r.placeholderData!==void 0&&m===void 0&&N==="pending"){let T;a!=null&&a.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData)?(T=a.data,b=!0):T=typeof r.placeholderData=="function"?r.placeholderData((F=A(this,$i))==null?void 0:F.state.data,A(this,$i)):r.placeholderData,T!==void 0&&(N="success",m=Nm(a==null?void 0:a.data,T,r),f=!0)}if(r.select&&m!==void 0&&!b)if(a&&m===(i==null?void 0:i.data)&&r.select===A(this,$c))m=A(this,Mi);else try{be(this,$c,r.select),m=r.select(m),m=Nm(a==null?void 0:a.data,m,r),be(this,Mi,m),be(this,ao,null)}catch(T){be(this,ao,T)}A(this,ao)&&(g=A(this,ao),m=A(this,Mi),x=Date.now(),N="error");const y=u.fetchStatus==="fetching",v=N==="pending",k=N==="error",S=v&&y,E=m!==void 0,R={status:N,fetchStatus:u.fetchStatus,isPending:v,isSuccess:N==="success",isError:k,isInitialLoading:S,isLoading:S,data:m,dataUpdatedAt:u.dataUpdatedAt,error:g,errorUpdatedAt:x,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>d.dataUpdateCount||u.errorUpdateCount>d.errorUpdateCount,isFetching:y,isRefetching:y&&!v,isLoadingError:k&&!E,isPaused:u.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:k&&E,isStale:fg(t,r),refetch:this.refetch,promise:A(this,oo),isEnabled:mn(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const T=W=>{R.status==="error"?W.reject(R.error):R.data!==void 0&&W.resolve(R.data)},V=()=>{const W=be(this,oo,R.promise=km());T(W)},Y=A(this,oo);switch(Y.status){case"pending":t.queryHash===n.queryHash&&T(Y);break;case"fulfilled":(R.status==="error"||R.data!==Y.value)&&V();break;case"rejected":(R.status!=="error"||R.error!==Y.reason)&&V();break}}return R}updateResult(){const t=A(this,Ar),r=this.createResult(A(this,ut),this.options);if(be(this,ca,A(this,ut).state),be(this,Ii,this.options),A(this,ca).data!==void 0&&be(this,$i,A(this,ut)),Qu(r,t))return;be(this,Ar,r);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:o}=this.options,a=typeof o=="function"?o():o;if(a==="all"||!a&&!A(this,Li).size)return!0;const i=new Set(a??A(this,Li));return this.options.throwOnError&&i.add("error"),Object.keys(A(this,Ar)).some(l=>{const c=l;return A(this,Ar)[c]!==t[c]&&i.has(c)})};tt(this,Nt,Sj).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&tt(this,Nt,Em).call(this)}},Ur=new WeakMap,ut=new WeakMap,Mc=new WeakMap,Ar=new WeakMap,ca=new WeakMap,Ii=new WeakMap,oo=new WeakMap,ao=new WeakMap,$c=new WeakMap,Mi=new WeakMap,$i=new WeakMap,da=new WeakMap,ua=new WeakMap,io=new WeakMap,Li=new WeakMap,Nt=new WeakSet,$l=function(t){tt(this,Nt,Tm).call(this);let r=A(this,ut).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(Dr)),r},Sm=function(){tt(this,Nt,Pm).call(this);const t=No(this.options.staleTime,A(this,ut));if(Sa||A(this,Ar).isStale||!wm(t))return;const n=mj(A(this,Ar).dataUpdatedAt,t)+1;be(this,da,setTimeout(()=>{A(this,Ar).isStale||this.updateResult()},n))},_m=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(A(this,ut)):this.options.refetchInterval)??!1},Cm=function(t){tt(this,Nt,Rm).call(this),be(this,io,t),!(Sa||mn(this.options.enabled,A(this,ut))===!1||!wm(A(this,io))||A(this,io)===0)&&be(this,ua,setInterval(()=>{(this.options.refetchIntervalInBackground||hg.isFocused())&&tt(this,Nt,$l).call(this)},A(this,io)))},Em=function(){tt(this,Nt,Sm).call(this),tt(this,Nt,Cm).call(this,tt(this,Nt,_m).call(this))},Pm=function(){A(this,da)&&(clearTimeout(A(this,da)),be(this,da,void 0))},Rm=function(){A(this,ua)&&(clearInterval(A(this,ua)),be(this,ua,void 0))},Tm=function(){const t=A(this,Ur).getQueryCache().build(A(this,Ur),this.options);if(t===A(this,ut))return;const r=A(this,ut);be(this,ut,t),be(this,Mc,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},Sj=function(t){ar.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(A(this,Ar))}),A(this,Ur).getQueryCache().notify({query:A(this,ut),type:"observerResultsUpdated"})})},cv);function i4(e,t){return mn(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function C0(e,t){return i4(e,t)||e.state.data!==void 0&&Am(e,t,t.refetchOnMount)}function Am(e,t,r){if(mn(t.enabled,e)!==!1&&No(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&fg(e,t)}return!1}function E0(e,t,r,n){return(e!==t||mn(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&fg(e,r)}function fg(e,t){return mn(t.enabled,e)!==!1&&e.isStaleByTime(No(t.staleTime,e))}function l4(e,t){return!Qu(e.getCurrentResult(),t)}var lo,co,Br,ws,_s,du,Om,dv,c4=(dv=class extends ol{constructor(r,n){super();$e(this,_s);$e(this,lo);$e(this,co);$e(this,Br);$e(this,ws);be(this,lo,r),this.setOptions(n),this.bindMethods(),tt(this,_s,du).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var o;const n=this.options;this.options=A(this,lo).defaultMutationOptions(r),Qu(this.options,n)||A(this,lo).getMutationCache().notify({type:"observerOptionsUpdated",mutation:A(this,Br),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&_a(n.mutationKey)!==_a(this.options.mutationKey)?this.reset():((o=A(this,Br))==null?void 0:o.state.status)==="pending"&&A(this,Br).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=A(this,Br))==null||r.removeObserver(this)}onMutationUpdate(r){tt(this,_s,du).call(this),tt(this,_s,Om).call(this,r)}getCurrentResult(){return A(this,co)}reset(){var r;(r=A(this,Br))==null||r.removeObserver(this),be(this,Br,void 0),tt(this,_s,du).call(this),tt(this,_s,Om).call(this)}mutate(r,n){var o;return be(this,ws,n),(o=A(this,Br))==null||o.removeObserver(this),be(this,Br,A(this,lo).getMutationCache().build(A(this,lo),this.options)),A(this,Br).addObserver(this),A(this,Br).execute(r)}},lo=new WeakMap,co=new WeakMap,Br=new WeakMap,ws=new WeakMap,_s=new WeakSet,du=function(){var n;const r=((n=A(this,Br))==null?void 0:n.state)??kj();be(this,co,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},Om=function(r){ar.batch(()=>{var n,o,a,i,l,c,d,h;if(A(this,ws)&&this.hasListeners()){const u=A(this,co).variables,f=A(this,co).context;(r==null?void 0:r.type)==="success"?((o=(n=A(this,ws)).onSuccess)==null||o.call(n,r.data,u,f),(i=(a=A(this,ws)).onSettled)==null||i.call(a,r.data,null,u,f)):(r==null?void 0:r.type)==="error"&&((c=(l=A(this,ws)).onError)==null||c.call(l,r.error,u,f),(h=(d=A(this,ws)).onSettled)==null||h.call(d,void 0,r.error,u,f))}this.listeners.forEach(u=>{u(A(this,co))})})},dv),_j=p.createContext(void 0),pr=e=>{const t=p.useContext(_j);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},d4=({client:e,children:t})=>(p.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(_j.Provider,{value:e,children:t})),Cj=p.createContext(!1),u4=()=>p.useContext(Cj);Cj.Provider;function h4(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var f4=p.createContext(h4()),p4=()=>p.useContext(f4),m4=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},x4=e=>{p.useEffect(()=>{e.clearReset()},[e])},g4=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:o})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(o&&e.data===void 0||bj(r,[e.error,n])),b4=e=>{if(e.suspense){const t=n=>n==="static"?n:Math.max(n??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...n)=>t(r(...n)):t(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},y4=(e,t)=>e.isLoading&&e.isFetching&&!t,v4=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,P0=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function w4(e,t,r){var u,f,m,g,x;const n=u4(),o=p4(),a=pr(),i=a.defaultQueryOptions(e);(f=(u=a.getDefaultOptions().queries)==null?void 0:u._experimental_beforeQuery)==null||f.call(u,i),i._optimisticResults=n?"isRestoring":"optimistic",b4(i),m4(i,o),x4(o);const l=!a.getQueryCache().get(i.queryHash),[c]=p.useState(()=>new t(a,i)),d=c.getOptimisticResult(i),h=!n&&e.subscribed!==!1;if(p.useSyncExternalStore(p.useCallback(N=>{const b=h?c.subscribe(ar.batchCalls(N)):Dr;return c.updateResult(),b},[c,h]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),p.useEffect(()=>{c.setOptions(i)},[i,c]),v4(i,d))throw P0(i,c,o);if(g4({result:d,errorResetBoundary:o,throwOnError:i.throwOnError,query:a.getQueryCache().get(i.queryHash),suspense:i.suspense}))throw d.error;if((g=(m=a.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||g.call(m,i,d),i.experimental_prefetchInRender&&!Sa&&y4(d,n)){const N=l?P0(i,c,o):(x=a.getQueryCache().get(i.queryHash))==null?void 0:x.promise;N==null||N.catch(Dr).finally(()=>{c.updateResult()})}return i.notifyOnChangeProps?d:c.trackResult(d)}function fr(e,t){return w4(e,a4)}function wr(e,t){const r=pr(),[n]=p.useState(()=>new c4(r,e));p.useEffect(()=>{n.setOptions(e)},[n,e]);const o=p.useSyncExternalStore(p.useCallback(i=>n.subscribe(ar.batchCalls(i)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),a=p.useCallback((i,l)=>{n.mutate(i,l).catch(Dr)},[n]);if(o.error&&bj(n.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:a,mutateAsync:o.mutate}}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bc(){return bc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bc.apply(this,arguments)}var fo;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(fo||(fo={}));const R0="popstate";function j4(e){e===void 0&&(e={});function t(n,o){let{pathname:a,search:i,hash:l}=n.location;return Dm("",{pathname:a,search:i,hash:l},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function r(n,o){return typeof o=="string"?o:Pj(o)}return k4(t,r,null,e)}function Xt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ej(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function N4(){return Math.random().toString(36).substr(2,8)}function T0(e,t){return{usr:e.state,key:e.key,idx:t}}function Dm(e,t,r,n){return r===void 0&&(r=null),bc({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?al(t):t,{state:r,key:t&&t.key||n||N4()})}function Pj(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function al(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function k4(e,t,r,n){n===void 0&&(n={});let{window:o=document.defaultView,v5Compat:a=!1}=n,i=o.history,l=fo.Pop,c=null,d=h();d==null&&(d=0,i.replaceState(bc({},i.state,{idx:d}),""));function h(){return(i.state||{idx:null}).idx}function u(){l=fo.Pop;let N=h(),b=N==null?null:N-d;d=N,c&&c({action:l,location:x.location,delta:b})}function f(N,b){l=fo.Push;let y=Dm(x.location,N,b);d=h()+1;let v=T0(y,d),k=x.createHref(y);try{i.pushState(v,"",k)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;o.location.assign(k)}a&&c&&c({action:l,location:x.location,delta:1})}function m(N,b){l=fo.Replace;let y=Dm(x.location,N,b);d=h();let v=T0(y,d),k=x.createHref(y);i.replaceState(v,"",k),a&&c&&c({action:l,location:x.location,delta:0})}function g(N){let b=o.location.origin!=="null"?o.location.origin:o.location.href,y=typeof N=="string"?N:Pj(N);return y=y.replace(/ $/,"%20"),Xt(b,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,b)}let x={get action(){return l},get location(){return e(o,i)},listen(N){if(c)throw new Error("A history only accepts one active listener");return o.addEventListener(R0,u),c=N,()=>{o.removeEventListener(R0,u),c=null}},createHref(N){return t(o,N)},createURL:g,encodeLocation(N){let b=g(N);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:f,replace:m,go(N){return i.go(N)}};return x}var A0;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(A0||(A0={}));function S4(e,t,r){return r===void 0&&(r="/"),_4(e,t,r,!1)}function _4(e,t,r,n){let o=typeof t=="string"?al(t):t,a=Aj(o.pathname||"/",r);if(a==null)return null;let i=Rj(e);C4(i);let l=null;for(let c=0;l==null&&c<i.length;++c){let d=L4(a);l=M4(i[c],d,n)}return l}function Rj(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let o=(a,i,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:i,route:a};c.relativePath.startsWith("/")&&(Xt(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=pa([n,c.relativePath]),h=r.concat(c);a.children&&a.children.length>0&&(Xt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Rj(a.children,t,h,d)),!(a.path==null&&!a.index)&&t.push({path:d,score:D4(d,a.index),routesMeta:h})};return e.forEach((a,i)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))o(a,i);else for(let c of Tj(a.path))o(a,i,c)}),t}function Tj(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,o=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return o?[a,""]:[a];let i=Tj(n.join("/")),l=[];return l.push(...i.map(c=>c===""?a:[a,c].join("/"))),o&&l.push(...i),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function C4(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:I4(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const E4=/^:[\w-]+$/,P4=3,R4=2,T4=1,A4=10,O4=-2,O0=e=>e==="*";function D4(e,t){let r=e.split("/"),n=r.length;return r.some(O0)&&(n+=O4),t&&(n+=R4),r.filter(o=>!O0(o)).reduce((o,a)=>o+(E4.test(a)?P4:a===""?T4:A4),n)}function I4(e,t){return e.length===t.length&&e.slice(0,-1).every((n,o)=>n===t[o])?e[e.length-1]-t[t.length-1]:0}function M4(e,t,r){let{routesMeta:n}=e,o={},a="/",i=[];for(let l=0;l<n.length;++l){let c=n[l],d=l===n.length-1,h=a==="/"?t:t.slice(a.length)||"/",u=D0({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),f=c.route;if(!u&&d&&r&&!n[n.length-1].route.index&&(u=D0({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!u)return null;Object.assign(o,u.params),i.push({params:o,pathname:pa([a,u.pathname]),pathnameBase:z4(pa([a,u.pathnameBase])),route:f}),u.pathnameBase!=="/"&&(a=pa([a,u.pathnameBase]))}return i}function D0(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=$4(e.path,e.caseSensitive,e.end),o=t.match(r);if(!o)return null;let a=o[0],i=a.replace(/(.)\/+$/,"$1"),l=o.slice(1);return{params:n.reduce((d,h,u)=>{let{paramName:f,isOptional:m}=h;if(f==="*"){let x=l[u]||"";i=a.slice(0,a.length-x.length).replace(/(.)\/+$/,"$1")}const g=l[u];return m&&!g?d[f]=void 0:d[f]=(g||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:i,pattern:e}}function $4(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Ej(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),n]}function L4(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ej(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Aj(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function F4(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:o=""}=typeof e=="string"?al(e):e;return{pathname:r?r.startsWith("/")?r:U4(r,t):t,search:V4(n),hash:W4(o)}}function U4(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?r.length>1&&r.pop():o!=="."&&r.push(o)}),r.length>1?r.join("/"):"/"}function qf(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function B4(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Oj(e,t){let r=B4(e);return t?r.map((n,o)=>o===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Dj(e,t,r,n){n===void 0&&(n=!1);let o;typeof e=="string"?o=al(e):(o=bc({},e),Xt(!o.pathname||!o.pathname.includes("?"),qf("?","pathname","search",o)),Xt(!o.pathname||!o.pathname.includes("#"),qf("#","pathname","hash",o)),Xt(!o.search||!o.search.includes("#"),qf("#","search","hash",o)));let a=e===""||o.pathname==="",i=a?"/":o.pathname,l;if(i==null)l=r;else{let u=t.length-1;if(!n&&i.startsWith("..")){let f=i.split("/");for(;f[0]==="..";)f.shift(),u-=1;o.pathname=f.join("/")}l=u>=0?t[u]:"/"}let c=F4(o,l),d=i&&i!=="/"&&i.endsWith("/"),h=(a||i===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}const pa=e=>e.join("/").replace(/\/\/+/g,"/"),z4=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),V4=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,W4=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function q4(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Ij=["post","put","patch","delete"];new Set(Ij);const H4=["get",...Ij];new Set(H4);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yc(){return yc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yc.apply(this,arguments)}const pg=p.createContext(null),K4=p.createContext(null),qc=p.createContext(null),Fh=p.createContext(null),Mo=p.createContext({outlet:null,matches:[],isDataRoute:!1}),Mj=p.createContext(null);function Hc(){return p.useContext(Fh)!=null}function Aa(){return Hc()||Xt(!1),p.useContext(Fh).location}function $j(e){p.useContext(qc).static||p.useLayoutEffect(e)}function Yr(){let{isDataRoute:e}=p.useContext(Mo);return e?lP():G4()}function G4(){Hc()||Xt(!1);let e=p.useContext(pg),{basename:t,future:r,navigator:n}=p.useContext(qc),{matches:o}=p.useContext(Mo),{pathname:a}=Aa(),i=JSON.stringify(Oj(o,r.v7_relativeSplatPath)),l=p.useRef(!1);return $j(()=>{l.current=!0}),p.useCallback(function(d,h){if(h===void 0&&(h={}),!l.current)return;if(typeof d=="number"){n.go(d);return}let u=Dj(d,JSON.parse(i),a,h.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:pa([t,u.pathname])),(h.replace?n.replace:n.push)(u,h.state,h)},[t,n,i,a,e])}const Q4=p.createContext(null);function Y4(e){let t=p.useContext(Mo).outlet;return t&&p.createElement(Q4.Provider,{value:e},t)}function J4(e,t){return X4(e,t)}function X4(e,t,r,n){Hc()||Xt(!1);let{navigator:o}=p.useContext(qc),{matches:a}=p.useContext(Mo),i=a[a.length-1],l=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let d=Aa(),h;if(t){var u;let N=typeof t=="string"?al(t):t;c==="/"||(u=N.pathname)!=null&&u.startsWith(c)||Xt(!1),h=N}else h=d;let f=h.pathname||"/",m=f;if(c!=="/"){let N=c.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(N.length).join("/")}let g=S4(e,{pathname:m}),x=nP(g&&g.map(N=>Object.assign({},N,{params:Object.assign({},l,N.params),pathname:pa([c,o.encodeLocation?o.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?c:pa([c,o.encodeLocation?o.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),a,r,n);return t&&x?p.createElement(Fh.Provider,{value:{location:yc({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:fo.Pop}},x):x}function Z4(){let e=iP(),t=q4(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},t),r?p.createElement("pre",{style:o},r):null,null)}const eP=p.createElement(Z4,null);class tP extends p.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?p.createElement(Mo.Provider,{value:this.props.routeContext},p.createElement(Mj.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function rP(e){let{routeContext:t,match:r,children:n}=e,o=p.useContext(pg);return o&&o.static&&o.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=r.route.id),p.createElement(Mo.Provider,{value:t},n)}function nP(e,t,r,n){var o;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var a;if(!r)return null;if(r.errors)e=r.matches;else if((a=n)!=null&&a.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,l=(o=r)==null?void 0:o.errors;if(l!=null){let h=i.findIndex(u=>u.route.id&&(l==null?void 0:l[u.route.id])!==void 0);h>=0||Xt(!1),i=i.slice(0,Math.min(i.length,h+1))}let c=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let h=0;h<i.length;h++){let u=i[h];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(d=h),u.route.id){let{loaderData:f,errors:m}=r,g=u.route.loader&&f[u.route.id]===void 0&&(!m||m[u.route.id]===void 0);if(u.route.lazy||g){c=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((h,u,f)=>{let m,g=!1,x=null,N=null;r&&(m=l&&u.route.id?l[u.route.id]:void 0,x=u.route.errorElement||eP,c&&(d<0&&f===0?(g=!0,N=null):d===f&&(g=!0,N=u.route.hydrateFallbackElement||null)));let b=t.concat(i.slice(0,f+1)),y=()=>{let v;return m?v=x:g?v=N:u.route.Component?v=p.createElement(u.route.Component,null):u.route.element?v=u.route.element:v=h,p.createElement(rP,{match:u,routeContext:{outlet:h,matches:b,isDataRoute:r!=null},children:v})};return r&&(u.route.ErrorBoundary||u.route.errorElement||f===0)?p.createElement(tP,{location:r.location,revalidation:r.revalidation,component:x,error:m,children:y(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):y()},null)}var Lj=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Lj||{}),Ju=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Ju||{});function sP(e){let t=p.useContext(pg);return t||Xt(!1),t}function oP(e){let t=p.useContext(K4);return t||Xt(!1),t}function aP(e){let t=p.useContext(Mo);return t||Xt(!1),t}function Fj(e){let t=aP(),r=t.matches[t.matches.length-1];return r.route.id||Xt(!1),r.route.id}function iP(){var e;let t=p.useContext(Mj),r=oP(Ju.UseRouteError),n=Fj(Ju.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function lP(){let{router:e}=sP(Lj.UseNavigateStable),t=Fj(Ju.UseNavigateStable),r=p.useRef(!1);return $j(()=>{r.current=!0}),p.useCallback(function(o,a){a===void 0&&(a={}),r.current&&(typeof o=="number"?e.navigate(o):e.navigate(o,yc({fromRouteId:t},a)))},[e,t])}function cP(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function uu(e){let{to:t,replace:r,state:n,relative:o}=e;Hc()||Xt(!1);let{future:a,static:i}=p.useContext(qc),{matches:l}=p.useContext(Mo),{pathname:c}=Aa(),d=Yr(),h=Dj(t,Oj(l,a.v7_relativeSplatPath),c,o==="path"),u=JSON.stringify(h);return p.useEffect(()=>d(JSON.parse(u),{replace:r,state:n,relative:o}),[d,u,o,r,n]),null}function dP(e){return Y4(e.context)}function _r(e){Xt(!1)}function uP(e){let{basename:t="/",children:r=null,location:n,navigationType:o=fo.Pop,navigator:a,static:i=!1,future:l}=e;Hc()&&Xt(!1);let c=t.replace(/^\/*/,"/"),d=p.useMemo(()=>({basename:c,navigator:a,static:i,future:yc({v7_relativeSplatPath:!1},l)}),[c,l,a,i]);typeof n=="string"&&(n=al(n));let{pathname:h="/",search:u="",hash:f="",state:m=null,key:g="default"}=n,x=p.useMemo(()=>{let N=Aj(h,c);return N==null?null:{location:{pathname:N,search:u,hash:f,state:m,key:g},navigationType:o}},[c,h,u,f,m,g,o]);return x==null?null:p.createElement(qc.Provider,{value:d},p.createElement(Fh.Provider,{children:r,value:x}))}function hP(e){let{children:t,location:r}=e;return J4(Im(t),r)}new Promise(()=>{});function Im(e,t){t===void 0&&(t=[]);let r=[];return p.Children.forEach(e,(n,o)=>{if(!p.isValidElement(n))return;let a=[...t,o];if(n.type===p.Fragment){r.push.apply(r,Im(n.props.children,a));return}n.type!==_r&&Xt(!1),!n.props.index||!n.props.children||Xt(!1);let i={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=Im(n.props.children,a)),r.push(i)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mm(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(o=>[r,o]):[[r,n]])},[]))}function fP(e,t){let r=Mm(e);return t&&t.forEach((n,o)=>{r.has(o)||t.getAll(o).forEach(a=>{r.append(o,a)})}),r}const pP="6";try{window.__reactRouterVersion=pP}catch{}const mP="startTransition",I0=ax[mP];function xP(e){let{basename:t,children:r,future:n,window:o}=e,a=p.useRef();a.current==null&&(a.current=j4({window:o,v5Compat:!0}));let i=a.current,[l,c]=p.useState({action:i.action,location:i.location}),{v7_startTransition:d}=n||{},h=p.useCallback(u=>{d&&I0?I0(()=>c(u)):c(u)},[c,d]);return p.useLayoutEffect(()=>i.listen(h),[i,h]),p.useEffect(()=>cP(n),[n]),p.createElement(uP,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:i,future:n})}var M0;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(M0||(M0={}));var $0;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})($0||($0={}));function gP(e){let t=p.useRef(Mm(e)),r=p.useRef(!1),n=Aa(),o=p.useMemo(()=>fP(n.search,r.current?null:t.current),[n.search]),a=Yr(),i=p.useCallback((l,c)=>{const d=Mm(typeof l=="function"?l(o):l);r.current=!0,a("?"+d,c)},[a,o]);return[o,i]}var Zn=function(){return Zn=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Zn.apply(this,arguments)};function il(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function bP(e,t,r,n){function o(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function l(h){try{d(n.next(h))}catch(u){i(u)}}function c(h){try{d(n.throw(h))}catch(u){i(u)}}function d(h){h.done?a(h.value):o(h.value).then(l,c)}d((n=n.apply(e,t||[])).next())})}function yP(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,a;n<o;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}const vP=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class mg extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class wP extends mg{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class L0 extends mg{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class F0 extends mg{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var $m;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})($m||($m={}));class jP{constructor(t,{headers:r={},customFetch:n,region:o=$m.Any}={}){this.url=t,this.headers=r,this.region=o,this.fetch=vP(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return bP(this,arguments,void 0,function*(r,n={}){var o;let a,i;try{const{headers:l,method:c,body:d,signal:h,timeout:u}=n;let f={},{region:m}=n;m||(m=this.region);const g=new URL(`${this.url}/${r}`);m&&m!=="any"&&(f["x-region"]=m,g.searchParams.set("forceFunctionRegion",m));let x;d&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",x=d):typeof d=="string"?(f["Content-Type"]="text/plain",x=d):typeof FormData<"u"&&d instanceof FormData?x=d:(f["Content-Type"]="application/json",x=JSON.stringify(d)):d&&typeof d!="string"&&!(typeof Blob<"u"&&d instanceof Blob)&&!(d instanceof ArrayBuffer)&&!(typeof FormData<"u"&&d instanceof FormData)?x=JSON.stringify(d):x=d;let N=h;u&&(i=new AbortController,a=setTimeout(()=>i.abort(),u),h?(N=i.signal,h.addEventListener("abort",()=>i.abort())):N=i.signal);const b=yield this.fetch(g.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),l),body:x,signal:N}).catch(S=>{throw new wP(S)}),y=b.headers.get("x-relay-error");if(y&&y==="true")throw new L0(b);if(!b.ok)throw new F0(b);let v=((o=b.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),k;return v==="application/json"?k=yield b.json():v==="application/octet-stream"||v==="application/pdf"?k=yield b.blob():v==="text/event-stream"?k=b:v==="multipart/form-data"?k=yield b.formData():k=yield b.text(),{data:k,error:null,response:b}}catch(l){return{data:null,error:l,response:l instanceof F0||l instanceof L0?l.context:void 0}}finally{a&&clearTimeout(a)}})}}var NP=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},kP=class{constructor(e){var t,r,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,this.urlLengthLimit=(n=e.urlLengthLimit)!==null&&n!==void 0?n:8e3,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let o=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{let i=null,l=null,c=null,d=a.status,h=a.statusText;if(a.ok){var u,f;if(r.method!=="HEAD"){var m;const b=await a.text();b===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((m=r.headers.get("Accept"))===null||m===void 0)&&m.includes("application/vnd.pgrst.plan+text"))?l=b:l=JSON.parse(b))}const x=(u=r.headers.get("Prefer"))===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),N=(f=a.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");x&&N&&N.length>1&&(c=parseInt(N[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(l)&&(l.length>1?(i={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,c=null,d=406,h="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var g;const x=await a.text();try{i=JSON.parse(x),Array.isArray(i)&&a.status===404&&(l=[],i=null,d=200,h="OK")}catch{a.status===404&&x===""?(d=204,h="No Content"):i={message:x}}if(i&&r.isMaybeSingle&&(!(i==null||(g=i.details)===null||g===void 0)&&g.includes("0 rows"))&&(i=null,d=200,h="OK"),i&&r.shouldThrowOnError)throw new NP(i)}return{error:i,data:l,count:c,status:d,statusText:h}});return this.shouldThrowOnError||(o=o.catch(a=>{var i;let l="",c="",d="";const h=a==null?void 0:a.cause;if(h){var u,f,m,g;const b=(u=h==null?void 0:h.message)!==null&&u!==void 0?u:"",y=(f=h==null?void 0:h.code)!==null&&f!==void 0?f:"";l=`${(m=a==null?void 0:a.name)!==null&&m!==void 0?m:"FetchError"}: ${a==null?void 0:a.message}`,l+=`

Caused by: ${(g=h==null?void 0:h.name)!==null&&g!==void 0?g:"Error"}: ${b}`,y&&(l+=` (${y})`),h!=null&&h.stack&&(l+=`
${h.stack}`)}else{var x;l=(x=a==null?void 0:a.stack)!==null&&x!==void 0?x:""}const N=this.url.toString().length;return(a==null?void 0:a.name)==="AbortError"||(a==null?void 0:a.code)==="ABORT_ERR"?(d="",c="Request was aborted (timeout or manual cancellation)",N>this.urlLengthLimit&&(c+=`. Note: Your request URL is ${N} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((h==null?void 0:h.name)==="HeadersOverflowError"||(h==null?void 0:h.code)==="UND_ERR_HEADERS_OVERFLOW")&&(d="",c="HTTP headers exceeded server limits (typically 16KB)",N>this.urlLengthLimit&&(c+=`. Your request URL is ${N} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(i=a==null?void 0:a.name)!==null&&i!==void 0?i:"FetchError"}: ${a==null?void 0:a.message}`,details:l,hint:c,code:d},data:null,count:null,status:0,statusText:""}})),o.then(e,t)}returns(){return this}overrideTypes(){return this}},SP=class extends kP{select(e){let t=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:o=n}={}){const a=o?`${o}.order`:"order",i=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${i?`${i},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const o=typeof n>"u"?"offset":`${n}.offset`,a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(o,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:o=!1,format:a="text"}={}){var i;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,o?"wal":null].filter(Boolean).join("|"),c=(i=this.headers.get("Accept"))!==null&&i!==void 0?i:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${c}"; options=${l};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const U0=new RegExp("[,()]");var Ja=class extends SP{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&U0.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&U0.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let o="";n==="plain"?o="pl":n==="phrase"?o="ph":n==="websearch"&&(o="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${o}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},_P=class{constructor(e,{headers:t={},schema:r,fetch:n,urlLengthLimit:o=8e3}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n,this.urlLengthLimit=o}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:r=!1,count:n}=t??{},o=r?"HEAD":"GET";let a=!1;const i=(e??"*").split("").map(d=>/\s/.test(d)&&!a?"":(d==='"'&&(a=!a),d)).join(""),{url:l,headers:c}=this.cloneRequestState();return l.searchParams.set("select",i),n&&c.append("Prefer",`count=${n}`),new Ja({method:o,url:l,headers:c,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(e,{count:t,defaultToNull:r=!0}={}){var n;const o="POST",{url:a,headers:i}=this.cloneRequestState();if(t&&i.append("Prefer",`count=${t}`),r||i.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(l.length>0){const c=[...new Set(l)].map(d=>`"${d}"`);a.searchParams.set("columns",c.join(","))}}return new Ja({method:o,url:a,headers:i,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:o=!0}={}){var a;const i="POST",{url:l,headers:c}=this.cloneRequestState();if(c.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&l.searchParams.set("on_conflict",t),n&&c.append("Prefer",`count=${n}`),o||c.append("Prefer","missing=default"),Array.isArray(e)){const d=e.reduce((h,u)=>h.concat(Object.keys(u)),[]);if(d.length>0){const h=[...new Set(d)].map(u=>`"${u}"`);l.searchParams.set("columns",h.join(","))}}return new Ja({method:i,url:l,headers:c,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch,urlLengthLimit:this.urlLengthLimit})}update(e,{count:t}={}){var r;const n="PATCH",{url:o,headers:a}=this.cloneRequestState();return t&&a.append("Prefer",`count=${t}`),new Ja({method:n,url:o,headers:a,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:e}={}){var t;const r="DELETE",{url:n,headers:o}=this.cloneRequestState();return e&&o.append("Prefer",`count=${e}`),new Ja({method:r,url:n,headers:o,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch,urlLengthLimit:this.urlLengthLimit})}};function vc(e){"@babel/helpers - typeof";return vc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vc(e)}function CP(e,t){if(vc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(vc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EP(e){var t=CP(e,"string");return vc(t)=="symbol"?t:t+""}function PP(e,t,r){return(t=EP(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Cd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?B0(Object(r),!0).forEach(function(n){PP(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B0(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var RP=class Uj{constructor(t,{headers:r={},schema:n,fetch:o,timeout:a,urlLengthLimit:i=8e3}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.urlLengthLimit=i;const l=o??globalThis.fetch;a!==void 0&&a>0?this.fetch=(c,d)=>{const h=new AbortController,u=setTimeout(()=>h.abort(),a),f=d==null?void 0:d.signal;if(f){if(f.aborted)return clearTimeout(u),l(c,d);const m=()=>{clearTimeout(u),h.abort()};return f.addEventListener("abort",m,{once:!0}),l(c,Cd(Cd({},d),{},{signal:h.signal})).finally(()=>{clearTimeout(u),f.removeEventListener("abort",m)})}return l(c,Cd(Cd({},d),{},{signal:h.signal})).finally(()=>clearTimeout(u))}:this.fetch=l}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new _P(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(t){return new Uj(this.url,{headers:this.headers,schema:t,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(t,r={},{head:n=!1,get:o=!1,count:a}={}){var i;let l;const c=new URL(`${this.url}/rpc/${t}`);let d;const h=m=>m!==null&&typeof m=="object"&&(!Array.isArray(m)||m.some(h)),u=n&&Object.values(r).some(h);u?(l="POST",d=r):n||o?(l=n?"HEAD":"GET",Object.entries(r).filter(([m,g])=>g!==void 0).map(([m,g])=>[m,Array.isArray(g)?`{${g.join(",")}}`:`${g}`]).forEach(([m,g])=>{c.searchParams.append(m,g)})):(l="POST",d=r);const f=new Headers(this.headers);return u?f.set("Prefer",a?`count=${a},return=minimal`:"return=minimal"):a&&f.set("Prefer",`count=${a}`),new Ja({method:l,url:c,headers:f,schema:this.schemaName,body:d,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch,urlLengthLimit:this.urlLengthLimit})}};class TP{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const n=r.versions;if(n&&n.node){const o=n.node,a=parseInt(o.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const AP="2.97.0",OP=`realtime-js/${AP}`,DP="1.0.0",Bj="2.0.0",z0=Bj,Lm=1e4,IP=1e3,MP=100;var Ys;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ys||(Ys={}));var rr;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(rr||(rr={}));var An;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(An||(An={}));var Fm;(function(e){e.websocket="websocket"})(Fm||(Fm={}));var Jo;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Jo||(Jo={}));class $P{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const o=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,o)}_encodeJsonUserBroadcastPush(t){var r,n;const o=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},i=new TextEncoder().encode(JSON.stringify(o)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,i)}_encodeUserBroadcastPush(t,r,n){var o,a;const i=t.topic,l=(o=t.ref)!==null&&o!==void 0?o:"",c=(a=t.join_ref)!==null&&a!==void 0?a:"",d=t.payload.event,h=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},u=Object.keys(h).length===0?"":JSON.stringify(h);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(i.length>255)throw new Error(`topic length ${i.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`userEvent length ${d.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`metadata length ${u.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+i.length+d.length+u.length,m=new ArrayBuffer(this.HEADER_LENGTH+f);let g=new DataView(m),x=0;g.setUint8(x++,this.KINDS.userBroadcastPush),g.setUint8(x++,c.length),g.setUint8(x++,l.length),g.setUint8(x++,i.length),g.setUint8(x++,d.length),g.setUint8(x++,u.length),g.setUint8(x++,r),Array.from(c,b=>g.setUint8(x++,b.charCodeAt(0))),Array.from(l,b=>g.setUint8(x++,b.charCodeAt(0))),Array.from(i,b=>g.setUint8(x++,b.charCodeAt(0))),Array.from(d,b=>g.setUint8(x++,b.charCodeAt(0))),Array.from(u,b=>g.setUint8(x++,b.charCodeAt(0)));var N=new Uint8Array(m.byteLength+n.byteLength);return N.set(new Uint8Array(m),0),N.set(new Uint8Array(n),m.byteLength),N.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[o,a,i,l,c]=n;return r({join_ref:o,ref:a,topic:i,event:l,payload:c})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),o=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,o)}}_decodeUserBroadcast(t,r,n){const o=r.getUint8(1),a=r.getUint8(2),i=r.getUint8(3),l=r.getUint8(4);let c=this.HEADER_LENGTH+4;const d=n.decode(t.slice(c,c+o));c=c+o;const h=n.decode(t.slice(c,c+a));c=c+a;const u=n.decode(t.slice(c,c+i));c=c+i;const f=t.slice(c,t.byteLength),m=l===this.JSON_ENCODING?JSON.parse(n.decode(f)):f,g={type:this.BROADCAST_EVENT,event:h,payload:m};return i>0&&(g.meta=JSON.parse(u)),{join_ref:null,ref:null,topic:d,event:this.BROADCAST_EVENT,payload:g}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class zj{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Et;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Et||(Et={}));const V0=(e,t,r={})=>{var n;const o=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((a,i)=>(a[i]=LP(i,e,t,o),a),{}):{}},LP=(e,t,r,n)=>{const o=t.find(l=>l.name===e),a=o==null?void 0:o.type,i=r[e];return a&&!n.includes(a)?Vj(a,i):Um(i)},Vj=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return zP(t,r)}switch(e){case Et.bool:return FP(t);case Et.float4:case Et.float8:case Et.int2:case Et.int4:case Et.int8:case Et.numeric:case Et.oid:return UP(t);case Et.json:case Et.jsonb:return BP(t);case Et.timestamp:return VP(t);case Et.abstime:case Et.date:case Et.daterange:case Et.int4range:case Et.int8range:case Et.money:case Et.reltime:case Et.text:case Et.time:case Et.timestamptz:case Et.timetz:case Et.tsrange:case Et.tstzrange:return Um(t);default:return Um(t)}},Um=e=>e,FP=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},UP=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},BP=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},zP=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let a;const i=e.slice(1,r);try{a=JSON.parse("["+i+"]")}catch{a=i?i.split(","):[]}return a.map(l=>Vj(t,l))}return e},VP=e=>typeof e=="string"?e.replace(" ","T"):e,Wj=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Hf{constructor(t,r,n={},o=Lm){this.channel=t,this.event=r,this.payload=n,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var W0;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(W0||(W0={}));class Gl{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},o=>{const{onJoin:a,onLeave:i,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Gl.syncState(this.state,o,a,i),this.pendingDiffs.forEach(c=>{this.state=Gl.syncDiff(this.state,c,a,i)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},o=>{const{onJoin:a,onLeave:i,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=Gl.syncDiff(this.state,o,a,i),l())}),this.onJoin((o,a,i)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:a,newPresences:i})}),this.onLeave((o,a,i)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:a,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,o){const a=this.cloneDeep(t),i=this.transformState(r),l={},c={};return this.map(a,(d,h)=>{i[d]||(c[d]=h)}),this.map(i,(d,h)=>{const u=a[d];if(u){const f=h.map(N=>N.presence_ref),m=u.map(N=>N.presence_ref),g=h.filter(N=>m.indexOf(N.presence_ref)<0),x=u.filter(N=>f.indexOf(N.presence_ref)<0);g.length>0&&(l[d]=g),x.length>0&&(c[d]=x)}else l[d]=h}),this.syncDiff(a,{joins:l,leaves:c},n,o)}static syncDiff(t,r,n,o){const{joins:a,leaves:i}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),o||(o=()=>{}),this.map(a,(l,c)=>{var d;const h=(d=t[l])!==null&&d!==void 0?d:[];if(t[l]=this.cloneDeep(c),h.length>0){const u=t[l].map(m=>m.presence_ref),f=h.filter(m=>u.indexOf(m.presence_ref)<0);t[l].unshift(...f)}n(l,h,c)}),this.map(i,(l,c)=>{let d=t[l];if(!d)return;const h=c.map(u=>u.presence_ref);d=d.filter(u=>h.indexOf(u.presence_ref)<0),t[l]=d,o(l,d,c),d.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const o=t[n];return"metas"in o?r[n]=o.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=o,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var q0;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(q0||(q0={}));var Ql;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Ql||(Ql={}));var bs;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(bs||(bs={}));class fi{constructor(t,r={config:{}},n){var o,a;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=rr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Hf(this,An.join,this.params,this.timeout),this.rejoinTimer=new zj(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=rr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=rr.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=rr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=rr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=rr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(An.reply,{},(i,l)=>{this._trigger(this._replyEventName(l),i)}),this.presence=new Gl(this),this.broadcastEndpointURL=Wj(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,o,a;if(this.socket.isConnected()||this.socket.connect(),this.state==rr.closed){const{config:{broadcast:i,presence:l,private:c}}=this.params,d=(o=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(m=>m.filter))!==null&&o!==void 0?o:[],h=!!this.bindings[Ql.PRESENCE]&&this.bindings[Ql.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,u={},f={broadcast:i,presence:Object.assign(Object.assign({},l),{enabled:h}),postgres_changes:d,private:c};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(bs.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(bs.CLOSED)),this.updateJoinPayload(Object.assign({config:f},u)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:m})=>{var g;if(this.socket._isManualToken()||this.socket.setAuth(),m===void 0){t==null||t(bs.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,N=(g=x==null?void 0:x.length)!==null&&g!==void 0?g:0,b=[];for(let y=0;y<N;y++){const v=x[y],{filter:{event:k,schema:S,table:E,filter:C}}=v,R=m&&m[y];if(R&&R.event===k&&fi.isFilterValueEqual(R.schema,S)&&fi.isFilterValueEqual(R.table,E)&&fi.isFilterValueEqual(R.filter,C))b.push(Object.assign(Object.assign({},v),{id:R.id}));else{this.unsubscribe(),this.state=rr.errored,t==null||t(bs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,t&&t(bs.SUBSCRIBED);return}}).receive("error",m=>{this.state=rr.errored,t==null||t(bs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(bs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===rr.joined&&t===Ql.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var o;if(r==null)return Promise.reject("Payload is required for httpSend()");const a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const i={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,i,(o=n.timeout)!==null&&o!==void 0?o:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const d=await l.json();c=d.error||d.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var n,o;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:i}=t,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:i,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((o=d.body)===null||o===void 0?void 0:o.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var i,l,c;const d=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(i=this.params)===null||i===void 0?void 0:i.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),d.receive("ok",()=>a("ok")),d.receive("error",()=>a("error")),d.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=rr.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(An.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(o=>{n=new Hf(this,An.leave,{},t),n.receive("ok",()=>{r(),o("ok")}).receive("timeout",()=>{r(),o("timed out")}).receive("error",()=>{o("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=rr.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const o=new AbortController,a=setTimeout(()=>o.abort(),n),i=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:o.signal}));return clearTimeout(a),i}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Hf(this,t,r,n);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>MP){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var o,a;const i=t.toLocaleLowerCase(),{close:l,error:c,leave:d,join:h}=An;if(n&&[l,c,d,h].indexOf(i)>=0&&n!==this._joinRef())return;let f=this._onMessage(i,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(m=>{var g,x,N;return((g=m.filter)===null||g===void 0?void 0:g.event)==="*"||((N=(x=m.filter)===null||x===void 0?void 0:x.event)===null||N===void 0?void 0:N.toLocaleLowerCase())===i}).map(m=>m.callback(f,n)):(a=this.bindings[i])===null||a===void 0||a.filter(m=>{var g,x,N,b,y,v;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in m){const k=m.id,S=(g=m.filter)===null||g===void 0?void 0:g.event;return k&&((x=r.ids)===null||x===void 0?void 0:x.includes(k))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((N=r.data)===null||N===void 0?void 0:N.type.toLocaleLowerCase()))}else{const k=(y=(b=m==null?void 0:m.filter)===null||b===void 0?void 0:b.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return k==="*"||k===((v=r==null?void 0:r.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===i}).map(m=>{if(typeof f=="object"&&"ids"in f){const g=f.data,{schema:x,table:N,commit_timestamp:b,type:y,errors:v}=g;f=Object.assign(Object.assign({},{schema:x,table:N,commit_timestamp:b,eventType:y,new:{},old:{},errors:v}),this._getPayloadRecords(g))}m.callback(f,n)})}_isClosed(){return this.state===rr.closed}_isJoined(){return this.state===rr.joined}_isJoining(){return this.state===rr.joining}_isLeaving(){return this.state===rr.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const o=t.toLocaleLowerCase(),a={type:o,filter:r,callback:n};return this.bindings[o]?this.bindings[o].push(a):this.bindings[o]=[a],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(o=>{var a;return!(((a=o.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&fi.isEqual(o.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(An.close,{},t)}_onError(t){this._on(An.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=rr.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=V0(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=V0(t.columns,t.old_record)),r}}const Kf=()=>{},Ed={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},WP=[1e3,2e3,5e3,1e4],qP=1e4,HP=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class KP{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Lm,this.transport=null,this.heartbeatIntervalMs=Ed.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Kf,this.ref=0,this.reconnectTimer=null,this.vsn=z0,this.logger=Kf,this.conn=null,this.sendBuffer=[],this.serializer=new $P,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=o=>o?(...a)=>o(...a):(...a)=>fetch(...a),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Fm.websocket}`,this.httpEndpoint=Wj(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=TP.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Ys.connecting:return Jo.Connecting;case Ys.open:return Jo.Open;case Ys.closing:return Jo.Closing;default:return Jo.Closed}}isConnected(){return this.connectionState()===Jo.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,o=this.getChannels().find(a=>a.topic===n);if(o)return o;{const a=new fi(`realtime:${t}`,r,this);return this.channels.push(a),a}}push(t){const{topic:r,event:n,payload:o,ref:a}=t,i=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${a})`,o),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(IP,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Ed.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const d=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",d)}catch(h){this.log("error","error in heartbeat callback",h)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:o,payload:a,ref:i}=r,l=i?`(${i})`:"",c=a.status||"";this.log("receive",`${c} ${n} ${o} ${l}`.trim(),a),this.channels.filter(d=>d._isMember(n)).forEach(d=>d._trigger(o,a,i)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Ys.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ys.open||this.conn.readyState===Ys.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(r){this.log("error","error in heartbeat callback",r)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(An.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",o=new URLSearchParams(r);return`${t}${n}${o}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([HP],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(o){this.log("error","Error fetching access token from callback",o),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(o=>{const a={access_token:r,version:OP};r&&o.updateJoinPayload(a),o.joinedOnce&&o._isJoined()&&o._push(An.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(o){this.log("error",`error in ${t} callback`,o)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new zj(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ed.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,o,a,i,l,c,d,h,u,f,m;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:Lm,this.heartbeatIntervalMs=(o=t==null?void 0:t.heartbeatIntervalMs)!==null&&o!==void 0?o:Ed.HEARTBEAT_INTERVAL,this.worker=(a=t==null?void 0:t.worker)!==null&&a!==void 0?a:!1,this.accessToken=(i=t==null?void 0:t.accessToken)!==null&&i!==void 0?i:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:Kf,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:z0,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=t==null?void 0:t.reconnectAfterMs)!==null&&d!==void 0?d:g=>WP[g-1]||qP,this.vsn){case DP:this.encode=(h=t==null?void 0:t.encode)!==null&&h!==void 0?h:(g,x)=>x(JSON.stringify(g)),this.decode=(u=t==null?void 0:t.decode)!==null&&u!==void 0?u:(g,x)=>x(JSON.parse(g));break;case Bj:this.encode=(f=t==null?void 0:t.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(m=t==null?void 0:t.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var wc=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function GP(e,t,r){const n=new URL(t,e);if(r)for(const[o,a]of Object.entries(r))a!==void 0&&n.searchParams.set(o,a);return n.toString()}async function QP(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function YP(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:o,body:a,headers:i}){const l=GP(e.baseUrl,n,o),c=await QP(e.auth),d=await t(l,{method:r,headers:{...a?{"Content-Type":"application/json"}:{},...c,...i},body:a?JSON.stringify(a):void 0}),h=await d.text(),u=(d.headers.get("content-type")||"").includes("application/json"),f=u&&h?JSON.parse(h):h;if(!d.ok){const m=u?f:void 0,g=m==null?void 0:m.error;throw new wc((g==null?void 0:g.message)??`Request failed with status ${d.status}`,{status:d.status,icebergType:g==null?void 0:g.type,icebergCode:g==null?void 0:g.code,details:m})}return{status:d.status,headers:d.headers,data:f}}}}function Pd(e){return e.join("")}var JP=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:Pd(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Pd(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Pd(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Pd(e.namespace)}`}),!0}catch(t){if(t instanceof wc&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof wc&&r.status===409)return;throw r}}};function Fa(e){return e.join("")}var XP=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Fa(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Fa(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Fa(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Fa(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Fa(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Fa(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof wc&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof wc&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},ZP=class{constructor(e){var n;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=YP({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(n=e.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new JP(this.client,t),this.tableOps=new XP(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},Uh=class extends Error{constructor(e,t="storage",r,n){super(e),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=n}};function Bh(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var Rd=class extends Uh{constructor(e,t,r,n="storage"){super(e,n,t,r),this.name=n==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},qj=class extends Uh{constructor(e,t,r="storage"){super(e,r),this.name=r==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const e3=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),t3=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Bm=e=>{if(Array.isArray(e))return e.map(r=>Bm(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const o=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[o]=Bm(n)}),t},r3=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function jc(e){"@babel/helpers - typeof";return jc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jc(e)}function n3(e,t){if(jc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(jc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function s3(e){var t=n3(e,"string");return jc(t)=="symbol"?t:t+""}function o3(e,t,r){return(t=s3(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function H0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Be(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?H0(Object(r),!0).forEach(function(n){o3(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H0(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const K0=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},a3=async(e,t,r,n)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const o=e,a=o.status||500;if(typeof o.json=="function")o.json().then(i=>{const l=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||a+"";t(new Rd(K0(i),a,l,n))}).catch(()=>{if(n==="vectors"){const i=a+"";t(new Rd(o.statusText||`HTTP ${a} error`,a,i,n))}else{const i=a+"";t(new Rd(o.statusText||`HTTP ${a} error`,a,i,n))}});else{const i=a+"";t(new Rd(o.statusText||`HTTP ${a} error`,a,i,n))}}else t(new qj(K0(e),e,n))},i3=(e,t,r,n)=>{const o={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||e==="HEAD"||!n?Be(Be({},o),r):(t3(n)?(o.headers=Be({"Content-Type":"application/json"},t==null?void 0:t.headers),o.body=JSON.stringify(n)):o.body=n,t!=null&&t.duplex&&(o.duplex=t.duplex),Be(Be({},o),r))};async function El(e,t,r,n,o,a,i){return new Promise((l,c)=>{e(r,i3(t,n,o,a)).then(d=>{if(!d.ok)throw d;if(n!=null&&n.noResolveJson)return d;if(i==="vectors"){const h=d.headers.get("content-type");if(d.headers.get("content-length")==="0"||d.status===204)return{};if(!h||!h.includes("application/json"))return{}}return d.json()}).then(d=>l(d)).catch(d=>a3(d,c,n,i))})}function Hj(e="storage"){return{get:async(t,r,n,o)=>El(t,"GET",r,n,o,void 0,e),post:async(t,r,n,o,a)=>El(t,"POST",r,o,a,n,e),put:async(t,r,n,o,a)=>El(t,"PUT",r,o,a,n,e),head:async(t,r,n,o)=>El(t,"HEAD",r,Be(Be({},n),{},{noResolveJson:!0}),o,void 0,e),remove:async(t,r,n,o,a)=>El(t,"DELETE",r,o,a,n,e)}}const l3=Hj("storage"),{get:Nc,post:En,put:zm,head:c3,remove:xg}=l3,nn=Hj("vectors");var ll=class{constructor(e,t={},r,n="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=e3(r),this.namespace=n}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Be(Be({},this.headers),{},{[e]:t}),this}async handleOperation(e){var t=this;try{return{data:await e(),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Bh(r))return{data:null,error:r};throw r}}},d3=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Bh(t))return{data:null,error:t};throw t}}};let Kj;Kj=Symbol.toStringTag;var u3=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[Kj]="BlobDownloadBuilder",this.promise=null}asStream(){return new d3(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Bh(t))return{data:null,error:t};throw t}}};const h3={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},G0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var f3=class extends ll{constructor(e,t={},r,n){super(e,t,n,"storage"),this.bucketId=r}async uploadOrUpdate(e,t,r,n){var o=this;return o.handleOperation(async()=>{let a;const i=Be(Be({},G0),n);let l=Be(Be({},o.headers),e==="POST"&&{"x-upsert":String(i.upsert)});const c=i.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",i.cacheControl),c&&a.append("metadata",o.encodeMetadata(c)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.has("cacheControl")||a.append("cacheControl",i.cacheControl),c&&!a.has("metadata")&&a.append("metadata",o.encodeMetadata(c))):(a=r,l["cache-control"]=`max-age=${i.cacheControl}`,l["content-type"]=i.contentType,c&&(l["x-metadata"]=o.toBase64(o.encodeMetadata(c))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!i.duplex&&(i.duplex="half")),n!=null&&n.headers&&(l=Be(Be({},l),n.headers));const d=o._removeEmptyFolders(t),h=o._getFinalPath(d),u=await(e=="PUT"?zm:En)(o.fetch,`${o.url}/object/${h}`,a,Be({headers:l},i!=null&&i.duplex?{duplex:i.duplex}:{}));return{path:d,id:u.Id,fullPath:u.Key}})}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,n){var o=this;const a=o._removeEmptyFolders(e),i=o._getFinalPath(a),l=new URL(o.url+`/object/upload/sign/${i}`);return l.searchParams.set("token",t),o.handleOperation(async()=>{let c;const d=Be({upsert:G0.upsert},n),h=Be(Be({},o.headers),{"x-upsert":String(d.upsert)});return typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",d.cacheControl)):(c=r,h["cache-control"]=`max-age=${d.cacheControl}`,h["content-type"]=d.contentType),{path:a,fullPath:(await zm(o.fetch,l.toString(),c,{headers:h})).Key}})}async createSignedUploadUrl(e,t){var r=this;return r.handleOperation(async()=>{let n=r._getFinalPath(e);const o=Be({},r.headers);t!=null&&t.upsert&&(o["x-upsert"]="true");const a=await En(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:o}),i=new URL(r.url+a.url),l=i.searchParams.get("token");if(!l)throw new Uh("No token returned by API");return{signedUrl:i.toString(),path:e,token:l}})}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var n=this;return n.handleOperation(async()=>await En(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers}))}async copy(e,t,r){var n=this;return n.handleOperation(async()=>({path:(await En(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers})).Key}))}async createSignedUrl(e,t,r){var n=this;return n.handleOperation(async()=>{let o=n._getFinalPath(e),a=await En(n.fetch,`${n.url}/object/sign/${o}`,Be({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:n.headers});const i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{signedUrl:encodeURI(`${n.url}${a.signedURL}${i}`)}})}async createSignedUrls(e,t,r){var n=this;return n.handleOperation(async()=>{const o=await En(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:t,paths:e},{headers:n.headers}),a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return o.map(i=>Be(Be({},i),{},{signedUrl:i.signedURL?encodeURI(`${n.url}${i.signedURL}${a}`):null}))})}download(e,t,r){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=o?`?${o}`:"",i=this._getFinalPath(e),l=()=>Nc(this.fetch,`${this.url}/${n}/${i}${a}`,{headers:this.headers,noResolveJson:!0},r);return new u3(l,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);return t.handleOperation(async()=>Bm(await Nc(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})))}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await c3(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Bh(n)&&n instanceof qj){const o=n.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:n}}throw n}}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],o=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";o!==""&&n.push(o);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});i!==""&&n.push(i);let l=n.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${l}`)}}}async remove(e){var t=this;return t.handleOperation(async()=>await xg(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}))}async list(e,t,r){var n=this;return n.handleOperation(async()=>{const o=Be(Be(Be({},h3),t),{},{prefix:e||""});return await En(n.fetch,`${n.url}/object/list/${n.bucketId}`,o,{headers:n.headers},r)})}async listV2(e,t){var r=this;return r.handleOperation(async()=>{const n=Be({},e);return await En(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const p3="2.97.0",Kc={"X-Client-Info":`storage-js/${p3}`};var m3=class extends ll{constructor(e,t={},r,n){const o=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase."));const a=o.href.replace(/\/$/,""),i=Be(Be({},Kc),t);super(a,i,r,"storage")}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const r=t.listBucketOptionsToQueryString(e);return await Nc(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await Nc(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}))}async createBucket(e,t={public:!1}){var r=this;return r.handleOperation(async()=>await En(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async updateBucket(e,t){var r=this;return r.handleOperation(async()=>await zm(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await En(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await xg(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},x3=class extends ll{constructor(e,t={},r){const n=e.replace(/\/$/,""),o=Be(Be({},Kc),t);super(n,o,r,"storage")}async createBucket(e){var t=this;return t.handleOperation(async()=>await En(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),o=n?`${t.url}/bucket?${n}`:`${t.url}/bucket`;return await Nc(t.fetch,o,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await xg(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}from(e){var t=this;if(!r3(e))throw new Uh("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new ZP({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(o,a){const i=o[a];return typeof i!="function"?i:async(...l)=>{try{return{data:await i.apply(o,l),error:null}}catch(c){if(n)throw c;return{data:null,error:c}}}}})}},g3=class extends ll{constructor(e,t={},r){const n=e.replace(/\/$/,""),o=Be(Be({},Kc),{},{"Content-Type":"application/json"},t);super(n,o,r,"vectors")}async createIndex(e){var t=this;return t.handleOperation(async()=>await nn.post(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{})}async getIndex(e,t){var r=this;return r.handleOperation(async()=>await nn.post(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await nn.post(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}))}async deleteIndex(e,t){var r=this;return r.handleOperation(async()=>await nn.post(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{})}},b3=class extends ll{constructor(e,t={},r){const n=e.replace(/\/$/,""),o=Be(Be({},Kc),{},{"Content-Type":"application/json"},t);super(n,o,r,"vectors")}async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await nn.post(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await nn.post(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}))}async listVectors(e){var t=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return t.handleOperation(async()=>await nn.post(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await nn.post(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await nn.post(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{})}},y3=class extends ll{constructor(e,t={},r){const n=e.replace(/\/$/,""),o=Be(Be({},Kc),{},{"Content-Type":"application/json"},t);super(n,o,r,"vectors")}async createBucket(e){var t=this;return t.handleOperation(async()=>await nn.post(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await nn.post(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}))}async listBuckets(e={}){var t=this;return t.handleOperation(async()=>await nn.post(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await nn.post(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}},v3=class extends y3{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new w3(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},w3=class extends g3{constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,Be(Be({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,Be(Be({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new j3(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},j3=class extends b3{constructor(e,t,r,n,o){super(e,t,o),this.vectorBucketName=r,this.indexName=n}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,Be(Be({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,Be(Be({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,Be(Be({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,Be(Be({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,Be(Be({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},N3=class extends m3{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new f3(this.url,this.headers,e,this.fetch)}get vectors(){return new v3(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new x3(this.url+"/iceberg",this.headers,this.fetch)}};const Gj="2.97.0",Xa=30*1e3,Vm=3,Gf=Vm*Xa,k3="http://localhost:9999",S3="supabase.auth.token",_3={"X-Client-Info":`gotrue-js/${Gj}`},Wm="X-Supabase-Api-Version",Qj={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},C3=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,E3=10*60*1e3;class kc extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Re(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class P3 extends kc{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function R3(e){return Re(e)&&e.name==="AuthApiError"}class Xo extends kc{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Ds extends kc{constructor(t,r,n,o){super(t,n,o),this.name=r,this.status=n}}class en extends Ds{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Qf(e){return Re(e)&&e.name==="AuthSessionMissingError"}class Ua extends Ds{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Td extends Ds{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Ad extends Ds{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function T3(e){return Re(e)&&e.name==="AuthImplicitGrantRedirectError"}class Q0 extends Ds{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class A3 extends Ds{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class qm extends Ds{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Yf(e){return Re(e)&&e.name==="AuthRetryableFetchError"}class Y0 extends Ds{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Hm extends Ds{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Xu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),J0=` 	
\r=`.split(""),O3=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<J0.length;t+=1)e[J0[t].charCodeAt(0)]=-2;for(let t=0;t<Xu.length;t+=1)e[Xu[t].charCodeAt(0)]=t;return e})();function X0(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Xu[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Xu[n]),t.queuedBits-=6}}function Yj(e,t,r){const n=O3[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Z0(e){const t=[],r=i=>{t.push(String.fromCodePoint(i))},n={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},a=i=>{M3(i,n,r)};for(let i=0;i<e.length;i+=1)Yj(e.charCodeAt(i),o,a);return t.join("")}function D3(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function I3(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const o=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|o)+65536,r+=1}D3(n,t)}}function M3(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Ni(e){const t=[],r={queue:0,queuedBits:0},n=o=>{t.push(o)};for(let o=0;o<e.length;o+=1)Yj(e.charCodeAt(o),r,n);return new Uint8Array(t)}function $3(e){const t=[];return I3(e,r=>t.push(r)),new Uint8Array(t)}function ra(e){const t=[],r={queue:0,queuedBits:0},n=o=>{t.push(o)};return e.forEach(o=>X0(o,r,n)),X0(null,r,n),t.join("")}function L3(e){return Math.round(Date.now()/1e3)+e}function F3(){return Symbol("auth-callback")}const gr=()=>typeof window<"u"&&typeof document<"u",Vo={tested:!1,writable:!1},Jj=()=>{if(!gr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Vo.tested)return Vo.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Vo.tested=!0,Vo.writable=!0}catch{Vo.tested=!0,Vo.writable=!1}return Vo.writable};function U3(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((o,a)=>{t[a]=o})}catch{}return r.searchParams.forEach((n,o)=>{t[o]=n}),t}const Xj=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),B3=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Za=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Wo=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},xr=async(e,t)=>{await e.removeItem(t)};class zh{constructor(){this.promise=new zh.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}zh.promiseConstructor=Promise;function Od(e){const t=e.split(".");if(t.length!==3)throw new Hm("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!C3.test(t[n]))throw new Hm("JWT not in base64url format");return{header:JSON.parse(Z0(t[0])),payload:JSON.parse(Z0(t[1])),signature:Ni(t[2]),raw:{header:t[0],payload:t[1]}}}async function z3(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function V3(e,t){return new Promise((n,o)=>{(async()=>{for(let a=0;a<1/0;a++)try{const i=await e(a);if(!t(a,null,i)){n(i);return}}catch(i){if(!t(a,i)){o(i);return}}})()})}function W3(e){return("0"+e.toString(16)).substr(-2)}function q3(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let o="";for(let a=0;a<56;a++)o+=r.charAt(Math.floor(Math.random()*n));return o}return crypto.getRandomValues(t),Array.from(t,W3).join("")}async function H3(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),o=new Uint8Array(n);return Array.from(o).map(a=>String.fromCharCode(a)).join("")}async function K3(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await H3(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ba(e,t,r=!1){const n=q3();let o=n;r&&(o+="/PASSWORD_RECOVERY"),await Za(e,`${t}-code-verifier`,o);const a=await K3(n);return[a,n===a?"plain":"s256"]}const G3=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Q3(e){const t=e.headers.get(Wm);if(!t||!t.match(G3))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Y3(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function J3(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const X3=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function za(e){if(!X3.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Jf(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Z3(e,t){return new Proxy(e,{get:(r,n,o)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const a=n.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,o)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,o)}})}function ey(e){return JSON.parse(JSON.stringify(e))}const Go=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),eR=[502,503,504];async function ty(e){var t;if(!B3(e))throw new qm(Go(e),0);if(eR.includes(e.status))throw new qm(Go(e),e.status);let r;try{r=await e.json()}catch(a){throw new Xo(Go(a),a)}let n;const o=Q3(e);if(o&&o.getTime()>=Qj["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Y0(Go(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new en}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,i)=>a&&typeof i=="string",!0))throw new Y0(Go(r),e.status,r.weak_password.reasons);throw new P3(Go(r),e.status||500,n)}const tR=(e,t,r,n)=>{const o={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),o.body=JSON.stringify(n),Object.assign(Object.assign({},o),r))};async function We(e,t,r,n){var o;const a=Object.assign({},n==null?void 0:n.headers);a[Wm]||(a[Wm]=Qj["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const i=(o=n==null?void 0:n.query)!==null&&o!==void 0?o:{};n!=null&&n.redirectTo&&(i.redirect_to=n.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await rR(e,t,r+l,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function rR(e,t,r,n,o,a){const i=tR(t,n,o,a);let l;try{l=await e(r,Object.assign({},i))}catch(c){throw console.error(c),new qm(Go(c),0)}if(l.ok||await ty(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await ty(c)}}function _n(e){var t;let r=null;oR(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=L3(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function ry(e){const t=_n(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Zs(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function nR(e){return{data:e,error:null}}function sR(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:o,verification_type:a}=e,i=il(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:o,verification_type:a},c=Object.assign({},i);return{data:{properties:l,user:c},error:null}}function ny(e){return e}function oR(e){return e.access_token&&e.refresh_token&&e.expires_in}const Xf=["global","local","others"];class aR{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=Xj(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Xf[0]){if(Xf.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Xf.join(", ")}`);try{return await We(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Re(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await We(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Zs})}catch(n){if(Re(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=il(t,["options"]),o=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(o.new_email=n==null?void 0:n.newEmail,delete o.newEmail),await We(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:sR,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Re(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await We(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Zs})}catch(r){if(Re(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,o,a,i,l,c;try{const d={nextPage:null,lastPage:0,total:0},h=await We(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(o=t==null?void 0:t.perPage)===null||o===void 0?void 0:o.toString())!==null&&a!==void 0?a:""},xform:ny});if(h.error)throw h.error;const u=await h.json(),f=(i=h.headers.get("x-total-count"))!==null&&i!==void 0?i:0,m=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(g=>{const x=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(g.split(";")[1].split("=")[1]);d[`${N}Page`]=x}),d.total=parseInt(f)),{data:Object.assign(Object.assign({},u),d),error:null}}catch(d){if(Re(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){za(t);try{return await We(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Zs})}catch(r){if(Re(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){za(t);try{return await We(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Zs})}catch(n){if(Re(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){za(t);try{return await We(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Zs})}catch(n){if(Re(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){za(t.userId);try{const{data:r,error:n}=await We(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:r,error:n}}catch(r){if(Re(r))return{data:null,error:r};throw r}}async _deleteFactor(t){za(t.userId),za(t.id);try{return{data:await We(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Re(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,o,a,i,l,c;try{const d={nextPage:null,lastPage:0,total:0},h=await We(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(o=t==null?void 0:t.perPage)===null||o===void 0?void 0:o.toString())!==null&&a!==void 0?a:""},xform:ny});if(h.error)throw h.error;const u=await h.json(),f=(i=h.headers.get("x-total-count"))!==null&&i!==void 0?i:0,m=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(g=>{const x=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(g.split(";")[1].split("=")[1]);d[`${N}Page`]=x}),d.total=parseInt(f)),{data:Object.assign(Object.assign({},u),d),error:null}}catch(d){if(Re(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(t){try{return await We(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Re(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await We(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Re(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await We(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await We(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Re(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await We(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Re(r))return{data:null,error:r};throw r}}}function sy(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Va={debug:!!(globalThis&&Jj()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Zj extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class oy extends Zj{}async function iR(e,t,r){Va.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;t>0&&setTimeout(()=>{n.abort(),Va.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve();try{return await globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async o=>{if(o){Va.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,o.name);try{return await r()}finally{Va.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,o.name)}}else{if(t===0)throw Va.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new oy(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Va.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}})}catch(o){throw(o==null?void 0:o.name)==="AbortError"?new oy(`Acquiring an exclusive Navigator LockManager lock "${e}" timed out waiting ${t}ms`):o}}function lR(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function eN(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function cR(e){return parseInt(e,16)}function dR(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function uR(e){var t;const{chainId:r,domain:n,expirationTime:o,issuedAt:a=new Date,nonce:i,notBefore:l,requestId:c,resources:d,scheme:h,uri:u,version:f}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(i&&i.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${i}`);if(!u)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const m=eN(e.address),g=h?`${h}://${n}`:n,x=e.statement?`${e.statement}
`:"",N=`${g} wants you to sign in with your Ethereum account:
${m}

${x}`;let b=`URI: ${u}
Version: ${f}
Chain ID: ${r}${i?`
Nonce: ${i}`:""}
Issued At: ${a.toISOString()}`;if(o&&(b+=`
Expiration Time: ${o.toISOString()}`),l&&(b+=`
Not Before: ${l.toISOString()}`),c&&(b+=`
Request ID: ${c}`),d){let y=`
Resources:`;for(const v of d){if(!v||typeof v!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${v}`);y+=`
- ${v}`}b+=y}return`${N}
${b}`}class Yt extends Error{constructor({message:t,code:r,cause:n,name:o}){var a;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(a=o??(n instanceof Error?n.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=r}}class Zu extends Yt{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function hR({error:e,options:t}){var r,n,o;const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Yt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=a.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Yt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=a.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Yt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((o=a.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new Yt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Yt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Yt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return a.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new Yt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Yt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const i=window.location.hostname;if(tN(i)){if(a.rp.id!==i)return new Yt({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Yt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new Yt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Yt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Yt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function fR({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Yt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Yt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(tN(n)){if(r.rpId!==n)return new Yt({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Yt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Yt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Yt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class pR{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const mR=new pR;function xR(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,o=il(e,["challenge","user","excludeCredentials"]),a=Ni(t).buffer,i=Object.assign(Object.assign({},r),{id:Ni(r.id).buffer}),l=Object.assign(Object.assign({},o),{challenge:a,user:i});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const d=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},d),{id:Ni(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return l}function gR(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=il(e,["challenge","allowCredentials"]),o=Ni(t).buffer,a=Object.assign(Object.assign({},n),{challenge:o});if(r&&r.length>0){a.allowCredentials=new Array(r.length);for(let i=0;i<r.length;i++){const l=r[i];a.allowCredentials[i]=Object.assign(Object.assign({},l),{id:Ni(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return a}function bR(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:ra(new Uint8Array(e.response.attestationObject)),clientDataJSON:ra(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function yR(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),o=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:ra(new Uint8Array(o.authenticatorData)),clientDataJSON:ra(new Uint8Array(o.clientDataJSON)),signature:ra(new Uint8Array(o.signature)),userHandle:o.userHandle?ra(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function tN(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function ay(){var e,t;return!!(gr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function vR(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Zu("Browser returned unexpected credential type",t)}:{data:null,error:new Zu("Empty credential response",t)}}catch(t){return{data:null,error:hR({error:t,options:e})}}}async function wR(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Zu("Browser returned unexpected credential type",t)}:{data:null,error:new Zu("Empty credential response",t)}}catch(t){return{data:null,error:fR({error:t,options:e})}}}const jR={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},NR={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function eh(...e){const t=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),r=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),n={};for(const o of e)if(o)for(const a in o){const i=o[a];if(i!==void 0)if(Array.isArray(i))n[a]=i;else if(r(i))n[a]=i;else if(t(i)){const l=n[a];t(l)?n[a]=eh(l,i):n[a]=eh(i)}else n[a]=i}return n}function kR(e,t){return eh(jR,e,t||{})}function SR(e,t){return eh(NR,e,t||{})}class _R{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:o},a){var i;try{const{data:l,error:c}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!l)return{data:null,error:c};const d=o??mR.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:h}=l.webauthn.credential_options.publicKey;if(!h.name){const u=n;if(u)h.name=`${h.id}:${u}`;else{const m=(await this.client.getUser()).data.user,g=((i=m==null?void 0:m.user_metadata)===null||i===void 0?void 0:i.name)||(m==null?void 0:m.email)||(m==null?void 0:m.id)||"User";h.name=`${h.id}:${g}`}}h.displayName||(h.displayName=h.name)}switch(l.webauthn.type){case"create":{const h=kR(l.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:u,error:f}=await vR({publicKey:h,signal:d});return u?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:u}},error:null}:{data:null,error:f}}case"request":{const h=SR(l.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:u,error:f}=await wR(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:h,signal:d}));return u?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:u}},error:null}:{data:null,error:f}}}}catch(l){return Re(l)?{data:null,error:l}:{data:null,error:new Xo("Unexpected error in challenge",l)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},a){if(!r)return{data:null,error:new kc("rpId is required for WebAuthn authentication")};try{if(!ay())return{data:null,error:new Xo("Browser does not support WebAuthn",null)};const{data:i,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:o},{request:a});if(!i)return{data:null,error:l};const{webauthn:c}=i;return this._verify({factorId:t,challengeId:i.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(i){return Re(i)?{data:null,error:i}:{data:null,error:new Xo("Unexpected error in authenticate",i)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},a){if(!r)return{data:null,error:new kc("rpId is required for WebAuthn registration")};try{if(!ay())return{data:null,error:new Xo("Browser does not support WebAuthn",null)};const{data:i,error:l}=await this._enroll({friendlyName:t});if(!i)return await this.client.mfa.listFactors().then(h=>{var u;return(u=h.data)===null||u===void 0?void 0:u.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===t&&f.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h==null?void 0:h.id}):void 0),{data:null,error:l};const{data:c,error:d}=await this._challenge({factorId:i.id,friendlyName:i.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:o},{create:a});return c?this._verify({factorId:i.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:d}}catch(i){return Re(i)?{data:null,error:i}:{data:null,error:new Xo("Unexpected error in register",i)}}}}lR();const CR={url:k3,storageKey:S3,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:_3,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4,skipAutoInitialize:!1};async function iy(e,t,r){return await r()}const Wa={};class Sc{get jwks(){var t,r;return(r=(t=Wa[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Wa[this.storageKey]=Object.assign(Object.assign({},Wa[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Wa[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Wa[this.storageKey]=Object.assign(Object.assign({},Wa[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},CR),t);if(this.storageKey=a.storageKey,this.instanceID=(r=Sc.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Sc.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&gr()){const i=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(i),this.logDebugMessages&&console.trace(i)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new aR({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=Xj(a.fetch),this.lock=a.lock||iy,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,this.lockAcquireTimeout=a.lockAcquireTimeout,a.lock?this.lock=a.lock:this.persistSession&&gr()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=iR:this.lock=iy,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new _R(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:Jj()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=sy(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=sy(this.memoryStorage)),gr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i);try{await this._notifyAllSubscribers(i.data.event,i.data.session,!1)}catch(l){this._debug("#broadcastChannel","error",l)}})}a.skipAutoInitialize||this.initialize().catch(i=>{this._debug("#initialize()","error",i)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Gj}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(gr()&&(r=U3(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),gr()&&this.detectSessionInUrl&&n!=="none"){const{data:o,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),T3(a)){const c=(t=a.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return{error:a}}const{session:i,redirectType:l}=o;return this._debug("#_initialize()","detected session in URL",i,"redirect type",l),await this._saveSession(i),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Re(r)?this._returnResult({error:r}):this._returnResult({error:new Xo("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,o;try{const a=await We(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(o=t==null?void 0:t.options)===null||o===void 0?void 0:o.captchaToken}},xform:_n}),{data:i,error:l}=a;if(l||!i)return this._returnResult({data:{user:null,session:null},error:l});const c=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(a){if(Re(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(t){var r,n,o;try{let a;if("email"in t){const{email:h,password:u,options:f}=t;let m=null,g=null;this.flowType==="pkce"&&([m,g]=await Ba(this.storage,this.storageKey)),a=await We(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:h,password:u,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:g},xform:_n})}else if("phone"in t){const{phone:h,password:u,options:f}=t;a=await We(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:u,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(o=f==null?void 0:f.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:_n})}else throw new Td("You must provide either an email or phone number and a password");const{data:i,error:l}=a;if(l||!i)return await xr(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const c=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(a){if(await xr(this.storage,`${this.storageKey}-code-verifier`),Re(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(t){try{let r;if("email"in t){const{email:a,password:i,options:l}=t;r=await We(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:ry})}else if("phone"in t){const{phone:a,password:i,options:l}=t;r=await We(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:ry})}else throw new Td("You must provide either an email or phone number and a password");const{data:n,error:o}=r;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!n||!n.session||!n.user){const a=new Ua;return this._returnResult({data:{user:null,session:null},error:a})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:o})}catch(r){if(Re(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,o,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(o=t.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,o,a,i,l,c,d,h,u,f;let m,g;if("message"in t)m=t.message,g=t.signature;else{const{chain:x,wallet:N,statement:b,options:y}=t;let v;if(gr())if(typeof N=="object")v=N;else{const F=window;if("ethereum"in F&&typeof F.ethereum=="object"&&"request"in F.ethereum&&typeof F.ethereum.request=="function")v=F.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=N}const k=new URL((r=y==null?void 0:y.url)!==null&&r!==void 0?r:window.location.href),S=await v.request({method:"eth_requestAccounts"}).then(F=>F).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!S||S.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const E=eN(S[0]);let C=(n=y==null?void 0:y.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!C){const F=await v.request({method:"eth_chainId"});C=cR(F)}const R={domain:k.host,address:E,statement:b,uri:k.href,version:"1",chainId:C,nonce:(o=y==null?void 0:y.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(i=(a=y==null?void 0:y.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&i!==void 0?i:new Date,expirationTime:(l=y==null?void 0:y.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=y==null?void 0:y.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(d=y==null?void 0:y.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(h=y==null?void 0:y.signInWithEthereum)===null||h===void 0?void 0:h.resources};m=uR(R),g=await v.request({method:"personal_sign",params:[dR(m),E]})}try{const{data:x,error:N}=await We(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:g},!((u=t.options)===null||u===void 0)&&u.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:_n});if(N)throw N;if(!x||!x.session||!x.user){const b=new Ua;return this._returnResult({data:{user:null,session:null},error:b})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:N})}catch(x){if(Re(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async signInWithSolana(t){var r,n,o,a,i,l,c,d,h,u,f,m;let g,x;if("message"in t)g=t.message,x=t.signature;else{const{chain:N,wallet:b,statement:y,options:v}=t;let k;if(gr())if(typeof b=="object")k=b;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))k=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=b}const S=new URL((r=v==null?void 0:v.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in k&&k.signIn){const E=await k.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),y?{statement:y}:null));let C;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")C=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)C=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)g=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),x=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in k)||typeof k.signMessage!="function"||!("publicKey"in k)||typeof k!="object"||!k.publicKey||!("toBase58"in k.publicKey)||typeof k.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${S.host} wants you to sign in with your Solana account:`,k.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(o=(n=v==null?void 0:v.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((a=v==null?void 0:v.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((i=v==null?void 0:v.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((c=v==null?void 0:v.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((d=v==null?void 0:v.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((u=(h=v==null?void 0:v.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||u===void 0)&&u.length?["Resources",...v.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const E=await k.signMessage(new TextEncoder().encode(g),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=E}}try{const{data:N,error:b}=await We(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:ra(x)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:_n});if(b)throw b;if(!N||!N.session||!N.user){const y=new Ua;return this._returnResult({data:{user:null,session:null},error:y})}return N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),this._returnResult({data:Object.assign({},N),error:b})}catch(N){if(Re(N))return this._returnResult({data:{user:null,session:null},error:N});throw N}}async _exchangeCodeForSession(t){const r=await Wo(this.storage,`${this.storageKey}-code-verifier`),[n,o]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new A3;const{data:a,error:i}=await We(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:_n});if(await xr(this.storage,`${this.storageKey}-code-verifier`),i)throw i;if(!a||!a.session||!a.user){const l=new Ua;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:o??null}),error:i})}catch(a){if(await xr(this.storage,`${this.storageKey}-code-verifier`),Re(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(t){try{const{options:r,provider:n,token:o,access_token:a,nonce:i}=t,l=await We(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:o,access_token:a,nonce:i,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:_n}),{data:c,error:d}=l;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!c||!c.session||!c.user){const h=new Ua;return this._returnResult({data:{user:null,session:null},error:h})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:d})}catch(r){if(Re(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,o,a,i;try{if("email"in t){const{email:l,options:c}=t;let d=null,h=null;this.flowType==="pkce"&&([d,h]=await Ba(this.storage,this.storageKey));const{error:u}=await We(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:h},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:u})}if("phone"in t){const{phone:l,options:c}=t,{data:d,error:h}=await We(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(o=c==null?void 0:c.data)!==null&&o!==void 0?o:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(i=c==null?void 0:c.channel)!==null&&i!==void 0?i:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:h})}throw new Td("You must provide either an email or phone number.")}catch(l){if(await xr(this.storage,`${this.storageKey}-code-verifier`),Re(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var r,n;try{let o,a;"options"in t&&(o=(r=t.options)===null||r===void 0?void 0:r.redirectTo,a=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:i,error:l}=await We(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:o,xform:_n});if(l)throw l;if(!i)throw new Error("An error occurred on token verification.");const c=i.session,d=i.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(o){if(Re(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(t){var r,n,o,a,i;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await Ba(this.storage,this.storageKey));const d=await We(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((o=t==null?void 0:t.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:nR});return!((a=d.data)===null||a===void 0)&&a.url&&gr()&&!(!((i=t.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(d.data.url),this._returnResult(d)}catch(l){if(await xr(this.storage,`${this.storageKey}-code-verifier`),Re(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new en;const{error:o}=await We(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(t){if(Re(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:o,options:a}=t,{error:i}=await We(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:i})}else if("phone"in t){const{phone:n,type:o,options:a}=t,{data:i,error:l}=await We(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:l})}throw new Td("You must provide either an email or phone number and a type")}catch(r){if(Re(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Wo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Gf:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const i=await Wo(this.userStorage,this.storageKey+"-user");i!=null&&i.user?t.user=i.user:t.user=Jf()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const i={value:this.suppressGetSessionWarning};t.user=Z3(t.user,i),i.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:o,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await We(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Zs}):await this._useSession(async r=>{var n,o,a;const{data:i,error:l}=r;if(l)throw l;return!(!((n=i.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new en}:await We(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(o=i.session)===null||o===void 0?void 0:o.access_token)!==null&&a!==void 0?a:void 0,xform:Zs})})}catch(r){if(Re(r))return Qf(r)&&(await this._removeSession(),await xr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:o,error:a}=n;if(a)throw a;if(!o.session)throw new en;const i=o.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Ba(this.storage,this.storageKey));const{data:d,error:h}=await We(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:i.access_token,xform:Zs});if(h)throw h;return i.user=d.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),this._returnResult({data:{user:i.user},error:null})})}catch(n){if(await xr(this.storage,`${this.storageKey}-code-verifier`),Re(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new en;const r=Date.now()/1e3;let n=r,o=!0,a=null;const{payload:i}=Od(t.access_token);if(i.exp&&(n=i.exp,o=n<=r),o){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});a={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(r){if(Re(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:i,error:l}=r;if(l)throw l;t=(n=i.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new en;const{data:o,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(Re(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!gr())throw new Ad("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Ad(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Q0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ad("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Q0("No code detected.");const{data:y,error:v}=await this._exchangeCodeForSession(t.code);if(v)throw v;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:o,access_token:a,refresh_token:i,expires_in:l,expires_at:c,token_type:d}=t;if(!a||!l||!i||!d)throw new Ad("No session defined in URL");const h=Math.round(Date.now()/1e3),u=parseInt(l);let f=h+u;c&&(f=parseInt(c));const m=f-h;m*1e3<=Xa&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${u}s`);const g=f-u;h-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,f,h):h-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,f,h);const{data:x,error:N}=await this._getUser(a);if(N)throw N;const b={provider_token:n,provider_refresh_token:o,access_token:a,expires_in:u,expires_at:f,refresh_token:i,token_type:d,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:b,redirectType:t.type},error:null})}catch(n){if(Re(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Wo(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:o,error:a}=r;if(a&&!Qf(a))return this._returnResult({error:a});const i=(n=o.session)===null||n===void 0?void 0:n.access_token;if(i){const{error:l}=await this.admin.signOut(i,t);if(l&&!(R3(l)&&(l.status===404||l.status===401||l.status===403)||Qf(l)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await xr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=F3(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,o;try{const{data:{session:a},error:i}=r;if(i)throw i;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((o=this.stateChangeEmitters.get(t))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,r={}){let n=null,o=null;this.flowType==="pkce"&&([n,o]=await Ba(this.storage,this.storageKey,!0));try{return await We(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:o,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(await xr(this.storage,`${this.storageKey}-code-verifier`),Re(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(Re(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:o}=await this._useSession(async a=>{var i,l,c,d,h;const{data:u,error:f}=a;if(f)throw f;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(i=t.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await We(this.fetch,"GET",m,{headers:this.headers,jwt:(h=(d=u.session)===null||d===void 0?void 0:d.access_token)!==null&&h!==void 0?h:void 0})});if(o)throw o;return gr()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(Re(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:o,data:{session:a}}=r;if(o)throw o;const{options:i,provider:l,token:c,access_token:d,nonce:h}=t,u=await We(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=a==null?void 0:a.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:d,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:_n}),{data:f,error:m}=u;return m?this._returnResult({data:{user:null,session:null},error:m}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new Ua}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:m}))}catch(o){if(await xr(this.storage,`${this.storageKey}-code-verifier`),Re(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,o;const{data:a,error:i}=r;if(i)throw i;return await We(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(o=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&o!==void 0?o:void 0})})}catch(r){if(Re(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await V3(async o=>(o>0&&await z3(200*Math.pow(2,o-1)),this._debug(r,"refreshing attempt",o),await We(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:_n})),(o,a)=>{const i=200*Math.pow(2,o);return a&&Yf(a)&&Date.now()+i-n<Xa})}catch(n){if(this._debug(r,"error",n),Re(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),gr()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const o=await Wo(this.storage,this.storageKey);if(o&&this.userStorage){let i=await Wo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:o.user},await Za(this.userStorage,this.storageKey+"-user",i)),o.user=(t=i==null?void 0:i.user)!==null&&t!==void 0?t:Jf()}else if(o&&!o.user&&!o.user){const i=await Wo(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(o.user=i.user,await xr(this.storage,this.storageKey+"-user"),await Za(this.storage,this.storageKey,o)):o.user=Jf()}if(this._debug(n,"session from storage",o),!this._isValidSession(o)){this._debug(n,"session is not valid"),o!==null&&await this._removeSession();return}const a=((r=o.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Gf;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${Gf}s`),a){if(this.autoRefreshToken&&o.refresh_token){const{error:i}=await this._callRefreshToken(o.refresh_token);i&&(console.error(i),Yf(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:l}=await this._getUser(o.access_token);!l&&(i!=null&&i.user)?(o.user=i.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(n,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(n,"error",o),console.error(o);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new en;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new zh;const{data:a,error:i}=await this._refreshAccessToken(t);if(i)throw i;if(!a.session)throw new en;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={data:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(o,"error",a),Re(a)){const i={data:null,error:a};return Yf(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(i),i}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(t,r,n=!0){const o=`#_notifyAllSubscribers(${t})`;this._debug(o,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const a=[],i=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){a.push(c)}});if(await Promise.all(i),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(o,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await xr(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Za(this.userStorage,this.storageKey+"-user",{user:r.user});const o=Object.assign({},r);delete o.user;const a=ey(o);await Za(this.storage,this.storageKey,a)}else{const o=ey(r);await Za(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await xr(this.storage,this.storageKey),await xr(this.storage,this.storageKey+"-code-verifier"),await xr(this.storage,this.storageKey+"-user"),this.userStorage&&await xr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&gr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Xa);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((n.expires_at*1e3-t)/Xa);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Xa}ms, refresh threshold is ${Vm} ticks`),o<=Vm&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Zj)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!gr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(t){this._debug("#visibilityChangedCallback","error",t)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const o=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&o.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&o.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,i]=await Ba(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(i)}`});o.push(l.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);o.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&o.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${o.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:o,error:a}=r;return a?this._returnResult({data:null,error:a}):await We(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Re(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,o;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:d}=await We(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return d?this._returnResult({data:null,error:d}):(t.factorType==="totp"&&c.type==="totp"&&(!((o=c==null?void 0:c.totp)===null||o===void 0)&&o.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(Re(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:o,error:a}=r;if(a)return this._returnResult({data:null,error:a});const i=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?bR(t.webauthn.credential_response):yR(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await We(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:i,headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(r){if(Re(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:o,error:a}=r;if(a)return this._returnResult({data:null,error:a});const i=await We(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token});if(i.error)return i;const{data:l}=i;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:xR(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:gR(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Re(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const o={all:[],phone:[],totp:[],webauthn:[]};for(const a of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])o.all.push(a),a.status==="verified"&&o[a.factor_type].push(a);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(t){var r,n,o,a;if(t)try{const{payload:m}=Od(t);let g=null;m.aal&&(g=m.aal);let x=g;const{data:{user:N},error:b}=await this.getUser(t);if(b)return this._returnResult({data:null,error:b});((n=(r=N==null?void 0:N.factors)===null||r===void 0?void 0:r.filter(k=>k.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(x="aal2");const v=m.amr||[];return{data:{currentLevel:g,nextLevel:x,currentAuthenticationMethods:v},error:null}}catch(m){if(Re(m))return this._returnResult({data:null,error:m});throw m}const{data:{session:i},error:l}=await this.getSession();if(l)return this._returnResult({data:null,error:l});if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=Od(i.access_token);let d=null;c.aal&&(d=c.aal);let h=d;((a=(o=i.user.factors)===null||o===void 0?void 0:o.filter(m=>m.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(h="aal2");const f=c.amr||[];return{data:{currentLevel:d,nextLevel:h,currentAuthenticationMethods:f},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:o}=r;return o?this._returnResult({data:null,error:o}):n?await We(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new en})})}catch(r){if(Re(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:o},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!o)return this._returnResult({data:null,error:new en});const i=await We(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return i.data&&i.data.redirect_url&&gr()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(i.data.redirect_url),i})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:o},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!o)return this._returnResult({data:null,error:new en});const i=await We(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return i.data&&i.data.redirect_url&&gr()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(i.data.redirect_url),i})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await We(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new en})})}catch(t){if(Re(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:o}=r;return o?this._returnResult({data:null,error:o}):n?(await We(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new en})})}catch(r){if(Re(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const o=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+E3>o)return n;const{data:a,error:i}=await We(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=o,n=a.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:m,error:g}=await this.getSession();if(g||!m.session)return this._returnResult({data:null,error:g});n=m.session.access_token}const{header:o,payload:a,signature:i,raw:{header:l,payload:c}}=Od(n);r!=null&&r.allowExpired||Y3(a.exp);const d=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!d){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:a,header:o,signature:i},error:null}}const h=J3(o.alg),u=await crypto.subtle.importKey("jwk",d,h,!0,["verify"]);if(!await crypto.subtle.verify(h,u,i,$3(`${l}.${c}`)))throw new Hm("Invalid JWT signature");return{data:{claims:a,header:o,signature:i},error:null}}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}}Sc.nextInstanceID={};const ER=Sc,PR="2.97.0";let Ll="";typeof Deno<"u"?Ll="deno":typeof document<"u"?Ll="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ll="react-native":Ll="node";const RR={"X-Client-Info":`supabase-js-${Ll}/${PR}`},TR={headers:RR},AR={schema:"public"},OR={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},DR={};function _c(e){"@babel/helpers - typeof";return _c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_c(e)}function IR(e,t){if(_c(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(_c(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function MR(e){var t=IR(e,"string");return _c(t)=="symbol"?t:t+""}function $R(e,t,r){return(t=MR(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ly(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Wt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ly(Object(r),!0).forEach(function(n){$R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ly(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const LR=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),FR=()=>Headers,UR=(e,t,r)=>{const n=LR(r),o=FR();return async(a,i)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let d=new o(i==null?void 0:i.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(a,Wt(Wt({},i),{},{headers:d}))}};function BR(e){return e.endsWith("/")?e:e+"/"}function zR(e,t){var r,n;const{db:o,auth:a,realtime:i,global:l}=e,{db:c,auth:d,realtime:h,global:u}=t,f={db:Wt(Wt({},c),o),auth:Wt(Wt({},d),a),realtime:Wt(Wt({},h),i),storage:{},global:Wt(Wt(Wt({},u),l),{},{headers:Wt(Wt({},(r=u==null?void 0:u.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}function VR(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(BR(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var WR=class extends ER{constructor(e){super(e)}},qR=class{constructor(e,t,r){var n,o;this.supabaseUrl=e,this.supabaseKey=t;const a=VR(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const i=`sb-${a.hostname.split(".")[0]}-auth-token`,l={db:AR,realtime:DR,auth:Wt(Wt({},OR),{},{storageKey:i}),global:TR},c=zR(r??{},l);if(this.storageKey=(n=c.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(o=c.global.headers)!==null&&o!==void 0?o:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(h,u)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(u)} is not possible`)}});else{var d;this.auth=this._initSupabaseAuthClient((d=c.auth)!==null&&d!==void 0?d:{},this.headers,c.global.fetch)}this.fetch=UR(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Wt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(h=>this.realtime.setAuth(h)).catch(h=>console.warn("Failed to set initial Realtime auth token:",h)),this.rest=new RP(new URL("rest/v1",a).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch,timeout:c.db.timeout,urlLengthLimit:c.db.urlLengthLimit}),this.storage=new N3(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new jP(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:n}=await e.auth.getSession();return(t=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:o,storageKey:a,flowType:i,lock:l,debug:c,throwOnError:d},h,u){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new WR({url:this.authUrl.href,headers:Wt(Wt({},f),h),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:o,flowType:i,lock:l,debug:c,throwOnError:d,fetch:u,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new KP(this.realtimeUrl.href,Wt(Wt({},e),{},{params:Wt(Wt({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const HR=(e,t,r)=>new qR(e,t,r);function KR(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const r=t.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}KR()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const GR="https://xblombwqslecowkngiac.supabase.co",QR="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhibG9tYndxc2xlY293a25naWFjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE4MDU5NjUsImV4cCI6MjA4NzM4MTk2NX0.4z8y4oYdiyRhsJtoG2EJ2F0QZR5VW5fKg-CUvtJyfeI",me=HR(GR,QR,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),rN=p.createContext({session:null,user:null,loading:!0,isTestMode:!1,testRole:"worker",setTestMode:()=>{},setTestRole:()=>{},signOut:async()=>{}}),Qt=()=>p.useContext(rN);function YR({children:e}){const[t,r]=p.useState(null),[n,o]=p.useState(!0),[a,i]=p.useState(()=>localStorage.getItem("inopnc_test_mode")==="true"),[l,c]=p.useState(()=>localStorage.getItem("inopnc_test_role")||"worker");p.useEffect(()=>{let h=!0;const u=window.setTimeout(()=>{h&&o(!1)},6e3),{data:{subscription:f}}=me.auth.onAuthStateChange((m,g)=>{h&&(r(g),o(!1))});return me.auth.getSession().then(({data:{session:m}})=>{h&&r(m)}).catch(()=>{h&&r(null)}).finally(()=>{h&&(window.clearTimeout(u),o(!1))}),()=>{h=!1,window.clearTimeout(u),f.unsubscribe()}},[]),p.useEffect(()=>{localStorage.setItem("inopnc_test_mode",a?"true":"false")},[a]),p.useEffect(()=>{localStorage.setItem("inopnc_test_role",l)},[l]);const d=async()=>{i(!1),await me.auth.signOut()};return s.jsx(rN.Provider,{value:{session:t,user:(t==null?void 0:t.user)??null,loading:n,isTestMode:a,testRole:l,setTestMode:i,setTestRole:c,signOut:d},children:e})}function cy({children:e}){const{session:t,loading:r,isTestMode:n}=Qt();return r?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:s.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):!t&&!n?s.jsx(uu,{to:"/auth",replace:!0}):s.jsx(s.Fragment,{children:e})}/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JR=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),nN=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var XR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZR=p.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:o="",children:a,iconNode:i,...l},c)=>p.createElement("svg",{ref:c,...XR,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:nN("lucide",o),...l},[...i.map(([d,h])=>p.createElement(d,h)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=(e,t)=>{const r=p.forwardRef(({className:n,...o},a)=>p.createElement(ZR,{ref:a,iconNode:t,className:nN(`lucide-${JR(e)}`,n),...o}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qi=ge("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dy=ge("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sN=ge("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eT=ge("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tT=ge("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const th=ge("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=ge("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const po=ge("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=ge("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=ge("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=ge("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=ge("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oN=ge("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aN=ge("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=ge("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pr=ge("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rT=ge("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nT=ge("CloudRain",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sT=ge("CloudUpload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uy=ge("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iN=ge("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cc=ge("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rh=ge("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=ge("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nh=ge("FileCheck2",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m3 15 2 2 4-4",key:"1lhrkk"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yi=ge("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=ge("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lN=ge("FileUp",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cN=ge("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oT=ge("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sh=ge("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dN=ge("HardHat",[["path",{d:"M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5",key:"1p9q5i"}],["path",{d:"M14 6a6 6 0 0 1 6 6v3",key:"1hnv84"}],["path",{d:"M4 15v-3a6 6 0 0 1 6-6",key:"9ciidu"}],["rect",{x:"2",y:"15",width:"20",height:"4",rx:"1",key:"g3x8cw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=ge("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uN=ge("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aT=ge("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vh=ge("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hN=ge("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=ge("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=ge("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iT=ge("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fN=ge("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lT=ge("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pN=ge("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gg=ge("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cT=ge("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dT=ge("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uT=ge("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=ge("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wh=ge("PinOff",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M15 9.34V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H7.89",key:"znwnzq"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v1.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h11",key:"c9qhm2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qh=ge("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=ge("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hy=ge("ReceiptText",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M14 8H8",key:"1l3xfs"}],["path",{d:"M16 12H8",key:"1fr5h0"}],["path",{d:"M13 16H8",key:"wsln4y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mN=ge("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xN=ge("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hT=ge("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fT=ge("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=ge("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pT=ge("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oh=ge("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mT=ge("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xT=ge("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Km=ge("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=ge("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gT=ge("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bT=ge("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bg=ge("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yg=ge("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ea=ge("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yT=ge("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vT=ge("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=ge("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),fy=[{key:"home",label:"",path:"/"},{key:"output",label:"",path:"/output"},{key:"worklog",label:"",path:"/worklog"},{key:"site",label:"",path:"/site"},{key:"doc",label:"",path:"/doc"},{key:"request",label:"",path:"/request"}];function wT({onSearch:e,onCert:t,onNotify:r,onMenu:n,notificationCount:o=2}){var d;const a=Aa(),i=Yr(),l=((d=fy.find(h=>h.path==="/"?a.pathname==="/":a.pathname.startsWith(h.path)))==null?void 0:d.key)||"home",c=[{key:"search",label:"",icon:Jr,badge:0,onClick:e},{key:"cert",label:"",icon:Yi,badge:0,onClick:t},{key:"notify",label:"",icon:sN,badge:o,onClick:r},{key:"menu",label:"",icon:fN,badge:0,onClick:n}];return s.jsxs("header",{className:"fixed top-0 left-1/2 -translate-x-1/2 w-full max-w-app bg-card border-b border-border z-[100]",children:[s.jsxs("div",{className:"h-[60px] px-4 flex items-center justify-between",children:[s.jsx("button",{onClick:()=>i("/"),className:"text-xl-app font-[800] text-header-navy tracking-[-0.5px] bg-transparent border-none cursor-pointer p-0",children:"INOPNC"}),s.jsx("div",{className:"flex items-center gap-0.5",children:c.map(({key:h,icon:u,badge:f,onClick:m})=>s.jsxs("button",{onClick:m,className:"relative w-[42px] h-[42px] min-w-[42px] inline-flex items-center justify-center bg-transparent border-none text-header-navy rounded-[10px] cursor-pointer active:opacity-60",children:[s.jsx(u,{className:"w-[21px] h-[21px]",strokeWidth:2.1}),f>0&&s.jsx("span",{className:"absolute top-0 -right-0.5 min-w-[18px] h-[18px] rounded-full px-[5px] inline-flex items-center justify-center text-[11px] font-[800] text-white bg-destructive border-2 border-card",children:f})]},h))})]}),s.jsx("nav",{className:"h-[54px] border-t border-border/50 flex items-center gap-0 overflow-hidden px-1.5",children:fy.map((h,u)=>s.jsxs("div",{className:"contents",children:[u===5&&s.jsx("div",{className:"w-px h-[18px] bg-muted-foreground/30 mx-0.5 flex-shrink-0"}),s.jsxs("button",{onClick:()=>i(h.path),className:U("relative flex-1 min-w-0 h-full inline-flex items-center justify-center px-1 bg-transparent border-none text-[17px] font-bold tracking-[-0.2px] whitespace-nowrap cursor-pointer transition-colors duration-150",l===h.key?"text-header-navy":"text-muted-foreground hover:text-foreground/70",h.key==="request"&&"flex-[1.2]"),children:[h.label,l===h.key&&s.jsx("span",{className:"absolute left-1 right-1 bottom-0 h-[3px] rounded-full bg-header-navy"})]})]},h.key))})]})}const py=8,jT=[{id:"page_home",title:"",desc:"   ",category:"",link:"/",keywords:["","",""]},{id:"page_worklog",title:"",desc:"   ",category:"",link:"/worklog",keywords:["","","",""]},{id:"page_site",title:"",desc:"   ",category:"",link:"/site",keywords:["","","",""]},{id:"page_doc",title:"",desc:"   ",category:"",link:"/doc",keywords:["","","",""]},{id:"page_output",title:"",desc:"   ",category:"",link:"/output",keywords:["","","",""]},{id:"page_request",title:"",desc:"   ",category:"",link:"/request",keywords:["","",""]},{id:"action_cert",title:"",desc:"  ",category:"",action:"cert",keywords:["","","",""]}],NT=[{id:"worklog",label:"",to:"/worklog",icon:Pr},{id:"site",label:"",to:"/site",icon:lr},{id:"doc",label:"",to:"/doc",icon:cN},{id:"output",label:"",to:"/output",icon:yr},{id:"cert",label:"",icon:Yi,action:"cert"},{id:"request",label:"",to:"/request",icon:eT}];function kT({isOpen:e,onClose:t,onOpenCert:r}){const[n,o]=p.useState(""),[a,i]=p.useState([]),[l,c]=p.useState([]),[d,h]=p.useState(!1),[u,f]=p.useState(5),m=p.useRef(null),g=Yr();p.useEffect(()=>{if(e){setTimeout(()=>{var C;return(C=m.current)==null?void 0:C.focus()},250);try{const C=JSON.parse(localStorage.getItem("INOPNC_RECENT_SEARCHES_v1")||"[]");c(C)}catch{c([])}}else o(""),h(!1),f(5)},[e]);const x=p.useCallback(C=>{const R=C.trim();if(o(C),R.length<2){h(!1),i([]);return}h(!0);const F=R.toLowerCase().replace(/\s+/g,""),T=jT.filter(V=>[V.title,V.desc,V.category,...V.keywords??[]].join(" ").toLowerCase().replace(/\s+/g,"").includes(F));i(T)},[]),N=p.useCallback(C=>{const R=C.trim();if(R.length<2)return;const F=T=>[R,...T.filter(V=>V!==R)].slice(0,py);try{const T=JSON.parse(localStorage.getItem("INOPNC_RECENT_SEARCHES_v1")||"[]"),V=F(T);localStorage.setItem("INOPNC_RECENT_SEARCHES_v1",JSON.stringify(V)),c(V)}catch{c(T=>F(T))}},[]),b=p.useCallback(C=>{const R=F=>F.filter(T=>T!==C);try{const F=JSON.parse(localStorage.getItem("INOPNC_RECENT_SEARCHES_v1")||"[]"),T=R(F);localStorage.setItem("INOPNC_RECENT_SEARCHES_v1",JSON.stringify(T)),c(T)}catch{c(F=>R(F))}},[]),y=p.useCallback(()=>{try{localStorage.removeItem("INOPNC_RECENT_SEARCHES_v1")}catch{}c([])},[]),v=()=>{const C=n.trim();C.length<2||(f(5),N(C),x(C))},k=C=>{f(5),o(C),x(C),N(C)},S=p.useCallback(C=>{if(!C)return;const R=n.trim();R.length>=2&&N(R),t(),g(C)},[g,t,n,N]),E=p.useCallback(C=>{const R=n.trim();if(R.length>=2&&N(R),C.action==="cert"){if(r){r(),t();return}S("/doc");return}S(C.to)},[S,t,r,n,N]);return s.jsxs("div",{className:`fixed inset-0 left-0 right-0 mx-auto max-w-app bg-background z-[2000] flex flex-col transition-transform duration-300 ease-[cubic-bezier(0.33,1,0.68,1)] ${e?"translate-y-0 visible":"translate-y-full invisible"}`,children:[s.jsxs("div",{className:"flex items-center gap-2.5 h-[70px] px-4 bg-card border-b border-border shrink-0",children:[s.jsx("button",{onClick:t,className:"bg-transparent border-none p-1",children:s.jsx(Qi,{className:"w-6 h-6 text-foreground"})}),s.jsxs("div",{className:"flex-1 relative flex items-center",children:[s.jsx("input",{ref:m,type:"text",value:n,onChange:C=>x(C.target.value),onKeyDown:C=>C.key==="Enter"&&v(),placeholder:" .",className:"w-full h-[50px] rounded-full bg-[hsl(var(--bg-input))] border border-border px-5 pr-[76px] text-base-app font-medium text-foreground outline-none transition-all focus:bg-card focus:border-primary focus:shadow-input-focus"}),s.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-1",children:n&&s.jsx("button",{onClick:()=>{var C;o(""),x(""),(C=m.current)==null||C.focus()},className:"w-6 h-6 rounded-full bg-muted-foreground/40 text-card flex items-center justify-center border-none cursor-pointer transition-transform hover:scale-110",children:s.jsx(Je,{className:"w-3.5 h-3.5"})})})]}),s.jsx("button",{onClick:v,className:"bg-transparent border-none text-primary font-bold text-base-app cursor-pointer whitespace-nowrap pl-3",children:""})]}),s.jsx("div",{className:"flex-1 p-4 overflow-y-auto",children:d?s.jsxs("div",{children:[s.jsxs("span",{className:"text-base-app font-bold text-text-sub block mb-3",children:["  ",a.length,""]}),a.length===0?s.jsxs("div",{className:"text-center py-20 text-muted-foreground flex flex-col items-center",children:[s.jsx("div",{className:"w-20 h-20 rounded-full bg-[hsl(var(--bg-input))] flex items-center justify-center mb-5",children:s.jsx(Jr,{className:"w-8 h-8 opacity-60"})}),s.jsx("p",{className:"text-base font-medium mb-2",children:"  "})]}):s.jsxs(s.Fragment,{children:[a.slice(0,u).map((C,R)=>s.jsx("div",{className:"bg-card rounded-2xl p-5 mb-3.5 shadow-soft cursor-pointer transition-transform active:scale-[0.98]",onClick:()=>{if(C.action==="cert"){if(r){r(),t();return}S("/doc");return}if(C.link){S(C.link);return}t()},children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-[calc(var(--fs-lg)+1px)] font-[800] text-foreground leading-tight mb-0.5",children:C.title}),s.jsx("div",{className:"text-[calc(var(--fs-sm)+1px)] text-text-sub font-medium",children:C.desc})]}),s.jsx("span",{className:"bg-primary-bg text-primary text-tiny font-bold px-2.5 py-1 rounded-md whitespace-nowrap",children:C.category})]})},C.id)),a.length>5&&s.jsxs("button",{onClick:()=>f(C=>C>=a.length?5:C+5),className:"w-full h-[50px] bg-card border border-border rounded-full text-text-sub font-semibold text-sm-app cursor-pointer flex items-center justify-center gap-1.5 mt-2.5 transition-colors active:bg-background",children:[u>=a.length?"?":"??",u>=a.length?s.jsx(Ss,{className:"w-4 h-4"}):s.jsx(Lt,{className:"w-4 h-4"})]})]})]}):s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-base-app font-bold text-text-sub",children:" "}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",l.length,"/",py,")"]})]}),l.length>0&&s.jsx("button",{onClick:y,className:"text-xs font-semibold text-muted-foreground hover:text-foreground",children:" "})]}),s.jsx("div",{className:"flex gap-2 flex-wrap mb-6",children:l.length===0?s.jsx("div",{className:"text-sm-app text-muted-foreground",children:"  ."}):l.map(C=>s.jsxs("div",{className:"inline-flex items-center gap-1 rounded-full bg-card/70 border border-border px-2.5 py-1.5",children:[s.jsx("button",{onClick:()=>k(C),className:"text-sm-app text-foreground font-semibold",children:C}),s.jsx("button",{onClick:()=>b(C),className:"ml-0.5 inline-flex h-5 w-5 items-center justify-center rounded-full bg-muted text-muted-foreground hover:text-foreground","aria-label":"  ",children:s.jsx(Je,{className:"w-3 h-3"})})]},C))}),s.jsx("span",{className:"text-base-app font-bold text-text-sub block mb-3",children:""}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2.5",children:NT.map(C=>{const R=C.icon;return s.jsxs("button",{type:"button",onClick:()=>E(C),className:"group h-[50px] w-full rounded-xl border border-border bg-[hsl(var(--bg-input))] px-3 flex items-center gap-2 text-sm-app font-semibold text-foreground transition-colors hover:border-primary/40 hover:bg-primary/5 active:scale-[0.98]",children:[s.jsx("span",{className:"flex h-7 w-7 items-center justify-center rounded-lg bg-card border border-border text-muted-foreground group-hover:text-primary group-hover:border-primary/30",children:s.jsx(R,{className:"h-4 w-4"})}),s.jsx("span",{className:"text-[15px] font-semibold text-foreground",children:C.label})]},C.id)})})]})})]})}const Gm="hideNotifications",ST=280,gN=()=>new Date().toDateString(),_T=()=>{if(typeof window>"u")return!1;try{return window.localStorage.getItem(Gm)===gN()}catch{return!1}},CT=e=>{if(!(typeof window>"u"))try{e?window.localStorage.setItem(Gm,gN()):window.localStorage.removeItem(Gm)}catch{}},ET=[{id:1,type:"announcement",title:"  ",desc:"A     .",time:" ",unread:!0},{id:2,type:"document",title:"  ",desc:"     .",time:"10 ",unread:!0},{id:3,type:"success",title:" ",desc:"    .",time:"1 ",unread:!1}],PT={announcement:"",safety:"",schedule:"",document:"",success:"",warning:"",general:""},RT={announcement:iT,safety:xT,schedule:tT,document:yr,success:aN,warning:oN,general:Pr},TT={announcement:"bg-blue-50 text-blue-700 border-blue-200",safety:"bg-red-50 text-red-700 border-red-200",schedule:"bg-indigo-50 text-indigo-700 border-indigo-200",document:"bg-sky-50 text-sky-700 border-sky-200",success:"bg-emerald-50 text-emerald-700 border-emerald-200",warning:"bg-amber-50 text-amber-700 border-amber-200",general:"bg-slate-50 text-slate-700 border-slate-200"},AT={announcement:"bg-blue-100 text-blue-700",safety:"bg-red-100 text-red-700",schedule:"bg-indigo-100 text-indigo-700",document:"bg-sky-100 text-sky-700",success:"bg-emerald-100 text-emerald-700",warning:"bg-amber-100 text-amber-700",general:"bg-slate-100 text-slate-700"};function OT({isOpen:e,onClose:t,onBadgeUpdate:r}){const[n,o]=p.useState(ET),[a,i]=p.useState(!1),[l,c]=p.useState(null),[d,h]=p.useState(e),[u,f]=p.useState(!1),m=p.useMemo(()=>n.filter(v=>v.unread).length,[n]);p.useEffect(()=>{r==null||r(m)},[r,m]),p.useEffect(()=>{e&&i(_T())},[e]),p.useEffect(()=>{if(e){h(!0);const k=window.requestAnimationFrame(()=>f(!0));return()=>window.cancelAnimationFrame(k)}f(!1);const v=window.setTimeout(()=>h(!1),ST);return()=>window.clearTimeout(v)},[e]),p.useEffect(()=>{if(!d||typeof document>"u")return;const v=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=v}},[d]);const g=l?n.find(v=>v.id===l):null,x=v=>{o(k=>k.map(S=>S.id===v?{...S,unread:!1}:S))},N=()=>{o(v=>v.map(k=>({...k,unread:!1})))},b=()=>{CT(a),c(null),t()},y=v=>{c(v),x(v)};return d?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:`fixed inset-0 z-[1500] bg-black/35 transition-opacity duration-200 ${u?"opacity-100":"pointer-events-none opacity-0"}`,onClick:b}),s.jsxs("section",{className:`fixed bottom-0 left-1/2 z-[2500] flex h-[70dvh] w-full max-w-app -translate-x-1/2 flex-col overflow-hidden rounded-t-2xl border border-b-0 border-border bg-card shadow-2xl transition-transform duration-300 ease-[cubic-bezier(0.22,1,0.36,1)] will-change-transform ${u?"translate-y-0":"translate-y-full"}`,children:[s.jsxs("header",{className:"flex h-[60px] items-center justify-between border-b border-border px-5",children:[s.jsx("span",{className:"absolute left-1/2 top-2 h-1 w-12 -translate-x-1/2 rounded-full bg-border"}),s.jsx("h3",{className:"text-lg font-bold text-foreground",children:""}),s.jsx("button",{onClick:b,className:"rounded-full border border-border px-3 py-1 text-xs font-bold text-muted-foreground transition hover:bg-accent hover:text-foreground",children:""})]}),s.jsxs("div",{className:"overflow-y-auto overscroll-contain px-4 py-3 pb-[calc(16px+env(safe-area-inset-bottom,0px))]",children:[n.length>0?s.jsx("div",{className:"space-y-3",children:n.map(v=>{const k=RT[v.type]??sN;return s.jsxs("button",{onClick:()=>y(v.id),className:`flex w-full items-start gap-3 rounded-xl border p-3 text-left transition hover:-translate-y-0.5 hover:shadow-sm ${v.unread?"border-primary/30 bg-primary-bg/50":"border-border bg-muted/20"}`,children:[s.jsx("span",{className:`mt-0.5 inline-flex h-11 w-11 shrink-0 items-center justify-center rounded-xl border ${TT[v.type]}`,children:s.jsx(k,{className:"h-5 w-5"})}),s.jsxs("span",{className:"min-w-0 flex-1",children:[s.jsxs("span",{className:"mb-1 flex items-center gap-2",children:[s.jsx("span",{className:`inline-flex rounded-full px-2 py-0.5 text-[11px] font-bold ${AT[v.type]}`,children:PT[v.type]}),s.jsx("span",{className:"truncate text-sm font-bold text-foreground",children:v.title})]}),s.jsx("span",{className:"line-clamp-2 block text-sm text-muted-foreground",children:v.desc}),s.jsx("span",{className:"mt-1 block text-[11px] text-muted-foreground/80",children:v.time})]})]},v.id)})}):s.jsx("div",{className:"py-10 text-center text-sm text-muted-foreground",children:"  ."}),g&&s.jsxs("article",{className:"mt-4 rounded-xl border border-primary/20 bg-primary/5 p-4",children:[s.jsx("div",{className:"mb-1 text-xs font-bold text-primary",children:" "}),s.jsx("div",{className:"text-base font-bold text-foreground",children:g.title}),s.jsx("p",{className:"mt-2 text-sm leading-relaxed text-muted-foreground",children:g.desc})]}),m>0&&s.jsx("button",{onClick:N,className:"mt-4 w-full rounded-xl bg-header-navy py-2.5 text-sm font-bold text-header-navy-foreground transition hover:opacity-90",children:"  "}),s.jsxs("label",{className:"mt-4 flex cursor-pointer items-center gap-2 text-sm text-foreground",children:[s.jsx("input",{type:"checkbox",checked:a,onChange:v=>i(v.target.checked),className:"h-4 w-4 rounded border-border"}),"   "]})]})]})]}):null}function DT({isOpen:e,onClose:t,onOpenAccount:r}){const n=Yr(),o=a=>{t(),n(a)};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:`fixed inset-0 bg-foreground/40 z-[1500] transition-opacity duration-300 ${e?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,onClick:t}),s.jsxs("div",{className:`fixed top-0 bottom-0 left-0 w-[85%] max-w-[320px] bg-card z-[2500] flex flex-col transition-transform duration-300 ease-[cubic-bezier(0.33,1,0.68,1)] ${e?"translate-x-0 visible":"-translate-x-full invisible"}`,style:{left:"max(0px, calc(50% - 300px))"},children:[s.jsxs("div",{className:"px-6 pt-[34px] pb-6 border-b border-border",children:[s.jsxs("div",{className:"flex justify-between mb-2.5",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xl-app font-[800] text-foreground",children:""}),s.jsx("span",{className:"text-tiny font-bold text-primary bg-primary-bg px-2 py-1 rounded",children:""})]}),s.jsx("button",{onClick:t,className:"border border-border bg-transparent rounded-lg px-3.5 py-1.5 text-sm-app text-text-sub cursor-pointer",children:""})]}),s.jsx("div",{className:"text-sm-app text-text-sub",children:"manager@inopnc.com"})]}),s.jsxs("ul",{className:"list-none p-6 m-0 flex-1 overflow-y-auto",children:[[{label:"",path:"/"},{label:"",path:"/output"},{label:"",path:"/worklog"},{label:"",path:"/site"},{label:"",path:"/doc"}].map(a=>s.jsx("li",{className:"mb-6",children:s.jsx("button",{onClick:()=>o(a.path),className:"text-lg-app font-bold text-foreground cursor-pointer bg-transparent border-none p-0",children:a.label})},a.label)),s.jsxs("li",{className:"mb-6 flex justify-between items-center",children:[s.jsx("span",{className:"text-lg-app font-bold text-foreground",children:""}),s.jsx("button",{onClick:()=>{t(),r()},className:"text-sm-app font-bold text-primary bg-card border border-primary px-3.5 py-2 rounded-lg cursor-pointer",children:""})]})]}),s.jsx("div",{className:"px-6 py-6 border-t border-border",children:s.jsx("button",{onClick:()=>{t(),n("/auth")},className:"w-full h-14 bg-header-navy text-white border-none rounded-xl text-base-app font-bold cursor-pointer",children:""})})]})]})}function IT({isOpen:e,onClose:t}){const[r,n]=p.useState(""),[o,a]=p.useState("010-1234-5678"),[i,l]=p.useState(!0),[c,d]=p.useState(!1),h=()=>{q.success("  ."),t()};return s.jsxs("div",{className:`fixed inset-0 left-0 right-0 mx-auto max-w-app bg-background z-[2000] flex flex-col transition-transform duration-300 ease-[cubic-bezier(0.33,1,0.68,1)] ${e?"translate-y-0 visible":"translate-y-full invisible"}`,children:[s.jsxs("div",{className:"h-[60px] px-4 flex items-center justify-between bg-card border-b border-border shrink-0",children:[s.jsx("button",{onClick:t,className:"bg-transparent border-none p-1",children:s.jsx(Qi,{className:"w-6 h-6 text-foreground"})}),s.jsx("span",{className:"text-lg-app font-bold text-foreground",children:" "}),s.jsx("button",{onClick:h,className:"text-base-app font-bold text-primary bg-transparent border-none cursor-pointer",children:""})]}),s.jsxs("div",{className:"flex-1 px-5 py-6 overflow-y-auto",children:[s.jsx("div",{className:"flex flex-col items-center mb-8",children:s.jsxs("div",{className:"w-[100px] h-[100px] rounded-full bg-border relative flex items-center justify-center text-[36px] font-bold text-muted-foreground border-4 border-card shadow-lg",children:[s.jsx("span",{children:""}),s.jsx("button",{className:"absolute bottom-0 right-0 w-[34px] h-[34px] rounded-full bg-header-navy text-white border-[3px] border-card flex items-center justify-center cursor-pointer z-10 shadow-md",children:s.jsx(Mr,{className:"w-4 h-4"})})]})}),s.jsxs("section",{className:"mb-8",children:[s.jsx("span",{className:"text-sm-app font-bold text-text-sub block mb-3",children:" "}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-base-app text-text-sub mb-1.5 font-bold",children:""}),s.jsx("input",{type:"text",value:r,onChange:u=>n(u.target.value),className:"w-full h-12 px-3.5 border border-border rounded-xl text-base-app text-foreground bg-[hsl(var(--bg-input))] font-medium outline-none transition-all focus:border-primary focus:shadow-input-focus"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-base-app text-text-sub mb-1.5 font-bold",children:""}),s.jsx("input",{type:"email",value:"manager@inopnc.com",disabled:!0,className:"w-full h-12 px-3.5 border border-border rounded-xl text-base-app text-foreground bg-[hsl(var(--bg-input))] font-medium opacity-70"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-base-app text-text-sub mb-1.5 font-bold",children:""}),s.jsx("input",{type:"tel",value:o,onChange:u=>a(u.target.value),className:"w-full h-12 px-3.5 border border-border rounded-xl text-base-app text-foreground bg-[hsl(var(--bg-input))] font-medium outline-none transition-all focus:border-primary focus:shadow-input-focus"})]})]}),s.jsxs("section",{className:"mb-8",children:[s.jsx("span",{className:"text-sm-app font-bold text-text-sub block mb-3",children:" "}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-base-app text-text-sub mb-1.5 font-bold",children:" "}),s.jsx("input",{type:"password",placeholder:"  ",className:"w-full h-12 px-3.5 border border-border rounded-xl text-base-app text-foreground bg-[hsl(var(--bg-input))] font-medium outline-none transition-all focus:border-primary focus:shadow-input-focus placeholder:text-muted-foreground"})]})]}),s.jsxs("section",{className:"mb-8",children:[s.jsx("span",{className:"text-sm-app font-bold text-text-sub block mb-3",children:" "}),s.jsxs("div",{className:"flex justify-between items-center py-4 border-b border-border",children:[s.jsx("span",{className:"text-base-app text-foreground",children:" "}),s.jsxs("label",{className:"relative inline-block w-12 h-[26px]",children:[s.jsx("input",{type:"checkbox",checked:i,onChange:u=>l(u.target.checked),className:"opacity-0 w-0 h-0 peer"}),s.jsx("span",{className:"absolute cursor-pointer inset-0 bg-border rounded-full transition-colors peer-checked:bg-primary before:content-[''] before:absolute before:h-5 before:w-5 before:left-[3px] before:bottom-[3px] before:bg-white before:rounded-full before:transition-transform peer-checked:before:translate-x-[22px]"})]})]}),s.jsxs("div",{className:"flex justify-between items-center py-4",children:[s.jsx("span",{className:"text-base-app text-foreground",children:" "}),s.jsxs("label",{className:"relative inline-block w-12 h-[26px]",children:[s.jsx("input",{type:"checkbox",checked:c,onChange:u=>d(u.target.checked),className:"opacity-0 w-0 h-0 peer"}),s.jsx("span",{className:"absolute cursor-pointer inset-0 bg-border rounded-full transition-colors peer-checked:bg-primary before:content-[''] before:absolute before:h-5 before:w-5 before:left-[3px] before:bottom-[3px] before:bg-white before:rounded-full before:transition-transform peer-checked:before:translate-x-[22px]"})]})]})]}),s.jsxs("section",{className:"mb-8",children:[s.jsx("span",{className:"text-sm-app font-bold text-text-sub block mb-3",children:""}),s.jsxs("div",{className:"flex justify-between mb-5",children:[s.jsx("span",{className:"text-sm-app text-text-sub",children:" "}),s.jsx("span",{className:"text-sm-app text-foreground font-semibold",children:"v1.2.0"})]}),s.jsx("button",{onClick:()=>alert(" "),className:"text-destructive text-sm-app font-bold bg-transparent border-none p-0 cursor-pointer underline",children:" "})]})]})]})}function bN({title:e,onBack:t,onClose:r,onReset:n,onSave:o,resetDisabled:a,saveDisabled:i,backAriaLabel:l="",resetAriaLabel:c=" ",saveAriaLabel:d="  ",closeAriaLabel:h="",titleClassName:u,className:f,style:m}){return s.jsxs("header",{className:U("flex items-center justify-between border-b border-white/15 bg-black px-2",f),style:m,children:[s.jsxs("div",{className:"flex min-w-0 flex-1 items-center gap-1.5",children:[s.jsx("button",{type:"button",onClick:t,className:"rounded-full p-2 text-white transition active:bg-white/15","aria-label":l,children:s.jsx(ma,{className:"h-6 w-6"})}),s.jsx("span",{className:U("truncate text-lg-app font-bold text-white",u),children:e})]}),s.jsxs("div",{className:"flex shrink-0 items-center gap-1.5",children:[n&&s.jsx("button",{type:"button",onClick:n,disabled:a,className:"rounded-full p-2 text-white transition active:bg-white/15 disabled:cursor-not-allowed disabled:opacity-40","aria-label":c,children:s.jsx(xN,{className:"h-5 w-5"})}),o&&s.jsx("button",{type:"button",onClick:o,disabled:i,className:"rounded-full p-2 text-white transition active:bg-white/15 disabled:cursor-not-allowed disabled:opacity-40","aria-label":d,children:s.jsx(Cc,{className:"h-5 w-5"})}),s.jsx("button",{type:"button",onClick:r,className:"rounded-full p-2 text-white transition active:bg-white/15","aria-label":h,children:s.jsx(Je,{className:"h-6 w-6"})})]})]})}function MT({onZoomOut:e,onFit:t,onTogglePan:r,onZoomIn:n,onShare:o,panActive:a=!1,fitActive:i=!1,zoomOutDisabled:l=!1,zoomInDisabled:c=!1,className:d}){return s.jsxs("div",{"data-no-pan":"1",className:U("fixed bottom-[calc(env(safe-area-inset-bottom,0px)+12px)] left-1/2 z-[10005] flex w-[min(92vw,420px)] -translate-x-1/2 items-center justify-between gap-2 rounded-[50px] border border-[#333] bg-[#222] px-4 py-2.5 shadow-[0_10px_30px_rgba(0,0,0,0.5)] backdrop-blur",d),children:[s.jsxs("button",{"data-no-pan":"1",type:"button",onClick:e,disabled:l,className:"flex min-h-11 min-w-[44px] flex-1 flex-col items-center justify-center gap-0.5 rounded-full border-none bg-transparent text-[10px] font-medium text-white opacity-80 transition-opacity hover:opacity-100 disabled:cursor-not-allowed disabled:opacity-40",children:[s.jsx(pN,{className:"w-5 h-5"}),""]}),s.jsxs("button",{"data-no-pan":"1",type:"button",onClick:t,className:U("flex min-h-11 min-w-[44px] flex-1 flex-col items-center justify-center gap-0.5 rounded-full border-none bg-transparent text-[10px] font-medium transition-opacity",i?"text-primary opacity-100 font-bold":"text-white opacity-80 hover:opacity-100"),children:[s.jsx(mN,{className:"w-5 h-5"}),""]}),s.jsxs("button",{"data-no-pan":"1",type:"button",onClick:r,className:U("flex min-h-11 min-w-[44px] flex-1 flex-col items-center justify-center gap-0.5 rounded-full border-none bg-transparent text-[10px] font-medium transition-opacity",a?"text-primary opacity-100 font-bold":"text-white opacity-80 hover:opacity-100"),children:[s.jsx(oT,{className:"w-5 h-5"}),""]}),s.jsxs("button",{"data-no-pan":"1",type:"button",onClick:n,disabled:c,className:"flex min-h-11 min-w-[44px] flex-1 flex-col items-center justify-center gap-0.5 rounded-full border-none bg-transparent text-[10px] font-medium text-white opacity-80 transition-opacity hover:opacity-100 disabled:cursor-not-allowed disabled:opacity-40",children:[s.jsx(ga,{className:"w-5 h-5"}),""]}),s.jsxs("button",{"data-no-pan":"1",type:"button",onClick:o,className:"flex min-h-11 min-w-[44px] flex-1 flex-col items-center justify-center gap-0.5 rounded-full border-none bg-transparent text-[10px] font-medium text-white opacity-80 transition-opacity hover:opacity-100",children:[s.jsx(oh,{className:"w-5 h-5"}),""]})]})}function $T(e){return s.jsx(MT,{...e})}function LT({children:e,headerHeightPx:t,toolbarHeightPx:r,className:n,style:o}){return s.jsx("div",{className:U("relative flex-1 overflow-auto overscroll-contain bg-[#333]",n),style:{WebkitOverflowScrolling:"touch",touchAction:"pan-x pan-y pinch-zoom",paddingTop:`calc(${t}px + env(safe-area-inset-top))`,paddingBottom:`calc(${r}px + env(safe-area-inset-bottom) + 12px)`,...o},children:e})}const FT=280,UT="dev",my=`/@confirm3.html?v=${UT}`,BT="width=device-width, initial-scale=1.0, minimum-scale=0.5, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover",zT=e=>{let t=e.querySelector('meta[name="viewport"]');!t&&e.head&&(t=e.createElement("meta"),t.name="viewport",e.head.appendChild(t)),t&&(t.content=BT);const r=e.getElementById("viewport");r&&(r.style.touchAction="pan-x pan-y");const n=e.querySelector(".controls-pill");n&&(n.style.bottom="max(20px, env(safe-area-inset-bottom, 0px))")};function VT({isOpen:e,onClose:t}){const r=p.useRef(null),n=p.useRef(!1),[o,a]=p.useState(e),[i,l]=p.useState(!1),[c,d]=p.useState(!1),[h,u]=p.useState(!1);p.useEffect(()=>{if(typeof document>"u")return;const g=document.createElement("link");return g.rel="preload",g.as="document",g.href=my,document.head.appendChild(g),()=>{var x;(x=g.parentNode)==null||x.removeChild(g)}},[]),p.useEffect(()=>{if(e){a(!0),d(n.current),u(!1);const g=window.requestAnimationFrame(()=>l(!0));return()=>window.cancelAnimationFrame(g)}if(l(!1),!n.current){const g=window.setTimeout(()=>a(!1),FT);return()=>window.clearTimeout(g)}},[e]),p.useEffect(()=>{if(!e||typeof document>"u")return;const g=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=g}},[e]),p.useEffect(()=>{if(!o)return;const g=x=>{x.key==="Escape"&&t()};return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[o,t]);const f=p.useCallback(()=>{var g,x;try{const N=(g=r.current)==null?void 0:g.contentDocument;if(!N)return;zT(N),(x=N.body)==null||x.classList.add("iframe-mode"),n.current=!0,u(!1),d(!0)}catch{d(!1),u(!0)}},[]),m=p.useCallback(g=>{var b,y;const x=(b=r.current)==null?void 0:b.contentDocument;(y=r.current)==null||y.contentWindow;const N=x==null?void 0:x.getElementById(g);if(!N){q.error("   .");return}N.click()},[]);return o?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:`fixed inset-0 z-[3000] bg-black/45 transition-opacity duration-200 ${i?"opacity-100":"pointer-events-none opacity-0"}`,onClick:t}),s.jsxs("section",{className:`fixed inset-0 left-1/2 z-[3100] flex w-full max-w-app -translate-x-1/2 flex-col overflow-hidden bg-black shadow-2xl transition-transform duration-300 ease-[cubic-bezier(0.22,1,0.36,1)] ${i?"translate-y-0":"pointer-events-none translate-y-full"}`,style:{paddingTop:"env(safe-area-inset-top)"},children:[s.jsx(bN,{title:"",onBack:t,onClose:t,onReset:()=>m("btnReset"),onSave:()=>m("btnDownload"),resetDisabled:!c,saveDisabled:!c,backAriaLabel:"",resetAriaLabel:" ",saveAriaLabel:" ",closeAriaLabel:" ",className:"h-[60px] min-h-[60px]"}),s.jsxs("div",{className:"relative flex-1 bg-black",children:[s.jsx("iframe",{ref:r,title:"",src:my,onLoad:f,onError:()=>{d(!1),u(!0)},className:"h-full w-full border-0 bg-black",allow:"fullscreen",loading:"eager"}),!c&&!h&&s.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center text-sm-app font-semibold text-white/70",children:"  ..."}),h&&s.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center gap-3 bg-black/70 px-6 text-center",children:[s.jsx("p",{className:"text-sm-app font-semibold text-white",children:"  ."}),s.jsx("button",{onClick:()=>{var g,x;u(!1),d(!1),(x=(g=r.current)==null?void 0:g.contentWindow)==null||x.location.reload()},className:"rounded-lg border border-white/40 px-3 py-1.5 text-xs font-bold text-white",children:" "})]})]})]})]}):null}const WT="modulepreload",qT=function(e){return"/"+e},xy={},Qm=function(t,r,n){let o=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));o=Promise.allSettled(r.map(c=>{if(c=qT(c),c in xy)return;xy[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const u=document.createElement("link");if(u.rel=d?"stylesheet":WT,d||(u.as="script"),u.crossOrigin="",u.href=c,l&&u.setAttribute("nonce",l),document.head.appendChild(u),d)return new Promise((f,m)=>{u.addEventListener("load",f),u.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return o.then(i=>{for(const l of i||[])l.status==="rejected"&&a(l.reason);return t().catch(a)})},HT="inopnc_offline",KT=1,Nn="syncQueue",ah="offlineMedia";function cl(){return new Promise((e,t)=>{const r=indexedDB.open(HT,KT);r.onupgradeneeded=()=>{const n=r.result;n.objectStoreNames.contains(Nn)||n.createObjectStore(Nn,{keyPath:"id",autoIncrement:!0}),n.objectStoreNames.contains(ah)||n.createObjectStore(ah,{keyPath:"id",autoIncrement:!0}).createIndex("siteDate",["siteValue","workDate"])},r.onsuccess=()=>e(r.result),r.onerror=()=>t(r.error)})}async function hu(e){const t=await cl();return new Promise((r,n)=>{const i=t.transaction(Nn,"readwrite").objectStore(Nn).add(e);i.onsuccess=()=>r(i.result),i.onerror=()=>n(i.error)})}async function GT(){const e=await cl();return new Promise((t,r)=>{const o=e.transaction(Nn,"readonly").objectStore(Nn).getAll();o.onsuccess=()=>t(o.result),o.onerror=()=>r(o.error)})}async function QT(e){const t=await cl();return new Promise((r,n)=>{const o=t.transaction(Nn,"readwrite");o.objectStore(Nn).delete(e),o.oncomplete=()=>r(),o.onerror=()=>n(o.error)})}async function gy(e,t){const r=await cl();return new Promise((n,o)=>{const a=r.transaction(Nn,"readwrite"),i=a.objectStore(Nn),l=i.get(e);l.onsuccess=()=>{l.result&&i.put({...l.result,...t})},a.oncomplete=()=>n(),a.onerror=()=>o(a.error)})}async function YT(){const e=await cl();return new Promise((t,r)=>{const o=e.transaction(Nn,"readonly").objectStore(Nn).count();o.onsuccess=()=>t(o.result),o.onerror=()=>r(o.error)})}async function Ym(e){const t=await cl();return new Promise((r,n)=>{const a=t.transaction(ah,"readwrite").objectStore(ah).add(e);a.onsuccess=()=>r(a.result),a.onerror=()=>n(a.error)})}async function yN(){const e=await GT();let t=0,r=0;for(const n of e)if(n.status!=="syncing")try{switch(await gy(n.id,{status:"syncing"}),n.action){case"save_worklog":{const{saveWorklog:o}=await Qm(async()=>{const{saveWorklog:a}=await Promise.resolve().then(()=>bA);return{saveWorklog:a}},void 0);o(n.payload);break}case"upload_photo":case"upload_drawing":{const o=n.action==="upload_photo"?"sitePhotos":"siteDrawings",a=JSON.parse(localStorage.getItem(o)||"{}"),{siteValue:i,workDate:l,data:c}=n.payload;a[i]||(a[i]={}),a[i][l]||(a[i][l]=[]),a[i][l].push(c),localStorage.setItem(o,JSON.stringify(a));break}}await QT(n.id),t++}catch(o){console.error("Sync failed for item:",n.id,o),await gy(n.id,{status:"failed",retryCount:(n.retryCount||0)+1}),r++}return{synced:t,failed:r}}function vN(){const[e,t]=p.useState(navigator.onLine),[r,n]=p.useState(0),[o,a]=p.useState(!1),i=p.useCallback(async()=>{try{const c=await YT();n(c)}catch{}},[]),l=p.useCallback(async()=>{if(!(!navigator.onLine||o)){a(!0);try{const c=await yN();c.synced>0&&q.success(`${c.synced}  `),c.failed>0&&q.error(`${c.failed}   -  `),await i()}catch(c){console.error("Sync error:",c)}finally{a(!1)}}},[o,i]);return p.useEffect(()=>{const c=()=>{t(!0),q.success("  -    ..."),l()},d=()=>{t(!1),q.warning("  -   ",{duration:4e3})};return window.addEventListener("online",c),window.addEventListener("offline",d),i(),()=>{window.removeEventListener("online",c),window.removeEventListener("offline",d)}},[l,i]),{isOnline:e,pendingCount:r,isSyncing:o,syncNow:l,refreshPending:i}}function JT(){const{isOnline:e,pendingCount:t,isSyncing:r,syncNow:n}=vN();return e&&t===0?null:s.jsxs("div",{className:`fixed bottom-0 left-0 right-0 z-50 flex items-center justify-between px-4 py-2.5 text-sm font-medium transition-all duration-300 ${e?"bg-amber-500 text-white":"bg-red-600 text-white"}`,style:{maxWidth:600,margin:"0 auto"},children:[s.jsxs("div",{className:"flex items-center gap-2",children:[e?s.jsx(vT,{className:"w-4 h-4"}):s.jsx(yT,{className:"w-4 h-4 animate-pulse"}),s.jsx("span",{children:e?`   ${t}`:"  -      "})]}),e&&t>0&&s.jsxs("button",{onClick:n,disabled:r,className:"flex items-center gap-1 px-3 py-1 rounded-full bg-white/20 hover:bg-white/30 transition-colors disabled:opacity-50",children:[r?s.jsx(mN,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(sT,{className:"w-3.5 h-3.5"}),s.jsx("span",{className:"text-xs",children:r?" ...":""})]})]})}const XT="hideNotifications",ZT=()=>{if(typeof window>"u")return!1;try{return window.localStorage.getItem(XT)===new Date().toDateString()}catch{return!1}};function eA(){const[e,t]=p.useState(!1),[r,n]=p.useState(!1),[o,a]=p.useState(!1),[i,l]=p.useState(!1),[c,d]=p.useState(!1),[h,u]=p.useState(2),[f,m]=p.useState(!1),[g,x]=p.useState(!1);p.useEffect(()=>{r||f||h<=0||ZT()||(n(!0),m(!0))},[f,h,r]),p.useEffect(()=>{const b=y=>{if(y.origin!==window.location.origin)return;const v=y.data;!v||v.type!=="inopnc-drawing"||x(!!v.open)};return window.addEventListener("message",b),()=>window.removeEventListener("message",b)},[]);const N=()=>{m(!0),n(!0)};return s.jsxs("div",{className:"inopnc-app",style:{"--app-header-height":g?"0px":"114px","--home-section-mt":g?"0px":"-0.5rem","--home-section-mb":g?"0px":"-1.5rem"},children:[!g&&s.jsx(wT,{onSearch:()=>t(!0),onCert:()=>d(!0),onNotify:N,onMenu:()=>a(!0),notificationCount:h}),s.jsx("main",{className:"px-4",style:{paddingTop:"var(--app-header-height, 114px)",paddingBottom:g?"0px":"1.5rem"},children:s.jsx(dP,{})}),s.jsx(kT,{isOpen:e,onClose:()=>t(!1),onOpenCert:()=>d(!0)}),s.jsx(OT,{isOpen:r,onClose:()=>n(!1),onBadgeUpdate:u}),s.jsx(DT,{isOpen:o,onClose:()=>a(!1),onOpenAccount:()=>l(!0)}),s.jsx(IT,{isOpen:i,onClose:()=>l(!1)}),s.jsx(VT,{isOpen:c,onClose:()=>d(!1)}),s.jsx(JT,{})]})}const tA="/assets/flash-CePliuWt.png",rA="/assets/site-info-CZu9Bop0.png",nA="/assets/worklog-Dy8Q5q5X.png",sA="/assets/output-DXfNHp1M.png",oA="/assets/docs-C1gEQT8z.png",aA="/assets/request-BEN5-YEM.png",by=[{id:1,name:"  101",status:"ing",days:120,mp:450,address:"   1 12-3",worker:8,manager:"",safety:"",affil:"",lastUpdate:"2025-12-24 08:30",hasDraw:!0,hasPhoto:!0,hasPTW:!0,hasLog:!0,hasAction:!1},{id:2,name:"  ",status:"wait",days:45,mp:120,address:"   123-45",worker:3,manager:"",safety:"",affil:"",lastUpdate:"2025-12-24 09:00",hasDraw:!0,hasPhoto:!1,hasPTW:!1,hasLog:!0,hasAction:!0}],yy={:{text:" 2C",icon:uy},:{text:" 4C",icon:nT},:{text:" 8C",icon:Km},:{text:" 3C",icon:Km},:{text:" 2C",icon:uy}};function iA(e){const t=Object.keys(yy).find(r=>e.includes(r));return t?yy[t]:{text:" 3C",icon:Km}}const lA=[{label:"",path:"/site",icon:rA},{label:"",path:"/worklog",icon:nA,badge:3,badgeColor:"bg-green-600"},{label:"",path:"/output",icon:sA},{label:"",path:"/doc",icon:oA},{label:"",path:"/request",icon:aA,badge:2,badgeColor:"bg-violet-500"}],vy=[{type:"",text:"      .",badgeCls:"bg-header-navy"},{type:"",text:" PDF   .",badgeCls:"bg-primary"},{type:"",text:"     .",badgeCls:"bg-header-navy"}];function wN(){const e=Yr(),t=new Date,r=`${String(t.getMonth()+1).padStart(2,"0")}.${String(t.getDate()).padStart(2,"0")} (${["","","","","","",""][t.getDay()]})`,[n,o]=p.useState(0);return p.useEffect(()=>{const a=setInterval(()=>o(i=>(i+1)%vy.length),4e3);return()=>clearInterval(a)},[]),s.jsxs("div",{className:"animate-fade-in",children:[s.jsxs("div",{className:"mb-5 pt-2.5",children:[s.jsxs("div",{className:"flex items-center gap-1.5 mb-4 px-1",children:[s.jsx("img",{src:tA,alt:"",className:"w-5 h-5 object-contain"}),s.jsx("span",{className:"text-[20px] font-bold text-header-navy tracking-tight",children:""})]}),s.jsx("div",{className:"grid grid-cols-5 gap-0.5",children:lA.map(a=>s.jsxs("button",{onClick:()=>e(a.path),className:"flex flex-col items-center gap-1.5 py-1 cursor-pointer bg-transparent border-none active:scale-95 transition-transform",children:[s.jsxs("div",{className:"relative inline-block",children:[s.jsx("img",{src:a.icon,alt:a.label,className:"w-[46px] h-[46px] object-contain drop-shadow-[0_2px_4px_rgba(0,0,0,0.06)]"}),a.badge&&s.jsx("span",{className:U("absolute top-0 right-0 translate-x-1/2 -translate-y-1/2 min-w-[18px] h-[18px] px-[5px] rounded-full text-white text-[10px] font-black flex items-center justify-center shadow-[0_2px_6px_rgba(0,0,0,0.25)] border-2 border-background z-10 leading-none",a.badgeColor,a.badgeColor==="bg-violet-500"&&"animate-pulse"),children:a.badge})]}),s.jsx("span",{className:"text-[13px] font-bold text-foreground text-center whitespace-nowrap tracking-tight",children:a.label})]},a.label))})]}),s.jsxs("div",{className:"bg-card rounded-xl border border-border shadow-soft h-14 mb-5 flex items-center px-4 gap-3 relative overflow-hidden",children:[vy.map((a,i)=>s.jsxs("div",{className:U("absolute inset-0 flex items-center px-4 gap-3 transition-all duration-500",i===n?"opacity-100 translate-x-0":"opacity-0 translate-x-full"),children:[s.jsx("span",{className:U("text-[12px] font-bold px-2.5 py-1.5 rounded-md text-white whitespace-nowrap",a.badgeCls),children:a.type}),s.jsx("span",{className:"text-[15px] font-medium text-foreground flex-1 truncate",children:a.text})]},i)),s.jsx(xa,{className:"w-[18px] h-[18px] text-text-sub relative z-10 ml-auto"})]}),s.jsxs("div",{className:"bg-card rounded-2xl p-[22px] mb-6 shadow-soft",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(lr,{className:"w-5 h-5 text-header-navy"}),s.jsx("span",{className:"text-[19px] font-[800] text-header-navy",children:"  "})]}),s.jsx("span",{className:"text-[14px] text-primary bg-primary/10 px-3 py-1.5 rounded-full font-bold",children:r})]}),s.jsx("div",{className:"flex flex-col gap-3",children:by.map(a=>s.jsxs("div",{className:"flex justify-between items-center bg-muted/50 p-3.5 px-[18px] rounded-xl",children:[s.jsx("span",{className:"text-[16px] font-bold text-foreground flex-1 truncate pr-2",children:a.name}),s.jsxs("span",{className:"text-[16px] font-bold text-primary flex items-center gap-1",children:[s.jsx(Ea,{className:"w-[18px] h-[18px]"})," ",a.worker,""]})]},a.id))})]}),by.map(a=>{const i=iA(a.address),l=i.icon;return s.jsxs("div",{className:"bg-card rounded-2xl shadow-soft mb-5 overflow-hidden relative",children:[s.jsx("span",{className:U("absolute top-0 right-0 text-[11px] font-bold px-3 py-1 text-white rounded-bl-xl z-10",a.status==="ing"?"bg-blue-500":"bg-violet-500"),children:a.status==="ing"?"":""}),s.jsxs("div",{className:"p-5 border-b border-border",children:[s.jsx("span",{className:"text-[15px] font-medium text-text-sub block mb-1",children:a.lastUpdate}),s.jsx("div",{className:"text-[20px] font-[800] text-header-navy mb-4 w-[85%]",children:a.name}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx("span",{className:"text-[13px] font-bold px-2.5 py-1 rounded-md bg-indigo-50 text-indigo-500 border border-indigo-200",children:""}),s.jsx("span",{className:"text-[13px] font-bold px-2.5 py-1 rounded-md bg-primary/10 text-primary border border-primary/30",children:a.affil}),s.jsxs("span",{className:"text-[13px] font-bold px-2.5 py-1 rounded-md bg-muted text-text-sub border border-border flex items-center gap-1",children:[s.jsx(l,{className:"w-3.5 h-3.5"}),i.text]})]}),s.jsxs("div",{className:"flex gap-1.5 items-center pl-2 border-l border-border ml-1",children:[s.jsx(os,{className:U("w-4 h-4",a.hasDraw?"text-header-navy":"text-border")}),s.jsx(Mr,{className:U("w-4 h-4",a.hasPhoto?"text-header-navy":"text-border")}),s.jsx(yr,{className:U("w-4 h-4",a.hasPTW?"text-header-navy":"text-border")}),s.jsx(Pr,{className:U("w-4 h-4",a.hasLog?"text-header-navy":"text-border")}),s.jsx(Ca,{className:U("w-4 h-4",a.hasAction?"text-header-navy":"text-border")})]})]})]}),s.jsxs("div",{className:"p-[22px]",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3.5 mb-5",children:[s.jsxs("div",{className:"bg-muted/50 rounded-xl p-3.5 text-center border border-muted",children:[s.jsx("span",{className:"block text-[15px] text-text-sub font-bold mb-1.5",children:" "}),s.jsxs("span",{className:"text-[20px] font-[800] text-foreground",children:[a.days,""]})]}),s.jsxs("div",{className:"bg-muted/50 rounded-xl p-3.5 text-center border border-muted",children:[s.jsx("span",{className:"block text-[15px] text-text-sub font-bold mb-1.5",children:" "}),s.jsxs("span",{className:"text-[20px] font-[800] text-primary",children:[a.mp,""]})]})]}),s.jsxs("div",{className:"flex justify-between items-center py-3 border-t border-dashed border-border text-[15px] text-text-sub",children:[s.jsx("span",{className:"font-bold text-[17px] w-20",children:""}),s.jsxs("span",{className:"flex-1 font-semibold text-foreground text-right pr-3 text-[17px] truncate",children:[a.manager," "]}),s.jsx("button",{onClick:()=>window.location.href="tel:01000000000",className:"w-9 h-9 rounded-[10px] bg-blue-50 border border-blue-100 text-blue-900 flex items-center justify-center cursor-pointer",children:s.jsx(Ro,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex justify-between items-center py-3 border-t border-dashed border-border text-[15px] text-text-sub",children:[s.jsx("span",{className:"font-bold text-[17px] w-20",children:""}),s.jsxs("span",{className:"flex-1 font-semibold text-foreground text-right pr-3 text-[17px] truncate",children:[a.safety," "]}),s.jsx("button",{onClick:()=>window.location.href="tel:01000000000",className:"w-9 h-9 rounded-[10px] bg-blue-50 border border-blue-100 text-blue-900 flex items-center justify-center cursor-pointer",children:s.jsx(Ro,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex justify-between items-center py-3 border-t border-dashed border-border text-[15px] text-text-sub",children:[s.jsx("span",{className:"font-bold text-[17px] w-20",children:""}),s.jsx("span",{className:"flex-1 font-semibold text-foreground text-right pr-3 text-[17px] truncate",children:a.address}),s.jsx("button",{className:"w-9 h-9 rounded-[10px] bg-blue-50 border border-blue-100 text-blue-900 flex items-center justify-center cursor-pointer",children:s.jsx(lr,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"grid grid-cols-5 gap-1.5 mt-5",children:[{label:"",icon:os,cls:"bg-primary/10 border-primary/30 text-primary"},{label:"",icon:Mr,cls:"bg-indigo-50 border-indigo-200 text-indigo-500"},{label:"",icon:yr,cls:"bg-blue-50 border-blue-200 text-blue-600"},{label:"",icon:Pr,cls:"bg-emerald-50 border-emerald-200 text-emerald-700"},{label:"",icon:Ca,cls:"bg-red-50 border-red-200 text-red-700"}].map(c=>s.jsxs("button",{className:U("flex flex-col items-center justify-center gap-1.5 py-3 rounded-xl border cursor-pointer transition-all active:scale-[0.98]",c.cls),children:[s.jsx(c.icon,{className:"w-6 h-6"}),s.jsx("span",{className:"text-[14px] font-bold",children:c.label})]},c.label))})]})]},a.id)})]})}function ls(){const{user:e,isTestMode:t,testRole:r}=Qt(),[n,o]=p.useState(null),[a,i]=p.useState(!0);return p.useEffect(()=>{if(t){o(r),i(!1);return}if(!e){o(null),i(!1);return}(async()=>{const{data:c}=await me.from("user_roles").select("role").eq("user_id",e.id).maybeSingle();o((c==null?void 0:c.role)??"worker"),i(!1)})()},[e,t,r]),{role:n,isAdmin:n==="admin",isPartner:n==="partner",isWorker:n==="worker",loading:a}}const cA="inopnc_blobs_v1",To="blobs",dA=1,Yl=new Map;function Hh(){return typeof window<"u"&&typeof indexedDB<"u"}function vg(e){return new Promise((t,r)=>{e.oncomplete=()=>t(),e.onerror=()=>r(e.error),e.onabort=()=>r(e.error)})}function wg(){return new Promise((e,t)=>{if(!Hh()){t(new Error("indexeddb_unavailable"));return}const r=indexedDB.open(cA,dA);r.onupgradeneeded=()=>{const n=r.result;n.objectStoreNames.contains(To)||n.createObjectStore(To)},r.onsuccess=()=>e(r.result),r.onerror=()=>t(r.error)})}function uA(e,t,r){return`att_${e}_${t}_${Date.now()}_${r}_${Math.random().toString(36).slice(2,8)}`}async function hA(e){if(!Hh())return null;const t=await wg();try{const r=t.transaction(To,"readonly"),o=r.objectStore(To).get(e),a=await new Promise((i,l)=>{o.onsuccess=()=>i(o.result??null),o.onerror=()=>l(o.error)});return await vg(r),a}finally{t.close()}}function jg(e){if(!e||typeof e!="object")return!1;const t=e;return typeof t.id=="string"&&(t.type==="photo"||t.type==="drawing")&&typeof t.status=="string"&&typeof t.timestamp=="string"}async function wy(e){const{worklogId:t,type:r,files:n,defaultStatus:o}=e;if(!Hh())return[];if(!Array.isArray(n)||n.length===0)return[];const a=await wg();try{const i=a.transaction(To,"readwrite"),l=i.objectStore(To),c=[];return n.forEach((d,h)=>{const u=uA(t||"temp",r,h),f={id:u,type:r,status:o,timestamp:new Date().toISOString()};c.push(f),l.put(d,u)}),await vg(i),c}finally{a.close()}}async function fu(e){if(!e)return null;if(Yl.has(e))return Yl.get(e)||null;const t=await hA(e);if(!t)return null;const r=URL.createObjectURL(t);return Yl.set(e,r),r}function Ec(e){const t=Yl.get(e);t&&(URL.revokeObjectURL(t),Yl.delete(e))}async function fA(e){if(!Hh()||!e)return;Ec(e);const t=await wg();try{const r=t.transaction(To,"readwrite");r.objectStore(To).delete(e),await vg(r)}finally{t.close()}}const jN="inopnc_worklogs_unified",pA="sitePhotos",mA="siteDrawings";function ih(e){const t=String(e||"").toLowerCase();return t==="pending"||t==="approved"||t==="rejected"||t==="draft"?t:t==="submitted"?"pending":t==="reject"?"rejected":"draft"}function jy(e){return e==="photo"?"after":"progress"}function Gn(e){return!e||typeof e!="object"?null:e}function lh(e,t,r){if(!Array.isArray(e))return[];const n=new Date().toISOString();return e.map((o,a)=>{if(jg(o))return{...o,type:t};if(!o||typeof o!="object")return null;const i=o;if(typeof i.id=="string"){const l={id:i.id,type:t,status:String(i.status||jy(t)),timestamp:typeof i.timestamp=="string"?i.timestamp:n};return typeof i.url=="string"&&i.url.trim()&&(l.url=i.url),l}return typeof i.url=="string"?{id:`legacy_${r}_${t}_${a}`,type:t,status:String(i.status||jy(t)),timestamp:typeof i.timestamp=="string"?i.timestamp:n,url:i.url}:null}).filter(Boolean)}function xA(e){const t=Gn(e);if(!t)return null;const r=typeof t.id=="string"?t.id:`wl_${Date.now()}_${Math.random().toString(36).slice(2,8)}`,n=lh(t.photos,"photo",r),o=lh(t.drawings,"drawing",r),a=Math.max(Number(t.photoCount||0),n.length),i=Math.max(Number(t.drawingCount||0),o.length);return{id:r,siteValue:String(t.siteValue||t.site_id||t.siteName||t.site_name||""),siteName:String(t.siteName||t.site_name||""),createdBy:typeof t.createdBy=="string"?t.createdBy:void 0,dept:String(t.dept||""),workDate:String(t.workDate||t.work_date||""),manpower:Array.isArray(t.manpower)?t.manpower:[],workSets:Array.isArray(t.workSets)?t.workSets:[],materials:Array.isArray(t.materials)?t.materials:[],photos:n,drawings:o,photoCount:a,drawingCount:i,status:ih(t.status),createdAt:String(t.createdAt||t.created_at||new Date().toISOString()),updatedAt:typeof t.updatedAt=="string"?t.updatedAt:void 0,version:Math.max(1,Number(t.version||1)),weather:typeof t.weather=="string"?t.weather:""}}function ch(e,t){return(e||t||"").trim().toLowerCase()}function gA(){try{const e=JSON.parse(localStorage.getItem(jN)||"[]");return Array.isArray(e)?e.map(xA).filter(Boolean):[]}catch{return[]}}function dh(e){localStorage.setItem(jN,JSON.stringify(e))}function NN(e){const t=Gn(e);return t&&typeof t.url=="string"?t.url:""}function kN(e,t){const r=Gn(e);return r&&typeof r.timestamp=="string"?r.timestamp:t}function Oa(){return gA()}function Ng(e){const t=ch(e,"");return Oa().filter(r=>ch(r.siteValue,r.siteName)===t)}function kg(e){const t=Oa(),r=new Date().toISOString(),n=ch(e.siteValue,e.siteName),o=lh(e.photos||[],"photo",e.id||"new"),a=lh(e.drawings||[],"drawing",e.id||"new"),i=Math.max(Number(e.photoCount||0),o.length),l=Math.max(Number(e.drawingCount||0),a.length);let c=-1;if(e.id&&(c=t.findIndex(h=>h.id===e.id)),c<0&&(c=t.findIndex(h=>ch(h.siteValue,h.siteName)===n&&h.workDate===e.workDate)),c>=0){const h=t[c],u=Math.max(h.version+1,Number(e.version||0)||h.version+1),f={...h,...e,id:h.id,siteValue:e.siteValue||h.siteValue,siteName:e.siteName||h.siteName,createdAt:h.createdAt,updatedAt:r,version:u,status:ih(e.status||h.status),photos:o.length>0?o:h.photos,drawings:a.length>0?a:h.drawings,photoCount:i>0?i:h.photoCount,drawingCount:l>0?l:h.drawingCount,weather:e.weather||""};return t[c]=f,dh(t),f}const d={...e,id:e.id||`wl_${Date.now()}_${Math.random().toString(36).slice(2,8)}`,status:ih(e.status||"draft"),createdAt:e.createdAt||r,updatedAt:e.updatedAt,version:Math.max(1,Number(e.version||1)),photos:o,drawings:a,photoCount:i,drawingCount:l,weather:e.weather||""};return t.unshift(d),dh(t),d}function SN(e,t){const r=Oa(),n=r.findIndex(o=>o.id===e);return n<0?!1:(r[n].status=ih(t),r[n].updatedAt=new Date().toISOString(),dh(r),!0)}function _N(e,t){const r=(()=>{try{const o=JSON.parse(localStorage.getItem(pA)||"{}");return o[e]?Object.values(o[e]).flat():[]}catch{return[]}})(),n=Ng(e).filter(o=>!t).flatMap(o=>(o.photos||[]).map((a,i)=>{const l=NN(a);return l?{id:i,url:l,badge:"",type:"photo",version:o.version,timestamp:kN(a,o.createdAt),siteName:o.siteName,workDate:o.workDate}:null}).filter(Boolean));return[...r,...n]}function CN(e,t){const r=(()=>{try{const o=JSON.parse(localStorage.getItem(mA)||"{}");return o[e]?Object.values(o[e]).flat():[]}catch{return[]}})(),n=Ng(e).filter(o=>!t).flatMap(o=>(o.drawings||[]).map(a=>{const i=NN(a);return i?{img:i,version:o.version,timestamp:kN(a,o.createdAt),siteName:o.siteName,workDate:o.workDate}:null}).filter(Boolean));return[...r,...n]}function EN(){if(!(Oa().length>0))try{const t=JSON.parse(localStorage.getItem("siteWorklogs")||"{}"),r=[],n=Gn(t)||{};Object.entries(n).forEach(([i,l])=>{const c=Gn(l);c&&Object.entries(c).forEach(([d,h])=>{const u=Gn(h),f=Gn(u==null?void 0:u.baseInfo);if(!u||!f)return;const m=Array.isArray(u.versions)?u.versions:[],g=Gn(m[m.length-1]);r.push({id:`wl_migrated_${i}_${d}`,siteValue:typeof f.siteValue=="string"?f.siteValue:i,siteName:typeof f.siteName=="string"?f.siteName:"",dept:typeof f.dept=="string"?f.dept:"",workDate:typeof f.workDate=="string"?f.workDate:d,manpower:Array.isArray(f.manpower)?f.manpower:[],workSets:Array.isArray(f.workSets)?f.workSets:[],materials:Array.isArray(g==null?void 0:g.materials)?g.materials:[],photos:[],drawings:[],photoCount:Number((g==null?void 0:g.photoCount)||0),drawingCount:Number((g==null?void 0:g.drawingCount)||0),status:"draft",createdAt:typeof f.createdAt=="string"?f.createdAt:new Date().toISOString(),updatedAt:typeof f.updatedAt=="string"?f.updatedAt:void 0,version:Math.max(1,m.length||1),weather:""})})});const o=JSON.parse(localStorage.getItem("inopnc_worklogs_v4_site_based")||"{}"),a=Gn(o)||{};Object.entries(a).forEach(([i,l])=>{Array.isArray(l)&&l.forEach(c=>{const d=Gn(c);if(!d)return;const h=typeof d.workDate=="string"?d.workDate:"";r.find(f=>f.siteValue===i&&f.workDate===h)||r.push({id:`wl_v4_${i}_${h}`,siteValue:typeof d.siteValue=="string"?d.siteValue:i,siteName:typeof d.site=="string"?d.site:"",dept:typeof d.dept=="string"?d.dept:"",workDate:h,manpower:Array.isArray(d.manpower)?d.manpower:[],workSets:Array.isArray(d.workSets)?d.workSets:[],materials:Array.isArray(d.materials)?d.materials:[],photos:[],drawings:[],photoCount:Number(d.photoCount||0),drawingCount:0,status:"draft",createdAt:typeof d.savedAt=="string"?d.savedAt:new Date().toISOString(),version:1,weather:""})})}),r.length>0&&dh(r)}catch{}}const bA=Object.freeze(Object.defineProperty({__proto__:null,getAllWorklogs:Oa,getDrawingsForSite:CN,getPhotosForSite:_N,getWorklogsBySite:Ng,migrateOldWorklogs:EN,saveWorklog:kg,updateWorklogStatus:SN},Symbol.toStringTag,{value:"Module"})),yA=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i,PN="inopnc_worklog_attachment_refs_v1";function Gc(e){const t=String(e||"").toLowerCase();return t==="draft"||t==="pending"||t==="approved"||t==="rejected"?t:t==="submitted"?"pending":t==="reject"?"rejected":"draft"}function vA(e){return e==="photo"?"after":"progress"}function Ao(e,t){if(!Array.isArray(e))return[];const r=new Date().toISOString();return e.map(n=>{if(jg(n))return{...n,type:t};if(!n||typeof n!="object")return null;const o=n;if(typeof o.id!="string")return null;const a={id:o.id,type:t,status:typeof o.status=="string"?o.status:vA(t),timestamp:typeof o.timestamp=="string"?o.timestamp:r};return typeof o.url=="string"&&o.url.trim()&&(a.url=o.url),a}).filter(Boolean)}function Sg(){if(typeof window>"u")return{};try{const e=JSON.parse(localStorage.getItem(PN)||"{}");if(!e||typeof e!="object")return{};const t={};return Object.entries(e).forEach(([r,n])=>{if(!n||typeof n!="object")return;const o=n;t[r]={photos:Ao(o.photos,"photo"),drawings:Ao(o.drawings,"drawing")}}),t}catch{return{}}}function wA(e){typeof window>"u"||localStorage.setItem(PN,JSON.stringify(e))}function _g(e){return Sg()[e]||{photos:[],drawings:[]}}function Jm(e,t,r){if(!e)return;const n=Sg();n[e]={photos:Ao(t,"photo"),drawings:Ao(r,"drawing")},wA(n)}function Jl(e,t){const r=Math.max(Number(e.photoCount||0),t.photos.length),n=Math.max(Number(e.drawingCount||0),t.drawings.length);return{photoCount:r,drawingCount:n}}function uh(e,t,r){const n=r||_g(e.id),o=Math.max(Number((t==null?void 0:t.photoCount)||0),n.photos.length),a=Math.max(Number((t==null?void 0:t.drawingCount)||0),n.drawings.length);return{id:e.id,siteValue:e.site_id||"",siteName:e.site_name||"",createdBy:e.created_by||void 0,dept:e.dept||"",workDate:e.work_date||"",manpower:(e.worklog_manpower||[]).map(i=>({id:Number(i.id)||Date.now(),worker:i.worker_name||"",workHours:Number(i.work_hours||0),isCustom:!!i.is_custom,locked:!!i.locked})),workSets:(e.worklog_worksets||[]).map(i=>({id:Number(i.id)||Date.now(),member:i.member||"",process:i.process||"",type:i.work_type||"",location:{block:i.block||"",dong:i.dong||"",floor:i.floor||""},customMemberValue:"",customProcessValue:"",customTypeValue:""})),materials:(e.worklog_materials||[]).map(i=>({id:Number(i.id)||Date.now(),name:i.name||"",qty:Number(i.qty||0)})),photos:n.photos,drawings:n.drawings,photoCount:o,drawingCount:a,status:Gc(e.status),createdAt:e.created_at||new Date().toISOString(),updatedAt:e.updated_at||void 0,version:Math.max(1,Number(e.version||1)),weather:e.weather||""}}async function jA(e,t){if(t)return!0;const{data:r,error:n}=await me.rpc("has_role",{_role:"admin",_user_id:e});if(!n)return!!r;const{data:o}=await me.from("user_roles").select("role").eq("user_id",e).maybeSingle();return(o==null?void 0:o.role)==="admin"}async function NA(e,t,r){const n=e.trim(),{data:o}=await me.from("sites").select("id").eq("name",n).limit(1).maybeSingle();if(o!=null&&o.id)return o.id;if(!await jA(t,r))throw new Error("   .    .");const{data:i,error:l}=await me.from("sites").insert({name:n,created_by:t,status:""}).select("id").single();if(l){const{data:c}=await me.from("sites").select("id").eq("name",n).limit(1).maybeSingle();if(c!=null&&c.id)return c.id;throw l}return await me.from("site_members").insert({site_id:i.id,user_id:t,role:"worker"}),i.id}async function kA(e,t,r,n){if(t&&yA.test(t)){const{data:o,error:a}=await me.from("sites").select("id").eq("id",t).maybeSingle();if(!a&&(o!=null&&o.id))return o.id}return NA(e,r,n)}async function RN(e,t){if(t.manpower.length>0){const{error:r}=await me.from("worklog_manpower").insert(t.manpower.map(n=>({worklog_id:e,worker_name:n.worker,work_hours:n.workHours,is_custom:n.isCustom,locked:n.locked})));if(r)throw r}if(t.workSets.length>0){const{error:r}=await me.from("worklog_worksets").insert(t.workSets.map(n=>{var o,a,i;return{worklog_id:e,member:n.member===""?n.customMemberValue:n.member,process:n.process===""?n.customProcessValue:n.process,work_type:n.type===""?n.customTypeValue:n.type,block:((o=n.location)==null?void 0:o.block)||"",dong:((a=n.location)==null?void 0:a.dong)||"",floor:((i=n.location)==null?void 0:i.floor)||""}}));if(r)throw r}if(t.materials.length>0){const{error:r}=await me.from("worklog_materials").insert(t.materials.map(n=>({worklog_id:e,name:n.name,qty:n.qty})));if(r)throw r}}async function TN(e,t){await me.from("worklog_manpower").delete().eq("worklog_id",e),await me.from("worklog_worksets").delete().eq("worklog_id",e),await me.from("worklog_materials").delete().eq("worklog_id",e),await RN(e,t)}function Kh(){const{user:e,isTestMode:t}=Qt(),r=pr(),n=!!e,o=fr({queryKey:["worklogs"],queryFn:async()=>{if(!n)return EN(),Oa().map(u=>({...u,status:Gc(u.status)}));const{data:a,error:i}=await me.from("worklogs").select(`
          *,
          worklog_manpower(*),
          worklog_worksets(*),
          worklog_materials(*)
        `).order("work_date",{ascending:!1});if(i)throw i;const l=a||[],c=l.map(u=>u.id).filter(Boolean),d={},h=Sg();if(c.length>0){const{data:u}=await me.from("documents").select("worklog_id, doc_type").in("worklog_id",c);(u||[]).forEach(m=>{const g=m.worklog_id;g&&(d[g]||(d[g]={photoCount:0,drawingCount:0}),m.doc_type==="photo"&&(d[g].photoCount+=1),m.doc_type==="drawing"&&(d[g].drawingCount+=1))})}return l.map(u=>uh(u,d[u.id],h[u.id]))},enabled:n||t,refetchInterval:n?!1:2e3});return p.useEffect(()=>{if(!n)return;const a=me.channel("worklogs-changes").on("postgres_changes",{event:"*",schema:"public",table:"worklogs"},()=>r.invalidateQueries({queryKey:["worklogs"]})).subscribe();return()=>{me.removeChannel(a)}},[n,r]),o}function AN(){const{user:e,isTestMode:t,testRole:r}=Qt(),n=pr();return wr({mutationFn:async o=>{const a=new Date().toISOString(),i={photos:Ao(o.photos||[],"photo"),drawings:Ao(o.drawings||[],"drawing")};if(!e){const x=Jl(o,i);return kg({...o,siteValue:o.siteValue||o.siteName,photos:i.photos,drawings:i.drawings,photoCount:x.photoCount,drawingCount:x.drawingCount,createdAt:a,version:Math.max(1,Number(o.version||1))})}const l=t&&r==="admin",c=await kA(o.siteName,o.siteValue,e.id,l),{data:d,error:h}=await me.from("worklogs").select("id, version").eq("site_id",c).eq("work_date",o.workDate).order("created_at",{ascending:!1}).limit(1);if(h)throw h;const u=d==null?void 0:d[0],f=Gc(o.status);if(u!=null&&u.id){const{data:x,error:N}=await me.from("worklogs").update({site_id:c,site_name:o.siteName.trim(),dept:o.dept||"",work_date:o.workDate,status:f,version:Math.max(Number(u.version||1)+1,Number(o.version||0)||Number(u.version||1)+1),weather:o.weather||"",updated_at:a}).eq("id",u.id).select("*").single();if(N)throw N;await TN(u.id,o);const b=_g(u.id),y={photos:i.photos.length>0?i.photos:b.photos,drawings:i.drawings.length>0?i.drawings:b.drawings};return Jm(u.id,y.photos,y.drawings),uh({...x,worklog_manpower:[],worklog_worksets:[],worklog_materials:[]},Jl(o,y),y)}const{data:m,error:g}=await me.from("worklogs").insert({site_id:c,site_name:o.siteName.trim(),dept:o.dept||"",work_date:o.workDate,status:f,version:Math.max(1,Number(o.version||1)),weather:o.weather||"",created_by:e.id}).select("*").single();if(g)throw g;return await RN(m.id,o),Jm(m.id,i.photos,i.drawings),uh({...m,worklog_manpower:[],worklog_worksets:[],worklog_materials:[]},Jl(o,i),i)},onSuccess:()=>{n.invalidateQueries({queryKey:["worklogs"]})}})}function SA(){const{user:e}=Qt(),t=pr();return wr({mutationFn:async({id:r,entry:n})=>{const o=new Date().toISOString(),a={photos:Ao(n.photos||[],"photo"),drawings:Ao(n.drawings||[],"drawing")};if(!e){const h=Oa().find(m=>m.id===r),u={photos:a.photos.length>0?a.photos:(h==null?void 0:h.photos)||[],drawings:a.drawings.length>0?a.drawings:(h==null?void 0:h.drawings)||[]},f=Jl(n,u);return kg({...n,id:r,siteValue:n.siteValue||n.siteName,photos:u.photos,drawings:u.drawings,photoCount:f.photoCount,drawingCount:f.drawingCount,createdAt:(h==null?void 0:h.createdAt)||o,version:Math.max(Number((h==null?void 0:h.version)||1)+1,Number(n.version||0)||Number((h==null?void 0:h.version)||1)+1)})}const i=_g(r),l={photos:a.photos.length>0?a.photos:i.photos,drawings:a.drawings.length>0?a.drawings:i.drawings},{data:c,error:d}=await me.from("worklogs").update({site_name:n.siteName.trim(),dept:n.dept||"",work_date:n.workDate,status:Gc(n.status),version:Math.max(1,Number(n.version||1)),weather:n.weather||"",updated_at:o}).eq("id",r).select("*").single();if(d)throw d;return await TN(r,n),Jm(r,l.photos,l.drawings),uh({...c,worklog_manpower:[],worklog_worksets:[],worklog_materials:[]},Jl(n,l),l)},onSuccess:()=>{t.invalidateQueries({queryKey:["worklogs"]})}})}function _A(){const{user:e}=Qt(),t=pr();return wr({mutationFn:async({id:r,status:n})=>{const o=Gc(n);if(!e){SN(r,o);return}const{error:a}=await me.from("worklogs").update({status:o,updated_at:new Date().toISOString()}).eq("id",r);if(a)throw a},onSuccess:()=>{t.invalidateQueries({queryKey:["worklogs"]})}})}const CA={:[{value:"site1",text:"  101",dept:"HQ"},{value:"site2",text:"  P3",dept:"HQ"},{value:"site3",text:" ",dept:"HQ"},{value:"site13",text:"  ",dept:"HQ"},{value:"site14",text:"  2",dept:"HQ"},{value:"site15",text:" ",dept:"HQ"}],:[{value:"site4",text:" ",dept:"HQ"},{value:"site5",text:" ",dept:"HQ"},{value:"site16",text:"  ",dept:"HQ"},{value:"site17",text:"  ",dept:"HQ"}],:[{value:"site6",text:" ",dept:"HQ"},{value:"site7",text:" ",dept:"HQ"},{value:"site18",text:" ",dept:"HQ"}],:[{value:"site8",text:"  ",dept:"HQ"},{value:"site9",text:"  ",dept:"HQ"},{value:"site10",text:"  ",dept:"HQ"},{value:"site19",text:"  2",dept:"HQ"},{value:"site20",text:" ",dept:"HQ"}],:[{value:"site11",text:" ",dept:"HQ"},{value:"site12",text:" ",dept:"HQ"},{value:"site21",text:" ",dept:"HQ"}]},pu=Object.values(CA).flat().reverse(),Zf=pu.map(e=>({site_id:e.value,site_name:e.text,dept:e.dept}));function Ny(e){return(e||"").toLowerCase().replace(/\s+/g,"")}function EA(e,t,r=2){const n=(t||"").trim();if(n.length<r)return[];const o=Ny(n);return e.filter(a=>Ny(a.site_name).includes(o))}const PA=["","","","",""],RA=["","","",""],TA=["","","",""],AA=["","","",""],OA=[{id:1,label:"",path:"/output",icon:"https://github.com/gpdavidyang/INOPNC_WM_20250829/raw/main/public/icons/doc.png?raw=true"},{id:2,label:"",path:"/worklog",badge:3,badgeClass:"bg-green-600",icon:"https://github.com/gpdavidyang/INOPNC_WM_20250829/raw/main/public/icons/report.png?raw=true"},{id:3,label:"",path:"/site",icon:"https://github.com/gpdavidyang/INOPNC_WM_20250829/raw/main/public/icons/map.png?raw=true"},{id:4,label:"",path:"/doc",icon:"https://github.com/gpdavidyang/INOPNC_WM_20250829/raw/main/public/icons/doc.png?raw=true"},{id:5,label:"",path:"/request",icon:"https://github.com/gpdavidyang/INOPNC_WM_20250829/raw/main/public/icons/request.png?raw=true"},{id:6,label:"",path:"/doc",icon:"https://github.com/gpdavidyang/INOPNC_WM_20250829/raw/main/public/icons/photo.png?raw=true"}];function DA(){const{isPartner:e}=ls();return e?s.jsx(wN,{}):s.jsx(IA,{})}function IA(){const e=Yr(),t=new Date().toISOString().slice(0,10),r=AN(),[n,o]=p.useState(""),[a,i]=p.useState(""),[l,c]=p.useState(!1),[d,h]=p.useState("INOPNC"),[u,f]=p.useState(t),[m,g]=p.useState([{id:1,worker:"",workHours:1,isCustom:!1,locked:!0}]),[x,N]=p.useState([{id:Date.now(),member:"",process:"",type:"",location:{block:"",dong:"",floor:""},customMemberValue:"",customProcessValue:"",customTypeValue:""}]),[b,y]=p.useState([]),[v,k]=p.useState("NPC-1000"),[S,E]=p.useState(""),[C,R]=p.useState(!1),[F,T]=p.useState(""),[V,Y]=p.useState(null),W=p.useRef(null),[X,ne]=p.useState([]),te=p.useRef(null),ie=p.useRef(null),B=p.useRef(null),[$,K]=p.useState(null),[ce,ue]=p.useState(!1),[Z,fe]=p.useState(!1),[ve,Oe]=p.useState(null),[le,Ze]=p.useState(null),[gt,Ae]=p.useState(0),rt=!!n,et=!!u,je=m.some(w=>w.worker&&w.workHours>0),_t=x.length>0&&x.some(w=>{const I=w.member===""?w.customMemberValue:w.member,H=w.process===""?w.customProcessValue:w.process;return!!I&&!!H}),Ee=rt&&et&&je&&_t,It=p.useRef(null),ot=p.useRef(null),bt=p.useRef(null),yt=p.useCallback((w,I,H=2500)=>{Oe(w),Ze({target:w,message:I}),setTimeout(()=>{Oe(null),Ze(null)},H)},[]),cr=p.useCallback((w,I=.3)=>{if(!w)return;const H=w.getBoundingClientRect(),se=window.pageYOffset||document.documentElement.scrollTop,re=H.top+se-window.innerHeight*I;re>se&&window.scrollTo({top:re,behavior:"smooth"})},[]),[dr,jt]=p.useState(null),ft=p.useCallback(w=>{jt(w),setTimeout(()=>jt(null),2e3)},[]),Ot=a.trim()?pu.filter(w=>w.text.toLowerCase().includes(a.toLowerCase())):pu,J=w=>{o(w.value),i(w.text),h(`${w.text}`),c(!1),setTimeout(()=>{cr(bt.current,.35),setTimeout(()=>yt("workDate"," "),400)},300)},pe=w=>{f(w.target.value),w.target.value&&setTimeout(()=>{cr(ot.current,.3),yt("manpower-card","() ")},300)},Se=()=>{i(""),o(""),c(!0)},we=()=>{g(w=>[...w,{id:Date.now(),worker:"",workHours:1,isCustom:!1,locked:!1}])},ze=(w,I)=>{g(H=>H.map(se=>se.id===w?{...se,workHours:Math.max(0,Math.min(3.5,Math.round((se.workHours+I)*2)/2))}:se))},Pe=w=>{g(I=>I.filter(H=>H.id!==w))},De=(w,I)=>{g(H=>H.map(se=>se.id!==w?se:I==="__custom__"?{...se,isCustom:!0,worker:""}:{...se,worker:I,isCustom:!1}))},he=()=>{N(w=>[...w,{id:Date.now(),member:"",process:"",type:"",location:{block:"",dong:"",floor:""},customMemberValue:"",customProcessValue:"",customTypeValue:""}])},vt=w=>{N(I=>I.filter(H=>H.id!==w))},Ke=(w,I,H)=>{N(se=>se.map(re=>{if(re.id!==w)return re;const _e=re[I]===H?"":H;return I==="member"&&_e&&setTimeout(()=>yt(`ws-${w}-process`," "),100),{...re,[I]:_e}}))},Zt=(w,I,H)=>{N(se=>se.map(re=>re.id===w?{...re,location:{...re.location,[I]:H}}:re))},Ct=(w,I,H)=>{N(se=>se.map(re=>re.id===w?{...re,[I]:H}:re))},Ht=()=>{const w=parseFloat(S);if(!v||isNaN(w)||w<=0){q.error("  ");return}y(I=>[...I,{id:Date.now(),name:v,qty:w}]),E("")},de=w=>{y(I=>I.filter(H=>H.id!==w))},Ie=()=>{if(!F.trim()){q.error(" ");return}k(F.trim()),R(!1),q.success(" ")},Ge=w=>{var H;const I=(H=w.target.files)==null?void 0:H[0];if(I){if(I.size>10*1024*1024){q.error("  10MB  ");return}Y({name:I.name}),q.success(" "),w.target.value=""}},Me=w=>{const I=w.target.files;I&&(Array.from(I).forEach(H=>{if(!H.type.startsWith("image/"))return;const se=new FileReader;se.onload=re=>{ne(Le=>{var _e;return[...Le,{id:Date.now()+Math.random(),url:(_e=re.target)==null?void 0:_e.result,badge:"",type:"photo"}]})},se.readAsDataURL(H)}),w.target.value="")},Qe=w=>{const I=w.target.files;I&&(Array.from(I).forEach(H=>{if(!H.type.startsWith("image/"))return;const se=new FileReader;se.onload=re=>{ne(Le=>{var _e;return[...Le,{id:Date.now()+Math.random(),url:(_e=re.target)==null?void 0:_e.result,badge:"",type:"drawing"}]})},se.readAsDataURL(H)}),w.target.value="",ue(!1),q.success(" "))},pt=w=>{ne(I=>I.filter(H=>H.id!==w))},nt=w=>{ne(I=>I.map(H=>{if(H.id!==w)return H;const se=H.badge===""?"":H.badge===""?"":"";return{...H,badge:se}}))},ye=w=>{var se;const I=(se=w.target.files)==null?void 0:se[0];if(!I||!I.type.startsWith("image/")||$===null)return;const H=new FileReader;H.onload=re=>{ne(Le=>Le.map(_e=>{var Te;return _e.id===$?{..._e,url:(Te=re.target)==null?void 0:Te.result}:_e}))},H.readAsDataURL(I),w.target.value="",K(null)},qe=async()=>{var re,Le;if(!Ee){if(!n){ft("site-card"),q.error(" "),(re=It.current)==null||re.scrollIntoView({behavior:"smooth",block:"center"});return}if(!u){ft("site-card"),q.error(" ");return}if(!je){ft("manpower-card"),q.error("  "),(Le=ot.current)==null||Le.scrollIntoView({behavior:"smooth",block:"center"});return}if(!_t){q.error("  ");return}return}const w=gt+1;Ae(w);const I=new Date().toISOString(),H=pu.find(_e=>_e.value===n),se={siteValue:n,siteName:(H==null?void 0:H.text)||"",dept:d,workDate:u,manpower:m,workSets:x,materials:b,photoCount:X.filter(_e=>_e.type==="photo").length,drawingCount:X.filter(_e=>_e.type==="drawing").length,status:"draft",createdAt:I,version:w};if(!navigator.onLine){try{await hu({action:"save_worklog",payload:se,createdAt:I,retryCount:0,status:"pending"});for(const _e of X.filter(Te=>Te.type==="photo"))await Ym({type:"photo",dataUrl:_e.url,siteValue:n,siteName:(H==null?void 0:H.text)||"",workDate:u,badge:_e.badge,createdAt:I}),await hu({action:"upload_photo",payload:{siteValue:n,workDate:u,data:{..._e,version:w,timestamp:I,siteName:(H==null?void 0:H.text)||"",workDate:u}},createdAt:I,retryCount:0,status:"pending"});for(const _e of X.filter(Te=>Te.type==="drawing"))await Ym({type:"drawing",dataUrl:_e.url,siteValue:n,siteName:(H==null?void 0:H.text)||"",workDate:u,createdAt:I}),await hu({action:"upload_drawing",payload:{siteValue:n,workDate:u,data:{img:_e.url,version:w,timestamp:I,siteName:(H==null?void 0:H.text)||"",workDate:u}},createdAt:I,retryCount:0,status:"pending"});q.success(`   (v${w}) -    `,{duration:4e3})}catch{q.error("    ")}return}try{const _e=JSON.parse(localStorage.getItem("siteWorklogs")||"{}");_e[n]||(_e[n]={});const Te=u;_e[n][Te]?_e[n][Te].baseInfo={siteName:(H==null?void 0:H.text)||"",siteValue:n,dept:d,workDate:u,manpower:m,workSets:x,updatedAt:I}:_e[n][Te]={baseInfo:{siteName:(H==null?void 0:H.text)||"",siteValue:n,dept:d,workDate:u,manpower:m,workSets:x,createdAt:I},versions:[]},_e[n][Te].versions.push({version:w,timestamp:I,materials:b,photoCount:X.filter(xt=>xt.type==="photo").length,drawingCount:X.filter(xt=>xt.type==="drawing").length}),localStorage.setItem("siteWorklogs",JSON.stringify(_e));const kt=X.filter(xt=>xt.type==="photo");if(kt.length>0){const xt=JSON.parse(localStorage.getItem("sitePhotos")||"{}");xt[n]||(xt[n]={}),xt[n][u]||(xt[n][u]=[]),kt.forEach(tr=>{xt[n][u].push({...tr,version:w,timestamp:I,siteName:(H==null?void 0:H.text)||"",workDate:u})}),localStorage.setItem("sitePhotos",JSON.stringify(xt))}const er=X.filter(xt=>xt.type==="drawing");if(er.length>0){const xt=JSON.parse(localStorage.getItem("siteDrawings")||"{}");xt[n]||(xt[n]={}),xt[n][u]||(xt[n][u]=[]),er.forEach(tr=>{xt[n][u].push({img:tr.url,version:w,timestamp:I,siteName:(H==null?void 0:H.text)||"",workDate:u})}),localStorage.setItem("siteDrawings",JSON.stringify(xt))}const Ye="inopnc_worklogs_v4_site_based",ct=JSON.parse(localStorage.getItem(Ye)||"{}");ct[n]||(ct[n]=[]),ct[n]=ct[n].filter(xt=>xt.workDate!==u),ct[n].unshift({site:a,siteValue:n,dept:d,workDate:u,manpower:m,workSets:x,materials:b,photoCount:X.length,savedAt:I}),localStorage.setItem(Ye,JSON.stringify(ct)),r.mutate(se),q.success(`  (v${w})`)}catch{q.error("   ")}},He=()=>{window.confirm("   ?")&&(localStorage.removeItem("inopnc_work_log"),o(""),i(""),h("INOPNC"),f(t),g([{id:1,worker:"",workHours:1,isCustom:!1,locked:!0}]),N([{id:Date.now(),member:"",process:"",type:"",location:{block:"",dong:"",floor:""},customMemberValue:"",customProcessValue:"",customTypeValue:""}]),y([]),ne([]),Y(null),Ae(0),q(" "))},Ve=({wsId:w,field:I,chips:H,ws:se})=>{const re=`custom${I.charAt(0).toUpperCase()+I.slice(1)}Value`,Le=ve===`ws-${w}-${I}`;return s.jsxs("div",{id:`ws-${w}-${I}`,className:Le?"next-step-guide":"",children:[s.jsx("div",{className:"grid grid-cols-4 gap-2 mb-2",children:H.map(_e=>s.jsx("button",{onClick:()=>Ke(w,I,_e),className:`h-[54px] rounded-xl border text-base-app font-medium transition-all ${se[I]===_e?"bg-card border-primary text-primary font-bold shadow-sm":"bg-[hsl(var(--bg-input))] border-border text-text-sub"}`,children:_e},_e))}),se[I]===""&&s.jsx("input",{className:"w-full h-[54px] border border-border rounded-xl px-4 text-base-app mt-1 outline-none transition-all focus:border-primary focus:shadow-input-focus bg-[hsl(var(--bg-input))]",placeholder:" ",value:se[re],onChange:_e=>Ct(w,re,_e.target.value)})]})},it=[{label:"",value:a||" "},{label:"",value:d||"-"},{label:"",value:u},{label:"",value:`${m.length}`},{label:"",value:(()=>{const w=x[0];return w&&(w.member===""?w.customMemberValue:w.member)||"-"})()},{label:"",value:(()=>{const w=x[0];return w&&(w.process===""?w.customProcessValue:w.process)||"-"})()},{label:"",value:(()=>{const w=x[0];return w&&(w.type===""?w.customTypeValue:w.type)||"-"})()},{label:"//",value:(()=>{const w=x[0];return w&&`${w.location.block} ${w.location.dong} ${w.location.floor}`.trim()||"-"})()},{label:"/ ",value:` ${X.filter(w=>w.type==="photo").length},  ${X.filter(w=>w.type==="drawing").length}`}];return s.jsxs("div",{className:"animate-fade-in",children:[s.jsxs("section",{className:"py-2.5 pb-5",style:{paddingTop:0},children:[s.jsxs("div",{className:"flex items-center gap-1.5 mb-4 pl-1",children:[s.jsx("img",{src:"https://github.com/gpdavidyang/INOPNC_WM_20250829/raw/main/public/icons/Flash.png?raw=true",alt:"",className:"w-5 h-5 object-contain"}),s.jsx("span",{className:"text-lg-app font-bold text-header-navy tracking-[-0.5px]",children:""})]}),s.jsx("div",{className:"grid grid-cols-6 gap-0.5 w-full",children:OA.map(w=>s.jsxs("div",{onClick:()=>e(w.path),className:`flex flex-col items-center gap-1.5 cursor-pointer py-1 transition-transform active:scale-95 hover:-translate-y-0.5 ${w.badge!==void 0?"rounded-[14px] py-1.5 pb-2.5 overflow-visible":""}`,children:[s.jsxs("div",{className:"relative inline-block",children:[w.badge!==void 0&&w.badge>0&&s.jsx("span",{className:`absolute top-0 right-0 translate-x-1/2 -translate-y-1/2 min-w-[18px] h-[18px] px-[5px] rounded-full text-white text-[10px] font-[900] flex items-center justify-center shadow-md border-2 border-background z-10 animate-pulse ${w.badgeClass||"bg-destructive"}`,children:w.badge}),s.jsx("img",{src:w.icon,alt:w.label,className:"w-[46px] h-[46px] object-contain drop-shadow-sm"})]}),s.jsx("span",{className:"text-tiny font-bold text-foreground text-center leading-tight whitespace-nowrap tracking-[-0.5px]",children:w.label})]},w.id))})]}),s.jsxs("div",{ref:It,id:"site-card",className:`bg-card rounded-2xl p-6 mb-4 shadow-soft border border-border transition-all ${dr==="site-card"?"section-error-highlight":""}`,children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsxs("div",{className:"text-xl-app font-bold text-header-navy flex items-center gap-2",children:[s.jsx(lr,{className:"w-5 h-5 text-header-navy"})," ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx("span",{className:"bg-destructive/10 text-destructive text-tiny font-bold h-8 px-3.5 rounded-xl flex items-center",children:"*  "})]}),s.jsxs("div",{className:"mb-3 relative",children:[s.jsx("input",{type:"text",value:a,onChange:w=>{i(w.target.value),c(!0),w.target.value||o("")},onFocus:()=>c(!0),onBlur:()=>setTimeout(()=>c(!1),200),placeholder:"   ",className:"w-full h-[54px] bg-[hsl(var(--bg-input))] border border-border rounded-xl px-4 pr-16 text-base-app font-medium outline-none transition-all placeholder:text-muted-foreground focus:border-sky-focus focus:shadow-input-focus"}),a&&s.jsx("button",{onMouseDown:w=>{w.preventDefault(),Se()},className:"absolute right-10 top-1/2 -translate-y-1/2 w-5 h-5 rounded-full bg-muted-foreground/20 flex items-center justify-center text-muted-foreground hover:bg-muted-foreground/30 transition-all z-10",children:s.jsx(Je,{className:"w-3 h-3"})}),s.jsx("button",{onClick:()=>c(!l),className:"absolute right-4 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors bg-transparent border-none cursor-pointer",children:s.jsx(Lt,{className:"w-5 h-5"})}),l&&s.jsx("ul",{className:"absolute z-50 w-full mt-1.5 max-h-60 overflow-auto bg-card border border-border rounded-xl shadow-xl animate-[dropdownSlide_0.2s_ease-out]",children:Ot.length>0?Ot.map(w=>s.jsx("li",{onClick:()=>J(w),className:`px-4 py-3.5 cursor-pointer text-sm-app font-medium border-b border-border/30 last:border-0 hover:bg-background transition-colors ${n===w.value?"text-primary bg-primary/10":"text-foreground"}`,children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{children:w.text}),s.jsx("span",{className:"text-tiny text-text-sub bg-background px-2 py-0.5 rounded border border-border",children:w.dept})]})},w.value)):s.jsx("li",{className:"px-4 py-3 text-center text-text-sub",children:"  "})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm-app font-bold text-text-sub mb-2",children:[" ",s.jsx("span",{className:"text-sm font-medium ml-1",children:" "})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",readOnly:!0,value:d,placeholder:"",className:"w-full h-[54px] bg-background border border-border rounded-xl px-4 text-base-app font-medium text-text-sub cursor-not-allowed"}),s.jsx("div",{className:"absolute top-2 right-2",children:s.jsx("span",{className:"text-[11px] px-1.5 py-0.5 h-5 bg-indigo-50 text-indigo-500 border border-indigo-200 rounded font-bold",children:""})})]})]}),s.jsxs("div",{className:"relative",children:[s.jsx("label",{className:"block text-sm-app font-bold text-text-sub mb-2",children:""}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{ref:bt,type:"date",value:u,onChange:pe,className:`w-full h-[54px] bg-[hsl(var(--bg-input))] border rounded-xl px-3 text-sm-app font-medium outline-none transition-all cursor-pointer focus:border-sky-focus focus:shadow-input-focus ${ve==="workDate"?"border-2 border-sky-focus":"border-border"}`}),(le==null?void 0:le.target)==="workDate"&&s.jsx("div",{className:"absolute -top-8 left-1/2 -translate-x-1/2 text-white text-[12px] font-bold px-3 py-1.5 rounded-full shadow-lg z-50 whitespace-nowrap bg-sky-focus animate-[slideDown_0.3s_ease-out]",children:le.message})]})]})]})]}),s.jsxs("div",{ref:ot,id:"manpower-card",className:`bg-card rounded-2xl p-6 mb-4 shadow-soft border border-border transition-all ${dr==="manpower-card"?"section-error-highlight":""} ${ve==="manpower-card"?"next-step-guide":""}`,children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsxs("div",{className:"text-xl-app font-bold text-header-navy flex items-center gap-2",children:[s.jsx(Ea,{className:"w-5 h-5 text-header-navy"})," () ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsxs("button",{onClick:we,className:"bg-primary-bg text-primary h-8 px-3.5 rounded-xl text-sm-app font-bold flex items-center gap-1 hover:opacity-80 transition-opacity",children:[s.jsx("span",{className:"text-lg font-[900]",children:"+"})," "]})]}),s.jsx("div",{className:"flex flex-col gap-2.5",children:m.map(w=>s.jsxs("div",{className:"grid grid-cols-[minmax(0,1.05fr)_minmax(0,0.95fr)_auto] gap-2 items-center bg-[hsl(var(--bg-input))] p-3 rounded-2xl transition-all",children:[w.locked?s.jsx("div",{className:"text-base-app font-bold text-foreground truncate px-1",children:w.worker}):w.isCustom?s.jsx("input",{autoFocus:!0,placeholder:" ",value:w.worker,onChange:I=>De(w.id,I.target.value),className:"w-full h-[50px] bg-card border border-border rounded-xl px-4 outline-none text-sm-app font-medium placeholder:text-muted-foreground focus:border-primary focus:shadow-input-focus"}):s.jsxs("select",{value:w.worker,onChange:I=>De(w.id,I.target.value),className:"w-full h-[50px] bg-card border border-border rounded-xl px-4 text-sm-app font-medium appearance-none cursor-pointer outline-none focus:border-primary focus:shadow-input-focus",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%236b7280' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 14px center",backgroundSize:"16px"},children:[s.jsx("option",{value:"",children:""}),PA.map(I=>s.jsx("option",{value:I,children:I},I)),s.jsx("option",{value:"__custom__",children:""})]}),s.jsxs("div",{className:"flex h-12 border border-border rounded-xl bg-card overflow-hidden w-full min-w-0",children:[s.jsx("button",{onClick:()=>ze(w.id,-.5),className:"flex-1 flex items-center justify-center text-xl text-text-sub hover:bg-background",children:s.jsx(pN,{className:"w-4 h-4"})}),s.jsx("span",{className:"flex-1 flex items-center justify-center text-base-app font-bold text-primary tabular-nums border-x border-border",children:w.workHours.toFixed(1)}),s.jsx("button",{onClick:()=>ze(w.id,.5),className:"flex-1 flex items-center justify-center text-xl text-text-sub hover:bg-background",children:s.jsx(ga,{className:"w-4 h-4"})})]}),!w.locked&&s.jsx("button",{onClick:()=>Pe(w.id),className:"bg-destructive/10 text-destructive text-sm-app font-bold px-3 py-1 rounded-xl",children:""})]},w.id))})]}),s.jsxs("div",{className:"bg-card rounded-2xl p-6 mb-4 shadow-soft border border-border",children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsxs("div",{className:"text-xl-app font-bold text-header-navy flex items-center gap-2",children:[s.jsx(dN,{className:"w-5 h-5 text-header-navy"})," ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsxs("button",{onClick:he,className:"bg-primary-bg text-primary h-8 px-3.5 rounded-xl text-sm-app font-bold flex items-center gap-1 hover:opacity-80 transition-opacity",children:[s.jsx("span",{className:"text-lg font-[900]",children:"+"})," "]})]}),s.jsx("div",{className:"flex flex-col gap-4",children:x.map((w,I)=>s.jsxs("div",{className:"bg-card border-2 border-primary rounded-2xl p-5 animate-[slideDown_0.3s_ease-out]",children:[s.jsxs("div",{className:"flex justify-between items-center mb-5",children:[s.jsxs("span",{className:"text-sm-app font-bold text-primary bg-primary-bg px-3 py-1.5 rounded-lg",children:["  ",I+1]}),s.jsx("button",{onClick:()=>vt(w.id),className:"bg-destructive/10 text-destructive text-sm-app font-bold px-3 py-1 rounded-xl",children:""})]}),s.jsxs("div",{className:"mb-3",children:[s.jsxs("label",{className:"block text-base-app font-bold text-text-sub mb-2",children:[" ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(Ve,{wsId:w.id,field:"member",chips:RA,ws:w})]}),s.jsxs("div",{className:"mb-3",children:[s.jsxs("label",{className:"block text-base-app font-bold text-text-sub mb-2",children:[" ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(Ve,{wsId:w.id,field:"process",chips:TA,ws:w})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{className:"block text-base-app font-bold text-text-sub mb-2",children:""}),s.jsx(Ve,{wsId:w.id,field:"type",chips:AA,ws:w})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-base-app font-bold text-text-sub mb-2",children:" /  / "}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:["block","dong","floor"].map(H=>s.jsx("input",{className:"h-[54px] border border-border rounded-xl px-4 text-center outline-none transition-all bg-[hsl(var(--bg-input))] focus:border-primary focus:shadow-input-focus",placeholder:H==="block"?"":H==="dong"?"":"",value:w.location[H],onChange:se=>Zt(w.id,H,se.target.value)},H))})]})]},w.id))})]}),s.jsxs("div",{className:"bg-card rounded-2xl p-6 mb-4 shadow-soft border border-border",children:[s.jsx("div",{className:"flex justify-between items-center mb-3",children:s.jsxs("div",{className:"text-xl-app font-bold text-header-navy flex items-center gap-2",children:[s.jsx(gg,{className:"w-5 h-5 text-header-navy"}),"  ",s.jsx("span",{className:"text-sm text-text-sub font-medium ml-2",children:"    "})]})}),s.jsxs("div",{className:"grid grid-cols-[1.8fr_1fr_auto] gap-2.5 mb-3 items-center",children:[s.jsxs("select",{value:v,onChange:w=>{k(w.target.value),R(w.target.value==="custom")},className:"h-12 bg-[hsl(var(--bg-input))] border border-border rounded-xl px-4 text-base-app font-medium appearance-none cursor-pointer outline-none transition-all focus:border-sky-focus focus:shadow-input-focus",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%236b7280' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 14px center",backgroundSize:"16px"},children:[s.jsx("option",{value:"NPC-1000",children:"NPC-1000"}),s.jsx("option",{value:"NPC-3000Q",children:"NPC-3000Q"}),s.jsx("option",{value:"custom",children:""})]}),s.jsxs("div",{className:"flex items-center bg-[hsl(var(--bg-input))] border border-border rounded-xl h-12 px-3",children:[s.jsx("input",{type:"number",min:"0",value:S,onChange:w=>E(w.target.value),placeholder:"0",className:"flex-1 bg-transparent text-right font-medium outline-none w-full"}),s.jsx("span",{className:"text-text-sub text-sm-app font-medium ml-1",children:""})]}),s.jsx("button",{onClick:Ht,className:"w-12 h-12 bg-primary-bg text-primary rounded-xl font-[900] text-lg flex items-center justify-center hover:opacity-80 transition-opacity",children:"+"})]}),C&&s.jsxs("div",{className:"flex gap-2 items-center mb-3",children:[s.jsx("input",{type:"text",value:F,onChange:w=>T(w.target.value),placeholder:"  ",className:"flex-1 min-w-0 h-12 bg-[hsl(var(--bg-input))] border border-border rounded-xl px-4 outline-none transition-all text-sm-app focus:border-sky-focus focus:shadow-input-focus"}),s.jsx("button",{onClick:Ie,className:"bg-header-navy text-white px-4 h-12 rounded-xl font-bold text-sm-app whitespace-nowrap shrink-0",children:""})]}),v&&v!=="custom"&&s.jsxs("div",{className:"mb-3",children:[s.jsx("input",{ref:W,type:"file",accept:"image/*,.pdf",className:"hidden",onChange:Ge}),s.jsxs("button",{onClick:()=>{var w;return(w=W.current)==null?void 0:w.click()},className:"w-full h-[50px] border border-dashed border-primary bg-primary/5 text-primary rounded-xl font-[800] flex items-center justify-center gap-2 hover:bg-primary/10 transition-colors text-sm-app",children:[s.jsx(hy,{className:"w-5 h-5"}),"  "]}),V&&s.jsxs("div",{className:"mt-3 flex items-center justify-between bg-card rounded-lg p-2 border border-primary/30",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(hy,{className:"w-4 h-4 text-primary"}),s.jsx("span",{className:"text-sm text-foreground truncate max-w-[200px]",children:V.name})]}),s.jsx("button",{onClick:()=>Y(null),className:"text-destructive hover:text-destructive/80",children:s.jsx(Je,{className:"w-4 h-4"})})]})]}),s.jsx("div",{className:"flex flex-col gap-2",children:b.map(w=>s.jsxs("div",{className:"bg-card border border-border rounded-xl p-3 flex justify-between items-center text-sm-app",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold",children:w.name}),s.jsxs("span",{className:"text-primary ml-2",children:[w.qty,""]})]}),s.jsx("button",{onClick:()=>de(w.id),className:"bg-destructive/10 text-destructive text-sm-app font-bold px-2.5 py-1 rounded-xl",children:""})]},w.id))})]}),s.jsxs("div",{className:"bg-card rounded-2xl p-6 mb-4 shadow-soft border border-border",children:[s.jsx("div",{className:"flex justify-between items-center mb-4",children:s.jsxs("div",{className:"text-xl-app font-bold text-header-navy flex items-center gap-2",children:[s.jsx(Kn,{className:"w-5 h-5 text-header-navy"}),"  "]})}),X.length>0&&s.jsx("div",{className:"flex flex-nowrap gap-3 overflow-x-auto pb-3 pt-2 mb-3 px-1 w-full no-scrollbar",children:X.map(w=>s.jsxs("div",{className:"relative rounded-xl overflow-hidden shadow-md shrink-0 transition-all hover:-translate-y-0.5 hover:shadow-lg",children:[s.jsx("img",{src:w.url,alt:w.type==="drawing"?"":"",className:"w-[120px] h-[120px] object-cover rounded-xl"}),s.jsx("button",{onClick:()=>pt(w.id),className:"absolute top-2 right-2 bg-destructive/90 text-white border-none rounded-full w-7 h-7 flex items-center justify-center cursor-pointer text-base font-bold hover:scale-110 transition-transform z-10",children:s.jsx(Je,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>nt(w.id),className:`absolute top-2 left-2 text-white px-2 py-1 rounded-md text-[11px] font-bold z-10 cursor-pointer ${w.type==="drawing"?"bg-teal-500/90":w.badge===""||w.badge===""?"bg-muted-foreground/90":"bg-primary/90"}`,children:w.type==="drawing"?"":w.badge}),s.jsx("button",{onClick:()=>{var I;K(w.id),(I=B.current)==null||I.click()},className:"absolute bottom-2 right-2 bg-foreground/65 text-white border-none rounded-[10px] w-7 h-7 flex items-center justify-center cursor-pointer hover:bg-foreground/85 transition-all z-10",children:s.jsx(Mr,{className:"w-3.5 h-3.5"})})]},w.id))}),s.jsx("input",{ref:te,type:"file",multiple:!0,accept:"image/*",className:"hidden",onChange:Me}),s.jsx("input",{ref:ie,type:"file",multiple:!0,accept:"image/*",className:"hidden",onChange:Qe}),s.jsx("input",{ref:B,type:"file",accept:"image/*",className:"hidden",onChange:ye}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-base-app font-bold text-text-sub mb-2",children:""}),s.jsxs("button",{onClick:()=>{var w;return(w=te.current)==null?void 0:w.click()},className:"w-full h-[50px] border border-dashed border-primary bg-primary/5 text-primary rounded-xl font-bold flex items-center justify-center gap-2 hover:bg-primary/10 transition-colors text-sm-app",children:[s.jsx(Mr,{className:"w-5 h-5"}),"  "]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-base-app font-bold text-text-sub mb-2",children:""}),s.jsxs("button",{onClick:()=>ue(!0),className:"w-full h-[50px] border border-dashed border-teal-400 bg-teal-50 text-teal-600 rounded-xl font-bold flex items-center justify-center gap-2 hover:bg-teal-100 transition-colors text-sm-app",children:[s.jsx(fT,{className:"w-5 h-5"})," "]})]})]})]}),s.jsxs("div",{className:"sticky bottom-[20px] bg-card p-2.5 rounded-2xl border border-border shadow-xl mb-5 z-40 transition-all",children:[Ee&&s.jsx("div",{className:"absolute -top-5 left-1/2 -translate-x-1/2 text-white text-tiny font-bold px-4 py-1 rounded-full shadow-lg bg-sky-focus animate-pulse",children:"  "}),s.jsxs("div",{className:"flex gap-2.5",children:[s.jsx("button",{onClick:He,className:"flex-1 h-[50px] bg-background text-text-sub font-bold rounded-xl border border-border text-sm-app active:scale-[0.98] transition-transform",children:""}),s.jsx("button",{onClick:qe,className:`flex-1 h-[50px] text-white font-bold rounded-xl transition-all text-sm-app active:scale-[0.98] ${Ee?"bg-sky-focus shadow-[0_0_0_3px_rgba(135,206,235,0.3)]":"bg-header-navy"}`,children:Ee?" ":""})]})]}),s.jsxs("div",{className:"bg-card rounded-2xl p-6 mb-8 shadow-soft border border-border",children:[s.jsxs("div",{onClick:()=>fe(!Z),className:"flex justify-between items-center pb-3 border-b border-border cursor-pointer mb-4",children:[s.jsxs("div",{className:"text-xl-app font-bold text-header-navy flex items-center gap-2",children:[s.jsx(yr,{className:"w-5 h-5 text-header-navy"}),"  "]}),Z?s.jsx(Ss,{className:"w-5 h-5 text-text-sub"}):s.jsx(Lt,{className:"w-5 h-5 text-text-sub"})]}),Z&&s.jsx("div",{className:"animate-[slideDown_0.2s_ease-out]",children:it.map((w,I)=>s.jsxs("div",{className:`flex justify-between py-1.5 ${I<it.length-1?"border-b border-border/50":""}`,children:[s.jsx("span",{className:"text-base-app font-bold text-text-sub",children:w.label}),s.jsx("span",{className:"text-base-app font-semibold text-foreground text-right break-words",style:{maxWidth:"60%",wordBreak:"break-all"},children:w.value})]},w.label))})]}),ce&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-[100]",onClick:()=>ue(!1),children:s.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-card border-t border-border rounded-t-2xl p-6 z-[101] animate-[slideDown_0.3s_ease-out] max-w-[600px] mx-auto",onClick:w=>w.stopPropagation(),children:[s.jsx("div",{className:"text-center font-bold text-lg mb-5 text-foreground",children:" "}),s.jsxs("label",{className:"w-full h-[54px] bg-primary/5 text-primary border border-primary/30 rounded-xl font-bold flex items-center justify-center gap-2 mb-2.5 cursor-pointer hover:bg-primary/10 transition-colors",children:[s.jsx(Mr,{className:"w-[18px] h-[18px]"}),"  ",s.jsx("input",{ref:ie,type:"file",multiple:!0,className:"hidden",accept:"image/*",onChange:Qe})]}),s.jsxs("button",{onClick:()=>{q("   ( )")},className:"w-full h-[54px] bg-background text-foreground border border-border rounded-xl font-bold flex items-center justify-center gap-2 mb-2.5 hover:bg-[hsl(var(--bg-input))] transition-colors",children:[s.jsx(os,{className:"w-[18px] h-[18px]"}),"   "]}),s.jsx("button",{onClick:()=>ue(!1),className:"w-full h-[54px] bg-header-navy text-white rounded-xl font-bold mt-2 hover:opacity-90 transition-opacity",children:""})]})})]})}const MA=Date.now().toString(),ep="/",ON=ep.endsWith("/")?ep:`${ep}/`,$A=`${ON}home-v2/main-v2-app/index.html?v=${MA}`,qa=`${ON}home-v2/main-v2-app/index.html`,LA=new Set(["/","/output","/worklog","/site","/doc","/request"]);function FA(){const{isPartner:e}=ls(),t=Yr(),[r,n]=p.useState(!1),[o,a]=p.useState($A),i=p.useRef(null);return p.useEffect(()=>{const l=c=>{if(c.origin!==window.location.origin)return;const d=c.data;if(!d||d.type!=="inopnc:navigate")return;const h=typeof d.path=="string"?d.path:"";if(!LA.has(h)){console.warn("[inopnc] invalid path",h);return}t(h)};return window.addEventListener("message",l),()=>window.removeEventListener("message",l)},[t]),e?s.jsx(wN,{}):r?s.jsx(DA,{}):s.jsx("section",{className:"-mx-4",style:{marginTop:"var(--home-section-mt, -0.5rem)",marginBottom:"var(--home-section-mb, -1.5rem)"},children:s.jsx("iframe",{ref:i,title:"INOPNC Home Main",src:o,className:"block w-full border-0 bg-background",style:{height:"calc(100dvh - var(--app-header-height, 114px))"},onLoad:()=>{window.setTimeout(()=>{var l;try{const c=(l=i.current)==null?void 0:l.contentDocument,d=c==null?void 0:c.getElementById("root");if(!!d&&d.childElementCount>0)return;if(o!==qa){a(qa);return}n(!0)}catch{if(o!==qa){a(qa);return}n(!0)}},1200)},onError:()=>{if(o!==qa){a(qa);return}n(!0)}})})}const DN="inopnc_punch_data";function Qc(){try{const e=JSON.parse(localStorage.getItem(DN)||"[]");return Array.isArray(e)?e:[]}catch{return[]}}function Ji(e){localStorage.setItem(DN,JSON.stringify(e))}function UA(e,t){const r=Qc(),n=r.find(o=>o.id===e);return n?(n.punchItems||(n.punchItems=[]),n.punchItems.unshift(t),Ji(r),!0):!1}function BA(e,t,r){const n=Qc(),o=n.find(i=>i.id===e);if(!o||!o.punchItems)return!1;const a=o.punchItems.find(i=>i.id===t);return a?(Object.assign(a,r),Ji(n),!0):!1}function zA(e,t){const r=Qc(),n=r.find(o=>o.id===e);return!n||!n.punchItems?!1:(n.punchItems=n.punchItems.filter(o=>o.id!==t),Ji(r),!0)}function VA(){if(Qc().length>0)return;const t="https://images.unsplash.com/photo-1581094271901-8022df4466f9?q=80&w=400&auto=format&fit=crop",r="https://images.unsplash.com/photo-1503387762-592deb58ef4e?q=80&w=400&auto=format&fit=crop",n="https://images.unsplash.com/photo-1504307651254-35680f356dfd?q=80&w=400&auto=format&fit=crop";Ji([{id:"p1",title:"  101 ",contractor:"GS",affiliation:"",author:"",date:"2025-12-20",time:"14:30",status:"open",files:[{id:"p1f1",name:"",type:"img",url:t,size:"2.5MB",ext:"JPG",url_before:t,url_after:"",currentView:"before"}],punchItems:[{id:"p1i1",location:"A 1",issue:" ",priority:"",status:"ing",assignee:"",dueDate:"2025-12-25",date:"2025-12-20",beforePhoto:t,afterPhoto:""},{id:"p1i2",location:"A 2",issue:"  ",priority:"",status:"open",assignee:"",dueDate:"2025-12-26",date:"2025-12-20",beforePhoto:"",afterPhoto:""}]},{id:"p2",title:"  P3 ",contractor:"",affiliation:"",author:"",date:"2025-12-22",time:"09:15",status:"done",files:[{id:"p2f1",name:"",type:"img",url:r,size:"2.1MB",ext:"JPG",url_before:t,url_after:r,currentView:"after"}],punchItems:[{id:"p2i1",location:"B 1 ",issue:"  ",priority:"",status:"done",assignee:"",dueDate:"2025-12-28",date:"2025-12-22",beforePhoto:t,afterPhoto:r}]},{id:"p3",title:"  ",contractor:"GS",affiliation:"",author:"",date:"2025-12-23",time:"11:00",status:"open",files:[{id:"p3f1",name:"",type:"img",url:n,size:"3.0MB",ext:"JPG",url_before:n,url_after:"",currentView:"before"}],punchItems:[{id:"p3i1",location:"C  1",issue:" ",priority:"",status:"open",assignee:"",dueDate:"2025-12-27",date:"2025-12-23",beforePhoto:n,afterPhoto:""},{id:"p3i2",location:"C ",issue:"",priority:"",status:"ing",assignee:"",dueDate:"2025-12-29",date:"2025-12-23",beforePhoto:"",afterPhoto:""}]}])}function WA(e){return{id:e.id,title:e.site_name,contractor:e.contractor||"",affiliation:e.affiliation||"",author:e.author||"",date:e.punch_date,time:e.punch_time||"",status:e.status,punchItems:(e.punch_items||[]).map(t=>{var r;return{id:t.id,location:t.location||"",issue:t.issue||"",priority:t.priority,status:t.status,assignee:t.assignee||"",dueDate:t.due_date||"",date:((r=t.created_at)==null?void 0:r.split("T")[0])||"",beforePhoto:t.before_photo||"",afterPhoto:t.after_photo||""}}),files:[]}}function IN(){const{user:e,isTestMode:t}=Qt(),r=pr(),n=!!e,o=fr({queryKey:["punchGroups"],queryFn:async()=>{if(!n)return VA(),Qc();const{data:a,error:i}=await me.from("punch_groups").select("*, punch_items(*)").order("punch_date",{ascending:!1});if(i)throw i;return(a||[]).map(WA)},enabled:n||t,refetchInterval:n?!1:2e3});return p.useEffect(()=>{if(!n)return;const a=me.channel("punch-changes").on("postgres_changes",{event:"*",schema:"public",table:"punch_groups"},()=>r.invalidateQueries({queryKey:["punchGroups"]})).on("postgres_changes",{event:"*",schema:"public",table:"punch_items"},()=>r.invalidateQueries({queryKey:["punchGroups"]})).subscribe();return()=>{me.removeChannel(a)}},[n,r]),o}function qA(){const{user:e}=Qt(),t=pr();return wr({mutationFn:async({groupId:r,item:n})=>{if(!e){UA(r,n);return}const{error:o}=await me.from("punch_items").insert({group_id:r,location:n.location,issue:n.issue,priority:n.priority,status:n.status,assignee:n.assignee,due_date:n.dueDate||null,before_photo:n.beforePhoto,after_photo:n.afterPhoto});if(o)throw o},onSuccess:()=>t.invalidateQueries({queryKey:["punchGroups"]})})}function HA(){const{user:e}=Qt(),t=pr();return wr({mutationFn:async({groupId:r,itemId:n,field:o,value:a})=>{if(!e){BA(r,n,{[o]:a});return}const l={location:"location",issue:"issue",priority:"priority",status:"status",assignee:"assignee",dueDate:"due_date",beforePhoto:"before_photo",afterPhoto:"after_photo"}[o]||o,{error:c}=await me.from("punch_items").update({[l]:a}).eq("id",n);if(c)throw c},onSuccess:()=>t.invalidateQueries({queryKey:["punchGroups"]})})}function KA(){const{user:e}=Qt(),t=pr();return wr({mutationFn:async({groupId:r,itemId:n})=>{if(!e){zA(r,n);return}const{error:o}=await me.from("punch_items").delete().eq("id",n);if(o)throw o},onSuccess:()=>t.invalidateQueries({queryKey:["punchGroups"]})})}function GA(){const{user:e}=Qt(),t=pr();return wr({mutationFn:async r=>{if(!e){Ji(r);return}Ji(r)},onSuccess:()=>t.invalidateQueries({queryKey:["punchGroups"]})})}const Dd=e=>`inopnc_site_lodge:${e}`;function QA(e){var u;const{user:t}=Qt(),{isAdmin:r,isPartner:n}=ls(),o=pr(),a=fr({queryKey:["site-member",e,t==null?void 0:t.id],enabled:!!e&&!!t&&!r&&!n,queryFn:async()=>{if(!e||!t)return!1;const{data:f,error:m}=await me.rpc("is_site_member",{_site_id:e,_user_id:t.id});return m?!1:!!f}}),i=!!a.data,l=!!e&&!n&&(r||i),c=l,d=fr({queryKey:["site-lodging",e],enabled:!!e&&l,queryFn:async()=>{if(!e)return{lodge_address:""};const{data:f,error:m}=await me.from("site_lodgings").select("lodge_address, updated_at, updated_by").eq("site_id",e).maybeSingle(),g=typeof window<"u"?localStorage.getItem(Dd(e)):"";if(m)return{lodge_address:g||""};const x=(f==null?void 0:f.lodge_address)||"";return typeof window<"u"&&localStorage.setItem(Dd(e),x),f??{lodge_address:x}}}),h=wr({mutationFn:async f=>{if(!t||!e)throw new Error(" .");if(n||!c)throw new Error(" .");const m=f.trim();if(!m)throw new Error(" .");if(m.length>200)throw new Error("  .");const{data:g,error:x}=await me.from("site_lodgings").upsert({site_id:e,lodge_address:m,updated_by:t.id,updated_at:new Date().toISOString()},{onConflict:"site_id"}).select("lodge_address").single();if(x)throw x;return(g==null?void 0:g.lodge_address)??m},onMutate:async f=>{if(!e)return;await o.cancelQueries({queryKey:["site-lodging",e]});const m=o.getQueryData(["site-lodging",e]);return o.setQueryData(["site-lodging",e],{lodge_address:f}),{prev:m}},onError:(f,m,g)=>{g!=null&&g.prev&&e&&o.setQueryData(["site-lodging",e],g.prev),q.error("   .")},onSuccess:f=>{e&&typeof window<"u"&&localStorage.setItem(Dd(e),f),e&&o.invalidateQueries({queryKey:["site-lodging",e]})}});return{lodge:((u=d.data)==null?void 0:u.lodge_address)??(e&&typeof window<"u"?localStorage.getItem(Dd(e))??"":""),isLoading:d.isLoading||a.isLoading,isSaving:h.isPending,canView:l,canEdit:c,saveLodge:h.mutateAsync}}const YA=[{id:1,name:"  101 ",status:"ing",affil:"",addr:"   149",manager:" ",safety:" ",phoneM:"010-1234-5678",phoneS:"010-9876-5432",days:245,mp:3,pinned:!0,lastDate:"2025-12-09",hasDraw:!0,hasPhoto:!0,hasLog:!0,hasPunch:!0},{id:2,name:"  P3 ",status:"done",affil:"",addr:"   1",manager:" ",safety:" ",phoneM:"010-1111-2222",phoneS:"010-3333-4444",days:120,mp:1,pinned:!1,lastDate:"2025-12-05",hasDraw:!0,hasPhoto:!1,hasLog:!0,hasPunch:!1},{id:3,name:"  ",status:"wait",affil:"",addr:"",manager:" ",safety:" ",phoneM:"010-5555-6666",phoneS:"010-7777-8888",days:15,mp:0,pinned:!1,lastDate:"2025-12-03",hasDraw:!1,hasPhoto:!1,hasLog:!1,hasPunch:!1}],JA={ing:{label:"",cls:"bg-blue-500"},wait:{label:"",cls:"bg-indigo-500"},done:{label:"",cls:"bg-muted-foreground"}},XA=[{key:"all",label:""},{key:"ing",label:""},{key:"wait",label:""},{key:"done",label:""}];function ZA(){const[e,t]=p.useState(""),[r,n]=p.useState("all"),[o,a]=p.useState(new Set),i=p.useMemo(()=>YA.filter(c=>!(r!=="all"&&c.status!==r||e&&!c.name.toLowerCase().includes(e.toLowerCase()))).sort((c,d)=>c.pinned!==d.pinned?c.pinned?-1:1:d.id-c.id),[e,r]),l=c=>{a(d=>{const h=new Set(d);return h.has(c)?h.delete(c):h.add(c),h})};return s.jsxs("div",{className:"animate-fade-in",children:[s.jsx("div",{className:"flex gap-2 mb-3 mt-1",children:s.jsxs("div",{className:"relative flex-1",children:[s.jsx("input",{value:e,onChange:c=>t(c.target.value),placeholder:"   ",className:"w-full h-[50px] bg-card border border-border rounded-xl px-4 pr-10 text-base-app font-medium text-foreground placeholder:text-muted-foreground outline-none transition-all hover:border-primary/50 focus:border-primary focus:shadow-[0_0_0_3px_rgba(49,163,250,0.15)]"}),e?s.jsx("button",{onClick:()=>t(""),className:"absolute right-3 top-1/2 -translate-y-1/2",children:s.jsx(Je,{className:"w-4 h-4 text-muted-foreground"})}):s.jsx(Jr,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"})]})}),s.jsx("div",{className:"grid grid-cols-4 gap-2 mb-3",children:XA.map(c=>s.jsx("button",{onClick:()=>n(c.key),className:U("h-10 rounded-full text-[14px] font-medium border cursor-pointer transition-all",r===c.key?c.key==="all"?"bg-primary text-white border-primary font-bold":c.key==="ing"?"bg-blue-500 text-white border-blue-500 font-bold":c.key==="wait"?"bg-indigo-500 text-white border-indigo-500 font-bold":"bg-muted-foreground text-white border-muted-foreground font-bold":"bg-card text-muted-foreground border-border"),children:c.label},c.key))}),i.length===0?s.jsx("div",{className:"text-center py-20 text-muted-foreground",children:"  "}):s.jsx("div",{className:"space-y-5",children:i.map(c=>{const d=o.has(c.id),h=JA[c.status];return s.jsxs("div",{className:U("bg-card rounded-2xl shadow-soft overflow-hidden",c.pinned&&"border-2 border-primary"),children:[s.jsx("span",{className:U("text-[11px] font-bold px-3 py-1 text-white rounded-bl-xl",h.cls),style:{float:"right"},children:h.label}),s.jsxs("div",{className:"p-5 border-b border-border",children:[s.jsx("div",{className:"text-[15px] text-text-sub font-medium mb-1",children:c.lastDate}),s.jsx("div",{className:"text-[20px] font-[800] text-header-navy mb-3 w-[85%]",children:c.name}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex gap-2 items-center",children:s.jsx("span",{className:"text-[14px] font-semibold px-3 py-1 rounded-lg bg-primary/10 text-primary border border-primary/30",children:c.affil})}),s.jsxs("div",{className:"flex gap-1.5 items-center",children:[s.jsx(os,{className:U("w-4 h-4",c.hasDraw?"text-header-navy":"text-border")}),s.jsx(Mr,{className:U("w-4 h-4",c.hasPhoto?"text-header-navy":"text-border")}),s.jsx(Pr,{className:U("w-4 h-4",c.hasLog?"text-header-navy":"text-border")}),s.jsx(Ca,{className:U("w-4 h-4",c.hasPunch?"text-header-navy":"text-border")})]})]})]}),s.jsxs("button",{onClick:()=>l(c.id),className:"w-full h-12 flex items-center justify-center gap-1.5 text-text-sub text-[14px] font-semibold bg-transparent border-none cursor-pointer",children:[d?"":"",d?s.jsx(Ss,{className:"w-4 h-4"}):s.jsx(Lt,{className:"w-4 h-4"})]}),d&&s.jsxs("div",{className:"p-[22px] border-t border-border animate-slide-down",children:[s.jsxs("div",{className:"flex mb-5 border-b border-dashed border-border pb-3.5",children:[s.jsxs("div",{className:"flex-1 text-center relative",children:[s.jsx("span",{className:"block text-[17px] text-text-sub font-bold mb-2",children:" "}),s.jsxs("span",{className:"text-[20px] font-[800] text-header-navy",children:[c.days,""]}),s.jsx("div",{className:"absolute right-0 top-[10%] h-[80%] w-px bg-border"})]}),s.jsxs("div",{className:"flex-1 text-center",children:[s.jsx("span",{className:"block text-[17px] text-text-sub font-bold mb-2",children:" "}),s.jsxs("span",{className:"text-[20px] font-[800] text-header-navy",children:[c.mp,""]})]})]}),s.jsxs("div",{className:"flex justify-between items-center py-3.5 border-b border-dashed border-border",children:[s.jsx("span",{className:"font-bold text-text-sub w-20 text-[17px]",children:""}),s.jsx("span",{className:"flex-1 font-semibold text-foreground text-right pr-3 truncate text-[17px]",children:c.manager}),s.jsx("button",{onClick:()=>window.location.href=`tel:${c.phoneM}`,className:"w-9 h-9 rounded-[10px] bg-blue-50 border border-blue-100 text-blue-900 flex items-center justify-center cursor-pointer",children:s.jsx(Ro,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex justify-between items-center py-3.5 border-b border-dashed border-border",children:[s.jsx("span",{className:"font-bold text-text-sub w-20 text-[17px]",children:""}),s.jsx("span",{className:"flex-1 font-semibold text-foreground text-right pr-3 truncate text-[17px]",children:c.safety}),s.jsx("button",{onClick:()=>window.location.href=`tel:${c.phoneS}`,className:"w-9 h-9 rounded-[10px] bg-blue-50 border border-blue-100 text-blue-900 flex items-center justify-center cursor-pointer",children:s.jsx(Ro,{className:"w-4 h-4"})})]}),c.addr&&s.jsxs("div",{className:"flex justify-between items-center py-3.5",children:[s.jsx("span",{className:"font-bold text-text-sub w-20 text-[17px]",children:""}),s.jsx("span",{className:"flex-1 font-semibold text-foreground text-right pr-3 truncate text-[17px]",children:c.addr}),s.jsx("button",{className:"w-9 h-9 rounded-[10px] bg-blue-50 border border-blue-100 text-blue-900 flex items-center justify-center cursor-pointer",children:s.jsx(lr,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"grid grid-cols-5 gap-1.5 mt-4",children:[{label:"",icon:os,cls:"bg-primary/10 border-primary/30 text-primary"},{label:"",icon:Mr,cls:"bg-indigo-50 border-indigo-200 text-indigo-500"},{label:"",icon:Pr,cls:"bg-blue-50 border-blue-200 text-blue-600"},{label:"",icon:Pr,cls:"bg-emerald-50 border-emerald-200 text-emerald-700"},{label:"",icon:Ca,cls:"bg-red-50 border-red-200 text-red-700"}].map(u=>s.jsxs("button",{className:U("flex flex-col items-center justify-center gap-1.5 h-[74px] rounded-xl border cursor-pointer transition-all active:scale-[0.98]",u.cls),children:[s.jsx(u.icon,{className:"w-6 h-6"}),s.jsx("span",{className:"text-[14px] font-bold",children:u.label})]},u.label))})]})]},c.id)})})]})}function MN({open:e,title:t,onBack:r,onClose:n,onSave:o,onShare:a,zoom:i,contentRef:l,children:c,titleClassName:d,maxWidthClassName:h}){const[u,f]=p.useState(!1),m=p.useMemo(()=>g=>{i.contentRef.current=g,l&&(l.current=g)},[l,i.contentRef]);return e?s.jsxs("div",{className:"fixed inset-0 z-[10000] bg-black text-white",children:[s.jsx(bN,{title:t,onBack:r,onClose:n,onSave:o,titleClassName:d}),s.jsx(LT,{headerHeightPx:56,toolbarHeightPx:72,children:s.jsx("div",{ref:i.containerRef,className:"mx-auto flex min-h-full w-full items-start justify-center px-3 py-5",onWheel:i.onWheel,onTouchStart:i.onTouchStart,onTouchMove:i.onTouchMove,onTouchEnd:i.onTouchEnd,children:s.jsx("div",{ref:m,className:U("origin-top transition-transform",h??"max-w-[900px]",u?"cursor-grab":""),style:{transform:`translate(${i.panX}px, ${i.panY}px) scale(${i.scale})`},children:c})})}),s.jsx($T,{onZoomOut:i.zoomOut,onZoomIn:i.zoomIn,onFit:()=>i.reset(),onTogglePan:()=>f(g=>!g),panActive:u,fitActive:!1,onShare:()=>a==null?void 0:a(),zoomOutDisabled:i.scale<=i.minScale+.001,zoomInDisabled:i.scale>=i.maxScale-.001})]}):null}function $N(e){const t=(e==null?void 0:e.defaultScale)??1,r=(e==null?void 0:e.defaultMinScale)??.5,n=(e==null?void 0:e.defaultMaxScale)??4,[o,a]=p.useState(t),[i,l]=p.useState(0),[c,d]=p.useState(0),h=p.useRef(null),u=p.useRef(null),f=p.useRef(null),m=p.useCallback(S=>Math.min(n,Math.max(r,S)),[n,r]),g=p.useCallback(S=>{a(m(S??t)),l(0),d(0)},[m,t]),x=p.useCallback(()=>{a(S=>m(S+.1))},[m]),N=p.useCallback(()=>{a(S=>m(S-.1))},[m]),b=p.useCallback(S=>{S.preventDefault(),a(E=>m(E+(S.deltaY<0?.1:-.1)))},[m]),y=p.useCallback(S=>{if(S.touches.length>=2){const[E,C]=S.touches,R=E.clientX-C.clientX,F=E.clientY-C.clientY;f.current={x:0,y:0,pinchDistance:Math.hypot(R,F),pinchScale:o};return}S.touches.length===1&&(f.current={x:S.touches[0].clientX,y:S.touches[0].clientY})},[o]),v=p.useCallback(S=>{if(!f.current)return;if(S.touches.length>=2&&f.current.pinchDistance&&f.current.pinchScale){const[F,T]=S.touches,V=F.clientX-T.clientX,Y=F.clientY-T.clientY,W=Math.hypot(V,Y);a(m(f.current.pinchScale*W/f.current.pinchDistance));return}if(S.touches.length!==1)return;const E=S.touches[0],C=E.clientX-f.current.x,R=E.clientY-f.current.y;f.current={x:E.clientX,y:E.clientY},S.preventDefault(),l(F=>F+C),d(F=>F+R)},[m]),k=p.useCallback(()=>{f.current=null},[]);return{scale:o,panX:i,panY:c,minScale:r,maxScale:n,containerRef:h,contentRef:u,setScale:a,setPanX:l,setPanY:d,reset:g,zoomIn:x,zoomOut:N,onWheel:b,onTouchStart:y,onTouchMove:v,onTouchEnd:k}}function LN({open:e,onClose:t,title:r,children:n}){const o=$N({open:e}),a=p.useRef(null),i=p.useCallback(async()=>{if(!a.current){q.error("   .");return}try{const{default:c}=await Qm(async()=>{const{default:m}=await import("./html2canvas.esm-CBrSDip1.js");return{default:m}},[]),d=await c(a.current,{scale:2,useCORS:!0,backgroundColor:"#ffffff",logging:!1}),h=await new Promise(m=>d.toBlob(m,"image/png",.95));if(!h)throw new Error("blob_failed");const u=URL.createObjectURL(h),f=document.createElement("a");f.href=u,f.download=`${(r||"document").replace(/[\\/:*?"<>|]+/g,"_")}.png`,document.body.appendChild(f),f.click(),f.remove(),window.setTimeout(()=>URL.revokeObjectURL(u),1200)}catch{q.error("  .")}},[r]),l=p.useCallback(async()=>{var c,d;if(!a.current){q.error("   .");return}try{const{default:h}=await Qm(async()=>{const{default:g}=await import("./html2canvas.esm-CBrSDip1.js");return{default:g}},[]),u=await h(a.current,{scale:2,useCORS:!0,backgroundColor:"#ffffff",logging:!1}),f=await new Promise(g=>u.toBlob(g,"image/png",.95));if(!f)throw new Error("blob_failed");const m=new File([f],`${(r||"document").replace(/[\\/:*?"<>|]+/g,"_")}.png`,{type:"image/png"});if(navigator.share&&((c=navigator.canShare)!=null&&c.call(navigator,{files:[m]}))){await navigator.share({title:r,files:[m]});return}if(navigator.share){await navigator.share({title:r,url:window.location.href});return}if((d=navigator.clipboard)!=null&&d.writeText){await navigator.clipboard.writeText(window.location.href),q.success(" .");return}q.error("   .")}catch(h){if((h==null?void 0:h.name)==="AbortError")return;q.error(" .")}},[r]);return s.jsx(MN,{open:e,title:r,onBack:t,onClose:t,onSave:i,onShare:l,zoom:o,contentRef:a,children:s.jsx("div",{className:"flex flex-col items-center gap-5 p-5",children:n})})}function hh({children:e,pageNum:t,totalPages:r}){return s.jsx("div",{className:"bg-white shadow-lg",style:{width:"210mm",minHeight:"297mm",padding:"20mm",boxSizing:"border-box"},children:s.jsxs("div",{style:{border:"2px solid #1a254f",height:"100%",padding:"15mm",boxSizing:"border-box",display:"flex",flexDirection:"column"},children:[e,s.jsxs("div",{className:"mt-auto pt-4 flex justify-between text-[12px] text-[#999] border-t border-[#ddd]",children:[s.jsx("span",{children:"INOPNC Safety Management System"}),s.jsxs("span",{children:[t," / ",r]})]})]})})}function ky({photos:e,siteName:t}){const r=Math.ceil(e.length/4);return s.jsx(s.Fragment,{children:Array.from({length:r},(n,o)=>{const a=o*4,i=e.slice(a,a+4);return s.jsxs(hh,{pageNum:o+1,totalPages:r,children:[s.jsxs("div",{className:"text-center border-b-2 border-[#1a254f] pb-3 mb-4",children:[s.jsx("div",{className:"text-[24px] font-[800] text-[#1a254f]",children:" ??"}),s.jsx("div",{className:"text-[14px] text-[#666] mt-1",children:t})]}),s.jsx("div",{className:"flex-1 grid grid-cols-2 gap-3",children:i.map((l,c)=>s.jsxs("div",{className:"border border-[#ddd] rounded-lg overflow-hidden flex flex-col bg-white",children:[s.jsx("div",{className:"flex-1 bg-[#f8fafc] flex items-center justify-center",style:{minHeight:"80mm"},children:s.jsx("img",{src:l.url,className:"max-w-full max-h-full object-contain",alt:`? ${a+c+1}`})}),s.jsxs("div",{className:"p-2 border-t border-[#ddd] bg-white",children:[s.jsxs("div",{className:"text-[12px] font-bold text-[#1a254f]",children:["? ",a+c+1]}),s.jsxs("div",{className:"text-[11px] text-[#666]",children:["?: ",l.date||"-"]})]})]},c))})]},o)})})}function eO({entry:e}){var n,o,a;const t=((n=e.manpower)==null?void 0:n.length)||0,r=((o=e.manpower)==null?void 0:o.reduce((i,l)=>i+(l.workHours||0),0))||0;return s.jsxs(hh,{pageNum:1,totalPages:1,children:[s.jsxs("div",{className:"text-center border-b-2 border-[#1a254f] pb-3 mb-4",children:[s.jsx("div",{className:"text-[24px] font-[800] text-[#1a254f]",children:"???"}),s.jsx("div",{className:"text-[14px] text-[#666] mt-1",children:e.siteName})]}),s.jsxs("div",{className:"grid grid-cols-[120px_1fr] gap-2 text-[14px] mb-6",children:[s.jsx("div",{className:"font-bold text-[#1a254f]",children:"??"}),s.jsx("div",{className:"border-b border-[#ddd] py-1",children:e.workDate}),s.jsx("div",{className:"font-bold text-[#1a254f]",children:""}),s.jsx("div",{className:"border-b border-[#ddd] py-1",children:e.siteName}),s.jsx("div",{className:"font-bold text-[#1a254f]",children:"??"}),s.jsxs("div",{className:"border-b border-[#ddd] py-1",children:[t,"?(",r.toFixed(1),")"]})]}),(a=e.workSets)==null?void 0:a.map((i,l)=>{var c,d,h;return s.jsxs("div",{className:"mb-4 p-3 bg-[#f8fafc] rounded-lg",children:[s.jsxs("div",{className:"text-[13px] font-bold text-[#1a254f] mb-1",children:["? ? ",l+1]}),s.jsxs("div",{className:"grid grid-cols-[80px_1fr] gap-1 text-[12px]",children:[s.jsx("span",{className:"text-[#666]",children:"?"}),s.jsx("span",{children:i.member==="?"?i.customMemberValue:i.member}),s.jsx("span",{className:"text-[#666]",children:""}),s.jsx("span",{children:i.process==="?"?i.customProcessValue:i.process}),s.jsx("span",{className:"text-[#666]",children:"?"}),s.jsx("span",{children:i.type==="?"?i.customTypeValue:i.type}),s.jsx("span",{className:"text-[#666]",children:"?"}),s.jsx("span",{children:[(c=i.location)==null?void 0:c.block,(d=i.location)==null?void 0:d.dong,(h=i.location)==null?void 0:h.floor].filter(Boolean).join(" / ")||"-"})]})]},l)}),e.materials&&e.materials.length>0&&s.jsxs("div",{className:"mt-4",children:[s.jsx("div",{className:"text-[13px] font-bold text-[#1a254f] mb-2",children:"? ? ?"}),e.materials.map((i,l)=>s.jsxs("div",{className:"flex justify-between text-[12px] py-1 border-b border-[#eee]",children:[s.jsx("span",{children:i.name}),s.jsxs("span",{children:[i.qty,""]})]},l))]})]})}const tp={lat:37.5665,lng:126.978};async function tO(){return typeof navigator>"u"||!navigator.geolocation?tp:await new Promise(e=>{let t=!1;const r=window.setTimeout(()=>{t||(t=!0,e(tp))},900);navigator.geolocation.getCurrentPosition(n=>{t||(t=!0,window.clearTimeout(r),e({lat:n.coords.latitude,lng:n.coords.longitude}))},()=>{t||(t=!0,window.clearTimeout(r),e(tp))},{enableHighAccuracy:!1,timeout:900,maximumAge:6e4})})}async function FN(e,t=""){var n;const r=(e||"").trim();if(!r){q.error(`${t} `);return}try{if((n=navigator==null?void 0:navigator.clipboard)!=null&&n.writeText){await navigator.clipboard.writeText(r),q.success(`${t} .`);return}}catch{}try{const o=document.createElement("textarea");o.value=r,o.style.position="fixed",o.style.opacity="0",document.body.appendChild(o),o.focus(),o.select();const a=document.execCommand("copy");document.body.removeChild(o),a?q.success(`${t} .`):q.error(" .")}catch{q.error(" .")}}async function fh(e,t){const r=(t==null?void 0:t.label)??"",n=(e||"").trim();if(!n){q.error(`${r} `);return}if(typeof navigator<"u"&&!navigator.onLine){q.error("      .");return}if(typeof window>"u")return;const o=encodeURIComponent(n),a=window.location.origin||"inopnc",i=encodeURIComponent(a),{lat:l,lng:c}=await tO(),d=`tmap://search?name=${o}`,h=`nmap://search?query=${o}&appname=${i}`,u=`kakaomap://search?q=${o}&p=${l},${c}`,f=`https://www.google.com/maps/search/?api=1&query=${o}`,m=(g,x)=>{window.location.href=g,window.setTimeout(()=>{document.hidden||x()},900)};m(d,()=>m(h,()=>m(u,()=>{window.location.href=f})))}const rO=[{id:1,name:"SITE A",addr:"Daegu 149",lodge:"Daegu 123-45",status:"ing",affil:"Daegu",manager:"Manager A",safety:"Safety A",phoneM:"010-1234-5678",phoneS:"010-9876-5432",days:245,mp:3,pinned:!0,lastDate:"2025-12-09",lastTime:"10:30",hasDraw:!0,hasPhoto:!0,hasPTW:!0,hasLog:!0,hasPunch:!0,ptw:{title:"PTW",status:"approved",pages:2},workLog:{title:"Worklog",status:"saved",pages:3},punch:{title:"Punch",status:"in_progress",pages:1},images:["sample1.jpg","sample2.jpg"],drawings:{construction:[{name:"floor1.pdf"},{name:"floor2.pdf"}],progress:[{name:"progress_01.jpg",type:"img"}],completion:[{name:"final.pdf"}]}},{id:2,name:"SITE B",addr:"Pyeongtaek 1",lodge:"Pyeongtaek 123",status:"done",affil:"Pyeongtaek",manager:"Manager B",safety:"Safety B",phoneM:"010-1111-2222",phoneS:"010-3333-4444",days:120,mp:1,pinned:!1,lastDate:"2025-12-05",lastTime:"18:20",hasDraw:!0,hasPhoto:!0,hasPTW:!0,hasLog:!0,hasPunch:!0,ptw:{title:"PTW",status:"approved",pages:2},workLog:{title:"Worklog",status:"saved",pages:3},punch:{title:"Punch",status:"in_progress",pages:1},images:["sample1.jpg"],drawings:{construction:[{name:"layout.pdf"}],progress:[],completion:[{name:"final.pdf"}]}},{id:3,name:"SITE C",addr:"",lodge:"",status:"wait",affil:"HQ",manager:"Manager C",safety:"Safety C",phoneM:"010-5555-6666",phoneS:"010-7777-8888",days:15,mp:0,pinned:!1,lastDate:"2025-12-03",lastTime:"14:00",hasDraw:!1,hasPhoto:!1,hasPTW:!1,hasLog:!1,hasPunch:!1,images:[],drawings:{construction:[],progress:[],completion:[]}},{id:4,name:"TEST SITE 4",addr:"",lodge:"",status:"ing",affil:"direct",manager:"",safety:"",phoneM:"",phoneS:"",days:10,mp:0,pinned:!1,lastDate:"2025-12-01",lastTime:"09:00",hasDraw:!1,hasPhoto:!1,hasPTW:!1,hasLog:!1,hasPunch:!1,images:[],drawings:{construction:[],progress:[],completion:[]}},{id:5,name:"TEST SITE 5",addr:"",lodge:"",status:"ing",affil:"direct",manager:"",safety:"",phoneM:"",phoneS:"",days:11,mp:0,pinned:!1,lastDate:"2025-12-01",lastTime:"09:00",hasDraw:!1,hasPhoto:!1,hasPTW:!1,hasLog:!1,hasPunch:!1,images:[],drawings:{construction:[],progress:[],completion:[]}}],nO={ing:{label:"In Progress",className:"bg-blue-500 text-white"},wait:{label:"Planned",className:"bg-indigo-500 text-white"},done:{label:"Done",className:"bg-muted-foreground text-white"}},sO=[{key:"all",label:"All",chipClass:"status-all"},{key:"ing",label:"In Progress",chipClass:"status-ing"},{key:"wait",label:"Planned",chipClass:"status-wait"},{key:"done",label:"Done",chipClass:"status-done"}],UN="inopnc_site_drawings_v1";let Id=null;function oO(){var e;return typeof window>"u"?Promise.reject(new Error("no window")):(e=window.daum)!=null&&e.Postcode?Promise.resolve():Id||(Id=new Promise((t,r)=>{const n=document.createElement("script");n.src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js",n.async=!0,n.onload=()=>t(),n.onerror=()=>r(new Error("postcode load failed")),document.head.appendChild(n)}),Id)}async function aO(){return await oO(),await new Promise(e=>{var t;if(!((t=window.daum)!=null&&t.Postcode))return e("");new window.daum.Postcode({oncomplete:r=>{e((r==null?void 0:r.roadAddress)||(r==null?void 0:r.address)||(r==null?void 0:r.jibunAddress)||"")},onclose:()=>e("")}).open()})}function iO(){if(typeof window>"u")return{};try{const e=JSON.parse(localStorage.getItem(UN)||"{}");return!e||typeof e!="object"?{}:e}catch{return{}}}function lO(e){typeof window>"u"||localStorage.setItem(UN,JSON.stringify(e))}function cO(e){return e.siteDbId||e.name}function dO(e){return new Promise((t,r)=>{const n=new FileReader;n.onload=o=>{var a;return t(String(((a=o.target)==null?void 0:a.result)||""))},n.onerror=()=>r(new Error("file_read_failed")),n.readAsDataURL(e)})}function uO(e){return`data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='1000' height='700'%3E%3Crect width='1000' height='700' fill='%23ffffff'/%3E%3Crect x='18' y='18' width='964' height='664' fill='none' stroke='%231a254f' stroke-width='4'/%3E%3Ctext x='500' y='350' text-anchor='middle' font-family='sans-serif' font-size='32' fill='%231a254f'%3E${encodeURIComponent(e||"?? ??")}%3C/text%3E%3C/svg%3E`}function hO(e){return`data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='900' height='700'%3E%3Crect width='900' height='700' fill='%23f3f4f6'/%3E%3Crect x='18' y='18' width='864' height='664' fill='none' stroke='%231a254f' stroke-width='3'/%3E%3Ctext x='450' y='350' text-anchor='middle' font-family='sans-serif' font-size='30' fill='%231a254f'%3E${encodeURIComponent(e||"PHOTO")}%3C/text%3E%3C/svg%3E`}function fO(e,t){return(String(e||"").trim()||t||"file").replace(/[\\/:*?"<>|]+/g,"_")||"file"}function pO(e){const t=(e||"").toLowerCase();return t?t.includes("png")?"png":t.includes("jpeg")||t.includes("jpg")?"jpg":t.includes("webp")?"webp":t.includes("gif")?"gif":t.includes("bmp")?"bmp":t.includes("svg")?"svg":t.includes("pdf")?"pdf":"":""}async function mO(e){if(!e)return null;try{const t=await fetch(e);if(!t.ok)return null;const r=await t.blob();return r.size>0?r:null}catch{return null}}function xO(e,t){const r=URL.createObjectURL(e),n=document.createElement("a");n.href=r,n.download=t,document.body.appendChild(n),n.click(),n.remove(),window.setTimeout(()=>URL.revokeObjectURL(r),1200)}function gO(){const{isPartner:e}=ls();return e?s.jsx(ZA,{}):s.jsx(bO,{})}function bO(){const[e,t]=p.useState(rO),[r,n]=p.useState(""),[o,a]=p.useState("all"),[i,l]=p.useState("latest"),[c,d]=p.useState(new Set),[h,u]=p.useState(5),[f,m]=p.useState(()=>typeof navigator<"u"?navigator.onLine:!0),[g,x]=p.useState(!1),[N,b]=p.useState(""),[y,v]=p.useState(null),[k,S]=p.useState(!1),[E,C]=p.useState(null),R=p.useRef(null),[F,T]=p.useState(()=>iO()),[V,Y]=p.useState(!1),[W,X]=p.useState(new Set),[ne,te]=p.useState(!1),[ie,B]=p.useState(null),[$,K]=p.useState(!1),[ce,ue]=p.useState(new Set),[Z,fe]=p.useState(!1),{data:ve=[]}=Kh(),{data:Oe=[]}=IN();p.useEffect(()=>{if(typeof window>"u")return;const w=()=>m(!0),I=()=>m(!1);return window.addEventListener("online",w),window.addEventListener("offline",I),()=>{window.removeEventListener("online",w),window.removeEventListener("offline",I)}},[]);const le=p.useMemo(()=>e.map(w=>{var er;const I=w.name||"",H=I.split(" ")[0]||I,se=ve.filter(Ye=>{const ct=(Ye.siteName||"").trim();return ct?ct===I||ct.includes(H)||I.includes(ct):!1}),re=se.filter(Ye=>Ye.status==="approved"),Le=Oe.filter(Ye=>{const ct=(Ye.title||"").trim();return ct?ct===I||ct.includes(H)||I.includes(ct):!1}),Te=Le.flatMap(Ye=>Ye.punchItems||[]).filter(Ye=>Ye.status!=="done").length,kt=((er=se[0])==null?void 0:er.siteValue)||null;return{...w,siteDbId:kt,hasLog:w.hasLog||se.length>0,hasPhoto:w.hasPhoto||se.some(Ye=>Ye.photoCount>0),hasDraw:w.hasDraw||se.some(Ye=>Ye.drawingCount>0),hasPunch:w.hasPunch||Le.length>0,mp:Te||w.mp,liveLogs:se,approvedLogs:re,sitePunchGroups:Le}}),[e,ve,Oe]),Ze=le.filter(w=>o==="all"||w.status===o).filter(w=>w.name.toLowerCase().includes(r.toLowerCase())||w.addr.toLowerCase().includes(r.toLowerCase())).sort((w,I)=>w.pinned!==I.pinned?w.pinned?-1:1:i==="name"?w.name.localeCompare(I.name,"ko"):I.id-w.id),gt=Ze.slice(0,h),Ae=p.useMemo(()=>E&&le.find(w=>w.id===E)||null,[le,E]),rt=p.useMemo(()=>Ae?cO(Ae):"",[Ae]),et=p.useMemo(()=>rt?F[rt]||[]:[],[F,rt]),je=p.useMemo(()=>et.filter(w=>w.kind==="marked"),[et]),_t=p.useMemo(()=>et.filter(w=>w.kind==="final"),[et]),Ee=p.useMemo(()=>et.filter(w=>W.has(w.id)),[et,W]),It=p.useCallback(w=>{const H=(w.siteDbId?_N(w.siteDbId):[]).filter(se=>!!(se!=null&&se.url)).map((se,re)=>({id:`photo_${se.timestamp||Date.now()}_${re}_${se.id}`,name:`???${re+1}`,url:se.url,createdAt:se.timestamp||new Date().toISOString()}));return H.length>0?H:(w.images||[]).map((se,re)=>({id:`photo_fallback_${w.id}_${re}`,name:se||`???${re+1}`,url:hO(se||`PHOTO ${re+1}`),createdAt:new Date().toISOString()}))},[]),ot=p.useMemo(()=>ie&&le.find(w=>w.id===ie)||null,[le,ie]),bt=p.useMemo(()=>ot?It(ot):[],[ot,It]),yt=p.useMemo(()=>bt.filter(w=>ce.has(w.id)),[bt,ce]);p.useEffect(()=>{k||(Y(!1),X(new Set))},[k]),p.useEffect(()=>{ne||(K(!1),ue(new Set))},[ne]);const cr=w=>{d(I=>{const H=new Set(I);return H.has(w)?H.delete(w):H.add(w),H})},dr=(w,I)=>{var H;I.stopPropagation(),t(se=>se.map(re=>re.id===w?{...re,pinned:!re.pinned}:re)),q.success((H=e.find(se=>se.id===w))!=null&&H.pinned?"?????.":"?????.")},jt=w=>{if(!w||w.length<5){q.error("??? ????");return}window.location.href=`tel:${w.replace(/[^0-9+]/g,"")}`},ft=()=>{h>=Ze.length?(u(5),window.scrollTo({top:0,behavior:"smooth"})):u(w=>w+5)},Ot=w=>{C(w),Y(!1),X(new Set),S(!0)},J=p.useCallback(w=>{B(w),K(!1),ue(new Set),te(!0)},[]),pe=p.useCallback(w=>{X(I=>{const H=new Set(I);return H.has(w)?H.delete(w):H.add(w),H})},[]),Se=p.useCallback(w=>{ue(I=>{const H=new Set(I);return H.has(w)?H.delete(w):H.add(w),H})},[]),we=p.useCallback(()=>{const w=et.map(I=>I.id);w.length!==0&&X(I=>I.size===w.length?new Set:new Set(w))},[et]),ze=p.useCallback(()=>{const w=bt.map(I=>I.id);w.length!==0&&ue(I=>I.size===w.length?new Set:new Set(w))},[bt]),Pe=p.useCallback(async w=>{const I=[];let H=0;for(let se=0;se<w.length;se+=1){const re=w[se],Le=await mO(re.url);if(!Le){H+=1;continue}const _e=fO(re.name,`asset_${se+1}`),Te=/\.[a-z0-9]{2,5}$/i.test(_e),kt=pO(Le.type),er=Te?_e:`${_e}.${kt||"bin"}`;I.push(new File([Le],er,{type:Le.type||"application/octet-stream"}))}return{files:I,skipped:H}},[]),De=p.useCallback(w=>{w.forEach((I,H)=>{window.setTimeout(()=>xO(I,I.name),H*140)})},[]),he=p.useCallback(async(w,I)=>{var se;if(w.length===0)return!1;const H=navigator;if(H.share&&((se=H.canShare)!=null&&se.call(H,{files:w})))try{return await H.share({title:I,files:w}),!0}catch(re){return(re==null?void 0:re.name)==="AbortError"||(q.error(" .  ."),De(w)),!1}return q("  .  ."),De(w),!1},[De]),vt=p.useCallback(async()=>{if(Ee.length===0)return;const{files:w,skipped:I}=await Pe(Ee);if(w.length===0){q.error("No drawable files to save.");return}De(w),q.success(`${w.length} file(s) saved`),I>0&&q.error(`${I} file(s) skipped`)},[De,Pe,Ee]),Ke=p.useCallback(async()=>{if(Ee.length===0)return;const{files:w,skipped:I}=await Pe(Ee);if(w.length===0){q.error("No drawable files to share.");return}const H=await he(w,`${(Ae==null?void 0:Ae.name)||"Site"} Drawings`);q.success(H?`${w.length} file(s) ready to share`:`${w.length} file(s) saved`),I>0&&q.error(`${I} file(s) skipped`)},[Pe,Ee,he,Ae==null?void 0:Ae.name]),Zt=p.useCallback(async()=>{if(yt.length===0)return;const{files:w,skipped:I}=await Pe(yt);if(w.length===0){q.error("No photo files to save.");return}De(w),q.success(`${w.length} file(s) saved`),I>0&&q.error(`${I} file(s) skipped`)},[De,Pe,yt]),Ct=p.useCallback(async()=>{if(yt.length===0)return;const{files:w,skipped:I}=await Pe(yt);if(w.length===0){q.error("No photo files to share.");return}const H=await he(w,`${(ot==null?void 0:ot.name)||"Site"} Photos`);q.success(H?`${w.length} file(s) ready to share`:`${w.length} file(s) saved`),I>0&&q.error(`${I} file(s) skipped`)},[ot==null?void 0:ot.name,Pe,yt,he]),Ht=p.useCallback((w,I)=>{T(H=>{const se=I(H[w]||[]),re={...H,[w]:se};return lO(re),re})},[]),de=p.useCallback(w=>{if(!Ae)return;const I=w.kind==="original"?"??(??)":w.kind==="final"?"??(?":"?";b(`${Ae.name} ?${I}`),v(s.jsx("img",{src:w.url,style:{width:850,height:"auto",display:"block"},alt:w.name||"? ??"})),x(!0),S(!1)},[Ae]),Ie=p.useCallback(async w=>{const I=Array.from(w.target.files||[]);if(w.currentTarget.value="",!(!Ae||!rt||I.length===0))try{const H=await Promise.all(I.map(Le=>dO(Le))),se=new Date().toISOString(),re=H.map((Le,_e)=>{var Te;return{id:`marked_${Date.now()}_${_e}`,name:((Te=I[_e])==null?void 0:Te.name)||`? ${_e+1}`,url:Le,kind:"marked",source:"upload",createdAt:se}});Ht(rt,Le=>[...re,...Le]),q.success(`${re.length}???????????`)}catch{q.error("? ???? ??????.")}},[Ae,rt,Ht]),Ge=p.useCallback(()=>{var se;if(!Ae||!rt)return;const w=Ae.siteDbId?CN(Ae.siteDbId):[],I=new Date().toISOString();let H=w.filter(re=>!!re.img).map((re,Le)=>({id:`origin_${Date.now()}_${Le}`,name:`?? ?? ${Le+1}`,url:re.img,kind:"original",source:"linked",createdAt:re.timestamp||I}));if(H.length===0&&(((se=Ae.drawings)==null?void 0:se.construction)||[]).length>0&&(H=(Ae.drawings.construction||[]).map((re,Le)=>({id:`origin_fallback_${Date.now()}_${Le}`,name:(re==null?void 0:re.name)||`?? ?? ${Le+1}`,url:uO((re==null?void 0:re.name)||`?? ?? ${Le+1}`),kind:"original",source:"linked",createdAt:I}))),H.length===0){q.error("????? ????????.");return}Ht(rt,re=>{const Le=new Set(re.map(Te=>`${Te.kind}:${Te.url}`)),_e=H.filter(Te=>!Le.has(`${Te.kind}:${Te.url}`));return _e.length===0?re:[..._e,...re]}),q.success(`? ?? ? ${H.length}? ?????.`)},[Ae,rt,Ht]),Me=p.useCallback(w=>{if(!Ae||!rt)return;const I={...w,id:`final_${Date.now()}`,kind:"final",source:"approved",name:`${w.name.replace(/\s*\(Final\)$/,"")} (Final)`,createdAt:new Date().toISOString()};Ht(rt,H=>[I,...H]),q.success("Saved as final drawing.")},[Ae,rt,Ht]),Qe=p.useCallback(()=>{if(Ae){if(je.length===0){q.error("???????????.");return}b(`${Ae.name} ?? ?`),v(s.jsx(ky,{photos:je.map(w=>({url:w.url,date:w.createdAt.slice(0,10)})),siteName:Ae.name})),x(!0),S(!1)}},[je,Ae]),pt=p.useCallback(()=>{const w=[..._t].sort((I,H)=>H.createdAt.localeCompare(I.createdAt))[0];if(!w){q.error("?????????????.");return}de(w)},[_t,de]),nt=p.useCallback((w,I)=>{b(`${I} ? `),v(s.jsx("img",{src:w.url,style:{width:850,height:"auto",display:"block"},alt:w.name||"? "})),x(!0),te(!1)},[]),ye=p.useCallback(w=>{const I=It(w).map(H=>{var se;return{url:H.url,date:(se=H.createdAt)==null?void 0:se.slice(0,10)}});if(I.length===0){q.error("????????.");return}b(`${w.name}  ??`),v(s.jsx(ky,{photos:I,siteName:w.name})),x(!0),te(!1)},[It]),qe=(w,I)=>{const H=w[I];if(!H){q.error("No document available.");return}const se={ptw:"PTW",workLog:"Worklog",punch:"Punch Report"};if(I==="workLog"&&w.approvedLogs.length>0){const re=w.approvedLogs[0];b(`${w.name}  Worklog`),v(s.jsx(eO,{entry:re})),x(!0);return}if(I==="punch"&&w.sitePunchGroups&&w.sitePunchGroups.length>0){const re=w.sitePunchGroups.flatMap(Te=>Te.punchItems||[]),Le=re.filter(Te=>Te.status!=="done").length,_e=re.filter(Te=>Te.status==="done").length;b(`${w.name}  Punch Report`),v(s.jsxs(hh,{pageNum:1,totalPages:1,children:[s.jsxs("div",{className:"text-center border-b-2 border-[#1a254f] pb-3 mb-4",children:[s.jsx("div",{className:"text-[24px] font-[800] text-[#1a254f]",children:"Punch Summary Report"}),s.jsx("div",{className:"text-[14px] text-[#666] mt-1",children:w.name})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[s.jsxs("div",{className:"bg-sky-50 border border-sky-400 p-3 rounded-lg text-center",children:[s.jsx("div",{className:"text-[20px] font-[900] text-sky-600",children:re.length}),s.jsx("div",{className:"text-[11px] font-bold text-sky-700",children:"Total"})]}),s.jsxs("div",{className:"bg-red-50 border border-red-400 p-3 rounded-lg text-center",children:[s.jsx("div",{className:"text-[20px] font-[900] text-red-600",children:Le}),s.jsx("div",{className:"text-[11px] font-bold text-red-700",children:"Open"})]}),s.jsxs("div",{className:"bg-slate-50 border border-slate-400 p-3 rounded-lg text-center",children:[s.jsx("div",{className:"text-[20px] font-[900] text-slate-600",children:_e}),s.jsx("div",{className:"text-[11px] font-bold text-slate-500",children:"Done"})]})]}),s.jsxs("table",{className:"w-full border-collapse text-[12px]",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-slate-100",children:[s.jsx("th",{className:"border border-slate-300 p-2 w-10",children:"NO"}),s.jsx("th",{className:"border border-slate-300 p-2 w-20",children:"Location"}),s.jsx("th",{className:"border border-slate-300 p-2",children:"Issue"}),s.jsx("th",{className:"border border-slate-300 p-2 w-16",children:"Priority"}),s.jsx("th",{className:"border border-slate-300 p-2 w-16",children:"Status"})]})}),s.jsx("tbody",{children:re.map((Te,kt)=>s.jsxs("tr",{children:[s.jsx("td",{className:"border border-slate-300 p-2 text-center font-bold",children:kt+1}),s.jsx("td",{className:"border border-slate-300 p-2 text-center",children:Te.location||"-"}),s.jsx("td",{className:"border border-slate-300 p-2",children:Te.issue||"-"}),s.jsx("td",{className:"border border-slate-300 p-2 text-center",children:Te.priority||"-"}),s.jsx("td",{className:"border border-slate-300 p-2 text-center font-bold",children:Te.status==="done"?"Done":Te.status==="ing"?"In Progress":"Open"})]},Te.id||kt))})]})]})),x(!0);return}b(`${w.name}  ${se[I]}`),v(s.jsxs(hh,{pageNum:1,totalPages:H.pages||1,children:[s.jsxs("div",{className:"text-center border-b-2 border-[#1a254f] pb-3 mb-4",children:[s.jsx("div",{className:"text-[24px] font-[800] text-[#1a254f]",children:se[I]}),s.jsx("div",{className:"text-[14px] text-[#666] mt-1",children:w.name})]}),s.jsxs("div",{className:"grid grid-cols-[120px_1fr] gap-2 text-[14px] mb-6",children:[s.jsx("div",{className:"font-bold text-[#1a254f]",children:"Document No"}),s.jsx("div",{className:"border-b border-[#ddd] py-1",children:"DOC-2025-0001"}),s.jsx("div",{className:"font-bold text-[#1a254f]",children:"Status"}),s.jsx("div",{className:"border-b border-[#ddd] py-1",children:H.status}),s.jsx("div",{className:"font-bold text-[#1a254f]",children:"Site"}),s.jsx("div",{className:"border-b border-[#ddd] py-1",children:w.name})]}),s.jsx("div",{className:"flex-1 p-4 bg-[#f8fafc] rounded-lg flex items-center justify-center",style:{minHeight:"100mm"},children:s.jsx("span",{className:"text-[#666]",children:"Document preview"})})]})),x(!0)},He=(w,I)=>{if(I==="images"){J(w.id);return}if(I==="ptw"||I==="workLog"||I==="punch"){qe(w,I);return}q.error("??? ????")},it=e.map(w=>w.name).filter(w=>w.toLowerCase().includes(r.toLowerCase()));return s.jsxs("div",{className:"animate-fade-in",children:[s.jsxs("div",{className:"flex gap-2 mb-3 mt-3",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx("input",{type:"text",value:r,onChange:w=>{n(w.target.value),fe(!0)},onFocus:()=>fe(!0),placeholder:"Select site or search",className:"w-full h-[50px] bg-card border border-border rounded-xl px-4 pr-12 text-base-app font-medium text-foreground placeholder:text-muted-foreground outline-none transition-all hover:border-primary/50 focus:border-primary focus:shadow-[0_0_0_3px_rgba(49,163,250,0.15)]"}),r&&s.jsx("button",{onClick:()=>{n(""),fe(!1)},className:"absolute right-10 top-1/2 -translate-y-1/2 w-5 h-5 rounded-full bg-muted flex items-center justify-center text-muted-foreground z-10",children:s.jsx(Je,{className:"w-3 h-3"})}),s.jsx("button",{onClick:()=>fe(!Z),className:"absolute right-4 top-1/2 -translate-y-1/2 text-muted-foreground bg-transparent border-none cursor-pointer",children:s.jsx(Lt,{className:"w-5 h-5"})}),Z&&r&&s.jsx("ul",{className:"absolute z-50 w-full mt-1.5 max-h-60 overflow-auto bg-card border border-border rounded-xl shadow-lg animate-[dropdownSlide_0.2s_ease-out]",children:it.length===0?s.jsx("li",{className:"p-4 text-muted-foreground text-center text-sm-app",children:"???? ????"}):it.map(w=>s.jsx("li",{onClick:()=>{n(w),fe(!1)},className:"px-4 py-3.5 cursor-pointer border-b border-border last:border-0 text-sm-app font-medium text-foreground hover:bg-muted transition-colors",children:w},w))})]}),s.jsxs("select",{value:i,onChange:w=>l(w.target.value),className:"w-[95px] h-[50px] rounded-xl px-3 text-sm-app font-semibold bg-card border border-border text-foreground appearance-none cursor-pointer outline-none transition-all hover:border-primary/50 focus:border-primary focus:shadow-[0_0_0_3px_rgba(49,163,250,0.15)]",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23475569' stroke-width='2'%3E%3Cpath d='m6 9 6 6 6-6'/%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center",paddingRight:"36px"},children:[s.jsx("option",{value:"latest",children:"Latest"}),s.jsx("option",{value:"name",children:"Name"})]})]}),s.jsx("div",{className:"flex gap-1.5 mb-4 overflow-x-auto pb-1 no-scrollbar",children:sO.map(w=>s.jsx("button",{onClick:()=>{a(w.key),u(5)},className:U("h-10 px-3.5 rounded-full text-sm-app font-medium whitespace-nowrap flex-shrink-0 border transition-all cursor-pointer flex items-center justify-center",o===w.key?w.key==="all"?"bg-primary text-white border-primary font-bold shadow-sm":w.key==="ing"?"bg-blue-500 text-white border-blue-500 font-bold shadow-sm":w.key==="wait"?"bg-indigo-500 text-white border-indigo-500 font-bold shadow-sm":"bg-muted-foreground text-white border-muted-foreground font-bold shadow-sm":"bg-card text-muted-foreground border-border hover:border-primary/50"),children:w.label},w.key))}),gt.length===0&&s.jsxs("div",{className:"text-center py-20",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-muted rounded-full mb-5",children:s.jsx(Jr,{className:"w-8 h-8 text-muted-foreground opacity-60"})}),s.jsx("p",{className:"text-base-app font-medium text-muted-foreground",children:"???? ????"})]}),s.jsx("div",{className:"space-y-4",children:gt.map(w=>{var er;const I=c.has(w.id),H=nO[w.status],se=!!((er=w.addr)!=null&&er.trim()),re=w.hasDraw,Le=w.hasPhoto,_e=!!w.ptw,Te=w.hasLog,kt=!!w.punch;return s.jsxs("div",{className:U("bg-card rounded-2xl shadow-soft overflow-hidden transition-all",w.pinned&&"border-2 border-primary shadow-[0_4px_12px_rgba(49,163,250,0.2)]"),children:[s.jsxs("div",{className:"p-5 max-[640px]:p-4 border-b border-border relative",children:[s.jsx("span",{className:U("absolute top-0 right-0 text-[11px] font-bold px-2.5 py-1 rounded-bl-xl z-10",H.className),children:H.label}),w.lastDate&&s.jsxs("div",{className:"text-sm-app text-text-sub font-medium mb-1 max-[640px]:mb-0.5",children:[w.lastDate," ",w.lastTime?`(?${w.lastTime})`:""]}),s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsx("h3",{className:"text-[20px] max-[640px]:text-[18px] font-[800] text-header-navy flex-1 leading-snug",style:{wordBreak:"keep-all"},children:w.name}),s.jsx("button",{onClick:Ye=>dr(w.id,Ye),className:"bg-transparent border-none p-1 cursor-pointer ml-2",children:w.pinned?s.jsx(Wh,{className:"w-[22px] h-[22px] text-primary"}):s.jsx(qh,{className:"w-[22px] h-[22px] text-border"})})]}),s.jsxs("div",{className:"flex items-center justify-between mb-3 max-[640px]:mb-2",children:[s.jsxs("div",{className:"flex gap-2 max-[640px]:gap-1.5 items-center flex-wrap min-w-0",children:[w.affil!=="direct"&&s.jsx("span",{className:"text-[14px] max-[640px]:text-[13px] px-3 max-[640px]:px-2.5 h-[34px] max-[640px]:h-[30px] rounded-lg border border-indigo-200 bg-indigo-50 text-indigo-500 font-semibold flex items-center",children:"Contractor"}),s.jsx("span",{className:U("text-[14px] max-[640px]:text-[13px] px-3 max-[640px]:px-2.5 h-[34px] max-[640px]:h-[30px] rounded-lg border font-semibold flex items-center",w.affil==="direct"?"bg-red-50 text-red-700 border-red-200":"bg-sky-50 text-sky-600 border-sky-200"),children:w.affil})]}),s.jsxs("div",{className:"flex gap-1.5 max-[640px]:gap-1 items-center pl-2 border-l border-border ml-1",children:[s.jsx(os,{className:U("w-4 h-4 max-[640px]:w-[15px] max-[640px]:h-[15px] transition-colors",re?"text-header-navy":"text-border")}),s.jsx(Mr,{className:U("w-4 h-4 max-[640px]:w-[15px] max-[640px]:h-[15px] transition-colors",Le?"text-header-navy":"text-border")}),s.jsx(nh,{className:U("w-4 h-4 max-[640px]:w-[15px] max-[640px]:h-[15px] transition-colors",_e?"text-header-navy":"text-border")}),s.jsx(Pr,{className:U("w-4 h-4 max-[640px]:w-[15px] max-[640px]:h-[15px] transition-colors",Te?"text-header-navy":"text-border")}),s.jsx(Ca,{className:U("w-4 h-4 max-[640px]:w-[15px] max-[640px]:h-[15px] transition-colors",kt?"text-header-navy":"text-border")})]})]}),s.jsxs("div",{className:"flex items-center justify-between pt-1",children:[s.jsxs("div",{className:"flex items-center gap-1.5 flex-1 overflow-hidden cursor-pointer",onClick:()=>fh(w.addr,{label:"Site Address"}),children:[s.jsx(lr,{className:"w-4 h-4 text-text-sub flex-shrink-0"}),s.jsx("span",{className:U("text-base-app font-bold truncate",se?"text-text-sub":"text-muted-foreground"),children:se?w.addr:"No address"})]}),s.jsxs("div",{className:"flex items-center gap-1.5 shrink-0 ml-2",children:[s.jsx("button",{disabled:!se,className:U("w-9 h-9 max-[640px]:w-8 max-[640px]:h-8 rounded-[10px] flex items-center justify-center transition-all active:scale-95",se?"bg-muted border border-border text-text-sub":"border border-dashed border-muted-foreground/40 text-muted-foreground bg-transparent opacity-60 cursor-not-allowed"),onClick:()=>FN(w.addr,"Site Address"),children:s.jsx(iN,{className:"w-[16px] h-[16px]"})}),s.jsx("button",{disabled:!se,className:U("w-9 h-9 max-[640px]:w-8 max-[640px]:h-8 rounded-[10px] flex items-center justify-center transition-all active:scale-95",se?"bg-[hsl(219_100%_95%)] border border-[hsl(219_100%_90%)] text-[hsl(230_60%_30%)]":"border border-dashed border-muted-foreground/40 text-muted-foreground bg-transparent opacity-60 cursor-not-allowed"),onClick:()=>fh(w.addr,{label:"Site Address"}),children:s.jsx(lr,{className:"w-[18px] h-[18px]"})})]})]})]}),I&&s.jsxs("div",{className:"p-5 max-[640px]:p-4 animate-slide-down bg-card",children:[[{label:"Manager",value:w.manager,phone:w.phoneM},{label:"Safety",value:w.safety,phone:w.phoneS}].map(Ye=>s.jsxs("div",{className:"flex justify-between items-center py-3 max-[640px]:py-2.5 border-b border-dashed border-border",children:[s.jsx("span",{className:"text-base-app text-text-sub font-bold w-20",children:Ye.label}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"flex-1 text-right text-base-app font-semibold text-foreground truncate pr-3",children:Ye.value||"Input"}),s.jsx("button",{className:U("w-9 h-9 max-[640px]:w-8 max-[640px]:h-8 rounded-[10px] flex items-center justify-center shrink-0 transition-all active:scale-95",Ye.phone?"bg-[hsl(219_100%_95%)] border border-[hsl(219_100%_90%)] text-[hsl(230_60%_30%)]":"border border-dashed border-border bg-transparent text-muted-foreground"),onClick:()=>jt(Ye.phone),children:s.jsx(Ro,{className:"w-[18px] h-[18px]"})})]})]},Ye.label)),s.jsx(yO,{site:w,isOnline:f}),s.jsxs("div",{className:"flex py-3 max-[640px]:py-2.5",children:[s.jsxs("div",{className:"flex-1 text-center relative",children:[s.jsx("span",{className:"block text-base-app text-text-sub font-bold mb-2",children:"Work Days"}),s.jsxs("span",{className:"text-lg-app font-[800] text-header-navy",children:[w.days,"d"]}),s.jsx("div",{className:"absolute right-0 top-[10%] h-[80%] w-px bg-border"})]}),s.jsxs("div",{className:"flex-1 text-center",children:[s.jsx("span",{className:"block text-base-app text-text-sub font-bold mb-2",children:"Open Punch"}),s.jsx("span",{className:U("text-lg-app font-[800]",w.mp>0?"text-destructive":"text-header-navy"),children:w.mp})]})]}),s.jsx("div",{className:"grid grid-cols-5 gap-1.5 max-[640px]:gap-1 mt-0",children:[{icon:hT,label:"Drawings",active:re,color:"bg-primary-bg text-primary border-sky-200",onClick:()=>re?Ot(w.id):q.error("No drawing found")},{icon:Mr,label:"Photos",active:Le,color:"bg-indigo-50 text-indigo-500 border-indigo-200",onClick:()=>He(w,"images")},{icon:nh,label:"PTW",active:_e,color:"bg-blue-50 text-blue-600 border-blue-200",onClick:()=>He(w,"ptw")},{icon:Pr,label:"Worklog",active:Te,color:"bg-emerald-50 text-emerald-700 border-emerald-200",onClick:()=>He(w,"workLog")},{icon:Ca,label:"Punch",active:kt,color:"bg-red-50 text-red-600 border-red-200",onClick:()=>He(w,"punch")}].map(({icon:Ye,label:ct,active:xt,color:tr,onClick:zn})=>s.jsxs("button",{className:U("flex flex-col items-center justify-center gap-1.5 max-[640px]:gap-1 h-[74px] max-[640px]:h-[64px] rounded-xl border cursor-pointer transition-all active:scale-95",xt?tr:"bg-muted border-border text-border opacity-60 cursor-not-allowed"),onClick:zn,children:[s.jsx(Ye,{className:"w-6 h-6"}),s.jsx("span",{className:"text-[14px] font-bold tracking-tight",children:ct})]},ct))})]}),s.jsxs("button",{onClick:()=>cr(w.id),className:U("w-full h-12 flex items-center justify-center gap-1.5 text-text-sub text-[14px] font-semibold cursor-pointer bg-transparent border-none transition-colors",I&&"bg-background border-t border-border"),children:[!I&&s.jsx("span",{children:"Show Details"}),I?s.jsx(Ss,{className:"w-[18px] h-[18px]"}):s.jsx(Lt,{className:"w-[18px] h-[18px]"})]})]},w.id)})}),Ze.length>5&&s.jsxs("button",{onClick:ft,className:"w-full h-[50px] bg-card border border-border rounded-full text-text-sub font-semibold text-sm-app cursor-pointer mt-3 flex items-center justify-center gap-1.5 transition-all hover:bg-muted",children:[s.jsx("span",{children:h>=Ze.length?"Fold":"Load More"}),s.jsx(Lt,{className:U("w-4 h-4 transition-transform",h>=Ze.length&&"rotate-180")})]}),k&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-[2000]",onClick:()=>S(!1),children:s.jsxs("div",{className:"absolute bottom-0 left-0 right-0 mx-auto w-full max-w-[600px] rounded-t-2xl bg-card p-4 shadow-2xl",onClick:w=>w.stopPropagation(),children:[s.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[s.jsx("div",{className:"text-lg font-bold text-header-navy",children:"Drawings"}),s.jsx("button",{type:"button",onClick:()=>S(!1),className:"rounded-lg p-1 text-muted-foreground hover:bg-accent",children:s.jsx(Je,{className:"h-5 w-5"})})]}),s.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[s.jsxs("button",{type:"button",onClick:()=>{Y(w=>!w),X(new Set)},className:U("inline-flex h-9 items-center gap-1 rounded-lg border px-3 text-sm-app font-semibold",V?"border-primary bg-primary-bg text-primary":"border-border bg-card text-text-sub hover:border-primary/50"),children:[s.jsx(po,{className:"h-4 w-4"})," ",V?"Cancel Select":"Select"]}),V&&s.jsxs(s.Fragment,{children:[s.jsx("button",{type:"button",onClick:we,className:"inline-flex h-9 items-center rounded-lg border border-border bg-card px-3 text-sm-app font-semibold text-text-sub hover:border-primary/50",children:et.length>0&&W.size===et.length?"Unselect All":"Select All"}),s.jsxs("span",{className:"text-xs font-semibold text-text-sub",children:[W.size," selected"]})]})]}),V&&s.jsx("div",{className:"mb-3 rounded-xl border border-border bg-bg-input px-3 py-2 text-sm-app font-semibold text-text-sub",children:"Select files then save or share."}),s.jsx("input",{ref:R,type:"file",multiple:!0,accept:"image/*",className:"hidden",onChange:Ie}),s.jsxs("button",{type:"button",onClick:()=>{var w;return(w=R.current)==null?void 0:w.click()},className:"mb-2 flex h-[48px] w-full items-center justify-center gap-2 rounded-xl border border-dashed border-primary/35 bg-primary/10 text-[14px] font-bold text-primary hover:bg-primary/15",children:[s.jsx(bg,{className:"h-4 w-4"})," Upload Drawings"]}),s.jsxs("button",{type:"button",onClick:Ge,className:"mb-3 flex h-[48px] w-full items-center justify-center gap-2 rounded-xl border border-border bg-bg-input text-[14px] font-bold text-foreground hover:bg-accent",children:[s.jsx(os,{className:"h-4 w-4"})," Load Linked Drawings"]}),s.jsxs("div",{className:"mb-3 grid grid-cols-2 gap-2",children:[s.jsx("button",{type:"button",onClick:Qe,className:"h-[40px] rounded-lg border border-sky-200 bg-sky-50 text-[12px] font-bold text-sky-700 hover:bg-sky-100",children:"View Marked"}),s.jsx("button",{type:"button",onClick:pt,className:"h-[40px] rounded-lg border border-emerald-200 bg-emerald-50 text-[12px] font-bold text-emerald-700 hover:bg-emerald-100",children:"View Final"})]}),s.jsx("div",{className:"max-h-[54vh] overflow-y-auto",children:et.length===0?s.jsx("div",{className:"rounded-xl border border-border bg-bg-input px-4 py-10 text-center text-sm text-muted-foreground",children:"No drawings."}):s.jsx("div",{className:"space-y-2",children:et.slice().sort((w,I)=>I.createdAt.localeCompare(w.createdAt)).map(w=>{const I=W.has(w.id);return s.jsx("div",{className:U("rounded-xl border border-border bg-bg-input p-2.5",V&&I&&"border-primary/50 bg-primary/10"),children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:U("inline-flex h-5 shrink-0 items-center rounded-full px-2 text-[10px] font-bold",w.kind==="original"?"bg-blue-50 text-blue-700 border border-blue-200":w.kind==="final"?"bg-emerald-50 text-emerald-700 border border-emerald-200":"bg-indigo-50 text-indigo-700 border border-indigo-200"),children:w.kind==="original"?"Original":w.kind==="final"?"Final":"Marked"}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("div",{className:"truncate text-[13px] font-semibold text-foreground",children:w.name}),s.jsx("div",{className:"text-[11px] text-muted-foreground",children:w.createdAt.slice(0,10)})]}),V?s.jsx("button",{type:"button",onClick:()=>pe(w.id),className:"inline-flex h-7 w-7 items-center justify-center rounded-md border border-border bg-card",children:s.jsx("span",{className:U("inline-flex h-4 w-4 items-center justify-center rounded-sm border",I?"border-primary bg-primary text-white":"border-border bg-card text-transparent"),children:s.jsx(po,{className:"h-3 w-3"})})}):s.jsxs(s.Fragment,{children:[s.jsxs("button",{type:"button",onClick:()=>de(w),className:"inline-flex h-7 items-center gap-1 rounded-md border border-border bg-card px-2 text-[11px] font-bold text-text-sub hover:bg-muted",children:[s.jsx(on,{className:"h-3.5 w-3.5"})," View"]}),w.kind!=="final"&&s.jsx("button",{type:"button",onClick:()=>Me(w),className:"inline-flex h-7 items-center rounded-md border border-emerald-200 bg-emerald-50 px-2 text-[11px] font-bold text-emerald-700 hover:bg-emerald-100",children:"Finalize"})]})]})},w.id)})})}),V&&W.size>0&&s.jsxs("div",{className:"mt-3 flex items-center gap-2 rounded-xl border border-border bg-background px-2.5 py-2",children:[s.jsxs("div",{className:"min-w-0 flex-1 truncate text-[13px] font-semibold text-text-sub",children:[W.size," selected"]}),s.jsxs("button",{type:"button",onClick:vt,className:"inline-flex h-9 items-center gap-1 rounded-lg border border-border bg-card px-3 text-sm-app font-semibold text-text-sub hover:border-primary/50",children:[s.jsx(Cc,{className:"h-4 w-4"})," Save"]}),s.jsxs("button",{type:"button",onClick:Ke,className:"inline-flex h-9 items-center gap-1 rounded-lg border border-primary/40 bg-primary-bg px-3 text-sm-app font-bold text-primary",children:[s.jsx(oh,{className:"h-4 w-4"})," Share"]})]})]})}),ne&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-[2000]",onClick:()=>te(!1),children:s.jsxs("div",{className:"absolute bottom-0 left-0 right-0 mx-auto w-full max-w-[600px] rounded-t-2xl bg-card p-4 shadow-2xl",onClick:w=>w.stopPropagation(),children:[s.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[s.jsx("div",{className:"text-lg font-bold text-header-navy",children:"Photos"}),s.jsx("button",{type:"button",onClick:()=>te(!1),className:"rounded-lg p-1 text-muted-foreground hover:bg-accent",children:s.jsx(Je,{className:"h-5 w-5"})})]}),s.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[s.jsxs("button",{type:"button",onClick:()=>{K(w=>!w),ue(new Set)},className:U("inline-flex h-9 items-center gap-1 rounded-lg border px-3 text-sm-app font-semibold",$?"border-primary bg-primary-bg text-primary":"border-border bg-card text-text-sub hover:border-primary/50"),children:[s.jsx(po,{className:"h-4 w-4"})," ",$?"Cancel Select":"Select"]}),$&&s.jsxs(s.Fragment,{children:[s.jsx("button",{type:"button",onClick:ze,className:"inline-flex h-9 items-center rounded-lg border border-border bg-card px-3 text-sm-app font-semibold text-text-sub hover:border-primary/50",children:bt.length>0&&ce.size===bt.length?"Unselect All":"Select All"}),s.jsxs("span",{className:"text-xs font-semibold text-text-sub",children:[ce.size," selected"]})]})]}),$&&s.jsx("div",{className:"mb-3 rounded-xl border border-border bg-bg-input px-3 py-2 text-sm-app font-semibold text-text-sub",children:"Select files then save or share."}),ot&&s.jsxs("button",{type:"button",onClick:()=>ye(ot),className:"mb-3 flex h-[42px] w-full items-center justify-center gap-2 rounded-lg border border-border bg-bg-input text-[13px] font-bold text-text-sub hover:bg-accent",children:[s.jsx(on,{className:"h-4 w-4"})," View All"]}),s.jsx("div",{className:"max-h-[54vh] overflow-y-auto",children:bt.length===0?s.jsx("div",{className:"rounded-xl border border-border bg-bg-input px-4 py-10 text-center text-sm text-muted-foreground",children:"No photos."}):s.jsx("div",{className:"space-y-2",children:bt.slice().sort((w,I)=>I.createdAt.localeCompare(w.createdAt)).map(w=>{const I=ce.has(w.id);return s.jsx("div",{className:U("rounded-xl border border-border bg-bg-input p-2.5",$&&I&&"border-primary/50 bg-primary/10"),children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("img",{src:w.url,alt:w.name,className:"h-12 w-12 rounded-lg border border-border bg-card object-cover"}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("div",{className:"truncate text-[13px] font-semibold text-foreground",children:w.name}),s.jsx("div",{className:"text-[11px] text-muted-foreground",children:w.createdAt.slice(0,10)})]}),$?s.jsx("button",{type:"button",onClick:()=>Se(w.id),className:"inline-flex h-7 w-7 items-center justify-center rounded-md border border-border bg-card",children:s.jsx("span",{className:U("inline-flex h-4 w-4 items-center justify-center rounded-sm border",I?"border-primary bg-primary text-white":"border-border bg-card text-transparent"),children:s.jsx(po,{className:"h-3 w-3"})})}):s.jsxs("button",{type:"button",onClick:()=>ot&&nt(w,ot.name),className:"inline-flex h-7 items-center gap-1 rounded-md border border-border bg-card px-2 text-[11px] font-bold text-text-sub hover:bg-muted",children:[s.jsx(on,{className:"h-3.5 w-3.5"})," View"]})]})},w.id)})})}),$&&ce.size>0&&s.jsxs("div",{className:"mt-3 flex items-center gap-2 rounded-xl border border-border bg-background px-2.5 py-2",children:[s.jsxs("div",{className:"min-w-0 flex-1 truncate text-[13px] font-semibold text-text-sub",children:[ce.size," selected"]}),s.jsxs("button",{type:"button",onClick:Zt,className:"inline-flex h-9 items-center gap-1 rounded-lg border border-border bg-card px-3 text-sm-app font-semibold text-text-sub hover:border-primary/50",children:[s.jsx(Cc,{className:"h-4 w-4"})," Save"]}),s.jsxs("button",{type:"button",onClick:Ct,className:"inline-flex h-9 items-center gap-1 rounded-lg border border-primary/40 bg-primary-bg px-3 text-sm-app font-bold text-primary",children:[s.jsx(oh,{className:"h-4 w-4"})," Share"]})]})]})}),s.jsx(LN,{open:g,onClose:()=>x(!1),title:N,children:y})]})}function yO({site:e,isOnline:t}){const{lodge:r,canView:n,canEdit:o,isSaving:a,saveLodge:i}=QA(e.siteDbId),l=!e.siteDbId;if(!n&&!l)return null;const[c,d]=p.useState(e.lodge||"");p.useEffect(()=>{d(e.lodge||"")},[e.id,e.lodge]);const h=o&&!!e.siteDbId,u=h||l,f=(r||c||"").trim(),m=!!f.trim(),g=async N=>{const b=N.trim();if(b){if(h){await i(b);return}d(b)}},x=async()=>{if(!t){q.error("Address search is available online only.");return}if(!(!u||h&&a))try{const N=await aO();if(!N)return;try{await g(N),q.success("Lodge address saved.")}catch{}}catch{q.error("Address search failed.")}};return s.jsxs("div",{className:"flex justify-between items-center py-3 max-[640px]:py-2.5 border-b border-dashed border-border",children:[s.jsx("span",{className:"text-base-app text-text-sub font-bold w-20 shrink-0 whitespace-nowrap",children:"Lodge"}),s.jsxs("div",{className:"flex items-center gap-1.5 max-[640px]:gap-1 flex-1 min-w-0 justify-end",children:[s.jsx("button",{type:"button",disabled:!m,onClick:()=>m&&fh(f,{label:"Lodge Address"}),className:U("flex-1 min-w-0 text-base-app font-semibold truncate pr-1 text-right bg-transparent border-none outline-none",m?"text-foreground cursor-pointer":"text-muted-foreground cursor-default"),children:m?f:"Find address"}),m&&s.jsx("button",{className:"w-9 h-9 max-[640px]:w-8 max-[640px]:h-8 rounded-[10px] flex items-center justify-center shrink-0 transition-all active:scale-95 bg-muted border border-border text-text-sub",onClick:()=>FN(f,"Lodge Address"),children:s.jsx(iN,{className:"w-[16px] h-[16px]"})}),s.jsx("button",{disabled:!t&&!m||!u||h&&a,className:U("w-9 h-9 max-[640px]:w-8 max-[640px]:h-8 rounded-[10px] flex items-center justify-center shrink-0 transition-all active:scale-95",m?"bg-[hsl(219_100%_95%)] border border-[hsl(219_100%_90%)] text-[hsl(230_60%_30%)]":"border border-dashed border-primary text-primary bg-transparent",(!t&&!m||!u||h&&a)&&"opacity-50 cursor-not-allowed"),onClick:()=>m?fh(f,{label:"Lodge Address"}):x(),children:s.jsx(lr,{className:"w-[18px] h-[18px]"})}),u&&s.jsx("button",{type:"button",disabled:h&&a,onClick:x,"aria-label":"Edit lodge address",className:U("w-9 h-9 max-[640px]:w-8 max-[640px]:h-8 rounded-[10px] flex items-center justify-center border",h&&a?"opacity-50 cursor-not-allowed border-border text-muted-foreground":"border-border text-text-sub bg-muted"),children:s.jsx(uT,{className:"w-4 h-4"})})]})]})}function BN(){const{user:e,isTestMode:t}=Qt(),r=!!e;return fr({queryKey:["sites"],queryFn:async()=>{if(!r)return Zf;const{data:n,error:o}=await me.from("sites").select("id, name").order("name",{ascending:!0});if(o)return Zf;const a=(n||[]).map(i=>({site_id:String(i.id),site_name:String(i.name||"")})).filter(i=>!!i.site_id&&!!i.site_name);return a.length>0?a:Zf},enabled:r||t,staleTime:1e3*60*5})}var rp="focusScope.autoFocusOnMount",np="focusScope.autoFocusOnUnmount",Sy={bubbles:!1,cancelable:!0},vO="FocusScope",zN=p.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:o,onUnmountAutoFocus:a,...i}=e,[l,c]=p.useState(null),d=Hi(o),h=Hi(a),u=p.useRef(null),f=Un(t,x=>c(x)),m=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(n){let x=function(v){if(m.paused||!l)return;const k=v.target;l.contains(k)?u.current=k:Ks(u.current,{select:!0})},N=function(v){if(m.paused||!l)return;const k=v.relatedTarget;k!==null&&(l.contains(k)||Ks(u.current,{select:!0}))},b=function(v){if(document.activeElement===document.body)for(const S of v)S.removedNodes.length>0&&Ks(l)};document.addEventListener("focusin",x),document.addEventListener("focusout",N);const y=new MutationObserver(b);return l&&y.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",N),y.disconnect()}}},[n,l,m.paused]),p.useEffect(()=>{if(l){Cy.add(m);const x=document.activeElement;if(!l.contains(x)){const b=new CustomEvent(rp,Sy);l.addEventListener(rp,d),l.dispatchEvent(b),b.defaultPrevented||(wO(_O(VN(l)),{select:!0}),document.activeElement===x&&Ks(l))}return()=>{l.removeEventListener(rp,d),setTimeout(()=>{const b=new CustomEvent(np,Sy);l.addEventListener(np,h),l.dispatchEvent(b),b.defaultPrevented||Ks(x??document.body,{select:!0}),l.removeEventListener(np,h),Cy.remove(m)},0)}}},[l,d,h,m]);const g=p.useCallback(x=>{if(!r&&!n||m.paused)return;const N=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,b=document.activeElement;if(N&&b){const y=x.currentTarget,[v,k]=jO(y);v&&k?!x.shiftKey&&b===k?(x.preventDefault(),r&&Ks(v,{select:!0})):x.shiftKey&&b===v&&(x.preventDefault(),r&&Ks(k,{select:!0})):b===y&&x.preventDefault()}},[r,n,m.paused]);return s.jsx(Qr.div,{tabIndex:-1,...i,ref:f,onKeyDown:g})});zN.displayName=vO;function wO(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(Ks(n,{select:t}),document.activeElement!==r)return}function jO(e){const t=VN(e),r=_y(t,e),n=_y(t.reverse(),e);return[r,n]}function VN(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const o=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||o?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function _y(e,t){for(const r of e)if(!NO(r,{upTo:t}))return r}function NO(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function kO(e){return e instanceof HTMLInputElement&&"select"in e}function Ks(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&kO(e)&&t&&e.select()}}var Cy=SO();function SO(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=Ey(e,t),e.unshift(t)},remove(t){var r;e=Ey(e,t),(r=e[0])==null||r.resume()}}}function Ey(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function _O(e){return e.filter(t=>t.tagName!=="A")}var sp=0;function CO(){p.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Py()),document.body.insertAdjacentElement("beforeend",e[1]??Py()),sp++,()=>{sp===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),sp--}},[])}function Py(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var mu="right-scroll-bar-position",xu="width-before-scroll-bar",EO="with-scroll-bars-hidden",PO="--removed-body-scroll-bar-size";function op(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function RO(e,t){var r=p.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var o=r.value;o!==n&&(r.value=n,r.callback(n,o))}}}})[0];return r.callback=t,r.facade}var TO=typeof window<"u"?p.useLayoutEffect:p.useEffect,Ry=new WeakMap;function AO(e,t){var r=RO(null,function(n){return e.forEach(function(o){return op(o,n)})});return TO(function(){var n=Ry.get(r);if(n){var o=new Set(n),a=new Set(e),i=r.current;o.forEach(function(l){a.has(l)||op(l,null)}),a.forEach(function(l){o.has(l)||op(l,i)})}Ry.set(r,e)},[e]),r}function OO(e){return e}function DO(e,t){t===void 0&&(t=OO);var r=[],n=!1,o={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(a){var i=t(a,n);return r.push(i),function(){r=r.filter(function(l){return l!==i})}},assignSyncMedium:function(a){for(n=!0;r.length;){var i=r;r=[],i.forEach(a)}r={push:function(l){return a(l)},filter:function(){return r}}},assignMedium:function(a){n=!0;var i=[];if(r.length){var l=r;r=[],l.forEach(a),i=r}var c=function(){var h=i;i=[],h.forEach(a)},d=function(){return Promise.resolve().then(c)};d(),r={push:function(h){i.push(h),d()},filter:function(h){return i=i.filter(h),r}}}};return o}function IO(e){e===void 0&&(e={});var t=DO(null);return t.options=Zn({async:!0,ssr:!1},e),t}var WN=function(e){var t=e.sideCar,r=il(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return p.createElement(n,Zn({},r))};WN.isSideCarExport=!0;function MO(e,t){return e.useMedium(t),WN}var qN=IO(),ap=function(){},Gh=p.forwardRef(function(e,t){var r=p.useRef(null),n=p.useState({onScrollCapture:ap,onWheelCapture:ap,onTouchMoveCapture:ap}),o=n[0],a=n[1],i=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,h=e.enabled,u=e.shards,f=e.sideCar,m=e.noRelative,g=e.noIsolation,x=e.inert,N=e.allowPinchZoom,b=e.as,y=b===void 0?"div":b,v=e.gapMode,k=il(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=f,E=AO([r,t]),C=Zn(Zn({},k),o);return p.createElement(p.Fragment,null,h&&p.createElement(S,{sideCar:qN,removeScrollBar:d,shards:u,noRelative:m,noIsolation:g,inert:x,setCallbacks:a,allowPinchZoom:!!N,lockRef:r,gapMode:v}),i?p.cloneElement(p.Children.only(l),Zn(Zn({},C),{ref:E})):p.createElement(y,Zn({},C,{className:c,ref:E}),l))});Gh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Gh.classNames={fullWidth:xu,zeroRight:mu};var $O=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function LO(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=$O();return t&&e.setAttribute("nonce",t),e}function FO(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function UO(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var BO=function(){var e=0,t=null;return{add:function(r){e==0&&(t=LO())&&(FO(t,r),UO(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},zO=function(){var e=BO();return function(t,r){p.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},HN=function(){var e=zO(),t=function(r){var n=r.styles,o=r.dynamic;return e(n,o),null};return t},VO={left:0,top:0,right:0,gap:0},ip=function(e){return parseInt(e||"",10)||0},WO=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],o=t[e==="padding"?"paddingRight":"marginRight"];return[ip(r),ip(n),ip(o)]},qO=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return VO;var t=WO(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},HO=HN(),ki="data-scroll-locked",KO=function(e,t,r,n){var o=e.left,a=e.top,i=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(EO,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(ki,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(mu,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(xu,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(mu," .").concat(mu,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(xu," .").concat(xu,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(ki,`] {
    `).concat(PO,": ").concat(l,`px;
  }
`)},Ty=function(){var e=parseInt(document.body.getAttribute(ki)||"0",10);return isFinite(e)?e:0},GO=function(){p.useEffect(function(){return document.body.setAttribute(ki,(Ty()+1).toString()),function(){var e=Ty()-1;e<=0?document.body.removeAttribute(ki):document.body.setAttribute(ki,e.toString())}},[])},QO=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,o=n===void 0?"margin":n;GO();var a=p.useMemo(function(){return qO(o)},[o]);return p.createElement(HO,{styles:KO(a,!t,o,r?"":"!important")})},Xm=!1;if(typeof window<"u")try{var Md=Object.defineProperty({},"passive",{get:function(){return Xm=!0,!0}});window.addEventListener("test",Md,Md),window.removeEventListener("test",Md,Md)}catch{Xm=!1}var Ha=Xm?{passive:!1}:!1,YO=function(e){return e.tagName==="TEXTAREA"},KN=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!YO(e)&&r[t]==="visible")},JO=function(e){return KN(e,"overflowY")},XO=function(e){return KN(e,"overflowX")},Ay=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var o=GN(e,n);if(o){var a=QN(e,n),i=a[1],l=a[2];if(i>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},ZO=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},eD=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},GN=function(e,t){return e==="v"?JO(t):XO(t)},QN=function(e,t){return e==="v"?ZO(t):eD(t)},tD=function(e,t){return e==="h"&&t==="rtl"?-1:1},rD=function(e,t,r,n,o){var a=tD(e,window.getComputedStyle(t).direction),i=a*n,l=r.target,c=t.contains(l),d=!1,h=i>0,u=0,f=0;do{if(!l)break;var m=QN(e,l),g=m[0],x=m[1],N=m[2],b=x-N-a*g;(g||b)&&GN(e,l)&&(u+=b,f+=g);var y=l.parentNode;l=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(h&&(Math.abs(u)<1||!o)||!h&&(Math.abs(f)<1||!o))&&(d=!0),d},$d=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Oy=function(e){return[e.deltaX,e.deltaY]},Dy=function(e){return e&&"current"in e?e.current:e},nD=function(e,t){return e[0]===t[0]&&e[1]===t[1]},sD=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},oD=0,Ka=[];function aD(e){var t=p.useRef([]),r=p.useRef([0,0]),n=p.useRef(),o=p.useState(oD++)[0],a=p.useState(HN)[0],i=p.useRef(e);p.useEffect(function(){i.current=e},[e]),p.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var x=yP([e.lockRef.current],(e.shards||[]).map(Dy),!0).filter(Boolean);return x.forEach(function(N){return N.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),x.forEach(function(N){return N.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var l=p.useCallback(function(x,N){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!i.current.allowPinchZoom;var b=$d(x),y=r.current,v="deltaX"in x?x.deltaX:y[0]-b[0],k="deltaY"in x?x.deltaY:y[1]-b[1],S,E=x.target,C=Math.abs(v)>Math.abs(k)?"h":"v";if("touches"in x&&C==="h"&&E.type==="range")return!1;var R=Ay(C,E);if(!R)return!0;if(R?S=C:(S=C==="v"?"h":"v",R=Ay(C,E)),!R)return!1;if(!n.current&&"changedTouches"in x&&(v||k)&&(n.current=S),!S)return!0;var F=n.current||S;return rD(F,N,x,F==="h"?v:k,!0)},[]),c=p.useCallback(function(x){var N=x;if(!(!Ka.length||Ka[Ka.length-1]!==a)){var b="deltaY"in N?Oy(N):$d(N),y=t.current.filter(function(S){return S.name===N.type&&(S.target===N.target||N.target===S.shadowParent)&&nD(S.delta,b)})[0];if(y&&y.should){N.cancelable&&N.preventDefault();return}if(!y){var v=(i.current.shards||[]).map(Dy).filter(Boolean).filter(function(S){return S.contains(N.target)}),k=v.length>0?l(N,v[0]):!i.current.noIsolation;k&&N.cancelable&&N.preventDefault()}}},[]),d=p.useCallback(function(x,N,b,y){var v={name:x,delta:N,target:b,should:y,shadowParent:iD(b)};t.current.push(v),setTimeout(function(){t.current=t.current.filter(function(k){return k!==v})},1)},[]),h=p.useCallback(function(x){r.current=$d(x),n.current=void 0},[]),u=p.useCallback(function(x){d(x.type,Oy(x),x.target,l(x,e.lockRef.current))},[]),f=p.useCallback(function(x){d(x.type,$d(x),x.target,l(x,e.lockRef.current))},[]);p.useEffect(function(){return Ka.push(a),e.setCallbacks({onScrollCapture:u,onWheelCapture:u,onTouchMoveCapture:f}),document.addEventListener("wheel",c,Ha),document.addEventListener("touchmove",c,Ha),document.addEventListener("touchstart",h,Ha),function(){Ka=Ka.filter(function(x){return x!==a}),document.removeEventListener("wheel",c,Ha),document.removeEventListener("touchmove",c,Ha),document.removeEventListener("touchstart",h,Ha)}},[]);var m=e.removeScrollBar,g=e.inert;return p.createElement(p.Fragment,null,g?p.createElement(a,{styles:sD(o)}):null,m?p.createElement(QO,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function iD(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const lD=MO(qN,aD);var YN=p.forwardRef(function(e,t){return p.createElement(Gh,Zn({},e,{ref:t,sideCar:lD}))});YN.classNames=Gh.classNames;var cD=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Ga=new WeakMap,Ld=new WeakMap,Fd={},lp=0,JN=function(e){return e&&(e.host||JN(e.parentNode))},dD=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=JN(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},uD=function(e,t,r,n){var o=dD(t,Array.isArray(e)?e:[e]);Fd[r]||(Fd[r]=new WeakMap);var a=Fd[r],i=[],l=new Set,c=new Set(o),d=function(u){!u||l.has(u)||(l.add(u),d(u.parentNode))};o.forEach(d);var h=function(u){!u||c.has(u)||Array.prototype.forEach.call(u.children,function(f){if(l.has(f))h(f);else try{var m=f.getAttribute(n),g=m!==null&&m!=="false",x=(Ga.get(f)||0)+1,N=(a.get(f)||0)+1;Ga.set(f,x),a.set(f,N),i.push(f),x===1&&g&&Ld.set(f,!0),N===1&&f.setAttribute(r,"true"),g||f.setAttribute(n,"true")}catch(b){console.error("aria-hidden: cannot operate on ",f,b)}})};return h(t),l.clear(),lp++,function(){i.forEach(function(u){var f=Ga.get(u)-1,m=a.get(u)-1;Ga.set(u,f),a.set(u,m),f||(Ld.has(u)||u.removeAttribute(n),Ld.delete(u)),m||u.removeAttribute(r)}),lp--,lp||(Ga=new WeakMap,Ga=new WeakMap,Ld=new WeakMap,Fd={})}},hD=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),o=cD(e);return o?(n.push.apply(n,Array.from(o.querySelectorAll("[aria-live]"))),uD(n,o,r,"aria-hidden")):function(){return null}},Qh="Dialog",[XN,KI]=Jx(Qh),[fD,Bn]=XN(Qh),ZN=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:o,onOpenChange:a,modal:i=!0}=e,l=p.useRef(null),c=p.useRef(null),[d,h]=B5({prop:n,defaultProp:o??!1,onChange:a,caller:Qh});return s.jsx(fD,{scope:t,triggerRef:l,contentRef:c,contentId:Uf(),titleId:Uf(),descriptionId:Uf(),open:d,onOpenChange:h,onOpenToggle:p.useCallback(()=>h(u=>!u),[h]),modal:i,children:r})};ZN.displayName=Qh;var e2="DialogTrigger",t2=p.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,o=Bn(e2,r),a=Un(t,o.triggerRef);return s.jsx(Qr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":Pg(o.open),...n,ref:a,onClick:Wr(e.onClick,o.onOpenToggle)})});t2.displayName=e2;var Cg="DialogPortal",[pD,r2]=XN(Cg,{forceMount:void 0}),n2=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:o}=e,a=Bn(Cg,t);return s.jsx(pD,{scope:t,forceMount:r,children:p.Children.map(n,i=>s.jsx(Wc,{present:r||a.open,children:s.jsx(X1,{asChild:!0,container:o,children:i})}))})};n2.displayName=Cg;var ph="DialogOverlay",s2=p.forwardRef((e,t)=>{const r=r2(ph,e.__scopeDialog),{forceMount:n=r.forceMount,...o}=e,a=Bn(ph,e.__scopeDialog);return a.modal?s.jsx(Wc,{present:n||a.open,children:s.jsx(xD,{...o,ref:t})}):null});s2.displayName=ph;var mD=Xx("DialogOverlay.RemoveScroll"),xD=p.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,o=Bn(ph,r);return s.jsx(YN,{as:mD,allowPinchZoom:!0,shards:[o.contentRef],children:s.jsx(Qr.div,{"data-state":Pg(o.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),Pa="DialogContent",o2=p.forwardRef((e,t)=>{const r=r2(Pa,e.__scopeDialog),{forceMount:n=r.forceMount,...o}=e,a=Bn(Pa,e.__scopeDialog);return s.jsx(Wc,{present:n||a.open,children:a.modal?s.jsx(gD,{...o,ref:t}):s.jsx(bD,{...o,ref:t})})});o2.displayName=Pa;var gD=p.forwardRef((e,t)=>{const r=Bn(Pa,e.__scopeDialog),n=p.useRef(null),o=Un(t,r.contentRef,n);return p.useEffect(()=>{const a=n.current;if(a)return hD(a)},[]),s.jsx(a2,{...e,ref:o,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Wr(e.onCloseAutoFocus,a=>{var i;a.preventDefault(),(i=r.triggerRef.current)==null||i.focus()}),onPointerDownOutside:Wr(e.onPointerDownOutside,a=>{const i=a.detail.originalEvent,l=i.button===0&&i.ctrlKey===!0;(i.button===2||l)&&a.preventDefault()}),onFocusOutside:Wr(e.onFocusOutside,a=>a.preventDefault())})}),bD=p.forwardRef((e,t)=>{const r=Bn(Pa,e.__scopeDialog),n=p.useRef(!1),o=p.useRef(!1);return s.jsx(a2,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var i,l;(i=e.onCloseAutoFocus)==null||i.call(e,a),a.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),a.preventDefault()),n.current=!1,o.current=!1},onInteractOutside:a=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,a),a.defaultPrevented||(n.current=!0,a.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const i=a.target;((d=r.triggerRef.current)==null?void 0:d.contains(i))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&o.current&&a.preventDefault()}})}),a2=p.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:o,onCloseAutoFocus:a,...i}=e,l=Bn(Pa,r),c=p.useRef(null),d=Un(t,c);return CO(),s.jsxs(s.Fragment,{children:[s.jsx(zN,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:o,onUnmountAutoFocus:a,children:s.jsx(Zx,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Pg(l.open),...i,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(yD,{titleId:l.titleId}),s.jsx(wD,{contentRef:c,descriptionId:l.descriptionId})]})]})}),Eg="DialogTitle",i2=p.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,o=Bn(Eg,r);return s.jsx(Qr.h2,{id:o.titleId,...n,ref:t})});i2.displayName=Eg;var l2="DialogDescription",c2=p.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,o=Bn(l2,r);return s.jsx(Qr.p,{id:o.descriptionId,...n,ref:t})});c2.displayName=l2;var d2="DialogClose",u2=p.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,o=Bn(d2,r);return s.jsx(Qr.button,{type:"button",...n,ref:t,onClick:Wr(e.onClick,()=>o.onOpenChange(!1))})});u2.displayName=d2;function Pg(e){return e?"open":"closed"}var h2="DialogTitleWarning",[GI,f2]=Q_(h2,{contentName:Pa,titleName:Eg,docsSlug:"dialog"}),yD=({titleId:e})=>{const t=f2(h2),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return p.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},vD="DialogDescriptionWarning",wD=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${f2(vD).contentName}}.`;return p.useEffect(()=>{var a;const o=(a=e.current)==null?void 0:a.getAttribute("aria-describedby");t&&o&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},jD=ZN,ND=t2,kD=n2,SD=s2,_D=o2,CD=i2,ED=c2,PD=u2;function RD(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}const p2=Q.createContext({drawerRef:{current:null},overlayRef:{current:null},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,handleOnly:!1,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},closeDrawer:()=>{},direction:"bottom",shouldScaleBackground:!1,setBackgroundColorOnScale:!0,noBodyStyles:!1,container:null,autoFocus:!1}),dl=()=>{const e=Q.useContext(p2);if(!e)throw new Error("useDrawerContext must be used within a Drawer.Root");return e};RD(`[data-vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1);animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=open]{animation-name:slideFromBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=closed]{animation-name:slideToBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=open]{animation-name:slideFromTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=closed]{animation-name:slideToTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=open]{animation-name:slideFromLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=closed]{animation-name:slideToLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=open]{animation-name:slideFromRight}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=closed]{animation-name:slideToRight}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,100%,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,-100%,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(-100%,0,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(100%,0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-overlay][data-vaul-snap-points=false]{animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-overlay][data-vaul-snap-points=false][data-state=open]{animation-name:fadeIn}[data-vaul-overlay][data-state=closed]{animation-name:fadeOut}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:1}[data-vaul-drawer]:not([data-vaul-custom-container=true])::after{content:'';position:absolute;background:inherit;background-color:inherit}[data-vaul-drawer][data-vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[data-vaul-drawer][data-vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[data-vaul-overlay][data-vaul-snap-points=true]:not([data-vaul-snap-points-overlay=true]):not(
[data-state=closed]
){opacity:0}[data-vaul-overlay][data-vaul-snap-points-overlay=true]{opacity:1}[data-vaul-handle]{display:block;position:relative;opacity:.7;background:#e2e2e4;margin-left:auto;margin-right:auto;height:5px;width:32px;border-radius:1rem;touch-action:pan-y}[data-vaul-handle]:active,[data-vaul-handle]:hover{opacity:1}[data-vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}@media (hover:hover) and (pointer:fine){[data-vaul-drawer]{user-select:none}}@media (pointer:fine){[data-vaul-handle-hitarea]:{width:100%;height:100%}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{to{opacity:0}}@keyframes slideFromBottom{from{transform:translate3d(0,100%,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToBottom{to{transform:translate3d(0,100%,0)}}@keyframes slideFromTop{from{transform:translate3d(0,-100%,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToTop{to{transform:translate3d(0,-100%,0)}}@keyframes slideFromLeft{from{transform:translate3d(-100%,0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToLeft{to{transform:translate3d(-100%,0,0)}}@keyframes slideFromRight{from{transform:translate3d(100%,0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToRight{to{transform:translate3d(100%,0,0)}}`);const TD=24,AD=typeof window<"u"?p.useLayoutEffect:p.useEffect;function Iy(...e){return(...t)=>{for(let r of e)typeof r=="function"&&r(...t)}}function OD(){return Rg(/^Mac/)}function DD(){return Rg(/^iPhone/)}function My(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function ID(){return Rg(/^iPad/)||OD()&&navigator.maxTouchPoints>1}function m2(){return DD()||ID()}function Rg(e){return typeof window<"u"&&window.navigator!=null?e.test(window.navigator.platform):void 0}const cp=typeof document<"u"&&window.visualViewport;function $y(e){let t=window.getComputedStyle(e);return/(auto|scroll)/.test(t.overflow+t.overflowX+t.overflowY)}function x2(e){for($y(e)&&(e=e.parentElement);e&&!$y(e);)e=e.parentElement;return e||document.scrollingElement||document.documentElement}const MD=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let Ud=0,dp;function $D(e={}){let{isDisabled:t}=e;AD(()=>{if(!t)return Ud++,Ud===1&&m2()&&(dp=LD()),()=>{Ud--,Ud===0&&(dp==null||dp())}},[t])}function LD(){let e,t=0,r=u=>{e=x2(u.target),!(e===document.documentElement&&e===document.body)&&(t=u.changedTouches[0].pageY)},n=u=>{if(!e||e===document.documentElement||e===document.body){u.preventDefault();return}let f=u.changedTouches[0].pageY,m=e.scrollTop,g=e.scrollHeight-e.clientHeight;g!==0&&((m<=0&&f>t||m>=g&&f<t)&&u.preventDefault(),t=f)},o=u=>{let f=u.target;Zm(f)&&f!==document.activeElement&&(u.preventDefault(),f.style.transform="translateY(-2000px)",f.focus(),requestAnimationFrame(()=>{f.style.transform=""}))},a=u=>{let f=u.target;Zm(f)&&(f.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{f.style.transform="",cp&&(cp.height<window.innerHeight?requestAnimationFrame(()=>{Ly(f)}):cp.addEventListener("resize",()=>Ly(f),{once:!0}))}))},i=()=>{window.scrollTo(0,0)},l=window.pageXOffset,c=window.pageYOffset,d=Iy(FD(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`));window.scrollTo(0,0);let h=Iy(Pl(document,"touchstart",r,{passive:!1,capture:!0}),Pl(document,"touchmove",n,{passive:!1,capture:!0}),Pl(document,"touchend",o,{passive:!1,capture:!0}),Pl(document,"focus",a,!0),Pl(window,"scroll",i));return()=>{d(),h(),window.scrollTo(l,c)}}function FD(e,t,r){let n=e.style[t];return e.style[t]=r,()=>{e.style[t]=n}}function Pl(e,t,r,n){return e.addEventListener(t,r,n),()=>{e.removeEventListener(t,r,n)}}function Ly(e){let t=document.scrollingElement||document.documentElement;for(;e&&e!==t;){let r=x2(e);if(r!==document.documentElement&&r!==document.body&&r!==e){let n=r.getBoundingClientRect().top,o=e.getBoundingClientRect().top,a=e.getBoundingClientRect().bottom;const i=r.getBoundingClientRect().bottom+TD;a>i&&(r.scrollTop+=o-n)}e=r.parentElement}}function Zm(e){return e instanceof HTMLInputElement&&!MD.has(e.type)||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable}function UD(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function BD(...e){return t=>e.forEach(r=>UD(r,t))}function g2(...e){return p.useCallback(BD(...e),e)}const b2=new WeakMap;function nr(e,t,r=!1){if(!e||!(e instanceof HTMLElement))return;let n={};Object.entries(t).forEach(([o,a])=>{if(o.startsWith("--")){e.style.setProperty(o,a);return}n[o]=e.style[o],e.style[o]=a}),!r&&b2.set(e,n)}function zD(e,t){if(!e||!(e instanceof HTMLElement))return;let r=b2.get(e);r&&(e.style[t]=r[t])}const sr=e=>{switch(e){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return e}};function Bd(e,t){if(!e)return null;const r=window.getComputedStyle(e),n=r.transform||r.webkitTransform||r.mozTransform;let o=n.match(/^matrix3d\((.+)\)$/);return o?parseFloat(o[1].split(", ")[sr(t)?13:12]):(o=n.match(/^matrix\((.+)\)$/),o?parseFloat(o[1].split(", ")[sr(t)?5:4]):null)}function VD(e){return 8*(Math.log(e+1)-2)}function up(e,t){if(!e)return()=>{};const r=e.style.cssText;return Object.assign(e.style,t),()=>{e.style.cssText=r}}function WD(...e){return(...t)=>{for(const r of e)typeof r=="function"&&r(...t)}}const Mt={DURATION:.5,EASE:[.32,.72,0,1]},y2=.4,qD=.25,HD=100,v2=8,qo=16,ex=26,hp="vaul-dragging";function w2(e){const t=Q.useRef(e);return Q.useEffect(()=>{t.current=e}),Q.useMemo(()=>(...r)=>t.current==null?void 0:t.current.call(t,...r),[])}function KD({defaultProp:e,onChange:t}){const r=Q.useState(e),[n]=r,o=Q.useRef(n),a=w2(t);return Q.useEffect(()=>{o.current!==n&&(a(n),o.current=n)},[n,o,a]),r}function j2({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,o]=KD({defaultProp:t,onChange:r}),a=e!==void 0,i=a?e:n,l=w2(r),c=Q.useCallback(d=>{if(a){const u=typeof d=="function"?d(e):d;u!==e&&l(u)}else o(d)},[a,e,o,l]);return[i,c]}function GD({activeSnapPointProp:e,setActiveSnapPointProp:t,snapPoints:r,drawerRef:n,overlayRef:o,fadeFromIndex:a,onSnapPointChange:i,direction:l="bottom",container:c,snapToSequentialPoint:d}){const[h,u]=j2({prop:e,defaultProp:r==null?void 0:r[0],onChange:t}),[f,m]=Q.useState(typeof window<"u"?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0);Q.useEffect(()=>{function C(){m({innerWidth:window.innerWidth,innerHeight:window.innerHeight})}return window.addEventListener("resize",C),()=>window.removeEventListener("resize",C)},[]);const g=Q.useMemo(()=>h===(r==null?void 0:r[r.length-1])||null,[r,h]),x=Q.useMemo(()=>r==null?void 0:r.findIndex(C=>C===h),[r,h]),N=r&&r.length>0&&(a||a===0)&&!Number.isNaN(a)&&r[a]===h||!r,b=Q.useMemo(()=>{const C=c?{width:c.getBoundingClientRect().width,height:c.getBoundingClientRect().height}:typeof window<"u"?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0};var R;return(R=r==null?void 0:r.map(F=>{const T=typeof F=="string";let V=0;if(T&&(V=parseInt(F,10)),sr(l)){const W=T?V:f?F*C.height:0;return f?l==="bottom"?C.height-W:-C.height+W:W}const Y=T?V:f?F*C.width:0;return f?l==="right"?C.width-Y:-C.width+Y:Y}))!=null?R:[]},[r,f,c]),y=Q.useMemo(()=>x!==null?b==null?void 0:b[x]:null,[b,x]),v=Q.useCallback(C=>{var R;const F=(R=b==null?void 0:b.findIndex(T=>T===C))!=null?R:null;i(F),nr(n.current,{transition:`transform ${Mt.DURATION}s cubic-bezier(${Mt.EASE.join(",")})`,transform:sr(l)?`translate3d(0, ${C}px, 0)`:`translate3d(${C}px, 0, 0)`}),b&&F!==b.length-1&&F!==a&&F<a?nr(o.current,{transition:`opacity ${Mt.DURATION}s cubic-bezier(${Mt.EASE.join(",")})`,opacity:"0"}):nr(o.current,{transition:`opacity ${Mt.DURATION}s cubic-bezier(${Mt.EASE.join(",")})`,opacity:"1"}),u(r==null?void 0:r[Math.max(F,0)])},[n.current,r,b,a,o,u]);Q.useEffect(()=>{if(h||e){var C;const R=(C=r==null?void 0:r.findIndex(F=>F===e||F===h))!=null?C:-1;b&&R!==-1&&typeof b[R]=="number"&&v(b[R])}},[h,e,r,b,v]);function k({draggedDistance:C,closeDrawer:R,velocity:F,dismissible:T}){if(a===void 0)return;const V=l==="bottom"||l==="right"?(y??0)-C:(y??0)+C,Y=x===a-1,W=x===0,X=C>0;if(Y&&nr(o.current,{transition:`opacity ${Mt.DURATION}s cubic-bezier(${Mt.EASE.join(",")})`}),!d&&F>2&&!X){T?R():v(b[0]);return}if(!d&&F>2&&X&&b&&r){v(b[r.length-1]);return}const ne=b==null?void 0:b.reduce((ie,B)=>typeof ie!="number"||typeof B!="number"?ie:Math.abs(B-V)<Math.abs(ie-V)?B:ie),te=sr(l)?window.innerHeight:window.innerWidth;if(F>y2&&Math.abs(C)<te*.4){const ie=X?1:-1;if(ie>0&&g){v(b[r.length-1]);return}if(W&&ie<0&&T&&R(),x===null)return;v(b[x+ie]);return}v(ne)}function S({draggedDistance:C}){if(y===null)return;const R=l==="bottom"||l==="right"?y-C:y+C;(l==="bottom"||l==="right")&&R<b[b.length-1]||(l==="top"||l==="left")&&R>b[b.length-1]||nr(n.current,{transform:sr(l)?`translate3d(0, ${R}px, 0)`:`translate3d(${R}px, 0, 0)`})}function E(C,R){if(!r||typeof x!="number"||!b||a===void 0)return null;const F=x===a-1;if(x>=a&&R)return 0;if(F&&!R)return 1;if(!N&&!F)return null;const V=F?x+1:x-1,Y=F?b[V]-b[V-1]:b[V+1]-b[V],W=C/Math.abs(Y);return F?1-W:W}return{isLastSnapPoint:g,activeSnapPoint:h,shouldFade:N,getPercentageDragged:E,setActiveSnapPoint:u,activeSnapPointIndex:x,onRelease:k,onDrag:S,snapPointsOffset:b}}const QD=()=>()=>{};function YD(){const{direction:e,isOpen:t,shouldScaleBackground:r,setBackgroundColorOnScale:n,noBodyStyles:o}=dl(),a=Q.useRef(null),i=p.useMemo(()=>document.body.style.backgroundColor,[]);function l(){return(window.innerWidth-ex)/window.innerWidth}Q.useEffect(()=>{if(t&&r){a.current&&clearTimeout(a.current);const c=document.querySelector("[data-vaul-drawer-wrapper]")||document.querySelector("[vaul-drawer-wrapper]");if(!c)return;WD(n&&!o?up(document.body,{background:"black"}):QD,up(c,{transformOrigin:sr(e)?"top":"left",transitionProperty:"transform, border-radius",transitionDuration:`${Mt.DURATION}s`,transitionTimingFunction:`cubic-bezier(${Mt.EASE.join(",")})`}));const d=up(c,{borderRadius:`${v2}px`,overflow:"hidden",...sr(e)?{transform:`scale(${l()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`}:{transform:`scale(${l()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`}});return()=>{d(),a.current=window.setTimeout(()=>{i?document.body.style.background=i:document.body.style.removeProperty("background")},Mt.DURATION*1e3)}}},[t,r,i])}let Rl=null;function JD({isOpen:e,modal:t,nested:r,hasBeenOpened:n,preventScrollRestoration:o,noBodyStyles:a}){const[i,l]=Q.useState(()=>typeof window<"u"?window.location.href:""),c=Q.useRef(0),d=Q.useCallback(()=>{if(My()&&Rl===null&&e&&!a){Rl={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:u,innerHeight:f}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:`${-c.current}px`,left:`${-u}px`,right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const m=f-window.innerHeight;m&&c.current>=f&&(document.body.style.top=`${-(c.current+m)}px`)}),300)}},[e]),h=Q.useCallback(()=>{if(My()&&Rl!==null&&!a){const u=-parseInt(document.body.style.top,10),f=-parseInt(document.body.style.left,10);Object.assign(document.body.style,Rl),window.requestAnimationFrame(()=>{if(o&&i!==window.location.href){l(window.location.href);return}window.scrollTo(f,u)}),Rl=null}},[i]);return Q.useEffect(()=>{function u(){c.current=window.scrollY}return u(),window.addEventListener("scroll",u),()=>{window.removeEventListener("scroll",u)}},[]),Q.useEffect(()=>{r||!n||(e?(!window.matchMedia("(display-mode: standalone)").matches&&d(),t||window.setTimeout(()=>{h()},500)):h())},[e,n,i,t,r,d,h]),{restorePositionSetting:h}}function N2({open:e,onOpenChange:t,children:r,onDrag:n,onRelease:o,snapPoints:a,shouldScaleBackground:i=!1,setBackgroundColorOnScale:l=!0,closeThreshold:c=qD,scrollLockTimeout:d=HD,dismissible:h=!0,handleOnly:u=!1,fadeFromIndex:f=a&&a.length-1,activeSnapPoint:m,setActiveSnapPoint:g,fixed:x,modal:N=!0,onClose:b,nested:y,noBodyStyles:v,direction:k="bottom",defaultOpen:S=!1,disablePreventScroll:E=!0,snapToSequentialPoint:C=!1,preventScrollRestoration:R=!1,repositionInputs:F=!0,onAnimationEnd:T,container:V,autoFocus:Y=!1}){var W,X;const[ne=!1,te]=j2({defaultProp:S,prop:e,onChange:de=>{t==null||t(de),!de&&!y&&pe(),setTimeout(()=>{T==null||T(de)},Mt.DURATION*1e3),de&&!N&&typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),de||(document.body.style.pointerEvents="auto")}}),[ie,B]=Q.useState(!1),[$,K]=Q.useState(!1),[ce,ue]=Q.useState(!1),Z=Q.useRef(null),fe=Q.useRef(null),ve=Q.useRef(null),Oe=Q.useRef(null),le=Q.useRef(null),Ze=Q.useRef(!1),gt=Q.useRef(null),Ae=Q.useRef(0),rt=Q.useRef(!1),et=Q.useRef(0),je=Q.useRef(null),_t=Q.useRef(((W=je.current)==null?void 0:W.getBoundingClientRect().height)||0),Ee=Q.useRef(((X=je.current)==null?void 0:X.getBoundingClientRect().width)||0),It=Q.useRef(0),ot=Q.useCallback(de=>{a&&de===jt.length-1&&(fe.current=new Date)},[]),{activeSnapPoint:bt,activeSnapPointIndex:yt,setActiveSnapPoint:cr,onRelease:dr,snapPointsOffset:jt,onDrag:ft,shouldFade:Ot,getPercentageDragged:J}=GD({snapPoints:a,activeSnapPointProp:m,setActiveSnapPointProp:g,drawerRef:je,fadeFromIndex:f,overlayRef:Z,onSnapPointChange:ot,direction:k,container:V,snapToSequentialPoint:C});$D({isDisabled:!ne||$||!N||ce||!ie||!F||!E});const{restorePositionSetting:pe}=JD({isOpen:ne,modal:N,nested:y,hasBeenOpened:ie,preventScrollRestoration:R,noBodyStyles:v});function Se(){return(window.innerWidth-ex)/window.innerWidth}function we(de){var Ie,Ge;!h&&!a||je.current&&!je.current.contains(de.target)||(_t.current=((Ie=je.current)==null?void 0:Ie.getBoundingClientRect().height)||0,Ee.current=((Ge=je.current)==null?void 0:Ge.getBoundingClientRect().width)||0,K(!0),ve.current=new Date,m2()&&window.addEventListener("touchend",()=>Ze.current=!1,{once:!0}),de.target.setPointerCapture(de.pointerId),Ae.current=sr(k)?de.pageY:de.pageX)}function ze(de,Ie){var Ge,Me;let Qe=de;const pt=(Ge=window.getSelection())==null?void 0:Ge.toString(),nt=je.current?Bd(je.current,k):null,ye=new Date;if(Qe.hasAttribute("data-vaul-no-drag")||Qe.closest("[data-vaul-no-drag]"))return!1;if(k==="right"||k==="left")return!0;if(fe.current&&ye.getTime()-fe.current.getTime()<500)return!1;if(nt!==null&&(k==="bottom"?nt>0:nt<0))return!0;if(pt&&pt.length>0)return!1;if(ye.getTime()-((Me=le.current)==null?void 0:Me.getTime())<d&&nt===0||Ie)return le.current=ye,!1;for(;Qe;){if(Qe.scrollHeight>Qe.clientHeight){if(Qe.scrollTop!==0)return le.current=new Date,!1;if(Qe.getAttribute("role")==="dialog")return!0}Qe=Qe.parentNode}return!0}function Pe(de){if(je.current&&$){const Ie=k==="bottom"||k==="right"?1:-1,Ge=(Ae.current-(sr(k)?de.pageY:de.pageX))*Ie,Me=Ge>0,Qe=a&&!h&&!Me;if(Qe&&yt===0)return;const pt=Math.abs(Ge),nt=document.querySelector("[data-vaul-drawer-wrapper]"),ye=k==="bottom"||k==="top"?_t.current:Ee.current;let qe=pt/ye;const He=J(pt,Me);if(He!==null&&(qe=He),Qe&&qe>=1||!Ze.current&&!ze(de.target,Me))return;if(je.current.classList.add(hp),Ze.current=!0,nr(je.current,{transition:"none"}),nr(Z.current,{transition:"none"}),a&&ft({draggedDistance:Ge}),Me&&!a){const it=VD(Ge),w=Math.min(it*-1,0)*Ie;nr(je.current,{transform:sr(k)?`translate3d(0, ${w}px, 0)`:`translate3d(${w}px, 0, 0)`});return}const Ve=1-qe;if((Ot||f&&yt===f-1)&&(n==null||n(de,qe),nr(Z.current,{opacity:`${Ve}`,transition:"none"},!0)),nt&&Z.current&&i){const it=Math.min(Se()+qe*(1-Se()),1),w=8-qe*8,I=Math.max(0,14-qe*14);nr(nt,{borderRadius:`${w}px`,transform:sr(k)?`scale(${it}) translate3d(0, ${I}px, 0)`:`scale(${it}) translate3d(${I}px, 0, 0)`,transition:"none"},!0)}if(!a){const it=pt*Ie;nr(je.current,{transform:sr(k)?`translate3d(0, ${it}px, 0)`:`translate3d(${it}px, 0, 0)`})}}}Q.useEffect(()=>{var de;function Ie(){if(!je.current||!F)return;const Ge=document.activeElement;if(Zm(Ge)||rt.current){var Me;const Qe=((Me=window.visualViewport)==null?void 0:Me.height)||0,pt=window.innerHeight;let nt=pt-Qe;const ye=je.current.getBoundingClientRect().height||0,qe=ye>pt*.8;It.current||(It.current=ye);const He=je.current.getBoundingClientRect().top;if(Math.abs(et.current-nt)>60&&(rt.current=!rt.current),a&&a.length>0&&jt&&yt){const Ve=jt[yt]||0;nt+=Ve}if(et.current=nt,ye>Qe||rt.current){const Ve=je.current.getBoundingClientRect().height;let it=Ve;Ve>Qe&&(it=Qe-(qe?He:ex)),x?je.current.style.height=`${Ve-Math.max(nt,0)}px`:je.current.style.height=`${Math.max(it,Qe-He)}px`}else je.current.style.height=`${It.current}px`;a&&a.length>0&&!rt.current?je.current.style.bottom="0px":je.current.style.bottom=`${Math.max(nt,0)}px`}}return(de=window.visualViewport)==null||de.addEventListener("resize",Ie),()=>{var Ge;return(Ge=window.visualViewport)==null?void 0:Ge.removeEventListener("resize",Ie)}},[yt,a,jt]);function De(de){vt(),b==null||b(),de||te(!1),setTimeout(()=>{a&&cr(a[0])},Mt.DURATION*1e3)}function he(){if(!je.current)return;const de=document.querySelector("[data-vaul-drawer-wrapper]"),Ie=Bd(je.current,k);nr(je.current,{transform:"translate3d(0, 0, 0)",transition:`transform ${Mt.DURATION}s cubic-bezier(${Mt.EASE.join(",")})`}),nr(Z.current,{transition:`opacity ${Mt.DURATION}s cubic-bezier(${Mt.EASE.join(",")})`,opacity:"1"}),i&&Ie&&Ie>0&&ne&&nr(de,{borderRadius:`${v2}px`,overflow:"hidden",...sr(k)?{transform:`scale(${Se()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${Se()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${Mt.DURATION}s`,transitionTimingFunction:`cubic-bezier(${Mt.EASE.join(",")})`},!0)}function vt(){!$||!je.current||(je.current.classList.remove(hp),Ze.current=!1,K(!1),Oe.current=new Date)}function Ke(de){if(!$||!je.current)return;je.current.classList.remove(hp),Ze.current=!1,K(!1),Oe.current=new Date;const Ie=Bd(je.current,k);if(!ze(de.target,!1)||!Ie||Number.isNaN(Ie)||ve.current===null)return;const Ge=Oe.current.getTime()-ve.current.getTime(),Me=Ae.current-(sr(k)?de.pageY:de.pageX),Qe=Math.abs(Me)/Ge;if(Qe>.05&&(ue(!0),setTimeout(()=>{ue(!1)},200)),a){dr({draggedDistance:Me*(k==="bottom"||k==="right"?1:-1),closeDrawer:De,velocity:Qe,dismissible:h}),o==null||o(de,!0);return}if(k==="bottom"||k==="right"?Me>0:Me<0){he(),o==null||o(de,!0);return}if(Qe>y2){De(),o==null||o(de,!1);return}var pt;const nt=Math.min((pt=je.current.getBoundingClientRect().height)!=null?pt:0,window.innerHeight);var ye;const qe=Math.min((ye=je.current.getBoundingClientRect().width)!=null?ye:0,window.innerWidth),He=k==="left"||k==="right";if(Math.abs(Ie)>=(He?qe:nt)*c){De(),o==null||o(de,!1);return}o==null||o(de,!0),he()}Q.useEffect(()=>(ne&&(nr(document.documentElement,{scrollBehavior:"auto"}),fe.current=new Date),()=>{zD(document.documentElement,"scrollBehavior")}),[ne]);function Zt(de){const Ie=de?(window.innerWidth-qo)/window.innerWidth:1,Ge=de?-qo:0;gt.current&&window.clearTimeout(gt.current),nr(je.current,{transition:`transform ${Mt.DURATION}s cubic-bezier(${Mt.EASE.join(",")})`,transform:`scale(${Ie}) translate3d(0, ${Ge}px, 0)`}),!de&&je.current&&(gt.current=setTimeout(()=>{const Me=Bd(je.current,k);nr(je.current,{transition:"none",transform:sr(k)?`translate3d(0, ${Me}px, 0)`:`translate3d(${Me}px, 0, 0)`})},500))}function Ct(de,Ie){if(Ie<0)return;const Ge=(window.innerWidth-qo)/window.innerWidth,Me=Ge+Ie*(1-Ge),Qe=-qo+Ie*qo;nr(je.current,{transform:sr(k)?`scale(${Me}) translate3d(0, ${Qe}px, 0)`:`scale(${Me}) translate3d(${Qe}px, 0, 0)`,transition:"none"})}function Ht(de,Ie){const Ge=sr(k)?window.innerHeight:window.innerWidth,Me=Ie?(Ge-qo)/Ge:1,Qe=Ie?-qo:0;Ie&&nr(je.current,{transition:`transform ${Mt.DURATION}s cubic-bezier(${Mt.EASE.join(",")})`,transform:sr(k)?`scale(${Me}) translate3d(0, ${Qe}px, 0)`:`scale(${Me}) translate3d(${Qe}px, 0, 0)`})}return Q.createElement(jD,{defaultOpen:S,onOpenChange:de=>{!h&&!de||(de?B(!0):De(!0),te(de))},open:ne},Q.createElement(p2.Provider,{value:{activeSnapPoint:bt,snapPoints:a,setActiveSnapPoint:cr,drawerRef:je,overlayRef:Z,onOpenChange:t,onPress:we,onRelease:Ke,onDrag:Pe,dismissible:h,handleOnly:u,isOpen:ne,isDragging:$,shouldFade:Ot,closeDrawer:De,onNestedDrag:Ct,onNestedOpenChange:Zt,onNestedRelease:Ht,keyboardIsOpen:rt,modal:N,snapPointsOffset:jt,direction:k,shouldScaleBackground:i,setBackgroundColorOnScale:l,noBodyStyles:v,container:V,autoFocus:Y}},r))}const k2=Q.forwardRef(function({...e},t){const{overlayRef:r,snapPoints:n,onRelease:o,shouldFade:a,isOpen:i,modal:l}=dl(),c=g2(t,r),d=n&&n.length>0;return l?Q.createElement(SD,{onMouseUp:o,ref:c,"data-vaul-overlay":"","data-vaul-snap-points":i&&d?"true":"false","data-vaul-snap-points-overlay":i&&a?"true":"false",...e}):(typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),null)});k2.displayName="Drawer.Overlay";const S2=Q.forwardRef(function({onPointerDownOutside:e,style:t,onOpenAutoFocus:r,...n},o){const{drawerRef:a,onPress:i,onRelease:l,onDrag:c,keyboardIsOpen:d,snapPointsOffset:h,modal:u,isOpen:f,direction:m,snapPoints:g,container:x,handleOnly:N,autoFocus:b}=dl(),[y,v]=Q.useState(!1),k=g2(o,a),S=Q.useRef(null),E=Q.useRef(null),C=Q.useRef(!1),R=g&&g.length>0;YD();const F=(V,Y,W=0)=>{if(C.current)return!0;const X=Math.abs(V.y),ne=Math.abs(V.x),te=ne>X,ie=["bottom","right"].includes(Y)?1:-1;if(Y==="left"||Y==="right"){if(!(V.x*ie<0)&&ne>=0&&ne<=W)return te}else if(!(V.y*ie<0)&&X>=0&&X<=W)return!te;return C.current=!0,!0};Q.useEffect(()=>{R&&window.requestAnimationFrame(()=>{v(!0)})},[]);function T(V){S.current=null,C.current=!1,l(V)}return Q.createElement(_D,{"data-vaul-drawer-direction":m,"data-vaul-drawer":"","data-vaul-delayed-snap-points":y?"true":"false","data-vaul-snap-points":f&&R?"true":"false","data-vaul-custom-container":x?"true":"false",...n,ref:k,style:h&&h.length>0?{"--snap-point-height":`${h[0]}px`,...t}:t,onPointerDown:V=>{N||(n.onPointerDown==null||n.onPointerDown.call(n,V),S.current={x:V.pageX,y:V.pageY},i(V))},onOpenAutoFocus:V=>{r==null||r(V),b||V.preventDefault()},onPointerDownOutside:V=>{if(e==null||e(V),!u||V.defaultPrevented){V.preventDefault();return}d.current&&(d.current=!1)},onFocusOutside:V=>{if(!u){V.preventDefault();return}},onPointerMove:V=>{if(E.current=V,N||(n.onPointerMove==null||n.onPointerMove.call(n,V),!S.current))return;const Y=V.pageY-S.current.y,W=V.pageX-S.current.x,X=V.pointerType==="touch"?10:2;F({x:W,y:Y},m,X)?c(V):(Math.abs(W)>X||Math.abs(Y)>X)&&(S.current=null)},onPointerUp:V=>{n.onPointerUp==null||n.onPointerUp.call(n,V),S.current=null,C.current=!1,l(V)},onPointerOut:V=>{n.onPointerOut==null||n.onPointerOut.call(n,V),T(E.current)},onContextMenu:V=>{n.onContextMenu==null||n.onContextMenu.call(n,V),T(E.current)}})});S2.displayName="Drawer.Content";const XD=250,ZD=120,_2=Q.forwardRef(function({preventCycle:e=!1,children:t,...r},n){const{closeDrawer:o,isDragging:a,snapPoints:i,activeSnapPoint:l,setActiveSnapPoint:c,dismissible:d,handleOnly:h,isOpen:u,onPress:f,onDrag:m}=dl(),g=Q.useRef(null),x=Q.useRef(!1);function N(){if(x.current){v();return}window.setTimeout(()=>{b()},ZD)}function b(){if(a||e||x.current){v();return}if(v(),(!i||i.length===0)&&d){o();return}if(l===i[i.length-1]&&d){o();return}const S=i.findIndex(C=>C===l);if(S===-1)return;const E=i[S+1];c(E)}function y(){g.current=window.setTimeout(()=>{x.current=!0},XD)}function v(){window.clearTimeout(g.current),x.current=!1}return Q.createElement("div",{onClick:N,onPointerCancel:v,onPointerDown:k=>{h&&f(k),y()},onPointerMove:k=>{h&&m(k)},ref:n,"data-vaul-drawer-visible":u?"true":"false","data-vaul-handle":"","aria-hidden":"true",...r},Q.createElement("span",{"data-vaul-handle-hitarea":"","aria-hidden":"true"},t))});_2.displayName="Drawer.Handle";function e6({onDrag:e,onOpenChange:t,...r}){const{onNestedDrag:n,onNestedOpenChange:o,onNestedRelease:a}=dl();if(!n)throw new Error("Drawer.NestedRoot must be placed in another drawer");return Q.createElement(N2,{nested:!0,onClose:()=>{o(!1)},onDrag:(i,l)=>{n(i,l),e==null||e(i,l)},onOpenChange:i=>{i&&o(i)},onRelease:a,...r})}function t6(e){const t=dl(),{container:r=t.container,...n}=e;return Q.createElement(kD,{container:r,...n})}const an={Root:N2,NestedRoot:e6,Content:S2,Overlay:k2,Trigger:ND,Portal:t6,Handle:_2,Close:PD,Title:CD,Description:ED},gu=({shouldScaleBackground:e=!0,...t})=>s.jsx(an.Root,{shouldScaleBackground:e,...t});gu.displayName="Drawer";const r6=an.Portal,C2=p.forwardRef(({className:e,...t},r)=>s.jsx(an.Overlay,{ref:r,className:U("fixed inset-0 z-50 bg-black/80",e),...t}));C2.displayName=an.Overlay.displayName;const bu=p.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(r6,{children:[s.jsx(C2,{}),s.jsxs(an.Content,{ref:n,className:U("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",e),...r,children:[s.jsx("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),t]})]}));bu.displayName="DrawerContent";const Qo=({className:e,...t})=>s.jsx("div",{className:U("grid gap-1.5 p-4 text-center sm:text-left",e),...t});Qo.displayName="DrawerHeader";const Yo=p.forwardRef(({className:e,...t},r)=>s.jsx(an.Title,{ref:r,className:U("text-lg font-semibold leading-none tracking-tight",e),...t}));Yo.displayName=an.Title.displayName;const n6=p.forwardRef(({className:e,...t},r)=>s.jsx(an.Description,{ref:r,className:U("text-sm text-muted-foreground",e),...t}));n6.displayName=an.Description.displayName;const zd={pending:{label:"",bgCls:"bg-[hsl(217_100%_96%)]",textCls:"text-blue-500",borderCls:"border-blue-200",badgeBg:"bg-blue-500"},wait:{label:"",bgCls:"bg-[hsl(263_100%_97%)]",textCls:"text-violet-600",borderCls:"border-violet-200",badgeBg:"bg-violet-500"},approved:{label:"",bgCls:"bg-muted",textCls:"text-muted-foreground",borderCls:"border-border",badgeBg:"bg-muted-foreground"}};function s6(e){return e===""?"pending":e===""?"wait":"approved"}function o6(){const{user:e}=Qt(),[t,r]=p.useState(""),[n,o]=p.useState("all"),[a,i]=p.useState("latest"),[l,c]=p.useState(()=>{try{const E=localStorage.getItem("partner_pinned_sites");return E?new Set(JSON.parse(E)):new Set}catch{return new Set}}),[d,h]=p.useState(5),[u,f]=p.useState(null),[m,g]=p.useState(!1),{data:x=[],isLoading:N}=fr({queryKey:["partner-worklog-sites",e==null?void 0:e.id],queryFn:async()=>{if(!e)return[];const{data:E,error:C}=await me.from("site_members").select("site_id").eq("user_id",e.id);if(C)throw C;if(!E||E.length===0)return[];const R=E.map(X=>X.site_id),{data:F,error:T}=await me.from("sites").select("*").in("id",R);if(T)throw T;const{data:V,error:Y}=await me.from("worklogs").select(`
          id, site_id, site_name, work_date, status, dept,
          worklog_manpower(worker_name, work_hours),
          worklog_worksets(member, process, work_type, block, dong, floor)
        `).in("site_id",R).order("work_date",{ascending:!1});if(Y)throw Y;const{data:W}=await me.from("documents").select("id, title, doc_type, file_ext, site_id, work_date, created_at").in("site_id",R);return(F||[]).map(X=>{var ue;const ne=(V||[]).filter(Z=>Z.site_id===X.id),te=(W||[]).filter(Z=>Z.site_id===X.id),ie=ne[0],B=ne.slice(0,10).map(Z=>{const fe=(Z.worklog_manpower||[]).reduce((ve,Oe)=>ve+Number(Oe.work_hours||8)/8,0);return{date:new Date(Z.work_date).toLocaleDateString("ko-KR",{month:"numeric",day:"numeric"}).replace(". ",".").replace(".","."),man:Math.round(fe*10)/10||(Z.worklog_manpower||[]).length}}),$=ne.reduce((Z,fe)=>{const ve=(fe.worklog_manpower||[]).reduce((Oe,le)=>Oe+Number(le.work_hours||8)/8,0);return Z+(ve||(fe.worklog_manpower||[]).length)},0);let K="";if(ie){const Z=(ie.worklog_worksets||[])[0];Z&&(K=[Z.block,Z.dong,Z.floor,Z.process].filter(Boolean).join(" | ")||Z.work_type||"")}const ce=ie?(ie.worklog_manpower||[]).length:0;return{id:X.id,siteName:X.name,siteId:X.id,latestDate:(ie==null?void 0:ie.work_date)||((ue=X.created_at)==null?void 0:ue.slice(0,10))||"",status:s6(X.status),latestContent:K,workerCount:ce,totalDays:ne.length,totalManpower:Math.round($*10)/10,isPinned:l.has(X.id),detailDates:B,photos:te.filter(Z=>Z.doc_type==="photo").map(Z=>{var fe;return{name:Z.title,date:((fe=Z.created_at)==null?void 0:fe.slice(0,10))||""}}),drawings:te.filter(Z=>Z.doc_type==="drawing").map(Z=>{var fe;return{name:Z.title,date:((fe=Z.created_at)==null?void 0:fe.slice(0,10))||""}}),certDocs:te.filter(Z=>Z.doc_type==="cert"||Z.doc_type==="completion").map(Z=>{var fe;return{name:Z.title,date:((fe=Z.created_at)==null?void 0:fe.slice(0,10))||""}})}})},enabled:!!e}),b=p.useMemo(()=>{let E=x.map(C=>({...C,isPinned:l.has(C.id)}));return E=E.filter(C=>{const R=t.toLowerCase(),F=!R||C.siteName.toLowerCase().includes(R)||C.latestContent.toLowerCase().includes(R),T=n==="all"||C.status===n;return F&&T}),E.sort((C,R)=>C.isPinned!==R.isPinned?C.isPinned?-1:1:a==="name"?C.siteName.localeCompare(R.siteName,"ko"):new Date(R.latestDate).getTime()-new Date(C.latestDate).getTime()),E},[x,l,t,n,a]),y=p.useMemo(()=>({pending:x.filter(E=>E.status==="pending").length,wait:x.filter(E=>E.status==="wait").length,approved:x.filter(E=>E.status==="approved").length}),[x]),v=E=>{c(C=>{const R=new Set(C);return R.has(E)?R.delete(E):R.add(E),localStorage.setItem("partner_pinned_sites",JSON.stringify([...R])),R})},k=b.slice(0,d),S=d<b.length;return N?s.jsx("div",{className:"flex items-center justify-center py-20",children:s.jsx(Vh,{className:"w-8 h-8 animate-spin text-primary"})}):s.jsxs("div",{className:"animate-fade-in",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx("input",{value:t,onChange:E=>r(E.target.value),placeholder:",  ",className:"w-full h-[54px] bg-card border border-border rounded-xl px-4 pr-10 text-[17px] font-medium text-foreground placeholder:text-muted-foreground outline-none transition-all focus:border-primary focus:shadow-[0_0_0_3px_rgba(49,163,250,0.15)]"}),t?s.jsx("button",{onClick:()=>r(""),className:"absolute right-3 top-1/2 -translate-y-1/2",children:s.jsx(Je,{className:"w-4 h-4 text-muted-foreground"})}):s.jsx(Jr,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"})]}),s.jsxs("select",{value:a,onChange:E=>i(E.target.value),className:"w-[120px] h-[54px] bg-card border border-border rounded-xl px-3 text-[15px] font-semibold text-foreground appearance-none cursor-pointer outline-none",children:[s.jsx("option",{value:"latest",children:""}),s.jsx("option",{value:"name",children:""})]})]}),s.jsx("div",{className:"grid grid-cols-3 gap-2 mb-5",children:["pending","wait","approved"].map(E=>{const C=zd[E];return s.jsxs("button",{onClick:()=>o(n===E?"all":E),className:U("p-3.5 rounded-xl text-center flex flex-col items-center gap-1 border cursor-pointer transition-all active:scale-[0.98] shadow-soft",C.bgCls,C.borderCls,n===E&&"ring-2 ring-primary/30"),children:[s.jsx("span",{className:U("text-[22px] font-[800]",C.textCls),children:y[E]}),s.jsx("span",{className:U("text-[13px] font-semibold",C.textCls),children:C.label})]},E)})}),k.length===0?s.jsxs("div",{className:"text-center py-20 text-muted-foreground flex flex-col items-center gap-2",children:[s.jsx(Pr,{className:"w-10 h-10 opacity-50"}),s.jsx("p",{children:e?"  .":" ."})]}):s.jsx("div",{className:"flex flex-col gap-4",children:k.map(E=>{const C=zd[E.status],R=E.photos.length>0,F=E.drawings.length>0,T=E.certDocs.length>0;return s.jsxs("div",{onClick:()=>{f(E),g(!1)},className:U("bg-card rounded-2xl shadow-soft overflow-hidden relative cursor-pointer transition-all active:scale-[0.98]",E.isPinned&&"border-2 border-primary shadow-[0_4px_12px_rgba(49,163,250,0.2)]"),children:[s.jsx("span",{className:U("absolute top-0 right-0 text-[11px] font-bold px-3 py-1 text-white rounded-bl-xl z-10",C.badgeBg),children:C.label}),s.jsxs("div",{className:"p-5",children:[s.jsxs("div",{className:"flex items-center gap-1.5 mb-1 text-[15px] text-text-sub font-semibold",children:[s.jsx(th,{className:"w-3.5 h-3.5"})," ",E.latestDate]}),s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-[19px] font-[800] text-header-navy flex-1 truncate mr-2",children:E.siteName}),s.jsx("button",{onClick:V=>{V.stopPropagation(),v(E.id)},className:U("p-1 transition-colors",E.isPinned?"text-primary":"text-border"),children:E.isPinned?s.jsx(Wh,{className:"w-4 h-4"}):s.jsx(qh,{className:"w-4 h-4"})})]}),E.latestContent&&s.jsx("div",{className:"flex items-center gap-1.5 mb-3",children:s.jsx("span",{className:"text-[15px] font-semibold text-foreground truncate",children:E.latestContent})}),s.jsxs("div",{className:"flex items-center justify-between border-t border-dashed border-border pt-3",children:[s.jsxs("span",{className:"text-[15px] font-semibold flex items-center gap-1.5",children:[s.jsx(lr,{className:"w-4 h-4 text-primary"}),s.jsxs("span",{className:"text-foreground",children:[E.workerCount,""]}),s.jsxs("span",{className:"text-text-sub",children:["(",E.totalDays,")"]})]}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx(Mr,{className:U("w-4 h-4",R?"text-header-navy":"text-border")}),s.jsx(os,{className:U("w-4 h-4",F?"text-header-navy":"text-border")}),s.jsx(nh,{className:U("w-4 h-4",T?"text-header-navy":"text-border")})]})]})]})]},E.id)})}),S&&s.jsxs("button",{onClick:()=>h(E=>E+5),className:"w-full h-[50px] mt-4 bg-card border border-border rounded-full text-text-sub font-semibold text-[15px] flex items-center justify-center gap-1.5 cursor-pointer transition-all hover:bg-muted active:scale-[0.98]",children:["  ",s.jsx(Lt,{className:"w-4 h-4"})]}),u&&s.jsxs("div",{className:"fixed inset-0 z-[2000] bg-background flex flex-col animate-fade-in",children:[s.jsxs("div",{className:"h-[60px] px-4 flex items-center justify-between bg-card border-b border-border",children:[s.jsx("button",{onClick:()=>f(null),className:"bg-transparent border-none",children:s.jsx(Qi,{className:"w-6 h-6 text-text-sub"})}),s.jsx("span",{className:"text-[18px] font-[800] text-header-navy absolute left-1/2 -translate-x-1/2",children:"  "}),s.jsx("div",{className:"w-6"})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 pb-10",children:[s.jsxs("div",{className:"bg-card rounded-2xl p-5 mb-4 shadow-soft",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-border",children:[s.jsxs("span",{className:"text-[17px] font-[800] text-header-navy flex items-center gap-2",children:[s.jsx(uN,{className:"w-5 h-5"}),"  "]}),s.jsx("span",{className:U("text-[13px] font-[800] px-3 py-1.5 rounded-full text-white",zd[u.status].badgeBg),children:zd[u.status].label})]}),s.jsxs("div",{className:"space-y-2.5 text-[15px]",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-sub font-medium",children:""}),s.jsx("span",{className:"font-bold text-foreground",children:u.siteName})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-sub font-medium",children:""}),s.jsx("span",{className:"font-bold text-foreground",children:u.latestContent||"-"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-sub font-medium",children:""}),s.jsxs("span",{className:"font-bold text-foreground",children:[u.workerCount,""]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-text-sub font-medium",children:" "}),s.jsxs("button",{onClick:()=>g(!m),className:"flex items-center gap-1 font-bold text-foreground bg-transparent border-none cursor-pointer",children:[u.totalDays," (",u.totalManpower,")",s.jsx(Lt,{className:U("w-4 h-4 text-muted-foreground transition-transform",m&&"rotate-180")})]})]}),m&&u.detailDates.length>0&&s.jsx("div",{className:"bg-muted/50 rounded-xl p-3 mt-2 animate-fade-in",children:u.detailDates.map((E,C)=>s.jsxs("div",{className:"flex justify-between text-[14px] py-1",children:[s.jsx("span",{className:"text-text-sub",children:E.date}),s.jsxs("span",{className:"font-bold text-foreground",children:[E.man,""]})]},C))})]})]}),s.jsxs("div",{className:"bg-card rounded-2xl p-5 mb-4 shadow-soft",children:[s.jsx("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-border",children:s.jsxs("span",{className:"text-[17px] font-[800] text-header-navy flex items-center gap-2",children:[s.jsx(Kn,{className:"w-5 h-5"}),"   "]})}),u.photos.length>0?u.photos.map((E,C)=>s.jsx(fp,{icon:s.jsx(Mr,{className:"w-6 h-6 text-muted-foreground"}),title:E.name,sub:E.date},`p-${C}`)):s.jsx("p",{className:"text-[14px] text-muted-foreground mb-2",children:"  ."}),u.drawings.length>0?u.drawings.map((E,C)=>s.jsx(fp,{icon:s.jsx(os,{className:"w-6 h-6 text-muted-foreground"}),title:E.name,sub:E.date},`d-${C}`)):s.jsx("p",{className:"text-[14px] text-muted-foreground",children:"  ."})]}),s.jsxs("div",{className:"bg-card rounded-2xl p-5 mb-4 shadow-soft",children:[s.jsx("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-border",children:s.jsxs("span",{className:"text-[17px] font-[800] text-header-navy flex items-center gap-2",children:[s.jsx(cN,{className:"w-5 h-5"}),"  "]})}),s.jsx(Vd,{title:" ",children:u.certDocs.length>0?u.certDocs.map((E,C)=>s.jsx(fp,{icon:s.jsx(nh,{className:"w-6 h-6 text-muted-foreground"}),title:E.name,sub:E.date},C)):s.jsx("p",{className:"text-[14px] text-muted-foreground",children:"  ."})}),s.jsx(Vd,{title:"",children:s.jsx(pp,{label:" "})}),s.jsx(Vd,{title:"",children:s.jsx(pp,{label:" "})}),s.jsx(Vd,{title:" ",noBorder:!0,children:s.jsx(pp,{label:"  "})})]})]})]})]})}function fp({icon:e,title:t,sub:r}){return s.jsxs("div",{className:"flex items-center justify-between bg-card border border-border p-4 rounded-xl mb-2.5 cursor-pointer transition-all active:scale-[0.98] hover:bg-muted/50",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e,s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"text-[15px] font-bold text-foreground truncate",children:t}),s.jsx("div",{className:"text-[13px] text-muted-foreground",children:r})]})]}),s.jsx(on,{className:"w-5 h-5 text-muted-foreground flex-shrink-0"})]})}function Vd({title:e,children:t,noBorder:r}){return s.jsxs("div",{className:U("mb-6",!r&&""),children:[s.jsx("div",{className:"text-[15px] font-bold text-text-sub mb-2",children:e}),t]})}function pp({label:e}){return s.jsxs("button",{className:"w-full h-[54px] border border-dashed border-primary bg-primary/[0.04] text-primary rounded-xl font-bold text-[15px] flex items-center justify-center gap-2 cursor-pointer transition-all hover:bg-primary/[0.08] active:scale-[0.98] mt-2",children:[s.jsx(bg,{className:"w-[18px] h-[18px]"})," ",e]})}function a6({isOpen:e,imageSrc:t,onPrev:r,onDeleteSelected:n,onSave:o}){const[a,i]=p.useState(e),[l,c]=p.useState(!1);return p.useEffect(()=>{if(e){i(!0);const h=requestAnimationFrame(()=>c(!0));return()=>cancelAnimationFrame(h)}c(!1);const d=window.setTimeout(()=>i(!1),260);return()=>window.clearTimeout(d)},[e]),a?s.jsxs("div",{role:"dialog","aria-modal":"true",className:U("fixed inset-0 z-[2000] flex flex-col bg-black/70 text-white transition-transform duration-300 ease-out",l?"translate-y-0":"translate-y-full"),children:[s.jsxs("div",{className:"flex items-center justify-between border-b border-white/10 bg-black/60 px-3 py-2 sm:px-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",onClick:r,className:"flex h-8 items-center gap-1 rounded-lg bg-white/10 px-2 text-[11px] font-bold sm:text-xs",children:""}),s.jsx("span",{className:"text-sm font-bold sm:text-lg",children:""})]}),s.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[s.jsx("button",{type:"button",onClick:n,className:"flex h-8 items-center gap-1 rounded-lg bg-white/10 px-2 text-[11px] font-bold sm:text-xs",children:""}),s.jsx("button",{type:"button",onClick:o,className:"flex h-8 items-center gap-1 rounded-lg bg-primary px-2.5 text-[11px] font-bold text-primary-foreground sm:text-xs",children:""})]})]}),s.jsx("div",{className:"flex-1 overflow-hidden",children:s.jsx("img",{src:t,alt:"",className:"h-full w-full object-contain"})})]}):null}const E2="inopnc_site_worklog_draft_v1";function Yh(e){const t=String(e||"").toLowerCase();return t==="pending"||t==="approved"||t==="rejected"||t==="draft"?t:"draft"}function Jh(e){return`${e}_${Date.now()}_${Math.random().toString(36).slice(2,8)}`}function mh(e){return Array.isArray(e)?e:[]}function i6(e){return mh(e).map(t=>{if(!t||typeof t!="object")return null;const r=t,n=typeof r.date=="string"?r.date:"";return n?{worklogId:typeof r.worklogId=="string"?r.worklogId:`virtual_${n}`,date:n,version:Math.max(1,Number(r.version||1)),status:Yh(r.status),updatedAt:typeof r.updatedAt=="string"?r.updatedAt:new Date().toISOString()}:null}).filter(Boolean)}function l6(e){return mh(e).map(t=>{if(!t||typeof t!="object")return null;const r=t;return{id:typeof r.id=="string"?r.id:Jh("site_snapshot"),version:Math.max(1,Number(r.version||1)),status:Yh(r.status),memo:typeof r.memo=="string"?r.memo:"",includedDates:mh(r.includedDates).map(o=>String(o||"")).filter(Boolean),rows:i6(r.rows),createdAt:typeof r.createdAt=="string"?r.createdAt:new Date().toISOString()}}).filter(Boolean)}function c6(e){if(!e||typeof e!="object")return null;const t=e,r=typeof t.siteKey=="string"?t.siteKey:"";if(!r)return null;const n=l6(t.snapshots);return{id:typeof t.id=="string"?t.id:Jh("site_draft"),siteKey:r,siteId:typeof t.siteId=="string"?t.siteId:"",siteName:typeof t.siteName=="string"?t.siteName:"",dept:typeof t.dept=="string"?t.dept:"",memo:typeof t.memo=="string"?t.memo:"",status:Yh(t.status),latestVersion:Math.max(0,Number(t.latestVersion||n.length||0)),includedDates:mh(t.includedDates).map(o=>String(o||"")).filter(Boolean),lastUpdatedAt:typeof t.lastUpdatedAt=="string"?t.lastUpdatedAt:new Date().toISOString(),snapshots:n,rejectedReason:typeof t.rejectedReason=="string"?t.rejectedReason:void 0}}function Tg(){if(typeof window>"u")return{};try{const e=JSON.parse(window.localStorage.getItem(E2)||"{}");if(!e||typeof e!="object")return{};const t={};return Object.entries(e).forEach(([r,n])=>{const o=c6(n);o&&(t[r]=o)}),t}catch{return{}}}function d6(e){typeof window>"u"||window.localStorage.setItem(E2,JSON.stringify(e))}function Fy(e,t){return(e||t||"").trim().toLowerCase()}function u6(){return Object.values(Tg()).sort((e,t)=>t.lastUpdatedAt.localeCompare(e.lastUpdatedAt))}function mp(e){return e&&Tg()[e]||null}function yu(e){const t=Tg(),r=t[e.siteKey],n=new Date().toISOString(),o={id:(r==null?void 0:r.id)||Jh("site_draft"),siteKey:e.siteKey,siteId:e.siteId||(r==null?void 0:r.siteId)||"",siteName:e.siteName||(r==null?void 0:r.siteName)||"",dept:e.dept||(r==null?void 0:r.dept)||"",memo:typeof e.memo=="string"?e.memo:(r==null?void 0:r.memo)||"",status:e.status||(r==null?void 0:r.status)||"draft",latestVersion:Math.max(0,Number(e.latestVersion||(r==null?void 0:r.latestVersion)||0)),includedDates:e.includedDates||(r==null?void 0:r.includedDates)||[],lastUpdatedAt:n,snapshots:e.snapshots||(r==null?void 0:r.snapshots)||[],rejectedReason:e.rejectedReason};return t[e.siteKey]=o,d6(t),o}function Uy(e){const t=new Date().toISOString(),r=Math.max(1,Number(e.draft.latestVersion||0)+1),n={id:Jh("site_snapshot"),version:r,status:e.status,memo:e.memo,includedDates:e.includedDates,rows:e.rows,createdAt:t};return yu({siteKey:e.draft.siteKey,siteId:e.draft.siteId,siteName:e.draft.siteName,dept:e.draft.dept,memo:e.memo,status:e.status,includedDates:e.includedDates,latestVersion:r,snapshots:[n,...e.draft.snapshots],rejectedReason:e.rejectedReason})}function Qa(e){return!Array.isArray(e)||e.length===0?"draft":e.some(t=>t.status==="rejected")?"rejected":e.some(t=>t.status==="pending")?"pending":e.every(t=>t.status==="approved")?"approved":"draft"}function h6(e){return e.filter(t=>!!t.workDate).map(t=>({worklogId:t.id,date:t.workDate,version:Math.max(1,Number(t.version||1)),status:Yh(t.status),updatedAt:t.updatedAt||t.createdAt||new Date().toISOString()})).sort((t,r)=>r.date.localeCompare(t.date))}const By=["","","","",""],f6=["","","",""],p6=["","","",""],m6=["","","",""],zy=["NPC-1000","NPC-3000Q","EP-3020","","",""],x6="inopnc_work_log",P2="inopnc_worklog_memo_autosave_v1",Ws={draft:{label:"",chipClass:"bg-blue-50 text-blue-600 border-blue-200",cornerClass:"bg-blue-500 text-white"},pending:{label:"",chipClass:"bg-indigo-50 text-indigo-600 border-indigo-200",cornerClass:"bg-indigo-500 text-white"},approved:{label:"",chipClass:"bg-emerald-50 text-emerald-600 border-emerald-200",cornerClass:"bg-muted-foreground text-white"},rejected:{label:"",chipClass:"bg-red-50 text-red-600 border-red-200",cornerClass:"bg-red-500 text-white"}};function wt(e,t=""){return typeof e=="string"?e:t}function xh(e,t=0){const r=Number(e);return Number.isFinite(r)?r:t}function xp(e,t){return e instanceof Error&&e.message?e.message:t}function vn(){return Date.now()+Math.floor(Math.random()*1e3)}function Pc(e){return{id:vn(),worker:e||"",workHours:1,isCustom:!e,locked:!1}}function Rc(){return{id:vn(),member:"",process:"",type:"",location:{block:"",dong:"",floor:""},customMemberValue:"",customProcessValue:"",customTypeValue:""}}function Ag(e){return{block:(e==null?void 0:e.block)||"",dong:(e==null?void 0:e.dong)||"",floor:(e==null?void 0:e.floor)||""}}function vu(e){return{siteValue:"",siteName:"",workDate:e,dept:"",memo:"",manpower:[Pc()],workSets:[Rc()],materials:[],photos:[],drawings:[],status:"draft"}}function ba(e){return e.map(t=>({...t,id:vn(),worker:wt(t.worker),workHours:xh(t.workHours,0)}))}function Tc(e){return e.map(t=>({...t,id:vn(),member:wt(t.member),process:wt(t.process),type:wt(t.type),location:Ag(t.location),customMemberValue:wt(t.customMemberValue),customProcessValue:wt(t.customProcessValue),customTypeValue:wt(t.customTypeValue)}))}function Ac(e){return e.map(t=>({...t,id:vn(),name:wt(t.name),qty:Math.max(0,xh(t.qty,0))}))}function Xi(e){const t=e.trim().toLowerCase();return t==="before"||t===""?"before":t==="receipt"||t===""||t==="confirm"||t==="confirmation"?"receipt":"after"}function Xh(e){const t=e.trim().toLowerCase();return t==="done"||t===""||t===""?"done":"progress"}function g6(e,t){return e==="photo"?Xi(t):Xh(t)}function as(e){return e.map(t=>({...t,id:wt(t.id)||`legacy_${Date.now()}_${Math.random().toString(36).slice(2,8)}`,type:t.type==="drawing"?"drawing":"photo",status:g6(t.type==="drawing"?"drawing":"photo",wt(t.status,"after")),timestamp:wt(t.timestamp,new Date().toISOString())}))}function Oc(e){var t;return Array.isArray((t=e.assets)==null?void 0:t.photos)?e.assets.photos:[]}function ei(e){var t;return Array.isArray((t=e.assets)==null?void 0:t.drawings)?e.assets.drawings:[]}function pi(e){return Xi(wt(e.status,"after"))==="receipt"}function R2(e){return e.filter(t=>!pi(t))}function T2(e){return e.filter(t=>pi(t))}function Wd(e){return R2(Oc(e)).length}function Vy(e){return T2(Oc(e)).length}function b6(e){const t=Xi(e);return t==="before"?"":t==="receipt"?"":""}function y6(e){return Xh(e)==="done"?"":""}function qd(e){if(typeof window>"u")return null;try{const t=window.localStorage.getItem(x6);if(!t)return null;const r=JSON.parse(t);if(!r||typeof r!="object")return null;const n=new Date().toISOString(),o=vu(e),a=Array.isArray(r.manpowerList)?r.manpowerList.map(h=>{if(!h||typeof h!="object")return null;const u=h;return{id:vn(),worker:wt(u.worker),workHours:xh(u.workHours,1),isCustom:!!u.isCustom,locked:!!u.locked}}).filter(Boolean):[],i=Array.isArray(r.workSets)?r.workSets.map(h=>{if(!h||typeof h!="object")return null;const u=h,f=u.location&&typeof u.location=="object"?u.location:{};return{id:vn(),member:wt(u.member),process:wt(u.process),type:wt(u.type),location:{block:wt(f.block),dong:wt(f.dong),floor:wt(f.floor)},customMemberValue:wt(u.customMemberValue),customProcessValue:wt(u.customProcessValue),customTypeValue:wt(u.customTypeValue)}}).filter(Boolean):[],l=Array.isArray(r.materials)?r.materials.map(h=>{if(!h||typeof h!="object")return null;const u=h,f=wt(u.name).trim();return f?{id:vn(),name:f,qty:Math.max(0,xh(u.qty,0))}:null}).filter(Boolean):[],c=Array.isArray(r.photos)?r.photos.map((h,u)=>{if(!h||typeof h!="object")return null;const f=h,m=wt((f==null?void 0:f.img)||(f==null?void 0:f.url)).trim();if(!m)return null;const g=wt(f.status||f.desc||f.badge,"after");return{id:`home_photo_${Date.now()}_${u}`,type:"photo",status:Xi(g),timestamp:n,url:m}}).filter(Boolean):[],d=Array.isArray(r.drawings)?r.drawings.map((h,u)=>{const f=h&&typeof h=="object"?h:null,m=wt((f==null?void 0:f.img)||(f==null?void 0:f.url)||h).trim();if(!m)return null;const g=wt((f==null?void 0:f.status)||(f==null?void 0:f.desc)||(f==null?void 0:f.stage),"progress");return{id:`home_drawing_${Date.now()}_${u}`,type:"drawing",status:Xh(g),timestamp:n,url:m}}).filter(Boolean):[];return{...o,siteValue:wt(r.selectedSite),siteName:wt(r.siteSearch),dept:wt(r.dept),workDate:wt(r.workDate,e),manpower:a.length>0?a:o.manpower,workSets:i.length>0?i:o.workSets,materials:l,photos:c,drawings:d,status:"draft"}}catch{return null}}function Hd(e){const t=Array.isArray(e.manpower)?e.manpower.map(o=>({...o,id:Number(o.id)||vn(),worker:o.worker||"",workHours:Number(o.workHours||0)})):[],r=Array.isArray(e.workSets)?e.workSets.map(o=>({...o,id:Number(o.id)||vn(),member:o.member||"",process:o.process||"",type:o.type||"",location:Ag(o.location),customMemberValue:o.customMemberValue||"",customProcessValue:o.customProcessValue||"",customTypeValue:o.customTypeValue||""})):[],n=Array.isArray(e.materials)?e.materials.map(o=>({...o,id:Number(o.id)||vn(),name:o.name||"",qty:Number(o.qty||0)})):[];return{siteValue:e.siteValue||"",siteName:e.siteName||"",workDate:e.workDate,dept:e.dept||"",memo:e.weather||"",manpower:t.length>0?t:[Pc()],workSets:r.length>0?r:[Rc()],materials:n,photos:as(e.photos||[]),drawings:as(e.drawings||[]),status:e.status}}function Si(e,t){return(e||t||"").trim().toLowerCase()}function Wy(e,t,r){const n=Si(e.siteValue,e.siteName),o=Si(t,r);return!!n&&!!o&&n===o}function On(e,t){const r=e.trim();return r===""?t.trim():r}function v6(e){return e.some(t=>t.worker.trim()&&Number(t.workHours)>0)}function w6(e){return e.some(t=>On(t.member||"",t.customMemberValue||"")&&On(t.process||"",t.customProcessValue||""))}function j6(e){return e.some(t=>t.name.trim()&&Number(t.qty)>0)}function Kd(e,t){return t?{...e,siteValue:e.siteValue||t.siteValue,siteName:e.siteName||t.siteName,workDate:e.workDate||t.workDate,dept:e.dept||t.dept,memo:e.memo||t.memo,manpower:v6(e.manpower)?e.manpower:ba(t.manpower),workSets:w6(e.workSets)?e.workSets:Tc(t.workSets),materials:j6(e.materials)?e.materials:Ac(t.materials),photos:e.photos.length>0?e.photos:as(t.photos),drawings:e.drawings.length>0?e.drawings:as(t.drawings)}:e}function N6(e){return e==="rejected"||e==="approved"?3:e==="pending"?2:1}function qs(e){return typeof(e==null?void 0:e.url)=="string"?e.url:""}function ms(e,t){return e.id||`legacy_${t}`}function k6(e){return e.reduce((t,r)=>t+(Number(r.workHours)||0),0)}function S6(e){if(e.length===0)return"  .";const t=e[0],r=On(t.member,t.customMemberValue)||"-",n=On(t.process,t.customProcessValue)||"-",o=[t.location.block,t.location.dong,t.location.floor].map(i=>i.trim()).filter(Boolean).join(" "),a=o?`${r} / ${n} (${o})`:`${r} / ${n}`;return e.length>1?`${a}  ${e.length-1}`:a}function _6(e){if(e.length===0)return"  .";const t=e[0],r=`${t.name||"-"} (${Number(t.qty||0)})`;return e.length>1?`${r}  ${e.length-1}`:r}function qy(e){return e.toLowerCase().trim()}function Hy(e){if(!e)return"-";const t=new Date(e);if(Number.isNaN(t.getTime()))return e;const r=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0"),a=String(t.getHours()).padStart(2,"0"),i=String(t.getMinutes()).padStart(2,"0");return`${r}-${n}-${o} ${a}:${i}`}function C6(e){return e==="pending"?"      ":e==="rejected"?"    ":e==="approved"?"       ":"    "}function Og(e,t,r){return`${Si(e,t)}|${r}`}function Dg(){if(typeof window>"u")return{};try{const e=JSON.parse(window.localStorage.getItem(P2)||"{}");return!e||typeof e!="object"?{}:e}catch{return{}}}function A2(e){typeof window>"u"||window.localStorage.setItem(P2,JSON.stringify(e))}function Tl(e,t,r){if(!r)return"";const n=Og(e,t,r);return Dg()[n]||""}function E6(e,t,r,n){if(!r)return;const o=Og(e,t,r),a=Dg();n.trim()?a[o]=n:delete a[o],A2(a)}function P6(e,t,r){if(!r)return;const n=Og(e,t,r),o=Dg();n in o&&(delete o[n],A2(o))}function R6(e){const t=ba(Array.isArray(e.manpower)?e.manpower:[]);return{date:e.workDate,workSets:Tc(Array.isArray(e.workSets)?e.workSets:[]),manpower:t,manpowerHistory:ba(t),materials:Ac(Array.isArray(e.materials)?e.materials:[]),assets:{photos:as(e.photos||[]),drawings:as(e.drawings||[])},status:e.status,versions:Math.max(1,Number(e.version||1)),memo:e.weather||""}}function T6(e){const{siteName:t,dept:r,contractor:n,logs:o}=e,a={};return o.forEach(i=>{const l=i.workDate;if(!l)return;const c=a[l];(!c||Number(i.version||0)>=Number(c.versions||0))&&(a[l]=R6(i))}),{baseInfo:{siteName:t||"",dept:r||"",contractor:n||r||""},dailyData:a}}function A6(e){const{siteValue:t,siteName:r,dept:n,row:o}=e,a=Array.isArray(o.manpower)&&o.manpower.length>0?o.manpower:Array.isArray(o.manpowerHistory)?o.manpowerHistory:[];return{siteValue:t,siteName:r,workDate:o.date,dept:n,memo:o.memo||"",manpower:a.length>0?ba(a):[Pc()],workSets:o.workSets.length>0?Tc(o.workSets):[Rc()],materials:Ac(o.materials||[]),photos:as(Oc(o)),drawings:as(ei(o)),status:o.status||"draft"}}function O6(){const{isPartner:e,loading:t}=ls();return t?s.jsx("div",{className:"py-20 flex items-center justify-center text-text-sub",children:s.jsx(Vh,{className:"w-8 h-8 animate-spin"})}):e?s.jsx(o6,{}):s.jsx(D6,{})}function D6(){var Ma,td,rd,nd;const[e,t]=gP(),r=p.useMemo(()=>new Date().toISOString().slice(0,10),[]),{data:n=[],isLoading:o}=Kh(),{data:a=[]}=BN(),i=AN(),l=SA(),c=_A(),[d,h]=p.useState(()=>Kd(vu(r),qd(r))),[u,f]=p.useState(null),[m,g]=p.useState(null),[x,N]=p.useState("write"),[b,y]=p.useState(null),[v,k]=p.useState(!1),[S,E]=p.useState(()=>{var j;return((j=qd(r))==null?void 0:j.siteName)||""}),[C,R]=p.useState(()=>{var j;return!!((j=qd(r))!=null&&j.siteName)}),[F,T]=p.useState(!1),[V,Y]=p.useState(!1),[W,X]=p.useState({}),[ne,te]=p.useState(zy[0]),[ie,B]=p.useState(""),[$,K]=p.useState(!1),[ce,ue]=p.useState(""),[Z,fe]=p.useState({open:!1,url:"",title:""}),[ve,Oe]=p.useState({open:!1,index:-1,imageSrc:""}),[le,Ze]=p.useState(null),[gt,Ae]=p.useState(""),[rt,et]=p.useState(0),[je,_t]=p.useState({}),[Ee,It]=p.useState("all"),ot=p.useRef(""),bt=p.useRef([]),yt=p.useRef(null),cr=p.useRef({}),dr=p.useRef(null),jt=p.useRef(null),ft=p.useRef(null),Ot=V||i.isPending||l.isPending||c.isPending,J=p.useMemo(()=>[...n].sort((j,P)=>{if(j.workDate!==P.workDate)return P.workDate.localeCompare(j.workDate);const O=j.updatedAt||j.createdAt,L=P.updatedAt||P.createdAt;return O!==L?L.localeCompare(O):P.version-j.version}),[n]),pe=p.useMemo(()=>{const j=new Map;return u6().forEach(P=>j.set(P.siteKey,P)),j},[rt]),Se=p.useMemo(()=>{const j=new Map;return a.forEach(P=>{const O=Fy(P.site_id,P.site_name);if(!O)return;const L=pe.get(O);j.set(O,{base:{siteKey:O,siteValue:P.site_id,siteName:P.site_name,dept:P.dept||"",status:(L==null?void 0:L.status)||"draft",dateCount:(L==null?void 0:L.includedDates.length)||0,photoCount:0,drawingCount:0,lastUpdatedAt:(L==null?void 0:L.lastUpdatedAt)||"",latestVersion:(L==null?void 0:L.latestVersion)||0},dates:new Set((L==null?void 0:L.includedDates)||[])})}),J.forEach(P=>{const O=Fy(P.siteValue,P.siteName);if(!O)return;const L=pe.get(O),z=j.get(O)||{base:{siteKey:O,siteValue:P.siteValue,siteName:P.siteName,dept:P.dept||"",status:(L==null?void 0:L.status)||Qa([P]),dateCount:0,photoCount:0,drawingCount:0,lastUpdatedAt:"",latestVersion:0},dates:new Set};P.workDate&&z.dates.add(P.workDate),z.base={...z.base,siteValue:z.base.siteValue||P.siteValue,siteName:z.base.siteName||P.siteName,dept:z.base.dept||P.dept||"",status:(L==null?void 0:L.status)||z.base.status,photoCount:z.base.photoCount+Number(P.photoCount||0),drawingCount:z.base.drawingCount+Number(P.drawingCount||0),lastUpdatedAt:z.base.lastUpdatedAt&&z.base.lastUpdatedAt>(P.updatedAt||P.createdAt)?z.base.lastUpdatedAt:P.updatedAt||P.createdAt,latestVersion:Math.max(z.base.latestVersion||0,Number(P.version||0),(L==null?void 0:L.latestVersion)||0),dateCount:z.dates.size},j.set(O,z)}),[...j.values()].map(P=>({...P.base,dateCount:P.dates.size||P.base.dateCount})).filter(P=>!!P.siteName).sort((P,O)=>P.lastUpdatedAt!==O.lastUpdatedAt?O.lastUpdatedAt.localeCompare(P.lastUpdatedAt):P.siteName.localeCompare(O.siteName))},[a,J,pe]),we=p.useMemo(()=>Ee==="all"?Se:Se.filter(j=>j.status===Ee),[Ee,Se]),ze=p.useMemo(()=>{const j=qy(S);return j?a.filter(P=>qy(P.site_name).includes(j)).slice(0,40):a.slice(0,30)},[a,S]),Pe=p.useMemo(()=>{if(!(!d.siteValue&&!d.siteName))return a.find(j=>j.site_id===d.siteValue)||a.find(j=>j.site_name===d.siteName)},[a,d.siteValue,d.siteName]),De=p.useMemo(()=>Si(d.siteValue,d.siteName),[d.siteValue,d.siteName]),he=p.useMemo(()=>J.filter(j=>Wy(j,d.siteValue,d.siteName)),[J,d.siteValue,d.siteName]),vt=p.useMemo(()=>{const j=new Map;return he.forEach(P=>{P.workDate&&(j.has(P.workDate)||j.set(P.workDate,P))}),j},[he]),Ke=p.useMemo(()=>{if(d.workDate)return vt.get(d.workDate)},[vt,d.workDate]),Zt=p.useMemo(()=>{if(d.workDate)return he.find(j=>j.workDate<d.workDate)},[he,d.workDate]),Ct=p.useMemo(()=>qd(r),[r]),Ht=((Pe==null?void 0:Pe.dept)||d.dept||"").trim()||"",de=!!d.siteName.trim(),Ie=!!d.workDate,Ge=d.manpower.filter(j=>j.worker.trim()&&Number(j.workHours)>0).length,Me=d.workSets.filter(j=>On(j.member,j.customMemberValue)&&On(j.process,j.customProcessValue)).length,Qe=d.photos.filter(j=>pi(j)).length,pt=d.photos.length-Qe,nt=pt+d.drawings.length,ye=Ge>0?`${Ge} /  ${k6(d.manpower).toFixed(1)}`:"  .",qe=S6(d.workSets.filter(j=>On(j.member,j.customMemberValue))),He=_6(d.materials.filter(j=>j.name.trim()&&Number(j.qty)>0)),Ve=nt>0||Qe>0?` ${pt}   ${d.drawings.length}   ${Qe}`:"   .",it=p.useMemo(()=>d.photos.map((j,P)=>({item:j,index:P})),[d.photos]),w=p.useMemo(()=>it.filter(j=>!pi(j.item)),[it]),I=p.useMemo(()=>it.filter(j=>pi(j.item)),[it]),H=(Ke==null?void 0:Ke.status)||d.status,se=p.useMemo(()=>{const j=T6({siteName:d.siteName,dept:d.dept,contractor:Ht,logs:he});if(de&&Ie){const P=ba(d.manpower);j.dailyData[d.workDate]={date:d.workDate,workSets:Tc(d.workSets),manpower:P,manpowerHistory:ba(P),materials:Ac(d.materials),assets:{photos:as(d.photos),drawings:as(d.drawings)},status:H,versions:(Ke==null?void 0:Ke.version)||1,memo:d.memo||""}}return j},[Ht,H,d.dept,d.drawings,d.manpower,d.materials,d.memo,d.photos,d.siteName,d.workDate,d.workSets,Ie,de,Ke==null?void 0:Ke.version,he]),re=p.useMemo(()=>Object.values(se.dailyData).sort((j,P)=>j.date!==P.date?P.date.localeCompare(j.date):Number(P.versions||0)-Number(j.versions||0)),[se.dailyData]),Le=p.useMemo(()=>re.map(j=>j.date).filter(Boolean),[re]),_e=p.useMemo(()=>re.reduce((j,P)=>j+P.manpower.filter(O=>O.worker.trim()&&Number(O.workHours||0)>0).length,0),[re]),Te=p.useMemo(()=>re.reduce((j,P)=>j+P.workSets.filter(O=>On(O.member||"",O.customMemberValue||"")&&On(O.process||"",O.customProcessValue||"")).length,0),[re]),kt=p.useMemo(()=>re.reduce((j,P)=>j+Wd(P),0),[re]),er=p.useMemo(()=>re.reduce((j,P)=>j+ei(P).length,0),[re]),Ye=kt+er,ct=de&&_e>0&&Te>0&&Ye>0,xt=[de?"":"",_e===0?"":"",Te===0?"":"",Ye===0?"/":""].filter(Boolean).join("  ");p.useEffect(()=>{de||R(!1)},[de]),p.useEffect(()=>{if(!De||!de){Ze(null),Ae("");return}const j=mp(De);if(j){Ze(j),Ae(j.memo||"");return}const P=yu({siteKey:De,siteId:d.siteValue,siteName:d.siteName,dept:d.dept,memo:"",status:Qa(he),includedDates:Le,latestVersion:0,snapshots:[]}),O=he.length>0?Uy({draft:P,status:Qa(he),memo:"",includedDates:Le,rows:h6(he)}):P;Ze(O),Ae(O.memo||""),et(L=>L+1)},[De,d.dept,d.siteName,d.siteValue,de,Le,he]);const tr=p.useMemo(()=>(le==null?void 0:le.status)||Qa(he),[le,he]),zn=(le==null?void 0:le.latestVersion)||0,Zh=(le==null?void 0:le.lastUpdatedAt)||((Ma=he[0])==null?void 0:Ma.updatedAt)||((td=he[0])==null?void 0:td.createdAt)||"",Is=((rd=he[0])==null?void 0:rd.updatedAt)||((nd=he[0])==null?void 0:nd.createdAt)||"",Bt=tr==="pending",Nr=tr!=="pending",Yc=p.useMemo(()=>tr==="pending"?" :    :  [ ]  ":tr==="approved"?" :    :      ":ct?" :    :  []":` :    : ${xt} `,[xt,ct,tr]),Jc=!Ot&&!Bt&&ct,ef=!Ot&&Bt;p.useEffect(()=>{if(!le||!De||!Is||Is<=le.lastUpdatedAt)return;const j=Qa(he);if(j===le.status)return;const P=yu({siteKey:le.siteKey,siteId:le.siteId,siteName:le.siteName,dept:le.dept,memo:le.memo,status:j,includedDates:le.includedDates,latestVersion:le.latestVersion,snapshots:le.snapshots,rejectedReason:j==="rejected"?le.rejectedReason||"":void 0});Ze(P),et(O=>O+1)},[De,Is,he,le]);const Vn=p.useMemo(()=>{const j=[];return re.forEach(P=>{R2(Oc(P)).forEach((O,L)=>{j.push({key:`site_photo_${P.date}_${ms(O,L)}`,date:P.date,type:"photo",item:O,title:`${d.siteName||P.date}  ${L+1}`})})}),j},[re,d.siteName]),Ms=p.useMemo(()=>{const j=[];return re.forEach(P=>{ei(P).forEach((O,L)=>{j.push({key:`site_drawing_${P.date}_${ms(O,L)}`,date:P.date,type:"drawing",item:O,title:`${d.siteName||P.date}  ${L+1}`})})}),j},[re,d.siteName]),$s=p.useMemo(()=>{const j=[];return re.forEach(P=>{T2(Oc(P)).forEach((O,L)=>{j.push({key:`site_receipt_${P.date}_${ms(O,L)}`,date:P.date,type:"photo",item:O,title:`${d.siteName||P.date}  ${L+1}`})})}),j},[re,d.siteName]),cs=p.useMemo(()=>{const j=new Map;return Vn.forEach(P=>{j.has(P.date)||j.set(P.date,[]),j.get(P.date).push(P)}),[...j.entries()].sort((P,O)=>O[0].localeCompare(P[0])).map(([P,O])=>({date:P,items:O}))},[Vn]),Da=p.useMemo(()=>{const j=new Map;return Ms.forEach(P=>{j.has(P.date)||j.set(P.date,[]),j.get(P.date).push(P)}),[...j.entries()].sort((P,O)=>O[0].localeCompare(P[0])).map(([P,O])=>({date:P,items:O}))},[Ms]),$o=p.useMemo(()=>{const j=new Map;return $s.forEach(P=>{j.has(P.date)||j.set(P.date,[]),j.get(P.date).push(P)}),[...j.entries()].sort((P,O)=>O[0].localeCompare(P[0])).map(([P,O])=>({date:P,items:O}))},[$s]),Xr=p.useMemo(()=>[...d.photos.map((j,P)=>({key:`photo_${ms(j,P)}`,item:j})),...d.drawings.map((j,P)=>({key:`drawing_${ms(j,P)}`,item:j}))],[d.photos,d.drawings]),Xc=p.useMemo(()=>[...Xr,...Vn.map(j=>({key:j.key,item:j.item})),...Ms.map(j=>({key:j.key,item:j.item})),...$s.map(j=>({key:j.key,item:j.item}))],[Xr,Vn,Ms,$s]);p.useEffect(()=>{const j=e.get("focus");if(!j)return;const P=J.find(L=>L.id===j);if(P){const L=Hd(P),z=Tl(P.siteValue,P.siteName,P.workDate);!L.memo&&z&&(L.memo=z),h(L),f(P.id),E(P.siteName||P.siteValue),N("write"),window.scrollTo({top:0,behavior:"smooth"})}const O=new URLSearchParams(e);O.delete("focus"),t(O,{replace:!0})},[e,t,J]),p.useEffect(()=>{if(!de||!Ie)return;const j=`${d.siteValue}|${d.siteName}|${d.workDate}|${(Ke==null?void 0:Ke.id)||"new"}|${(Ke==null?void 0:Ke.version)||0}`;if(ot.current===j)return;ot.current=j;const P=Si(d.siteValue,d.siteName),O=Ct?Si(Ct.siteValue,Ct.siteName):"",L=!!P&&!!O&&P===O;if(Ke){const Fe=Hd(Ke),Bo=Tl(d.siteValue,d.siteName,d.workDate);!Fe.memo&&Bo&&(Fe.memo=Bo),h(Fe),f(Ke.id),E(Ke.siteName||Ke.siteValue);return}let z={...vu(r),siteValue:d.siteValue,siteName:d.siteName,workDate:d.workDate,dept:d.dept};L&&(z=Kd(z,Ct));const Ce=cr.current[P];Ce&&(z=Kd(z,Ce)),Zt&&(z=Kd(z,Hd(Zt)));const st=Tl(d.siteValue,d.siteName,d.workDate);!z.memo&&st&&(z.memo=st),z.status="draft",h(z),f(null)},[d.dept,d.siteName,d.siteValue,d.workDate,Ie,de,Ct,Ke,Zt,r]),p.useEffect(()=>{!de||!De||!Nr||(cr.current[De]={...vu(r),siteValue:d.siteValue,siteName:d.siteName,workDate:r,dept:d.dept,memo:"",manpower:ba(d.manpower),workSets:Tc(d.workSets),materials:Ac(d.materials),photos:[],drawings:[],status:"draft"})},[Nr,De,d.dept,d.manpower,d.materials,d.siteName,d.siteValue,d.workSets,de,r]),p.useEffect(()=>{if(!de||!Ie)return;const j=window.setTimeout(()=>{E6(d.siteValue,d.siteName,d.workDate,d.memo||"")},300);return()=>window.clearTimeout(j)},[d.memo,d.siteName,d.siteValue,d.workDate,Ie,de]),p.useEffect(()=>{let j=!1;async function P(){const O={},L=new Set;for(const z of Xc){const Ce=qs(z.item);if(Ce){O[z.key]=Ce;continue}if(!z.item.id)continue;L.add(z.item.id);const st=await fu(z.item.id);st&&(O[z.key]=st)}j||(bt.current=[...L],X(O))}return P(),()=>{j=!0}},[Xc]),p.useEffect(()=>()=>{bt.current.forEach(j=>Ec(j))},[]);const tf=()=>{R(!1),T(!0),window.setTimeout(()=>{var j;(j=yt.current)==null||j.focus()},0)},rf=()=>{T(!1),de&&R(!0)},mr=(j,P,O)=>{h(L=>({...L,siteValue:j,siteName:P,dept:O||L.dept})),E(P),T(!1),R(!0),ot.current=""},Ia=j=>{var z;const P=mp(j.siteKey),O=J.find(Ce=>Wy(Ce,j.siteValue,j.siteName)),L=(O==null?void 0:O.workDate)||((z=P==null?void 0:P.includedDates)==null?void 0:z[0])||r;h(Ce=>({...Ce,siteValue:j.siteValue,siteName:j.siteName,dept:j.dept||(O==null?void 0:O.dept)||Ce.dept,workDate:L})),E(j.siteName),T(!1),R(!0),N("write"),L&&_t(Ce=>({...Ce,[L]:!0})),ot.current=""},Zc=()=>{h(j=>({...j,siteValue:"",siteName:"",dept:"",memo:""})),E(""),Ze(null),Ae(""),_t({}),R(!1),N("write"),k(!1),y(null),ot.current=""},nf=j=>{const P=Hd(j),O=Tl(j.siteValue,j.siteName,j.workDate);!P.memo&&O&&(P.memo=O),h(P),f(j.id),E(j.siteName||j.siteValue),N("write"),k(!1),y(null),window.scrollTo({top:0,behavior:"smooth"})},Wn=j=>{const P=vt.get(j);if(P){nf(P);return}const O=se.dailyData[j];if(!O)return;const L=A6({siteValue:d.siteValue,siteName:d.siteName,dept:d.dept,row:O}),z=Tl(d.siteValue,d.siteName,j);!L.memo&&z&&(L.memo=z),h(L),f(null),N("write"),k(!1),y(null),window.scrollTo({top:0,behavior:"smooth"})},ds=()=>Nr?!0:(q.error(" .  [ ]    ."),!1),Lo=j=>{ds()&&g(j)},ul=(j,P,O)=>{const L=new Date().toISOString();return j.map(z=>{if(!(z!=null&&z.id))return null;const Ce={id:z.id,type:P,status:z.status||O,timestamp:z.timestamp||L},st=qs(z);return st&&(Ce.url=st),Ce}).filter(Boolean)},hl=async(j,P,O)=>{const L=ul(j.filter(Fe=>!qs(Fe)),P,O),z=j.filter(Fe=>!!qs(Fe));if(z.length===0)return L;const Ce=[],st=[];for(let Fe=0;Fe<z.length;Fe+=1){const Bo=z[Fe],sd=qs(Bo);if(sd)try{const fs=await(await fetch(sd)).blob(),Zr=fs.type.includes("png")?"png":fs.type.includes("webp")?"webp":fs.type.includes("gif")?"gif":"jpg";Ce.push(new File([fs],`${P}_${Date.now()}_${Fe}.${Zr}`,{type:fs.type||"application/octet-stream"}))}catch{st.push(...ul([Bo],P,O))}}if(Ce.length===0)return[...L,...st];try{const Fe=await wy({worklogId:u||`${d.siteValue||d.siteName}_${d.workDate}`,type:P,files:Ce,defaultStatus:O});return[...L,...Fe,...st]}catch{return[...L,...st]}},fl=(j,P,O,L)=>{const z=d.manpower.map(Fe=>({...Fe,worker:Fe.worker.trim(),workHours:Number(Fe.workHours||0)})).filter(Fe=>Fe.worker&&Fe.workHours>0),Ce=d.workSets.map(Fe=>({...Fe,member:Fe.member||"",process:Fe.process||"",type:Fe.type||"",location:Ag(Fe.location),customMemberValue:Fe.customMemberValue||"",customProcessValue:Fe.customProcessValue||"",customTypeValue:Fe.customTypeValue||""})).filter(Fe=>On(Fe.member,Fe.customMemberValue)&&On(Fe.process,Fe.customProcessValue)),st=d.materials.map(Fe=>({...Fe,name:Fe.name.trim(),qty:Number(Fe.qty||0)})).filter(Fe=>Fe.name&&Fe.qty>0);return{siteName:d.siteName.trim(),siteValue:d.siteValue,dept:d.dept,workDate:d.workDate,weather:d.memo,manpower:z,workSets:Ce,materials:st,photos:O,drawings:L,photoCount:O.filter(Fe=>Xi(Fe.status)!=="receipt").length,drawingCount:L.length,status:j,version:P}},Fo=async(j,P)=>{if(Ot)return null;if(!de)return q.error(" ."),null;if(!Ie)return q.error(" ."),null;Y(!0);try{const O=vt.get(d.workDate),[L,z]=await Promise.all([hl(d.photos,"photo","after"),hl(d.drawings,"drawing","progress")]),Ce=fl(j,O?O.version+1:1,L,z);let st;return O?st=await l.mutateAsync({id:O.id,entry:Ce}):st=await i.mutateAsync(Ce),f(st.id),h(Fe=>({...Fe,status:j,photos:L,drawings:z})),P6(d.siteValue,d.siteName,d.workDate),ot.current="",P!=null&&P.silent||q.success(j==="pending"?" .":"."),st}catch(O){return q.error(xp(O," .")),null}finally{Y(!1)}},us=j=>{const P=new Date().toISOString(),O=!!(j!=null&&j.requested);return re.map(L=>{var Fe;const z=((Fe=j==null?void 0:j.dateEntryMap)==null?void 0:Fe.get(L.date))||vt.get(L.date),Ce=O&&!!z&&((j==null?void 0:j.requestedIds)&&j.requestedIds.has(z.id)||z.status==="draft"||z.status==="rejected"),st=Ce?"pending":(z==null?void 0:z.status)||L.status;return{worklogId:(z==null?void 0:z.id)||`virtual_${De}_${L.date}`,date:L.date,version:Math.max(1,Number((z==null?void 0:z.version)||L.versions||1)),status:st,updatedAt:Ce?P:(z==null?void 0:z.updatedAt)||(z==null?void 0:z.createdAt)||P}})},sf=()=>{const j=De;if(!j)return null;const P=le||mp(j);return P||yu({siteKey:j,siteId:d.siteValue,siteName:d.siteName,dept:d.dept,memo:gt,status:Qa(he),includedDates:Le,latestVersion:0,snapshots:[]})},pl=(j,P)=>{const O=sf();if(!O)return null;const L=[...new Set(Le)].sort((Ce,st)=>st.localeCompare(Ce)),z=Uy({draft:O,status:j,memo:gt,includedDates:L,rows:us({requested:j==="pending",dateEntryMap:P==null?void 0:P.dateEntryMap,requestedIds:P==null?void 0:P.requestedIds}),rejectedReason:j==="rejected"?le==null?void 0:le.rejectedReason:void 0});return Ze(z),et(Ce=>Ce+1),z},of=async()=>{if(!de){q.error("  .");return}if(Bt){q.error(" .      .");return}const j=await Fo("draft",{silent:!0});if(!j)return;const P=new Map;he.forEach(O=>{O.workDate&&!P.has(O.workDate)&&P.set(O.workDate,O)}),j.workDate&&P.set(j.workDate,j),pl("draft",{dateEntryMap:P}),q.success("   .")},af=async()=>{if(!de){q.error("  .");return}if(!Bt){q.error("   .");return}try{const j=new Map;he.forEach(L=>{L.workDate&&!j.has(L.workDate)&&j.set(L.workDate,L)});const P=[...j.values()].filter(L=>L.status==="pending"),O=new Date().toISOString();for(const L of P)await c.mutateAsync({id:L.id,status:"draft"}),L.workDate&&j.set(L.workDate,{...L,status:"draft",updatedAt:O});pl("draft",{dateEntryMap:j}),h(L=>({...L,status:"draft"})),q.success(" .    .")}catch(j){q.error(xp(j,"  ."))}},lf=async()=>{if(Bt){q.error("  .     .");return}if(!ct){q.error(" (///) .");return}try{const j=await Fo("draft",{silent:!0});if(!j)return;const P=new Map;he.forEach(Ce=>{Ce.workDate&&!P.has(Ce.workDate)&&P.set(Ce.workDate,Ce)}),j.workDate&&P.set(j.workDate,j);const O=[...P.values()].filter(Ce=>Ce.status==="draft"||Ce.status==="rejected"),L=new Set(O.map(Ce=>Ce.id)),z=new Date().toISOString();for(const Ce of O)await c.mutateAsync({id:Ce.id,status:"pending"}),Ce.workDate&&P.set(Ce.workDate,{...Ce,status:"pending",updatedAt:z});pl("pending",{dateEntryMap:P,requestedIds:L}),h(Ce=>({...Ce,status:"pending"})),q.success("  .")}catch(j){q.error(xp(j," ."))}},hs=async(j,P)=>{const O=qs(j);if(O){fe({open:!0,url:O,title:P});return}const L=await fu(j.id);if(!L){q.error("  .");return}fe({open:!0,url:L,title:P})},ml=async(j,P,O)=>{if(ds()&&!(!P||P.length===0)){if(!de||!Ie){q.error("   .");return}try{const L=await wy({worklogId:u||`${d.siteValue||d.siteName}_${d.workDate}`,type:j,files:Array.from(P),defaultStatus:(O==null?void 0:O.defaultStatus)||(j==="photo"?"after":"progress")});h(j==="photo"?z=>({...z,photos:[...z.photos,...L]}):z=>({...z,drawings:[...z.drawings,...L]})),q.success(`${(O==null?void 0:O.label)||(j==="photo"?"":"")} ${L.length} .`)}catch{q.error("  .")}}},fn=async(j,P)=>{if(!ds())return;const L=(j==="photo"?d.photos:d.drawings)[P];L&&(jg(L)&&!qs(L)&&(await fA(L.id),Ec(L.id)),h(j==="photo"?z=>({...z,photos:z.photos.filter((Ce,st)=>st!==P)}):z=>({...z,drawings:z.drawings.filter((Ce,st)=>st!==P)})))},cf=j=>{ds()&&h(P=>({...P,photos:P.photos.map((O,L)=>{if(L!==j||pi(O))return O;const z=Xi(O.status)==="before"?"after":"before";return{...O,status:z}})}))},Uo=j=>{ds()&&h(P=>({...P,drawings:P.drawings.map((O,L)=>{if(L!==j)return O;const z=Xh(O.status)==="done"?"progress":"done";return{...O,status:z}})}))},df=async(j,P)=>{if(!ds())return;const O=qs(j);if(O){Oe({open:!0,index:P,imageSrc:O});return}const L=await fu(j.id);if(!L){q.error("   .");return}Oe({open:!0,index:P,imageSrc:L})},xl=()=>{if(!ds())return;const j=Number(ie||0),P=($?ce:ne).trim();if(!P||j<=0){q.error("  .");return}h(O=>({...O,materials:[...O.materials,{id:vn(),name:P,qty:j}]})),B(""),$&&ue("")},Ls=b==="photo"?`  (${Vn.length})`:b==="drawing"?`  (${Ms.length})`:`  (${$s.length})`,ed=b==="photo"?cs:b==="drawing"?Da:$o;return o?s.jsx("div",{className:"py-20 flex items-center justify-center text-text-sub",children:s.jsx(Vh,{className:"w-8 h-8 animate-spin"})}):s.jsxs("div",{className:"animate-fade-in pb-[calc(env(safe-area-inset-bottom)+104px)]",children:[s.jsx("section",{className:"sticky top-0 z-30 bg-background/95 px-0 py-3 backdrop-blur supports-[backdrop-filter]:bg-background/85",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"relative",children:C&&de?s.jsx("button",{type:"button",onClick:tf,className:"w-full h-[44px] rounded-xl border border-border bg-card px-3 transition-all hover:border-primary/50",children:s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsxs("div",{className:"min-w-0 inline-flex items-center gap-1.5",children:[s.jsx(Jr,{className:"h-4 w-4 text-text-sub"}),s.jsx("span",{className:"truncate text-sm-app font-semibold text-foreground",children:d.siteName})]}),s.jsxs("span",{className:"inline-flex items-center gap-1 text-[11px] font-semibold text-text-sub",children:[" ",s.jsx(Lt,{className:"h-3.5 w-3.5"})]})]})}):s.jsxs(s.Fragment,{children:[s.jsx("input",{ref:yt,value:S,onChange:j=>{const P=j.target.value;E(P),T(!0),P.trim()||(h(O=>({...O,siteValue:"",siteName:"",dept:""})),R(!1))},onFocus:()=>{T(!0),R(!1)},onBlur:()=>window.setTimeout(rf,120),placeholder:"   ",className:"w-full h-[52px] rounded-xl border border-border bg-card px-4 pr-20 text-base-app font-semibold text-foreground outline-none transition-all hover:border-primary/50 focus:border-primary focus:shadow-[0_0_0_3px_rgba(49,163,250,0.15)]"}),S?s.jsx("button",{type:"button",onMouseDown:j=>j.preventDefault(),onClick:()=>{E(""),T(!1),h(j=>({...j,siteValue:"",siteName:"",dept:""})),R(!1)},className:"absolute right-10 top-1/2 -translate-y-1/2 inline-flex h-5 w-5 items-center justify-center rounded-full bg-muted text-muted-foreground",children:s.jsx(Je,{className:"h-3 w-3"})}):null,s.jsx("button",{type:"button",onMouseDown:j=>j.preventDefault(),onClick:()=>{R(!1),T(j=>!j)},className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:F?s.jsx(Ss,{className:"w-5 h-5"}):s.jsx(Lt,{className:"w-5 h-5"})}),F&&s.jsx("div",{className:"absolute z-50 mt-2 w-full overflow-hidden rounded-xl border border-border bg-card shadow-soft",children:ze.length>0?s.jsx("div",{className:"max-h-64 overflow-y-auto",children:ze.map(j=>s.jsxs("button",{type:"button",onMouseDown:P=>P.preventDefault(),onClick:()=>mr(j.site_id,j.site_name,j.dept),className:"w-full px-4 py-3 text-left hover:bg-muted transition-colors",children:[s.jsx("p",{className:"text-sm-app font-bold text-foreground",children:j.site_name}),j.dept&&s.jsx("p",{className:"text-tiny text-text-sub",children:j.dept})]},j.site_id))}):s.jsx("div",{className:"px-4 py-5 text-sm-app text-text-sub",children:"  ."})})]})}),de?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-[1fr_auto_auto] gap-2",children:[s.jsx("input",{type:"date",value:d.workDate,onChange:j=>h(P=>({...P,workDate:j.target.value})),className:"h-[52px] rounded-xl border border-border bg-card px-3 text-sm-app font-semibold text-foreground outline-none transition-all hover:border-primary/50 focus:border-primary focus:shadow-[0_0_0_3px_rgba(49,163,250,0.15)]"}),s.jsxs("button",{type:"button",onClick:()=>k(!0),className:"inline-flex h-[52px] items-center justify-center gap-1.5 rounded-xl border border-border bg-card px-3 text-sm-app font-semibold text-text-sub transition-all hover:border-primary/50 whitespace-nowrap",children:[s.jsx(Pr,{className:"h-4 w-4"}),""]}),s.jsx("button",{type:"button",onClick:Zc,className:"inline-flex h-[52px] items-center justify-center rounded-xl border border-border bg-card px-3 text-sm-app font-semibold text-text-sub transition-all hover:border-primary/50 whitespace-nowrap",children:""})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 rounded-xl border border-border bg-card p-1",children:[s.jsx("button",{type:"button",onClick:()=>N("write"),className:U("h-10 rounded-lg text-sm-app font-bold transition-colors",x==="write"?"bg-header-navy text-header-navy-foreground":"text-text-sub hover:bg-muted"),children:""}),s.jsx("button",{type:"button",onClick:()=>N("view"),className:U("h-10 rounded-lg text-sm-app font-bold transition-colors",x==="view"?"bg-header-navy text-header-navy-foreground":"text-text-sub hover:bg-muted"),children:""})]})]}):s.jsx("div",{className:"flex gap-1.5 overflow-x-auto pb-1 no-scrollbar",children:[{key:"all",label:""},{key:"pending",label:""},{key:"rejected",label:""},{key:"approved",label:""}].map(j=>s.jsx("button",{type:"button",onClick:()=>It(j.key),className:U("h-10 px-3.5 rounded-full whitespace-nowrap flex-shrink-0 border transition-all cursor-pointer flex items-center justify-center",Ee===j.key?j.key==="all"?"bg-primary text-white border-primary font-bold shadow-sm":j.key==="pending"?"bg-indigo-500 text-white border-indigo-500 font-bold shadow-sm":j.key==="rejected"?"bg-red-500 text-white border-red-500 font-bold shadow-sm":"bg-muted-foreground text-white border-muted-foreground font-bold shadow-sm":"bg-card text-muted-foreground border-border hover:border-primary/50 font-medium"),children:j.label},`site_filter_${j.key}`))})]})}),de?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"space-y-3 pt-3",children:x==="write"?s.jsxs(s.Fragment,{children:[s.jsxs("section",{className:"relative overflow-hidden rounded-2xl border border-border bg-card px-4 py-4 shadow-soft",children:[s.jsx("span",{className:U("absolute top-0 right-0 z-10 px-2.5 py-1 text-[11px] font-bold rounded-bl-xl",Ws[tr].cornerClass),children:Ws[tr].label}),s.jsxs("div",{className:"min-w-0 pr-16",children:[s.jsx("div",{className:"text-sm-app text-text-sub font-medium mb-1 max-[640px]:mb-0.5",children:d.workDate||"-"}),s.jsx("p",{className:"truncate text-[19px] font-[800] leading-snug text-header-navy",children:d.siteName||" "}),s.jsxs("p",{className:"mt-0.5 text-tiny font-semibold text-text-sub",children:[" ",Hy(Zh),"    ",Le.length,"   v",zn||1]}),s.jsxs("div",{className:"mt-1 flex items-center gap-1.5",children:[s.jsxs("span",{className:"inline-flex h-6 items-center rounded-lg border border-sky-200 bg-sky-50 px-2 text-[12px] font-semibold text-sky-700",children:[" ",d.dept||""]}),s.jsxs("span",{className:"inline-flex h-6 items-center rounded-lg border border-indigo-200 bg-indigo-50 px-2 text-[12px] font-semibold text-indigo-700",children:[" ",Ht]})]})]}),s.jsx("p",{className:"mt-2 truncate text-tiny font-semibold text-text-sub",children:Yc}),s.jsx("div",{className:"mt-2.5",children:s.jsx(I6,{status:tr})})]}),s.jsx("section",{className:U("rounded-2xl border px-4 py-2.5",Bt?"border-indigo-200 bg-indigo-50":ct?"border-emerald-200 bg-emerald-50":"border-rose-200 bg-rose-50"),children:s.jsxs("div",{className:"flex items-center gap-2.5",children:[s.jsx("div",{className:U("inline-flex h-5.5 w-5.5 shrink-0 items-center justify-center rounded-full border bg-white",Bt?"border-indigo-300 text-indigo-600":ct?"border-emerald-300 text-emerald-600":"border-rose-300 text-rose-600"),children:Bt||ct?s.jsx(Ca,{className:"h-3.5 w-3.5"}):s.jsx(oN,{className:"h-3.5 w-3.5"})}),s.jsx("div",{className:U("min-w-0 truncate whitespace-nowrap text-[13px] font-semibold leading-none",Bt?"text-indigo-800":ct?"text-emerald-800":"text-rose-800"),children:Bt?"  :       ":ct?"  :    ":`  : ${xt} `})]})}),s.jsxs("section",{className:"rounded-2xl border border-border bg-card px-4 py-3 shadow-soft",children:[s.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[s.jsxs("p",{className:"text-sm-app font-bold text-header-navy",children:["   (",Le.length,")"]}),s.jsx("span",{className:"text-tiny font-semibold text-text-sub",children:"/"})]}),s.jsx("div",{className:"space-y-1.5",children:re.map(j=>{const P=!!je[j.date],O=j.date===d.workDate;return s.jsxs("div",{className:U("rounded-lg border px-3 py-2",O?"border-primary/50 bg-primary-bg/40":"border-border bg-background"),children:[s.jsxs("button",{type:"button",onClick:()=>_t(L=>({...L,[j.date]:!P})),className:"flex w-full items-center justify-between",children:[s.jsxs("p",{className:"text-sm-app font-semibold text-header-navy",children:[j.date," ",O?"( )":""]}),P?s.jsx(Ss,{className:"h-4 w-4 text-text-sub"}):s.jsx(Lt,{className:"h-4 w-4 text-text-sub"})]}),P&&s.jsxs("div",{className:"mt-1.5 flex items-center justify-between",children:[s.jsxs("p",{className:"text-tiny font-medium text-text-sub",children:[" ",j.manpower.length,"   ",j.workSets.length,"   ",Wd(j),"   ",ei(j).length]}),s.jsx("button",{type:"button",onClick:()=>Wn(j.date),className:"h-7 rounded-lg border border-primary/40 bg-primary-bg px-2 text-[11px] font-semibold text-primary",children:""})]})]},`write_date_${j.date}`)})})]}),tr==="rejected"&&s.jsxs("section",{className:"rounded-2xl border border-red-200 bg-red-50 px-4 py-2.5",children:[s.jsx("p",{className:"text-sm-app font-semibold text-red-700",children:"  .         ."}),(le==null?void 0:le.rejectedReason)&&s.jsx("p",{className:"mt-1 text-tiny font-medium text-red-600",children:le.rejectedReason})]}),s.jsxs("section",{className:"rounded-2xl border border-border bg-card px-4 py-3 shadow-soft",children:[s.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[s.jsx("p",{className:"text-sm-app font-bold text-header-navy",children:" "}),s.jsx("span",{className:"text-tiny font-semibold text-text-sub",children:" "})]}),s.jsx("textarea",{rows:2,value:gt,onChange:j=>Ae(j.target.value),placeholder:"   .",readOnly:!Nr,className:U("min-h-[50px] w-full resize-none rounded-xl border border-border bg-background px-3 py-2 text-sm-app font-medium text-foreground outline-none transition-all focus:border-primary focus:shadow-[0_0_0_3px_rgba(49,163,250,0.15)]",!Nr&&"bg-muted/40 text-text-sub")})]}),s.jsxs("section",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2",children:[s.jsx(Gd,{icon:s.jsx(Ea,{className:"w-5 h-5 text-header-navy"}),title:"",summary:ye,onClick:()=>Lo("manpower"),disabled:!Nr}),s.jsx(Gd,{icon:s.jsx(dN,{className:"w-5 h-5 text-header-navy"}),title:"",summary:qe,onClick:()=>Lo("work"),required:!0,missing:Me===0,disabled:!Nr}),s.jsx(Gd,{icon:s.jsx(gg,{className:"w-5 h-5 text-header-navy"}),title:"",summary:He,onClick:()=>Lo("material"),disabled:!Nr}),s.jsx(Gd,{icon:s.jsx(Mr,{className:"w-5 h-5 text-header-navy"}),title:"    ",summary:Ve,onClick:()=>Lo("media"),required:!0,missing:nt===0,disabled:!Nr})]}),s.jsxs("section",{className:"rounded-2xl border border-border bg-card px-4 py-4 shadow-soft",children:[s.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2",children:[s.jsx("p",{className:"text-sm-app font-bold text-header-navy",children:" ()"}),s.jsx("span",{className:"text-tiny font-semibold text-text-sub",children:""})]}),s.jsx("textarea",{rows:4,value:d.memo,onChange:j=>{Nr&&h(P=>({...P,memo:j.target.value}))},onInput:j=>{if(!Nr)return;const P=j.currentTarget;P.style.height="auto",P.style.height=`${Math.max(50,P.scrollHeight)}px`},placeholder:"   .",readOnly:!Nr,className:U("min-h-[50px] w-full resize-none rounded-xl border border-border bg-background px-3 py-2.5 text-sm-app font-medium text-foreground outline-none transition-all focus:border-primary focus:shadow-[0_0_0_3px_rgba(49,163,250,0.15)]",!Nr&&"bg-muted/40 text-text-sub")})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("section",{className:"rounded-2xl border border-border bg-card px-4 py-4 shadow-soft",children:[s.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-base-app font-bold text-header-navy",children:" "}),s.jsx("p",{className:"text-tiny text-text-sub",children:"     ."})]}),s.jsxs("span",{className:"text-tiny font-semibold text-text-sub",children:[re.length,""]})]}),de?re.length===0?s.jsx("div",{className:"rounded-xl border border-dashed border-border bg-background px-3 py-10 text-center text-sm-app font-semibold text-text-sub",children:"  ."}):s.jsx("div",{className:"space-y-2",children:re.map(j=>{const P=!!je[j.date],O=j.status==="rejected";return s.jsxs("div",{className:U("rounded-xl border bg-background px-3 py-3",O?"border-red-200 bg-red-50/40":"border-border"),children:[s.jsxs("button",{type:"button",onClick:()=>_t(L=>({...L,[j.date]:!P})),className:"w-full text-left",children:[s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsxs("p",{className:"text-sm-app font-bold text-header-navy",children:[j.date,"  v",j.versions]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:U("inline-flex h-6 items-center rounded-full border px-2 text-[11px] font-bold",Ws[j.status].chipClass),children:Ws[j.status].label}),P?s.jsx(Ss,{className:"h-4 w-4 text-text-sub"}):s.jsx(Lt,{className:"h-4 w-4 text-text-sub"})]})]}),s.jsxs("p",{className:"mt-1 text-tiny font-medium text-text-sub",children:[" ",j.manpower.length,"   ",j.workSets.length,"   ",Wd(j),"   ",ei(j).length,"   ",Vy(j)]})]}),P&&s.jsxs("div",{className:"mt-2 rounded-lg border border-border bg-card px-3 py-2.5",children:[s.jsx("p",{className:"text-tiny font-medium text-text-sub",children:"     ."}),s.jsx("div",{className:"mt-2 flex items-center justify-end",children:s.jsx("button",{type:"button",onClick:()=>Wn(j.date),className:"h-8 rounded-lg border border-primary/40 bg-primary-bg px-2.5 text-[11px] font-semibold text-primary",children:"  "})})]})]},`${j.date}_${j.versions}`)})}):s.jsx("div",{className:"rounded-xl border border-dashed border-border bg-background px-3 py-10 text-center text-sm-app font-semibold text-text-sub",children:"  ."})]}),s.jsxs("section",{className:"rounded-2xl border border-border bg-card px-4 py-4 shadow-soft",children:[s.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2",children:[s.jsxs("p",{className:"text-base-app font-bold text-header-navy",children:[" ( ",Vn.length,")"]}),s.jsx("button",{type:"button",onClick:()=>y("photo"),className:"h-8 rounded-full border border-border bg-background px-3 text-tiny font-semibold text-text-sub hover:bg-muted",children:""})]}),cs.length===0?s.jsx("div",{className:"rounded-xl border border-dashed border-border bg-background px-3 py-8 text-center text-sm-app font-medium text-text-sub",children:" ."}):s.jsx("div",{className:"space-y-3",children:cs.slice(0,4).map(j=>s.jsxs("div",{className:"rounded-xl border border-border bg-background px-2.5 py-2.5",children:[s.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[s.jsx("p",{className:"text-tiny font-semibold text-header-navy",children:j.date}),s.jsx("button",{type:"button",onClick:()=>Wn(j.date),className:"text-[11px] font-semibold text-primary",children:"  "})]}),s.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar pb-0.5",children:j.items.map(P=>{const O=W[P.key];return s.jsx("button",{type:"button",onClick:()=>hs(P.item,P.title),className:"h-[84px] w-[84px] shrink-0 overflow-hidden rounded-lg border border-border bg-muted",children:O?s.jsx("img",{src:O,alt:P.title,className:"h-full w-full object-cover"}):s.jsx("div",{className:"flex h-full w-full items-center justify-center text-muted-foreground",children:s.jsx(Kn,{className:"h-5 w-5"})})},P.key)})})]},`photo_group_${j.date}`))})]}),s.jsxs("section",{className:"rounded-2xl border border-border bg-card px-4 py-4 shadow-soft",children:[s.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2",children:[s.jsxs("p",{className:"text-base-app font-bold text-header-navy",children:[" ( ",Ms.length,")"]}),s.jsx("button",{type:"button",onClick:()=>y("drawing"),className:"h-8 rounded-full border border-border bg-background px-3 text-tiny font-semibold text-text-sub hover:bg-muted",children:""})]}),Da.length===0?s.jsx("div",{className:"rounded-xl border border-dashed border-border bg-background px-3 py-8 text-center text-sm-app font-medium text-text-sub",children:" ."}):s.jsx("div",{className:"space-y-3",children:Da.slice(0,4).map(j=>s.jsxs("div",{className:"rounded-xl border border-border bg-background px-2.5 py-2.5",children:[s.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[s.jsx("p",{className:"text-tiny font-semibold text-header-navy",children:j.date}),s.jsx("button",{type:"button",onClick:()=>Wn(j.date),className:"text-[11px] font-semibold text-primary",children:"  "})]}),s.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar pb-0.5",children:j.items.map(P=>{const O=W[P.key];return s.jsx("button",{type:"button",onClick:()=>hs(P.item,P.title),className:"h-[84px] w-[84px] shrink-0 overflow-hidden rounded-lg border border-border bg-muted",children:O?s.jsx("img",{src:O,alt:P.title,className:"h-full w-full object-cover"}):s.jsx("div",{className:"flex h-full w-full items-center justify-center text-muted-foreground",children:s.jsx(Kn,{className:"h-5 w-5"})})},P.key)})})]},`drawing_group_${j.date}`))})]}),s.jsxs("section",{className:"rounded-2xl border border-border bg-card px-4 py-4 shadow-soft",children:[s.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2",children:[s.jsxs("p",{className:"text-base-app font-bold text-header-navy",children:[" ( ",$s.length,")"]}),s.jsx("button",{type:"button",onClick:()=>y("receipt"),className:"h-8 rounded-full border border-border bg-background px-3 text-tiny font-semibold text-text-sub hover:bg-muted",children:""})]}),$o.length===0?s.jsx("div",{className:"rounded-xl border border-dashed border-border bg-background px-3 py-8 text-center text-sm-app font-medium text-text-sub",children:" ."}):s.jsx("div",{className:"space-y-3",children:$o.slice(0,4).map(j=>s.jsxs("div",{className:"rounded-xl border border-border bg-background px-2.5 py-2.5",children:[s.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[s.jsx("p",{className:"text-tiny font-semibold text-header-navy",children:j.date}),s.jsx("button",{type:"button",onClick:()=>Wn(j.date),className:"text-[11px] font-semibold text-primary",children:"  "})]}),s.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar pb-0.5",children:j.items.map(P=>{const O=W[P.key];return s.jsx("button",{type:"button",onClick:()=>hs(P.item,P.title),className:"h-[84px] w-[84px] shrink-0 overflow-hidden rounded-lg border border-border bg-muted",children:O?s.jsx("img",{src:O,alt:P.title,className:"h-full w-full object-cover"}):s.jsx("div",{className:"flex h-full w-full items-center justify-center text-muted-foreground",children:s.jsx(Kn,{className:"h-5 w-5"})})},P.key)})})]},`receipt_group_${j.date}`))})]})]})}),x==="write"&&s.jsx("div",{className:"fixed bottom-0 left-1/2 z-40 w-full max-w-[600px] -translate-x-1/2 border-t border-border bg-card/95 backdrop-blur",children:s.jsxs("div",{className:"grid grid-cols-2 gap-2 px-4 pt-3 pb-[calc(env(safe-area-inset-bottom)+12px)]",children:[s.jsx("button",{type:"button",onClick:of,disabled:Ot||!de||Bt,className:U("h-[52px] rounded-xl text-sm-app font-bold disabled:opacity-50",Bt?"bg-muted text-text-sub":"bg-muted text-foreground"),children:Bt?"":Ot?"...":" "}),s.jsx("button",{type:"button",onClick:Bt?af:lf,disabled:Bt?Ot||!de:Ot||!ct,className:U("h-[52px] rounded-xl text-sm-app font-bold disabled:opacity-50",Bt?"bg-red-600 text-white":"bg-header-navy text-header-navy-foreground",(Jc||ef)&&"animate-pulse"),children:s.jsxs("span",{className:"inline-flex items-center gap-1",children:[Bt?s.jsx(Je,{className:"h-4 w-4"}):s.jsx(pT,{className:"h-4 w-4"}),Bt?" ":""]})})]})})]}):s.jsx("section",{className:"space-y-2 pt-3",children:we.length===0?s.jsx("div",{className:"rounded-2xl border border-dashed border-border bg-card px-4 py-12 text-center text-sm-app font-semibold text-text-sub",children:Se.length===0?"  .":"   ."}):we.map(j=>s.jsxs("button",{type:"button",onClick:()=>Ia(j),className:"relative w-full overflow-hidden rounded-2xl border border-border bg-card px-4 py-4 text-left shadow-soft transition-all hover:border-primary/40",children:[s.jsx("span",{className:U("absolute top-0 right-0 px-2.5 py-1 text-[11px] font-bold text-white rounded-bl-xl",Ws[j.status].cornerClass),children:Ws[j.status].label}),s.jsx("p",{className:"truncate pr-14 text-[19px] font-[800] leading-snug text-header-navy",children:j.siteName}),s.jsxs("p",{className:"mt-0.5 text-tiny font-semibold text-text-sub",children:[" ",Hy(j.lastUpdatedAt),"    ",j.dateCount,"   v",j.latestVersion||1]}),s.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-1.5",children:[s.jsxs("span",{className:"inline-flex h-6 items-center rounded-lg border border-sky-200 bg-sky-50 px-2 text-[12px] font-semibold text-sky-700",children:[" ",j.dept||""]}),s.jsxs("span",{className:"inline-flex h-6 items-center rounded-lg border border-indigo-200 bg-indigo-50 px-2 text-[12px] font-semibold text-indigo-700",children:[" ",j.dept||""]}),s.jsxs("span",{className:"inline-flex h-6 items-center rounded-lg border border-border bg-background px-2 text-[12px] font-semibold text-text-sub",children:[" ",j.photoCount]}),s.jsxs("span",{className:"inline-flex h-6 items-center rounded-lg border border-border bg-background px-2 text-[12px] font-semibold text-text-sub",children:[" ",j.drawingCount]})]}),s.jsx("p",{className:"mt-1 truncate text-[12px] font-semibold text-text-sub",children:C6(j.status)})]},j.siteKey))}),s.jsx(gu,{open:v,onOpenChange:k,children:s.jsxs(bu,{className:"z-[80] mx-auto max-w-[600px] rounded-t-2xl border-t border-border bg-white",children:[s.jsxs(Qo,{className:"flex flex-row items-center justify-between",children:[s.jsx(Yo,{className:"text-base-app font-bold",children:""}),s.jsx("button",{type:"button",onClick:()=>k(!1),className:"h-8 w-8 rounded-lg border border-border text-muted-foreground",children:s.jsx(Je,{className:"h-4 w-4 mx-auto"})})]}),s.jsx("div",{className:"px-4 pb-6 max-h-[72dvh] overflow-y-auto space-y-2",children:de?re.length===0?s.jsx("div",{className:"rounded-xl border border-dashed border-border bg-background px-3 py-8 text-center text-sm-app font-semibold text-text-sub",children:"  ."}):re.map(j=>s.jsxs("button",{type:"button",onClick:()=>Wn(j.date),className:"w-full rounded-xl border border-border bg-background px-3 py-3 text-left hover:bg-muted",children:[s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsxs("p",{className:"text-sm-app font-bold text-header-navy",children:[j.date,"  v",j.versions]}),s.jsx("span",{className:U("inline-flex h-6 items-center rounded-full border px-2 text-[11px] font-bold",Ws[j.status].chipClass),children:Ws[j.status].label})]}),s.jsxs("p",{className:"mt-1 text-tiny font-medium text-text-sub",children:[" ",j.manpower.length,"   ",j.workSets.length,"   ",Wd(j),"   ",ei(j).length,"   ",Vy(j)]})]},`picker_${j.date}_${j.versions}`)):s.jsx("div",{className:"rounded-xl border border-dashed border-border bg-background px-3 py-8 text-center text-sm-app font-semibold text-text-sub",children:"  ."})})]})}),s.jsx(gu,{open:b!==null,onOpenChange:j=>!j&&y(null),children:s.jsxs(bu,{className:"mx-auto max-w-[600px] rounded-t-2xl border-t border-border bg-white",children:[s.jsxs(Qo,{className:"flex flex-row items-center justify-between",children:[s.jsx(Yo,{className:"text-base-app font-bold",children:Ls}),s.jsx("button",{type:"button",onClick:()=>y(null),className:"h-8 w-8 rounded-lg border border-border text-muted-foreground",children:s.jsx(Je,{className:"h-4 w-4 mx-auto"})})]}),s.jsx("div",{className:"px-4 pb-6 max-h-[72dvh] overflow-y-auto space-y-3",children:ed.length===0?s.jsx("div",{className:"rounded-xl border border-dashed border-border bg-background px-3 py-8 text-center text-sm-app font-semibold text-text-sub",children:" ."}):ed.map(j=>s.jsxs("div",{className:"rounded-xl border border-border bg-background p-2.5",children:[s.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[s.jsx("p",{className:"text-tiny font-semibold text-header-navy",children:j.date}),s.jsx("button",{type:"button",onClick:()=>Wn(j.date),className:"text-[11px] font-semibold text-primary",children:"  "})]}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:j.items.map(P=>{const O=W[P.key];return s.jsx("button",{type:"button",onClick:()=>hs(P.item,P.title),className:"overflow-hidden rounded-lg border border-border bg-muted",children:s.jsx("div",{className:"aspect-square w-full",children:O?s.jsx("img",{src:O,alt:P.title,className:"h-full w-full object-cover"}):s.jsx("div",{className:"flex h-full w-full items-center justify-center text-muted-foreground",children:s.jsx(Kn,{className:"h-5 w-5"})})})},`gallery_item_${P.key}`)})})]},`gallery_${b}_${j.date}`))})]})}),s.jsx(gu,{open:m!==null,onOpenChange:j=>!j&&g(null),children:s.jsxs(bu,{className:"mx-auto max-w-[600px] rounded-t-2xl border-t border-border bg-white",children:[m==="manpower"&&s.jsxs(s.Fragment,{children:[s.jsxs(Qo,{className:"flex flex-row items-center justify-between",children:[s.jsx(Yo,{className:"text-base-app font-bold",children:" "}),s.jsx("button",{type:"button",onClick:()=>g(null),className:"h-8 w-8 rounded-lg border border-border text-muted-foreground",children:s.jsx(Je,{className:"h-4 w-4 mx-auto"})})]}),s.jsxs("div",{className:"px-4 pb-6 max-h-[72dvh] overflow-y-auto space-y-3",children:[d.manpower.map((j,P)=>{const O=j.isCustom||!By.includes(j.worker)?"custom":j.worker;return s.jsxs("div",{className:"rounded-xl border border-border bg-card p-3 space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("select",{value:O,onChange:L=>{const z=L.target.value;h(Ce=>({...Ce,manpower:Ce.manpower.map(st=>st.id!==j.id?st:z==="custom"?{...st,worker:"",isCustom:!0}:{...st,worker:z,isCustom:!1})}))},className:"flex-1 h-11 rounded-lg border border-border bg-background px-3 pr-9 text-sm-app font-medium text-foreground outline-none appearance-none",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='14' height='14' viewBox='0 0 24 24' fill='none' stroke='%2364758b' stroke-width='2'%3E%3Cpath d='m6 9 6 6 6-6'/%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 10px center"},children:[By.map(L=>s.jsx("option",{value:L,children:L},L)),s.jsx("option",{value:"custom",children:""})]}),s.jsx("button",{type:"button",onClick:()=>{h(L=>({...L,manpower:L.manpower.length===1?[Pc()]:L.manpower.filter(z=>z.id!==j.id)}))},className:"w-10 h-10 rounded-lg border border-red-200 bg-red-50 text-red-600",children:s.jsx(ko,{className:"w-4 h-4 mx-auto"})})]}),O==="custom"&&s.jsx("input",{value:j.worker,onChange:L=>{h(z=>({...z,manpower:z.manpower.map(Ce=>Ce.id===j.id?{...Ce,worker:L.target.value,isCustom:!0}:Ce)}))},placeholder:"  ",className:"w-full h-11 rounded-lg border border-border bg-background px-3 text-sm-app font-medium text-foreground outline-none"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",onClick:()=>{h(L=>({...L,manpower:L.manpower.map(z=>z.id===j.id?{...z,workHours:Math.max(0,Number(z.workHours||0)-.5)}:z)}))},className:"h-10 w-10 rounded-lg border border-border bg-background text-sm-app font-bold text-foreground",children:"-"}),s.jsx("input",{type:"number",step:"0.5",min:0,value:j.workHours,onChange:L=>{const z=Number(L.target.value||0);h(Ce=>({...Ce,manpower:Ce.manpower.map(st=>st.id===j.id?{...st,workHours:z}:st)}))},className:"flex-1 h-10 rounded-lg border border-border bg-background px-3 text-center text-sm-app font-semibold text-foreground outline-none"}),s.jsx("button",{type:"button",onClick:()=>{h(L=>({...L,manpower:L.manpower.map(z=>z.id===j.id?{...z,workHours:Math.min(24,Number(z.workHours||0)+.5)}:z)}))},className:"h-10 w-10 rounded-lg border border-border bg-background text-sm-app font-bold text-foreground",children:"+"})]}),s.jsxs("p",{className:"text-tiny text-text-sub",children:["#",P+1,"  "]})]},j.id)}),s.jsxs("button",{type:"button",onClick:()=>h(j=>({...j,manpower:[...j.manpower,Pc()]})),className:"w-full h-11 rounded-xl border border-primary/40 bg-primary-bg text-sm-app font-bold text-primary inline-flex items-center justify-center gap-1",children:[s.jsx(ga,{className:"w-4 h-4"}),"  "]})]})]}),m==="work"&&s.jsxs(s.Fragment,{children:[s.jsxs(Qo,{className:"flex flex-row items-center justify-between",children:[s.jsx(Yo,{className:"text-base-app font-bold",children:" "}),s.jsx("button",{type:"button",onClick:()=>g(null),className:"h-8 w-8 rounded-lg border border-border text-muted-foreground",children:s.jsx(Je,{className:"h-4 w-4 mx-auto"})})]}),s.jsxs("div",{className:"px-4 pb-6 max-h-[72dvh] overflow-y-auto space-y-3",children:[d.workSets.map((j,P)=>s.jsxs("div",{className:"rounded-xl border border-border bg-card p-3 space-y-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-tiny font-semibold text-text-sub mb-1",children:""}),s.jsx("div",{className:"flex gap-1.5 overflow-x-auto no-scrollbar pb-1",children:f6.map(O=>s.jsx("button",{type:"button",onClick:()=>{h(L=>({...L,workSets:L.workSets.map(z=>z.id===j.id?{...z,member:O}:z)}))},className:U("h-8 px-3 rounded-full border text-tiny font-semibold whitespace-nowrap",j.member===O?"bg-primary text-primary-foreground border-primary":"bg-card text-text-sub border-border"),children:O},O))}),j.member===""&&s.jsx("input",{value:j.customMemberValue,onChange:O=>{h(L=>({...L,workSets:L.workSets.map(z=>z.id===j.id?{...z,customMemberValue:O.target.value}:z)}))},placeholder:" ",className:"mt-2 w-full h-10 rounded-lg border border-border bg-background px-3 text-sm-app font-medium text-foreground outline-none"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-tiny font-semibold text-text-sub mb-1",children:""}),s.jsx("div",{className:"flex gap-1.5 overflow-x-auto no-scrollbar pb-1",children:p6.map(O=>s.jsx("button",{type:"button",onClick:()=>{h(L=>({...L,workSets:L.workSets.map(z=>z.id===j.id?{...z,process:O}:z)}))},className:U("h-8 px-3 rounded-full border text-tiny font-semibold whitespace-nowrap",j.process===O?"bg-primary text-primary-foreground border-primary":"bg-card text-text-sub border-border"),children:O},O))}),j.process===""&&s.jsx("input",{value:j.customProcessValue,onChange:O=>{h(L=>({...L,workSets:L.workSets.map(z=>z.id===j.id?{...z,customProcessValue:O.target.value}:z)}))},placeholder:" ",className:"mt-2 w-full h-10 rounded-lg border border-border bg-background px-3 text-sm-app font-medium text-foreground outline-none"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-tiny font-semibold text-text-sub mb-1",children:""}),s.jsx("div",{className:"flex gap-1.5 overflow-x-auto no-scrollbar pb-1",children:m6.map(O=>s.jsx("button",{type:"button",onClick:()=>{h(L=>({...L,workSets:L.workSets.map(z=>z.id===j.id?{...z,type:O}:z)}))},className:U("h-8 px-3 rounded-full border text-tiny font-semibold whitespace-nowrap",j.type===O?"bg-primary text-primary-foreground border-primary":"bg-card text-text-sub border-border"),children:O},O))}),j.type===""&&s.jsx("input",{value:j.customTypeValue,onChange:O=>{h(L=>({...L,workSets:L.workSets.map(z=>z.id===j.id?{...z,customTypeValue:O.target.value}:z)}))},placeholder:" ",className:"mt-2 w-full h-10 rounded-lg border border-border bg-background px-3 text-sm-app font-medium text-foreground outline-none"})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsx("input",{value:j.location.block,onChange:O=>{h(L=>({...L,workSets:L.workSets.map(z=>z.id===j.id?{...z,location:{...z.location,block:O.target.value}}:z)}))},placeholder:"",className:"h-10 rounded-lg border border-border bg-background px-2 text-center text-sm-app font-medium text-foreground outline-none"}),s.jsx("input",{value:j.location.dong,onChange:O=>{h(L=>({...L,workSets:L.workSets.map(z=>z.id===j.id?{...z,location:{...z.location,dong:O.target.value}}:z)}))},placeholder:"",className:"h-10 rounded-lg border border-border bg-background px-2 text-center text-sm-app font-medium text-foreground outline-none"}),s.jsx("input",{value:j.location.floor,onChange:O=>{h(L=>({...L,workSets:L.workSets.map(z=>z.id===j.id?{...z,location:{...z.location,floor:O.target.value}}:z)}))},placeholder:"",className:"h-10 rounded-lg border border-border bg-background px-2 text-center text-sm-app font-medium text-foreground outline-none"})]}),s.jsx("div",{className:"flex justify-end",children:s.jsxs("button",{type:"button",onClick:()=>{h(O=>({...O,workSets:O.workSets.length===1?[Rc()]:O.workSets.filter(L=>L.id!==j.id)}))},className:"h-9 px-3 rounded-lg border border-red-200 bg-red-50 text-tiny font-semibold text-red-700 inline-flex items-center gap-1",children:[s.jsx(ko,{className:"w-4 h-4"})," "]})}),s.jsxs("p",{className:"text-tiny text-text-sub",children:["#",P+1," "]})]},j.id)),s.jsxs("button",{type:"button",onClick:()=>h(j=>({...j,workSets:[...j.workSets,Rc()]})),className:"w-full h-11 rounded-xl border border-primary/40 bg-primary-bg text-sm-app font-bold text-primary inline-flex items-center justify-center gap-1",children:[s.jsx(ga,{className:"w-4 h-4"}),"  "]})]})]}),m==="material"&&s.jsxs(s.Fragment,{children:[s.jsxs(Qo,{className:"flex flex-row items-center justify-between",children:[s.jsx(Yo,{className:"text-base-app font-bold",children:" "}),s.jsx("button",{type:"button",onClick:()=>g(null),className:"h-8 w-8 rounded-lg border border-border text-muted-foreground",children:s.jsx(Je,{className:"h-4 w-4 mx-auto"})})]}),s.jsxs("div",{className:"px-4 pb-6 max-h-[72dvh] overflow-y-auto space-y-3",children:[s.jsxs("div",{className:"rounded-xl border border-border bg-background p-3 space-y-2",children:[s.jsxs("div",{className:"grid grid-cols-[1fr_110px] gap-2",children:[s.jsx("select",{value:$?"":ne,onChange:j=>{const P=j.target.value;te(P),K(P==="")},className:"h-10 rounded-lg border border-border bg-card px-3 pr-9 text-sm-app font-semibold text-foreground outline-none appearance-none",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='14' height='14' viewBox='0 0 24 24' fill='none' stroke='%2364758b' stroke-width='2'%3E%3Cpath d='m6 9 6 6 6-6'/%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 10px center"},children:zy.map(j=>s.jsx("option",{value:j,children:j},j))}),s.jsx("input",{type:"number",min:0,step:1,value:ie,onChange:j=>B(j.target.value),placeholder:"",className:"h-10 rounded-lg border border-border bg-card px-3 text-center text-sm-app font-semibold text-foreground outline-none"})]}),$&&s.jsx("input",{value:ce,onChange:j=>ue(j.target.value),placeholder:" ",className:"h-10 w-full rounded-lg border border-border bg-card px-3 text-sm-app font-medium text-foreground outline-none"}),s.jsxs("button",{type:"button",onClick:xl,className:"w-full h-10 rounded-lg border border-primary/40 bg-primary-bg text-sm-app font-bold text-primary inline-flex items-center justify-center gap-1",children:[s.jsx(ga,{className:"w-4 h-4"}),"  "]})]}),d.materials.length===0&&s.jsx("div",{className:"rounded-xl border border-dashed border-border bg-background px-3 py-6 text-center text-sm-app font-medium text-text-sub",children:"  ."}),d.materials.map(j=>s.jsxs("div",{className:"rounded-xl border border-border bg-card p-3 grid grid-cols-[1fr_88px_44px] gap-2 items-center",children:[s.jsx("input",{value:j.name,onChange:P=>{h(O=>({...O,materials:O.materials.map(L=>L.id===j.id?{...L,name:P.target.value}:L)}))},placeholder:"",className:"h-10 rounded-lg border border-border bg-background px-3 text-sm-app font-medium text-foreground outline-none"}),s.jsx("input",{type:"number",min:0,value:j.qty,onChange:P=>{h(O=>({...O,materials:O.materials.map(L=>L.id===j.id?{...L,qty:Number(P.target.value||0)}:L)}))},className:"h-10 rounded-lg border border-border bg-background px-2 text-center text-sm-app font-semibold text-foreground outline-none"}),s.jsx("button",{type:"button",onClick:()=>{h(P=>({...P,materials:P.materials.filter(O=>O.id!==j.id)}))},className:"h-10 w-10 rounded-lg border border-red-200 bg-red-50 text-red-600",children:s.jsx(ko,{className:"w-4 h-4 mx-auto"})})]},j.id))]})]}),m==="media"&&s.jsxs(s.Fragment,{children:[s.jsxs(Qo,{className:"flex flex-row items-center justify-between",children:[s.jsx(Yo,{className:"text-base-app font-bold",children:"    "}),s.jsx("button",{type:"button",onClick:()=>g(null),className:"h-8 w-8 rounded-lg border border-border text-muted-foreground",children:s.jsx(Je,{className:"h-4 w-4 mx-auto"})})]}),s.jsxs("div",{className:"px-4 pb-6 max-h-[72dvh] overflow-y-auto space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-3",children:[s.jsxs("button",{type:"button",onClick:()=>{var j;return(j=dr.current)==null?void 0:j.click()},className:"h-11 rounded-xl border border-primary/40 bg-primary-bg text-sm-app font-bold text-primary inline-flex items-center justify-center gap-1",children:[s.jsx(Mr,{className:"w-4 h-4"}),"  /"]}),s.jsxs("button",{type:"button",onClick:()=>{var j;return(j=jt.current)==null?void 0:j.click()},className:"h-11 rounded-xl border border-primary/40 bg-primary-bg text-sm-app font-bold text-primary inline-flex items-center justify-center gap-1",children:[s.jsx(Kn,{className:"w-4 h-4"}),"  "]}),s.jsxs("button",{type:"button",onClick:()=>{var j;return(j=ft.current)==null?void 0:j.click()},className:"h-11 rounded-xl border border-indigo-200 bg-indigo-50 text-sm-app font-semibold text-indigo-700 inline-flex items-center justify-center gap-1",children:[s.jsx(Pr,{className:"w-4 h-4"}),"  "]})]}),s.jsx("p",{className:"text-tiny text-text-sub",children:"   ."}),s.jsx("input",{ref:dr,type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:j=>{ml("photo",j.target.files),j.target.value=""}}),s.jsx("input",{ref:jt,type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:j=>{ml("drawing",j.target.files),j.target.value=""}}),s.jsx("input",{ref:ft,type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:j=>{ml("photo",j.target.files,{defaultStatus:"receipt",label:""}),j.target.value=""}}),s.jsxs("div",{children:[s.jsxs("p",{className:"mb-2 text-tiny font-semibold text-text-sub",children:[" (",w.length,")"]}),w.length===0&&s.jsx("div",{className:"rounded-lg border border-dashed border-border bg-background px-3 py-4 text-center text-tiny text-text-sub",children:"  ."}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:w.map(({item:j,index:P},O)=>{const L=`photo_${ms(j,P)}`,z=W[L];return s.jsxs("div",{className:"overflow-hidden rounded-lg border border-border bg-card",children:[s.jsx("button",{type:"button",onClick:()=>hs(j,` ${O+1}`),className:"w-full aspect-square bg-muted",children:z?s.jsx("img",{src:z,alt:` ${O+1}`,className:"h-full w-full object-cover"}):s.jsx("div",{className:"flex h-full w-full items-center justify-center text-muted-foreground",children:s.jsx(Kn,{className:"h-6 w-6"})})}),s.jsxs("div",{className:"grid grid-cols-2 border-t border-border",children:[s.jsx("button",{type:"button",onClick:()=>cf(P),className:"h-8 border-r border-border text-[11px] font-semibold text-primary",children:b6(j.status)}),s.jsx("button",{type:"button",onClick:()=>fn("photo",P),className:"h-8 text-[11px] font-semibold text-red-600",children:""})]})]},L)})})]}),s.jsxs("div",{children:[s.jsxs("p",{className:"mb-2 text-tiny font-semibold text-text-sub",children:[" (",d.drawings.length,")"]}),d.drawings.length===0&&s.jsx("div",{className:"rounded-lg border border-dashed border-border bg-background px-3 py-4 text-center text-tiny text-text-sub",children:"  ."}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:d.drawings.map((j,P)=>{const O=`drawing_${ms(j,P)}`,L=W[O];return s.jsxs("div",{className:"overflow-hidden rounded-lg border border-border bg-card",children:[s.jsx("button",{type:"button",onClick:()=>hs(j,` ${P+1}`),className:"w-full aspect-square bg-muted",children:L?s.jsx("img",{src:L,alt:` ${P+1}`,className:"h-full w-full object-cover"}):s.jsx("div",{className:"flex h-full w-full items-center justify-center text-muted-foreground",children:s.jsx(Kn,{className:"h-6 w-6"})})}),s.jsxs("div",{className:"grid grid-cols-3 border-t border-border",children:[s.jsx("button",{type:"button",onClick:()=>Uo(P),className:"h-8 border-r border-border text-[11px] font-semibold text-primary",children:y6(j.status)}),s.jsx("button",{type:"button",onClick:()=>df(j,P),className:"h-8 border-r border-border text-[11px] font-semibold text-indigo-700",children:""}),s.jsx("button",{type:"button",onClick:()=>fn("drawing",P),className:"h-8 text-[11px] font-semibold text-red-600",children:""})]})]},O)})})]}),s.jsxs("div",{children:[s.jsxs("p",{className:"mb-2 text-tiny font-semibold text-text-sub",children:[" (",I.length,")"]}),I.length===0&&s.jsx("div",{className:"rounded-lg border border-dashed border-border bg-background px-3 py-4 text-center text-tiny text-text-sub",children:"  ."}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:I.map(({item:j,index:P},O)=>{const L=`receipt_${ms(j,P)}`,z=W[`photo_${ms(j,P)}`];return s.jsxs("div",{className:"overflow-hidden rounded-lg border border-border bg-card",children:[s.jsx("button",{type:"button",onClick:()=>hs(j,` ${O+1}`),className:"w-full aspect-square bg-muted",children:z?s.jsx("img",{src:z,alt:` ${O+1}`,className:"h-full w-full object-cover"}):s.jsx("div",{className:"flex h-full w-full items-center justify-center text-muted-foreground",children:s.jsx(Kn,{className:"h-6 w-6"})})}),s.jsxs("div",{className:"grid grid-cols-2 border-t border-border",children:[s.jsx("div",{className:"flex h-8 items-center justify-center border-r border-border text-[11px] font-semibold text-indigo-700",children:""}),s.jsx("button",{type:"button",onClick:()=>fn("photo",P),className:"h-8 text-[11px] font-semibold text-red-600",children:""})]})]},L)})})]})]})]})]})}),s.jsx(LN,{open:Z.open,onClose:()=>fe({open:!1,url:"",title:""}),title:Z.title,children:s.jsx("img",{src:Z.url,alt:Z.title,className:"max-w-full max-h-full object-contain bg-white"})}),s.jsx(a6,{isOpen:ve.open,imageSrc:ve.imageSrc,onPrev:()=>Oe({open:!1,index:-1,imageSrc:""}),onDeleteSelected:()=>{ve.index>=0&&fn("drawing",ve.index),Oe({open:!1,index:-1,imageSrc:""})},onSave:()=>{ve.index>=0&&(h(j=>({...j,drawings:j.drawings.map((P,O)=>O===ve.index?{...P,status:"done"}:P)})),q.success("    .")),Oe({open:!1,index:-1,imageSrc:""})}})]})}function Gd({icon:e,title:t,summary:r,required:n=!1,missing:o=!1,disabled:a=!1,onClick:i}){return s.jsxs("button",{type:"button",onClick:i,disabled:a,className:U("w-full rounded-2xl border bg-card px-4 py-3 shadow-soft text-left transition-all active:scale-[0.99] disabled:opacity-60 disabled:cursor-not-allowed",o?"border-red-200":"border-border"),children:[s.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1.5",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:e}),s.jsx("p",{className:"text-sm-app font-bold text-header-navy",children:t})]}),n&&s.jsx("span",{className:U("inline-flex h-6 items-center rounded-full border px-2 text-[11px] font-bold",o?"border-red-200 bg-red-50 text-red-600":"border-emerald-200 bg-emerald-50 text-emerald-600"),children:o?"":""})]}),s.jsx("p",{className:"text-sm-app font-medium text-text-sub truncate",children:r})]})}function I6({status:e}){const t=e==="rejected",r=N6(e),n=t?["","",""]:["","",""],o=t?"border-red-500 bg-red-500 text-white":"border-sky-500 bg-sky-500 text-white",a=t?"border-red-200 bg-white text-red-700":"border-sky-200 bg-white text-sky-700",i=t?"bg-red-400":"bg-sky-400",l=t?"bg-red-200":"bg-sky-200",c=t?"ring-2 ring-red-200":"ring-2 ring-sky-200";return s.jsx("div",{className:U("w-full rounded-xl border px-2.5 py-2",t?"border-red-100 bg-red-50/70":"border-sky-100 bg-sky-50/70"),children:s.jsx("div",{className:"flex items-center",children:n.map((d,h)=>{const u=h+1,f=u<=r,m=u===r;return s.jsxs("div",{className:"flex min-w-0 flex-1 items-center",children:[s.jsx("span",{className:U("inline-flex h-7 min-w-11 items-center justify-center rounded-full border px-2 text-[11px] font-bold transition-colors",f?o:a,m&&c),children:d}),h<n.length-1&&s.jsx("span",{className:U("mx-1 h-[3px] flex-1 rounded-full",u<r?i:l)})]},d)})})})}function M6(){const{isAdmin:e}=ls(),[t,r]=p.useState(""),[n,o]=p.useState("latest"),[a,i]=p.useState("all"),[l,c]=p.useState(!1),[d,h]=p.useState(()=>{const W=localStorage.getItem("admin_pinned_ids");return W?new Set(JSON.parse(W)):new Set}),[u,f]=p.useState(null),[m,g]=p.useState(1),[x,N]=p.useState(""),b=pr(),{data:y=[],isLoading:v}=fr({queryKey:["admin-worklogs"],queryFn:async()=>{const{data:W,error:X}=await me.from("worklogs").select(`
          id, site_name, site_id, work_date, status, created_by, created_at, dept, weather,
          worklog_manpower(worker_name, work_hours),
          worklog_worksets(member, process, work_type, block, dong, floor),
          worklog_materials(name, qty)
        `).order("created_at",{ascending:!1}).limit(100);if(X)throw X;const ne=[...new Set((W||[]).map(B=>B.created_by))],{data:te}=await me.from("profiles").select("user_id, name, phone, affiliation").in("user_id",ne),ie={};return te==null||te.forEach(B=>{ie[B.user_id]=B}),(W||[]).map(B=>{const $=ie[B.created_by],K=B.worklog_manpower||[],ce=B.worklog_worksets||[],ue=B.worklog_materials||[],Z=ce[0],fe=K.reduce((Oe,le)=>Oe+(le.work_hours||0),0),ve=Z&&[Z.block,Z.dong,Z.floor].filter(Boolean).join(" ")||"";return{id:B.id,name:($==null?void 0:$.name)||"",role:"",affiliation:($==null?void 0:$.affiliation)||"",site:B.site_name,siteId:B.site_id,member:(Z==null?void 0:Z.member)||"-",process:(Z==null?void 0:Z.process)||"-",workType:(Z==null?void 0:Z.work_type)||"-",location:ve,man:fe,cumDays:0,cumMan:0,task:ce.map(Oe=>`${Oe.member||""} ${Oe.process||""}`).join(", ")||"  ",status:B.status==="draft"||B.status==="submitted"?"pending":B.status,latestDate:B.created_at,phone:($==null?void 0:$.phone)||"",pinned:!1,worklogId:B.id,materials:ue.map(Oe=>`${Oe.name} (${Oe.qty})`).join("  ")||"-"}})}}),k=wr({mutationFn:async({worklogId:W,newStatus:X})=>{const{error:ne}=await me.from("worklogs").update({status:X}).eq("id",W);if(ne)throw ne},onSuccess:()=>{b.invalidateQueries({queryKey:["admin-worklogs"]}),f(null),N(""),g(1)}}),S=p.useCallback(W=>{h(X=>{const ne=new Set(X);return ne.has(W)?ne.delete(W):ne.add(W),localStorage.setItem("admin_pinned_ids",JSON.stringify([...ne])),ne})},[]),E=p.useMemo(()=>y.map(W=>({...W,pinned:d.has(W.id)})),[y,d]),C=p.useMemo(()=>{let W=E.filter(X=>{const ne=t.toLowerCase(),te=!ne||X.name.toLowerCase().includes(ne)||X.site.toLowerCase().includes(ne),ie=a==="all"||X.status===a;return te&&ie});return W.sort((X,ne)=>X.pinned!==ne.pinned?X.pinned?-1:1:n==="name"?X.name.localeCompare(ne.name,"ko"):new Date(ne.latestDate).getTime()-new Date(X.latestDate).getTime()),W},[E,t,a,n]),R=l?C:C.slice(0,3),F=p.useMemo(()=>({all:E.length,pending:E.filter(W=>W.status==="pending").length,approved:E.filter(W=>W.status==="approved").length}),[E]),T=W=>{if(!W)return"";const X=new Date(W);return`${String(X.getMonth()+1).padStart(2,"0")}.${String(X.getDate()).padStart(2,"0")}.${String(X.getFullYear()).slice(2)}`},V=()=>{u&&k.mutate({worklogId:u.worklogId,newStatus:"approved"})},Y=()=>{if(u){if(!x.trim()){alert("  .");return}k.mutate({worklogId:u.worklogId,newStatus:"rejected"})}};return v?s.jsx("div",{className:"py-20 text-center text-muted-foreground",children:" ..."}):s.jsxs("div",{className:"animate-fade-in mt-3",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx("input",{type:"text",value:t,onChange:W=>r(W.target.value),placeholder:"   ",className:"w-full h-[54px] bg-card border border-border rounded-xl pl-4 pr-[75px] text-[17px] font-medium text-foreground placeholder:text-muted-foreground outline-none transition-all shadow-soft hover:border-primary/50 focus:border-primary focus:shadow-[0_0_0_3px_rgba(49,163,250,0.15)]"}),s.jsxs("div",{className:"absolute right-3.5 top-1/2 -translate-y-1/2 flex items-center gap-2",children:[t&&s.jsx("button",{onClick:()=>r(""),className:"w-5 h-5 rounded-full bg-muted flex items-center justify-center text-muted-foreground",children:s.jsx(Je,{className:"w-3 h-3"})}),s.jsx(Jr,{className:"w-5 h-5 text-muted-foreground"})]})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{value:n,onChange:W=>o(W.target.value),className:"w-[95px] h-[54px] bg-card border border-border rounded-xl px-3 text-[15px] font-semibold text-foreground appearance-none outline-none cursor-pointer shadow-soft transition-all hover:border-primary/50 focus:border-primary focus:shadow-[0_0_0_3px_rgba(49,163,250,0.15)]",children:[s.jsx("option",{value:"latest",children:""}),s.jsx("option",{value:"name",children:""})]}),s.jsx(Lt,{className:"absolute right-2.5 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground pointer-events-none"})]})]}),s.jsx("div",{className:"grid grid-cols-3 gap-2.5 mb-5",children:[{key:"all",label:" ",val:F.all,colors:"bg-[hsl(217_100%_96%)] text-[#3b82f6] border-[#bfdbfe]"},{key:"pending",label:" ",val:F.pending,colors:"bg-[hsl(229_100%_96%)] text-[#6366f1] border-[#c7d2fe]"},{key:"approved",label:" ",val:F.approved,colors:"bg-muted text-text-sub border-[#94a3b8]"}].map(W=>s.jsxs("button",{onClick:()=>{i(W.key),c(!1)},className:U("p-3.5 rounded-2xl text-center flex flex-col items-center gap-0.5 border cursor-pointer transition-all active:scale-[0.98]",W.colors,a===W.key&&"ring-1 ring-primary/30 -translate-y-px"),children:[s.jsx("span",{className:"text-[22px] font-[800] leading-tight",children:W.val}),s.jsx("span",{className:"text-[12px] font-bold opacity-90",children:W.label})]},W.key))}),C.length===0?s.jsx("div",{className:"text-center py-20 text-muted-foreground",children:"  ."}):s.jsx("div",{className:"flex flex-col gap-2",children:R.map(W=>s.jsxs("div",{className:U("bg-card rounded-2xl shadow-soft overflow-hidden relative",W.pinned&&"border-2 border-primary shadow-[0_4px_12px_rgba(49,163,250,0.2)]"),children:[s.jsx("span",{className:U("absolute top-0 right-0 text-[11px] font-bold px-3.5 py-1.5 text-white z-10",W.pinned?"rounded-bl-xl rounded-tr-[14px]":"rounded-bl-xl rounded-tr-2xl",W.status==="pending"?"bg-[#6366f1]":W.status==="approved"?"bg-[#475569]":"bg-destructive"),children:W.status==="pending"?"":W.status==="approved"?"":""}),s.jsxs("div",{className:"p-5 pb-3 cursor-pointer",onClick:()=>{f(W),g(1)},children:[s.jsxs("div",{className:"flex items-center gap-1.5 mb-1 flex-wrap",children:[s.jsx("span",{className:"text-[20px] font-[800] text-header-navy",children:W.name}),s.jsx("span",{className:"text-[16px] font-semibold text-text-sub ml-2",children:W.role})]}),s.jsxs("div",{className:"flex items-center justify-between w-full mt-1",children:[s.jsxs("div",{className:"flex items-center gap-1 flex-1 min-w-0 overflow-hidden",children:[s.jsx("span",{className:"text-[14px] font-semibold px-2 py-0.5 rounded-lg bg-[hsl(229_100%_96%)] text-[#6366f1] border border-[#c7d2fe] shrink-0",children:W.affiliation}),s.jsx("span",{className:"text-[17px] font-[800] text-header-navy truncate",children:W.site})]}),s.jsx("button",{onClick:X=>{X.stopPropagation(),S(W.id)},className:U("p-1 shrink-0 ml-2 transition-colors",W.pinned?"text-primary":"text-border"),children:W.pinned?s.jsx(qh,{className:"w-6 h-6 fill-current"}):s.jsx(Wh,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"flex items-center gap-1 mt-2 text-[14px] text-text-sub font-semibold",children:[s.jsxs("span",{className:"text-[#0369a1] font-[800]",children:[T(W.latestDate)," l"]}),s.jsx(lr,{className:"w-3.5 h-3.5 mr-1"}),s.jsxs("span",{children:[W.member,"  ",W.process,"  ",W.location]})]}),s.jsxs("div",{className:"grid grid-cols-3 bg-muted/50 rounded-xl p-3 mt-3 border border-border/50",children:[s.jsxs("div",{className:"text-center border-r border-border",children:[s.jsx("span",{className:"block text-[17px] font-[800] text-primary",children:W.man}),s.jsx("span",{className:"block text-[11px] font-bold text-text-sub",children:" "})]}),s.jsxs("div",{className:"text-center border-r border-border",children:[s.jsxs("span",{className:"block text-[17px] font-[800] text-primary",children:[W.cumDays,""]}),s.jsx("span",{className:"block text-[11px] font-bold text-text-sub",children:" "})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"block text-[17px] font-[800] text-primary",children:W.cumMan}),s.jsx("span",{className:"block text-[11px] font-bold text-text-sub",children:" "})]})]})]}),s.jsxs("div",{className:"px-5 pb-4 flex gap-2",children:[W.phone&&s.jsxs("a",{href:`tel:${W.phone}`,onClick:X=>X.stopPropagation(),className:"flex-1 h-12 flex items-center justify-center gap-1.5 text-[14px] font-bold rounded-xl border bg-[hsl(138_76%_97%)] border-[#bbf7d0] text-[#166534] cursor-pointer transition-all active:scale-[0.98]",children:[s.jsx(Ro,{className:"w-3.5 h-3.5"}),""]}),W.phone&&s.jsxs("a",{href:`sms:${W.phone}`,onClick:X=>X.stopPropagation(),className:"flex-1 h-12 flex items-center justify-center gap-1.5 text-[14px] font-bold rounded-xl border bg-[hsl(229_100%_96%)] border-[#c7d2fe] text-[#6366f1] cursor-pointer transition-all active:scale-[0.98]",children:[s.jsx(lT,{className:"w-3.5 h-3.5"}),""]}),s.jsxs("button",{onClick:X=>{X.stopPropagation(),f(W),g(1)},className:"flex-1 h-12 flex items-center justify-center gap-1.5 text-[14px] font-[800] rounded-xl border bg-muted border-[#94a3b8] text-[#334155] cursor-pointer transition-all active:scale-[0.98] shadow-sm",children:[s.jsx(Yi,{className:"w-3.5 h-3.5"}),""]})]})]},W.id))}),C.length>3&&s.jsxs("button",{onClick:()=>c(!l),className:"w-full h-[54px] bg-card border border-border rounded-full text-text-sub font-semibold text-[15px] cursor-pointer mt-2.5 mb-4 flex items-center justify-center gap-1.5 transition-all hover:bg-muted",children:[s.jsx("span",{children:l?"":" "}),l?s.jsx(Ss,{className:"w-4 h-4"}):s.jsx(Lt,{className:"w-4 h-4"})]}),u&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-[2000] flex items-end justify-center p-0",onClick:()=>{f(null),g(1),N("")},children:s.jsxs("div",{className:"w-full max-w-[600px] bg-card rounded-t-[20px] p-6 max-h-[90vh] overflow-y-auto animate-slide-up",onClick:W=>W.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between mb-5",children:[s.jsx("h3",{className:"text-[20px] font-bold text-foreground m-0",children:" "}),s.jsx("button",{onClick:()=>{f(null),g(1),N("")},className:"bg-transparent border-none text-text-sub cursor-pointer p-1",children:s.jsx(Je,{className:"w-6 h-6"})})]}),m===1&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-muted/50 rounded-[14px] p-[18px] mb-4 border border-border",children:[s.jsxs("div",{className:"text-[14px] font-[800] text-header-navy mb-2.5 flex items-center gap-1.5",children:[s.jsx(yr,{className:"w-4 h-4"}),"    "]}),s.jsx("div",{className:"text-[16px] font-[800] text-foreground leading-relaxed",children:u.task})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[s.jsxs("div",{className:"bg-muted/50 p-4 rounded-xl border border-border/50",children:[s.jsx("span",{className:"block text-[13px] font-[800] text-text-sub mb-1.5",children:" "}),s.jsxs("div",{className:"text-[19px] font-[900] text-header-navy",children:[u.man," "]})]}),s.jsxs("div",{className:"bg-muted/50 p-4 rounded-xl border border-border/50",children:[s.jsx("span",{className:"block text-[13px] font-[800] text-text-sub mb-1.5",children:" "}),s.jsx("div",{className:"text-[19px] font-[900] text-header-navy",children:new Date(u.latestDate).toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"})})]})]}),s.jsxs("button",{onClick:()=>g(2),className:"w-full h-14 rounded-xl text-[16px] font-[900] border border-[#e0f2fe] bg-[hsl(205_100%_97%)] text-[#0284c7] flex items-center justify-center gap-2 cursor-pointer mb-3",children:["   ",s.jsx(xa,{className:"w-5 h-5"})]}),e&&s.jsx("button",{onClick:V,disabled:k.isPending,className:"w-full h-14 rounded-xl text-[16px] font-[900] border-none bg-header-navy text-white cursor-pointer shadow-[0_8px_22px_rgba(26,37,79,0.18)] disabled:opacity-50",children:" "})]}),m===2&&s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:()=>g(1),className:"flex items-center gap-1.5 text-text-sub font-bold mb-4 cursor-pointer bg-transparent border-none p-0",children:[s.jsx(ma,{className:"w-5 h-5"})," "]}),s.jsxs("div",{className:"bg-muted/50 rounded-[14px] p-[18px] mb-4 border border-border",children:[s.jsxs("div",{className:"text-[14px] font-[800] text-header-navy mb-2.5 flex items-center gap-1.5",children:[s.jsx(os,{className:"w-4 h-4"}),"    "]}),s.jsxs("div",{className:"text-[16px] font-[800] text-foreground",children:[u.member,"  ",u.process,"  ",u.location]})]}),s.jsxs("div",{className:"bg-muted/50 rounded-[14px] p-[18px] mb-4 border border-border",children:[s.jsxs("div",{className:"text-[14px] font-[800] text-header-navy mb-2.5 flex items-center gap-1.5",children:[s.jsx(gg,{className:"w-4 h-4"}),"   "]}),s.jsx("div",{className:"text-[13px] font-[800] text-foreground",children:u.materials})]}),e&&s.jsx("textarea",{value:x,onChange:W=>N(W.target.value),placeholder:"     .",className:"w-full h-24 p-3.5 border border-border rounded-xl text-[13px] font-bold outline-none resize-none mb-3.5 focus:border-primary focus:shadow-[0_0_0_3px_rgba(49,163,250,0.12)]"}),e?s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:Y,disabled:k.isPending,className:"flex-1 h-14 rounded-xl text-[16px] font-[900] border-[1.5px] border-[#fecaca] bg-[hsl(0_100%_97%)] text-destructive cursor-pointer disabled:opacity-50",children:" "}),s.jsx("button",{onClick:V,disabled:k.isPending,className:"flex-1 h-14 rounded-xl text-[16px] font-[900] border-none bg-header-navy text-white cursor-pointer disabled:opacity-50",children:" "})]}):s.jsx("div",{className:"text-center py-3 text-[14px] font-semibold text-text-sub bg-muted rounded-xl",children:"   /  "})]})]})})]})}const $6=["","","","","","",""],L6={"2026-01-02":[{site:"",people:2,note:" "}],"2026-01-03":[{site:" Y1CUB",people:1,note:""},{site:"",people:3,note:""}],"2026-01-04":[{site:"",people:1,note:" "}],"2026-01-05":[{site:"",people:1,note:" "},{site:"",people:2,note:""}],"2026-01-06":[{site:"  2",people:2,note:"  "}],"2026-02-03":[{site:"  101",people:3,note:""}],"2026-02-05":[{site:"  P3",people:2,note:""}],"2026-02-10":[{site:"  101",people:4,note:""},{site:" ",people:1,note:""}],"2026-02-12":[{site:"  ",people:5,note:" "}],"2026-02-18":[{site:" ",people:3,note:" "}],"2026-02-20":[{site:" 4",people:6,note:" "}],"2026-02-23":[{site:"  101",people:2,note:""}]};function F6(){const e=new Date,[t,r]=p.useState(e.getFullYear()),[n,o]=p.useState(e.getMonth()+1),[a,i]=p.useState(""),[l,c]=p.useState(!1),[d,h]=p.useState(!1),[u,f]=p.useState(e.getFullYear()),[m,g]=p.useState(null),x=L6,N=p.useMemo(()=>{const S=new Date(t,n-1,1).getDay(),E=new Date(t,n,0).getDate(),C=[];for(let R=1;R<=E;R++){const F=`${t}-${String(n).padStart(2,"0")}-${String(R).padStart(2,"0")}`;let T=x[F]||[];a&&(T=T.filter(Y=>Y.site===a));const V=e.getFullYear()===t&&e.getMonth()+1===n&&e.getDate()===R;C.push({day:R,isToday:V,entries:T})}return{firstDay:S,cells:C}},[t,n,a,x]),b=p.useMemo(()=>{const S=new Set;let E=0,C=0;return N.cells.forEach(R=>{R.entries.length>0&&(C++,R.entries.forEach(F=>{S.add(F.site),E+=F.people}))}),{totalSites:S.size,totalPeople:E,workedDays:C}},[N]),v=p.useMemo(()=>{const S=new Set;return Object.values(x).forEach(E=>E.forEach(C=>S.add(C.site))),Array.from(S).sort()},[x]).filter(S=>S.toLowerCase().includes(a.toLowerCase())),k=S=>{let E=n+S,C=t;E>12&&(E=1,C++),E<1&&(E=12,C--),o(E),r(C)};return s.jsxs("div",{className:"animate-fade-in",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[s.jsx("input",{type:"text",value:a,onChange:S=>{i(S.target.value),c(!0)},onFocus:()=>c(!0),placeholder:"   ",className:"w-full h-[50px] bg-card border border-border rounded-xl px-4 pr-12 text-[17px] font-medium text-foreground placeholder:text-muted-foreground outline-none transition-all hover:border-primary/50 focus:border-primary focus:shadow-[0_0_0_3px_rgba(49,163,250,0.15)]"}),a&&s.jsx("button",{onClick:()=>{i(""),c(!1)},className:"absolute right-10 top-1/2 -translate-y-1/2 w-5 h-5 rounded-full bg-muted flex items-center justify-center text-[12px] text-muted-foreground z-10",children:""}),s.jsx("button",{onClick:()=>c(!l),className:"absolute right-4 top-1/2 -translate-y-1/2 text-muted-foreground",children:s.jsx(Lt,{className:"w-5 h-5"})}),l&&s.jsx("ul",{className:"absolute z-50 w-full mt-1.5 max-h-60 overflow-auto bg-card border border-border rounded-xl shadow-lg animate-fade-in",children:v.length===0?s.jsx("li",{className:"p-4 text-muted-foreground text-center text-sm-app",children:"  "}):v.map(S=>s.jsx("li",{onClick:()=>{i(S),c(!1)},className:"px-4 py-3.5 cursor-pointer border-b border-border last:border-0 text-[16px] font-medium text-foreground hover:bg-muted transition-colors",children:S},S))})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>{f(t),h(!d)},className:U("flex items-center justify-between min-w-[145px] h-[54px] px-4 bg-card border border-border rounded-xl text-[17px] font-bold text-foreground cursor-pointer transition-all hover:border-primary/50",d&&"border-primary shadow-[0_0_0_3px_rgba(49,163,250,0.15)]"),children:[s.jsxs("span",{children:[t," ",n,""]}),s.jsx(th,{className:"w-[18px] h-[18px] text-muted-foreground ml-2"})]}),d&&s.jsxs("div",{className:"absolute top-[calc(100%+8px)] right-0 w-[280px] bg-card border border-border rounded-2xl shadow-lg p-4 z-[1000] animate-fade-in",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4 px-1",children:[s.jsx("button",{onClick:()=>f(S=>S-1),className:"p-1 hover:bg-muted rounded",children:s.jsx(ma,{className:"w-[18px] h-[18px]"})}),s.jsxs("span",{className:"font-bold text-lg-app",children:[u,""]}),s.jsx("button",{onClick:()=>f(S=>S+1),className:"p-1 hover:bg-muted rounded",children:s.jsx(xa,{className:"w-[18px] h-[18px]"})})]}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:Array.from({length:12},(S,E)=>E+1).map(S=>s.jsxs("button",{onClick:()=>{r(u),o(S),h(!1)},className:U("h-11 rounded-lg text-[15px] font-semibold cursor-pointer transition-all border-none",u===t&&S===n?"bg-primary/10 text-primary font-[800]":"text-text-sub hover:bg-muted hover:text-primary"),children:[S,""]},S))})]})]})]}),s.jsxs("div",{className:"rounded-2xl overflow-hidden mb-4 bg-card shadow-soft",children:[s.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-border",children:[s.jsx("button",{onClick:()=>k(-1),className:"bg-transparent border-none cursor-pointer text-text-sub p-2 hover:bg-muted rounded-full",children:s.jsx(ma,{className:"w-7 h-7"})}),s.jsxs("span",{className:"text-[22px] font-[800] text-foreground",children:[t," ",n,""]}),s.jsx("button",{onClick:()=>k(1),className:"bg-transparent border-none cursor-pointer text-text-sub p-2 hover:bg-muted rounded-full",children:s.jsx(xa,{className:"w-7 h-7"})})]}),s.jsxs("div",{className:"grid grid-cols-7",children:[$6.map((S,E)=>s.jsx("div",{className:U("h-9 flex items-center justify-center text-[14px] font-bold border-b border-border bg-muted/50",E===0?"text-destructive":E===6?"text-primary":"text-text-sub"),children:S},S)),Array.from({length:N.firstDay}).map((S,E)=>s.jsx("div",{className:"min-h-[96px] border-b border-r border-border bg-card"},`empty-${E}`)),N.cells.map(S=>{const E=(N.firstDay+S.day-1)%7,C=S.entries.reduce((R,F)=>R+F.people,0);return s.jsxs("div",{onClick:()=>S.entries.length>0&&g({date:`${t}-${String(n).padStart(2,"0")}-${String(S.day).padStart(2,"0")}`,entries:S.entries}),className:U("min-h-[96px] p-1.5 flex flex-col items-center gap-0.5 cursor-pointer border-b border-border bg-card hover:bg-muted transition-colors",E<6&&"border-r"),children:[s.jsx("span",{className:U("text-[15px] font-bold w-[26px] h-[26px] rounded-full flex items-center justify-center mb-1",S.isToday?"bg-header-navy text-white font-[800]":E===0?"text-destructive":E===6?"text-primary":"text-foreground"),children:S.day}),S.entries.length>0&&s.jsxs("div",{className:"w-full flex flex-col items-center",children:[s.jsxs("span",{className:"text-[13px] font-[800] text-primary",children:[C,""]}),s.jsx("span",{className:"text-[11px] font-bold text-text-sub truncate max-w-full text-center",children:S.entries.length===1?S.entries[0].site.replace(/\s+/g,"").slice(0,4):`${S.entries[0].site.replace(/\s+/g,"").slice(0,4)}${S.entries.length-1}`})]})]},S.day)})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-2.5 mb-6",children:[s.jsxs("div",{className:"p-4 rounded-2xl text-center flex flex-col gap-1.5 shadow-soft bg-[hsl(201_100%_94%)] text-[#0284c7] border border-[#0284c7]",children:[s.jsx("span",{className:"text-[24px] font-[800] leading-tight tracking-tight",children:b.totalSites}),s.jsx("span",{className:"text-[14px] font-bold opacity-90",children:""})]}),s.jsxs("div",{className:"p-4 rounded-2xl text-center flex flex-col gap-1.5 shadow-soft bg-[hsl(225_33%_95%)] text-[#1e3a8a] border border-[#1e3a8a]",children:[s.jsx("span",{className:"text-[24px] font-[800] leading-tight tracking-tight",children:b.totalPeople}),s.jsx("span",{className:"text-[14px] font-bold opacity-90",children:""})]}),s.jsxs("div",{className:"p-4 rounded-2xl text-center flex flex-col gap-1.5 shadow-soft bg-muted text-text-sub border border-text-sub",children:[s.jsx("span",{className:"text-[24px] font-[800] leading-tight tracking-tight",children:b.workedDays}),s.jsx("span",{className:"text-[14px] font-bold opacity-90",children:""})]})]}),m&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-[3000] flex items-center justify-center p-5",onClick:()=>g(null),children:s.jsxs("div",{className:"bg-card w-full max-w-[440px] rounded-[20px] p-6 shadow-lg max-h-[80vh] overflow-y-auto border border-border",onClick:S=>S.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("span",{className:"text-[20px] font-[800] text-foreground",children:"  "}),s.jsx("button",{onClick:()=>g(null),className:"bg-transparent border-none text-text-sub p-1 cursor-pointer",children:s.jsx(Je,{className:"w-6 h-6"})})]}),s.jsx("div",{className:"text-sm-app text-text-sub mb-3 font-medium",children:m.date}),s.jsx("div",{className:"mt-2",children:m.entries.map((S,E)=>s.jsxs("div",{className:"flex justify-between items-start py-2.5 border-b border-border gap-3",children:[s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("div",{className:"text-[15px] font-bold text-foreground truncate",children:S.site}),S.note&&s.jsx("div",{className:"text-[13px] text-muted-foreground mt-0.5",children:S.note})]}),s.jsx("div",{className:"text-right shrink-0",children:s.jsxs("div",{className:"text-[15px] font-[800] text-primary",children:[S.people,""]})})]},E))}),s.jsxs("div",{className:"mt-4 pt-3 border-t border-border flex justify-between items-center",children:[s.jsx("span",{className:"text-[15px] font-bold text-text-sub",children:""}),s.jsxs("span",{className:"text-[18px] font-[800] text-primary",children:[m.entries.reduce((S,E)=>S+E.people,0),""]})]})]})})]})}const U6=["","","","","","",""],Ky=[{rawDate:"2026-01",month:"2026 1",baseTotal:6e6,man:26,price:230769,year:2026,netPay:495e4,grossPay:6e6,deductions:105e4},{rawDate:"2026-02",month:"2026 2",baseTotal:58e5,man:24.5,price:236735,year:2026,netPay:4787e3,grossPay:58e5,deductions:1013e3},{rawDate:"2025-12",month:"2025 12",baseTotal:55e5,man:25,price:22e4,year:2025,netPay:4537500,grossPay:55e5,deductions:962500},{rawDate:"2025-11",month:"2025 11",baseTotal:47e5,man:22,price:213636,year:2025,netPay:3871e3,grossPay:47e5,deductions:829e3},{rawDate:"2025-10",month:"2025 10",baseTotal:23e5,man:10,price:23e4,year:2025,netPay:1894100,grossPay:23e5,deductions:405900}];function B6(){const{isAdmin:e,isPartner:t}=ls();return t?s.jsx(F6,{}):s.jsx(z6,{isAdmin:e})}function z6({isAdmin:e}){const[t,r]=p.useState("output"),n=new Date,[o,a]=p.useState(n.getFullYear()),[i,l]=p.useState(n.getMonth()+1),[c,d]=p.useState(""),[h,u]=p.useState(!1),[f,m]=p.useState(!1),[g,x]=p.useState(n.getFullYear()),[N,b]=p.useState(!0),[y,v]=p.useState(!1),[k,S]=p.useState(n.getFullYear()),[E,C]=p.useState(null),[R,F]=p.useState("latest"),[T,V]=p.useState(!1),[Y,W]=p.useState(n.getFullYear()),[X,ne]=p.useState(!1),[te,ie]=p.useState(null),[B,$]=p.useState(null),K=p.useRef(null),ce=p.useRef(null),ue=p.useRef(null),{data:Z=[]}=Kh(),fe=p.useMemo(()=>{const J={};return Z.filter(Se=>{const we=`${o}-${String(i).padStart(2,"0")}`;return Se.workDate.startsWith(we)}).forEach(Se=>{var Pe,De,he;J[Se.workDate]||(J[Se.workDate]=[]);const we=((Pe=Se.manpower)==null?void 0:Pe.reduce((vt,Ke)=>vt+(Ke.workHours||0),0))||0,ze=Math.round(we*225e3);J[Se.workDate].push({site:Se.siteName,man:we,price:ze,worker:((he=(De=Se.manpower)==null?void 0:De[0])==null?void 0:he.worker)||""})}),J},[Z,o,i]),ve=p.useMemo(()=>{const J=new Date(o,i-1,1).getDay(),pe=new Date(o,i,0).getDate(),Se=[];for(let we=1;we<=pe;we++){const ze=`${o}-${String(i).padStart(2,"0")}-${String(we).padStart(2,"0")}`;let Pe=fe[ze]||[];c&&(Pe=Pe.filter(he=>he.site===c));const De=n.getFullYear()===o&&n.getMonth()+1===i&&n.getDate()===we;Se.push({day:we,isToday:De,entries:Pe})}return{firstDay:J,cells:Se}},[o,i,c,fe]),Oe=p.useMemo(()=>{const J=new Set;let pe=0,Se=0;return ve.cells.forEach(we=>{we.entries.length>0&&(Se++,we.entries.forEach(ze=>{J.add(ze.site),pe+=ze.man}))}),{totalSites:J.size,totalMan:pe.toFixed(1),workedDays:Se}},[ve]),le=p.useMemo(()=>{let J=0,pe=0;ve.cells.forEach(ze=>{ze.entries.forEach(Pe=>{J+=Pe.man,pe+=Pe.price})});const Se=Math.floor(pe*.033),we=pe-Se;return{totalMan:J,totalPay:pe,deduction:Se,netPay:we}},[ve]),Ze=p.useMemo(()=>{const J=ve.cells.length,pe=Math.ceil((ve.firstDay+J)/7)*7;return Array.from({length:pe},(Se,we)=>{const ze=we-ve.firstDay+1;return ze<1||ze>J?null:ve.cells[ze-1]})},[ve]),Ae=p.useMemo(()=>{const J=new Set;return Object.values(fe).forEach(pe=>pe.forEach(Se=>J.add(Se.site))),Array.from(J).sort()},[fe]).filter(J=>J.toLowerCase().includes(c.toLowerCase())),rt=J=>{let pe=i+J,Se=o;pe>12&&(pe=1,Se++),pe<1&&(pe=12,Se--),l(pe),a(Se)},et=p.useMemo(()=>{let J=Ky.filter(pe=>pe.year===k);return E!==null&&(J=J.filter(pe=>parseInt(pe.rawDate.split("-")[1])===E)),R==="amount"&&(J=[...J].sort((pe,Se)=>Se.baseTotal-pe.baseTotal)),J},[k,E,R]),je=y?et:et.slice(0,3),_t=Ky[0],Ee=J=>J.toLocaleString(),It=J=>{ie(J),ne(!0)},ot=J=>new Promise((pe,Se)=>{const we=document.querySelector(`script[src="${J}"]`);if(we){if(we.dataset.loaded==="true"){pe();return}we.addEventListener("load",()=>pe(),{once:!0}),we.addEventListener("error",()=>Se(new Error(`Failed to load ${J}`)),{once:!0});return}const ze=document.createElement("script");ze.src=J,ze.async=!0,ze.onload=()=>{ze.dataset.loaded="true",pe()},ze.onerror=()=>Se(new Error(`Failed to load ${J}`)),document.head.appendChild(ze)}),bt=async()=>{window.html2canvas||await ot("https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js")},yt=async()=>{var J;if(ue.current)try{await bt();const Se=window.html2canvas;if(!Se){alert("     .");return}const we=await Se(ue.current,{scale:2,backgroundColor:"#ffffff",useCORS:!0}),ze=await new Promise(Zt=>we.toBlob(Zt,"image/png",1));if(!ze){alert("    .");return}const De=`_${`${o}-${String(i).padStart(2,"0")}`}.png`,he=new File([ze],De,{type:"image/png"});if(navigator.share&&((J=navigator.canShare)!=null&&J.call(navigator,{files:[he]}))){await navigator.share({title:"  ",files:[he]});return}const vt=URL.createObjectURL(ze),Ke=document.createElement("a");Ke.href=vt,Ke.download=De,document.body.appendChild(Ke),Ke.click(),Ke.remove(),URL.revokeObjectURL(vt)}catch{alert("    .")}},cr=async()=>{const J=window;J.html2canvas||await ot("https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"),J.jspdf||await ot("https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js")},dr=async()=>{var pe;const J=ce.current||K.current;if(!(!J||!te))try{await cr();const Se=window,we=Se.html2canvas,ze=(pe=Se.jspdf)==null?void 0:pe.jsPDF;if(!we||!ze){alert("PDF     .");return}const Pe=J.cloneNode(!0);Pe.style.position="fixed",Pe.style.left="0",Pe.style.top="-10000px",Pe.style.width=`${J.offsetWidth||794}px`,Pe.style.backgroundColor="#ffffff",Pe.style.fontFamily="Arial, sans-serif",Pe.style.pointerEvents="none",document.body.appendChild(Pe);try{Pe.querySelectorAll("td, th").forEach(pt=>{const nt=pt;nt.style.verticalAlign="middle",nt.style.lineHeight="1.5",nt.style.paddingTop="6px",nt.style.paddingBottom="16px",nt.style.paddingLeft="4px",nt.style.paddingRight="4px",nt.style.whiteSpace="nowrap",nt.style.height="auto",nt.style.boxSizing="border-box"});const De=await we(Pe,{scale:2,backgroundColor:"#ffffff",useCORS:!0}),he=De.toDataURL("image/png"),vt=new ze({orientation:"p",unit:"mm",format:"a4"}),Ke=vt.internal.pageSize.getWidth(),Zt=vt.internal.pageSize.getHeight(),Ct=10,Ht=Ke-Ct*2,de=Zt-Ct*2;let Ie=Ht,Ge=De.height*Ie/De.width;Ge>de&&(Ge=de,Ie=De.width*Ge/De.height);const Me=(Ke-Ie)/2,Qe=Ct;vt.addImage(he,"PNG",Me,Qe,Ie,Ge),vt.save(`_${te.rawDate}.pdf`)}finally{Pe.remove()}}catch{alert("PDF    .")}},jt=(te==null?void 0:te.grossPay)??(te==null?void 0:te.baseTotal)??0,ft=(te==null?void 0:te.deductions)??((te==null?void 0:te.netPay)!=null?Math.max(0,jt-te.netPay):Math.floor(jt*.033)),Ot=(te==null?void 0:te.netPay)??Math.max(0,jt-ft);return s.jsxs("div",{className:"animate-fade-in",children:[s.jsxs("div",{className:"flex border-b border-border -mx-4 px-4 bg-card pt-0",style:{position:"sticky",top:114,zIndex:30},children:[s.jsx("button",{onClick:()=>r("output"),className:U("flex-1 min-w-0 h-12 bg-transparent border-none text-[16px] font-semibold cursor-pointer border-b-[3px] transition-all whitespace-nowrap px-1",t==="output"?"text-primary border-b-primary font-bold":"text-text-sub border-b-transparent"),children:""}),s.jsx("button",{onClick:()=>r("salary"),className:U("flex-1 min-w-0 h-12 bg-transparent border-none text-[16px] font-semibold cursor-pointer border-b-[3px] transition-all whitespace-nowrap px-1",t==="salary"?"text-primary border-b-primary font-bold":"text-text-sub border-b-transparent"),children:""}),e&&s.jsx("button",{onClick:()=>r("admin"),className:U("flex-1 min-w-0 h-12 bg-transparent border-none text-[16px] font-semibold cursor-pointer border-b-[3px] transition-all whitespace-nowrap px-1",t==="admin"?"text-primary border-b-primary font-bold":"text-text-sub border-b-transparent"),children:""})]}),t==="output"&&s.jsxs("div",{className:"animate-fade-in mt-3",children:[s.jsxs("div",{className:"flex items-center gap-3 max-[640px]:gap-2 mb-3",children:[s.jsxs("div",{className:"relative flex-1 min-w-0 md:min-w-[200px]",children:[s.jsx("input",{type:"text",value:c,onChange:J=>{d(J.target.value),u(!0)},onFocus:()=>u(!0),placeholder:"   ",className:"w-full h-[50px] bg-card border border-border rounded-xl px-4 pr-12 text-[17px] font-medium text-foreground placeholder:text-muted-foreground outline-none transition-all hover:border-primary/50 focus:border-primary focus:shadow-[0_0_0_3px_rgba(49,163,250,0.15)]"}),c&&s.jsx("button",{onClick:()=>{d(""),u(!1)},className:"absolute right-10 top-1/2 -translate-y-1/2 w-5 h-5 rounded-full bg-muted flex items-center justify-center text-[12px] text-muted-foreground z-10",children:""}),s.jsx("button",{onClick:()=>u(!h),className:"absolute right-4 top-1/2 -translate-y-1/2 text-muted-foreground",children:s.jsx(Lt,{className:"w-5 h-5"})}),h&&s.jsx("ul",{className:"absolute z-50 w-full mt-1.5 max-h-60 overflow-auto bg-card border border-border rounded-xl shadow-lg animate-fade-in",children:Ae.length===0?s.jsx("li",{className:"p-4 text-muted-foreground text-center text-sm-app",children:"  "}):Ae.map(J=>s.jsx("li",{onClick:()=>{d(J),u(!1)},className:"px-4 py-3.5 cursor-pointer border-b border-border last:border-0 text-[16px] font-medium text-foreground hover:bg-muted transition-colors",children:J},J))})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>{x(o),m(!f)},className:U("flex items-center justify-between min-w-[145px] max-[640px]:min-w-[118px] h-[50px] px-4 max-[640px]:px-3 bg-card border border-border rounded-xl text-[17px] max-[640px]:text-[16px] font-bold text-foreground cursor-pointer transition-all hover:border-primary/50",f&&"border-primary shadow-[0_0_0_3px_rgba(49,163,250,0.15)]"),children:[s.jsxs("span",{children:[String(o).slice(-2)," ",i,""]}),s.jsx(th,{className:"w-[18px] h-[18px] text-muted-foreground ml-2"})]}),f&&s.jsxs("div",{className:"absolute top-[calc(100%+8px)] right-0 w-[280px] bg-card border border-border rounded-2xl shadow-lg p-4 z-[1000] animate-fade-in",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4 px-1",children:[s.jsx("button",{onClick:()=>x(J=>J-1),className:"p-1 hover:bg-muted rounded",children:s.jsx(ma,{className:"w-[18px] h-[18px]"})}),s.jsxs("span",{className:"font-bold text-lg-app",children:[g,""]}),s.jsx("button",{onClick:()=>x(J=>J+1),className:"p-1 hover:bg-muted rounded",children:s.jsx(xa,{className:"w-[18px] h-[18px]"})})]}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:Array.from({length:12},(J,pe)=>pe+1).map(J=>s.jsxs("button",{onClick:()=>{a(g),l(J),m(!1)},className:U("h-11 rounded-lg text-[15px] font-semibold cursor-pointer transition-all border-none",g===o&&J===i?"bg-primary/10 text-primary font-[800]":"text-text-sub hover:bg-muted hover:text-primary"),children:[J,""]},J))})]})]})]}),s.jsxs("div",{className:"rounded-2xl overflow-hidden mb-4 bg-card shadow-soft",children:[s.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-border",children:[s.jsx("button",{onClick:()=>rt(-1),className:"bg-transparent border-none cursor-pointer text-text-sub p-2 hover:bg-muted rounded-full",children:s.jsx(ma,{className:"w-7 h-7"})}),s.jsxs("span",{className:"text-[22px] font-[800] text-foreground",children:[o," ",i,""]}),s.jsx("button",{onClick:()=>rt(1),className:"bg-transparent border-none cursor-pointer text-text-sub p-2 hover:bg-muted rounded-full",children:s.jsx(xa,{className:"w-7 h-7"})})]}),s.jsxs("div",{className:"grid grid-cols-7",children:[U6.map((J,pe)=>s.jsx("div",{className:U("h-9 flex items-center justify-center text-[14px] font-bold border-b border-border bg-muted/50",pe===0?"text-destructive":pe===6?"text-primary":"text-text-sub"),children:J},J)),Array.from({length:ve.firstDay}).map((J,pe)=>s.jsx("div",{className:"min-h-[96px] border-b border-r border-border bg-card"},`empty-${pe}`)),ve.cells.map(J=>{const pe=(ve.firstDay+J.day-1)%7,Se=J.entries.reduce((ze,Pe)=>ze+Pe.man,0),we=J.entries.reduce((ze,Pe)=>ze+Pe.price,0);return s.jsxs("div",{onClick:()=>J.entries.length>0&&$({date:`${o}-${String(i).padStart(2,"0")}-${String(J.day).padStart(2,"0")}`,entries:J.entries}),className:U("min-h-[96px] p-1.5 flex flex-col items-center gap-0.5 cursor-pointer border-b border-border bg-card hover:bg-muted transition-colors",pe<6&&"border-r"),children:[s.jsx("span",{className:U("text-[15px] font-bold w-[26px] h-[26px] rounded-full flex items-center justify-center mb-1",J.isToday?"bg-header-navy text-white font-[800]":pe===0?"text-destructive":pe===6?"text-primary":"text-foreground"),children:J.day}),J.entries.length>0&&s.jsxs("div",{className:"w-full flex flex-col items-center",children:[s.jsxs("span",{className:"text-[11px] font-bold text-text-sub",children:[Se.toFixed(1),""]}),s.jsxs("span",{className:"text-[12px] font-[800] text-primary",children:["",(we/1e4).toFixed(0),""]}),J.entries.length===1&&s.jsx("span",{className:"text-[10px] font-bold text-text-sub truncate max-w-full text-center",children:J.entries[0].site.slice(0,6)})]})]},J.day)})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-2.5 mb-0",children:[s.jsxs("div",{className:"p-3 rounded-2xl text-center flex flex-col gap-1 shadow-soft bg-[hsl(201_100%_94%)] text-[#0284c7] border border-[#0284c7]",children:[s.jsx("span",{className:"text-[22px] font-[800] leading-tight tracking-tight",children:Oe.totalSites}),s.jsx("span",{className:"text-[13px] font-bold opacity-90",children:""})]}),s.jsxs("div",{className:"p-3 rounded-2xl text-center flex flex-col gap-1 shadow-soft bg-[hsl(225_33%_95%)] text-[#1e3a8a] border border-[#1e3a8a]",children:[s.jsx("span",{className:"text-[22px] font-[800] leading-tight tracking-tight",children:Oe.totalMan}),s.jsx("span",{className:"text-[13px] font-bold opacity-90",children:""})]}),s.jsxs("div",{className:"p-3 rounded-2xl text-center flex flex-col gap-1 shadow-soft bg-muted text-text-sub border border-text-sub",children:[s.jsx("span",{className:"text-[22px] font-[800] leading-tight tracking-tight",children:Oe.workedDays}),s.jsx("span",{className:"text-[13px] font-bold opacity-90",children:""})]})]})]}),t==="salary"&&s.jsxs("div",{className:"animate-fade-in mt-3",children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(rT,{className:"w-[20px] h-[20px] text-header-navy"}),s.jsx("span",{className:"text-[20px] font-bold text-header-navy",children:"   "})]}),s.jsxs("button",{onClick:()=>b(!N),className:"bg-transparent border-none flex items-center gap-1 cursor-pointer text-text-sub text-[15px] font-semibold p-0",children:[s.jsx("span",{children:" /"}),N?s.jsx(rh,{className:"w-4 h-4"}):s.jsx(on,{className:"w-4 h-4"})]})]}),s.jsxs("div",{className:"bg-card shadow-sm rounded-2xl p-6 mb-4 border border-border",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsxs("span",{className:"text-lg-app font-[800] text-foreground",style:{fontSize:18},children:[o," ",i,""]}),s.jsx("span",{className:"text-[13px] font-semibold px-2.5 py-1 rounded-full border bg-[#f0f9ff] text-[#0284c7] border-[#7dd3fc]",children:""})]}),s.jsxs("div",{className:"flex justify-between items-center mb-2 pb-3.5 border-b border-dashed border-border gap-2",children:[s.jsx("span",{className:"font-bold text-foreground shrink-0",children:" "}),s.jsxs("div",{className:"flex items-baseline justify-end gap-0.5 whitespace-nowrap",children:[s.jsx("span",{className:"text-[24px] text-primary font-[800] tracking-tighter",children:N?"****":Ee(_t.netPay)}),s.jsx("span",{className:"text-base-app font-semibold text-primary",children:""})]})]}),s.jsxs("div",{className:"flex justify-between items-center mb-2 text-[15px]",children:[s.jsx("span",{className:"font-bold text-foreground shrink-0",children:""}),s.jsx("span",{className:"font-semibold text-foreground text-[16px]",children:_t.man.toFixed(1)})]}),s.jsxs("div",{className:"flex justify-between items-center mb-2 text-[15px]",children:[s.jsx("span",{className:"font-bold text-foreground shrink-0",children:"(3.3%)"}),s.jsx("span",{className:"font-semibold text-foreground text-[16px]",children:N?"****":`${Ee(_t.price)}`})]}),s.jsxs("button",{onClick:yt,className:"w-full mt-4 h-[50px] rounded-[10px] bg-header-navy text-white font-bold text-base-app cursor-pointer flex items-center justify-center gap-2 border-none transition-all active:scale-[0.98]",children:[s.jsx(mT,{className:"w-[18px] h-[18px]"}),"  ()"]})]}),s.jsx("div",{className:"flex justify-between items-center mb-3 mt-[12px]",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(yr,{className:"w-[20px] h-[20px] text-header-navy"}),s.jsx("span",{className:"text-[20px] font-bold text-header-navy",children:"  "})]})}),s.jsxs("div",{className:"flex gap-3 mb-3",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsxs("button",{onClick:()=>{W(k),V(!T)},className:U("flex items-center justify-between w-full h-[50px] px-4 bg-card border border-border rounded-xl text-[17px] font-bold text-foreground cursor-pointer transition-all hover:border-primary/50",T&&"border-primary shadow-[0_0_0_3px_rgba(49,163,250,0.15)]"),children:[s.jsxs("span",{children:[k," ",E!==null?`${E}`:""]}),s.jsx(th,{className:"w-[18px] h-[18px] text-muted-foreground"})]}),T&&s.jsxs("div",{className:"absolute top-[calc(100%+8px)] left-0 w-[280px] bg-card border border-border rounded-2xl shadow-lg p-4 z-[1000] animate-fade-in",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4 px-1",children:[s.jsx("button",{onClick:()=>W(J=>J-1),className:"p-1 hover:bg-muted rounded",children:s.jsx(ma,{className:"w-[18px] h-[18px]"})}),s.jsxs("span",{className:"font-bold text-lg-app",children:[Y,""]}),s.jsx("button",{onClick:()=>W(J=>J+1),className:"p-1 hover:bg-muted rounded",children:s.jsx(xa,{className:"w-[18px] h-[18px]"})})]}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:Array.from({length:12},(J,pe)=>pe+1).map(J=>s.jsxs("button",{onClick:()=>{S(Y),C(J),V(!1)},className:U("h-11 rounded-lg text-[15px] font-semibold cursor-pointer transition-all border-none",k===Y&&E===J?"bg-primary/10 text-primary font-[800]":"text-text-sub hover:bg-muted hover:text-primary"),children:[J,""]},J))}),s.jsx("div",{className:"mt-3 pt-3 border-t border-border",children:s.jsx("button",{onClick:()=>{S(Y),C(null),V(!1)},className:"w-full h-11 rounded-lg text-[15px] font-semibold cursor-pointer transition-all text-text-sub hover:bg-muted hover:text-primary border-none bg-transparent",children:"  "})})]})]}),s.jsxs("div",{className:"relative flex-1",children:[s.jsxs("select",{value:R,onChange:J=>F(J.target.value),className:"w-full h-[50px] bg-card border border-border rounded-xl px-3.5 pr-10 text-[17px] font-semibold text-foreground shadow-soft appearance-none outline-none cursor-pointer transition-all hover:border-primary/50 focus:border-primary focus:shadow-[0_0_0_3px_rgba(49,163,250,0.15)]",children:[s.jsx("option",{value:"latest",children:""}),s.jsx("option",{value:"amount",children:""})]}),s.jsx(Lt,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-text-sub pointer-events-none"})]})]}),s.jsx("div",{className:"flex flex-col gap-3",children:je.map(J=>s.jsxs("div",{onClick:()=>It(J),className:"bg-card shadow-soft rounded-2xl p-5 cursor-pointer transition-all hover:shadow-md active:scale-[0.99] border border-border",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-lg-app font-[800] text-foreground",style:{fontSize:18},children:J.month}),s.jsx("span",{className:"text-[13px] font-semibold px-2.5 py-1 rounded-full bg-emerald-50 text-emerald-600 border border-emerald-300",children:""})]}),s.jsxs("div",{className:"flex justify-between items-center pb-3 border-b border-dashed border-border mb-2",children:[s.jsx("span",{className:"font-bold text-foreground",children:""}),s.jsx("span",{className:"text-[20px] font-[800] text-primary tracking-tight",children:N?"****":`${Ee(J.netPay)}`})]}),s.jsxs("div",{className:"flex justify-between text-[15px] text-text-sub",children:[s.jsxs("span",{children:[" ",s.jsx("strong",{className:"text-foreground",children:J.man.toFixed(1)})]}),s.jsxs("span",{children:[" ",s.jsx("strong",{className:"text-foreground",children:N?"****":`${Ee(J.baseTotal)}`})]})]})]},J.rawDate))}),et.length>3&&s.jsxs("button",{onClick:()=>v(!y),className:"w-full h-[50px] bg-card border border-border rounded-full text-text-sub font-semibold text-[15px] cursor-pointer mt-2.5 mb-5 flex items-center justify-center gap-1.5 transition-all hover:bg-muted",children:[s.jsx("span",{children:y?"":" "}),s.jsx(Lt,{className:U("w-4 h-4 transition-transform",y&&"rotate-180")})]})]}),t==="admin"&&e&&s.jsx(M6,{}),B&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-[3000] flex items-center justify-center p-5",onClick:()=>$(null),children:s.jsxs("div",{className:"bg-card w-full max-w-[440px] rounded-[20px] p-6 shadow-lg max-h-[80vh] overflow-y-auto border border-border",onClick:J=>J.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("span",{className:"text-[20px] font-[800] text-foreground",children:"  "}),s.jsx("button",{onClick:()=>$(null),className:"bg-transparent border-none text-text-sub p-1 cursor-pointer",children:s.jsx(Je,{className:"w-6 h-6"})})]}),s.jsx("div",{className:"text-sm-app text-text-sub mb-3 font-medium",children:B.date}),s.jsx("div",{className:"mt-2",children:B.entries.map((J,pe)=>s.jsxs("div",{className:"flex justify-between items-start py-2.5 border-b border-border gap-3",children:[s.jsx("div",{children:s.jsx("div",{className:"text-[15px] font-bold text-text-sub",children:J.site})}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-[15px] font-semibold text-foreground",children:[J.man,""]}),s.jsxs("div",{className:"text-[15px] font-semibold text-primary",children:["",Ee(J.price)]})]})]},pe))})]})}),X&&te&&s.jsxs("div",{className:U("fixed inset-0 bg-background z-[2000] flex flex-col transition-transform duration-300",X?"translate-y-0":"translate-y-full"),children:[s.jsxs("div",{className:"h-[60px] px-4 flex items-center justify-between bg-card border-b border-border shrink-0",children:[s.jsx("button",{onClick:()=>ne(!1),className:"bg-transparent border-none text-foreground cursor-pointer",children:s.jsx(Je,{className:"w-6 h-6"})}),s.jsx("span",{className:"text-lg-app font-bold text-foreground",children:" "}),s.jsx("div",{className:"w-6"})]}),s.jsxs("div",{className:"flex-1 p-5 max-[640px]:p-3 pb-10 overflow-y-auto",children:[s.jsxs("div",{ref:K,className:"w-full max-w-[500px] bg-white rounded-2xl shadow-lg p-10 max-[640px]:p-6 text-[#111] mx-auto",children:[s.jsxs("div",{className:"flex justify-between items-end border-b-2 border-header-navy pb-5 mb-8",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-[32px] font-[800] text-header-navy tracking-tight leading-tight m-0",children:""}),s.jsx("span",{className:"text-[22px] font-bold text-header-navy",children:te.month})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-[16px] font-bold text-[#111]",children:""}),s.jsxs("div",{className:"text-[14px] text-[#64748b] font-medium",children:[te.rawDate,"-25 "]})]})]}),s.jsx("table",{className:"w-full border-collapse mb-5 border border-[#d1d5db]",children:s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("th",{className:"bg-[#f8fafc] text-header-navy font-bold text-[14px] p-2 border border-[#d1d5db] w-1/4 text-center",children:""}),s.jsx("td",{className:"font-medium text-[14px] p-2 border border-[#d1d5db] text-center",children:""}),s.jsx("th",{className:"bg-[#f8fafc] text-header-navy font-bold text-[14px] p-2 border border-[#d1d5db] w-1/4 text-center",children:""}),s.jsx("td",{className:"font-medium text-[14px] p-2 border border-[#d1d5db] text-center",children:""})]}),s.jsxs("tr",{children:[s.jsx("th",{className:"bg-[#f8fafc] text-header-navy font-bold text-[14px] p-2 border border-[#d1d5db] w-1/4 text-center",children:""}),s.jsx("td",{className:"font-medium text-[14px] p-2 border border-[#d1d5db] text-center",children:te.man.toFixed(1)}),s.jsx("th",{className:"bg-[#f8fafc] text-header-navy font-bold text-[14px] p-2 border border-[#d1d5db] w-1/4 text-center",children:""}),s.jsxs("td",{className:"font-medium text-[14px] p-2 border border-[#d1d5db] text-center",children:["",Ee(te.price)]})]})]})}),s.jsx("table",{className:"w-full border-collapse mb-0 border-t border-header-navy",children:s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("th",{colSpan:2,className:"bg-header-navy text-white text-[14px] font-bold text-center p-2 border border-[#556080] border-b-0",children:""}),s.jsx("th",{colSpan:2,className:"bg-header-navy text-white text-[14px] font-bold text-center p-2 border border-[#556080] border-b-0",children:""})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"bg-[#e0f2fe] text-header-navy font-bold text-[14px] text-center p-2 border border-[#d1d5db]",children:""}),s.jsx("td",{className:"bg-[#e0f2fe] text-header-navy font-bold text-[14px] text-center p-2 border border-[#d1d5db]",children:""}),s.jsx("td",{className:"bg-[#e0f2fe] text-header-navy font-bold text-[14px] text-center p-2 border border-[#d1d5db]",children:""}),s.jsx("td",{className:"bg-[#e0f2fe] text-header-navy font-bold text-[14px] text-center p-2 border border-[#d1d5db]",children:""})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"p-2 border border-[#d1d5db] text-[14px]",children:""}),s.jsxs("td",{className:"p-2 border border-[#d1d5db] text-[14px] text-right font-medium",children:["",Ee(jt)]}),s.jsx("td",{className:"p-2 border border-[#d1d5db] text-[14px]",children:""}),s.jsxs("td",{className:"p-2 border border-[#d1d5db] text-[14px] text-right font-medium",children:["",Ee(ft)]})]}),s.jsxs("tr",{className:"bg-[#f8fafc] font-[800]",children:[s.jsx("td",{className:"p-2 border border-[#d1d5db] text-[14px]",children:""}),s.jsxs("td",{className:"p-2 border border-[#d1d5db] text-[14px] text-right",children:["",Ee(jt)]}),s.jsx("td",{className:"p-2 border border-[#d1d5db] text-[14px]",children:""}),s.jsxs("td",{className:"p-2 border border-[#d1d5db] text-[14px] text-right",children:["",Ee(ft)]})]})]})}),s.jsxs("div",{className:"mt-5 bg-[#eff6ff] rounded-2xl p-6 flex justify-between items-center",children:[s.jsx("span",{className:"text-[16px] font-bold text-header-navy",children:""}),s.jsxs("span",{className:"text-[28px] font-[800] text-[#2563eb]",children:["",Ee(Ot)]})]}),s.jsx("div",{className:"mt-5 sm:hidden",children:s.jsxs("div",{className:"border border-[#d1d5db] rounded-2xl overflow-hidden",children:[s.jsx("div",{className:"bg-header-navy text-white text-[14px] font-bold text-center py-2",children:"  "}),s.jsxs("div",{className:"divide-y divide-[#e5e7eb]",children:[s.jsxs("div",{className:"flex justify-between items-center px-4 py-3 text-[13px]",children:[s.jsx("span",{className:"font-bold text-[#334155]",children:""}),s.jsx("span",{className:"font-semibold text-[#111]",children:te.man.toFixed(1)})]}),s.jsxs("div",{className:"flex justify-between items-center px-4 py-3 text-[13px]",children:[s.jsx("span",{className:"font-bold text-[#334155]",children:""}),s.jsxs("span",{className:"font-semibold text-[#111]",children:["",Ee(te.price)]})]}),s.jsxs("div",{className:"flex justify-between items-center px-4 py-3 text-[13px]",children:[s.jsx("span",{className:"font-bold text-[#334155]",children:""}),s.jsxs("span",{className:"font-semibold text-[#111]",children:["",Ee(jt)]})]}),s.jsxs("div",{className:"flex justify-between items-center px-4 py-3 text-[13px]",children:[s.jsx("span",{className:"font-bold text-[#334155]",children:""}),s.jsxs("span",{className:"font-semibold text-[#ef4444]",children:["-",Ee(ft)]})]}),s.jsxs("div",{className:"flex justify-between items-center px-4 py-3 text-[13px] bg-[#eff6ff]",children:[s.jsx("span",{className:"font-bold text-header-navy",children:""}),s.jsxs("span",{className:"font-[800] text-[#2563eb]",children:["",Ee(Ot)]})]})]})]})}),s.jsx("table",{className:"hidden sm:table w-full border-collapse mt-5",children:s.jsxs("tbody",{children:[s.jsx("tr",{className:"bg-header-navy text-white font-bold text-[14px]",children:s.jsx("td",{colSpan:5,className:"p-2 text-center",children:"  "})}),s.jsxs("tr",{children:[s.jsx("th",{className:"bg-header-navy text-white text-[13px] p-2 border border-[#556080] text-center",children:""}),s.jsx("th",{className:"bg-header-navy text-white text-[13px] p-2 border border-[#556080] text-center",children:""}),s.jsx("th",{className:"bg-header-navy text-white text-[13px] p-2 border border-[#556080] text-center",children:""}),s.jsx("th",{className:"bg-header-navy text-white text-[13px] p-2 border border-[#556080] text-center",children:""}),s.jsx("th",{className:"bg-header-navy text-white text-[13px] p-2 border border-[#556080] text-center",children:""})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"p-2 border border-[#d1d5db] text-[13px] text-center",children:te.man.toFixed(1)}),s.jsxs("td",{className:"p-2 border border-[#d1d5db] text-[13px] text-center",children:["",Ee(te.price)]}),s.jsxs("td",{className:"p-2 border border-[#d1d5db] text-[13px] text-center",children:["",Ee(jt)]}),s.jsxs("td",{className:"p-2 border border-[#d1d5db] text-[13px] text-center",children:["",Ee(ft)]}),s.jsxs("td",{className:"p-2 border border-[#d1d5db] text-[13px] text-center",children:["",Ee(Ot)]})]})]})}),s.jsx("p",{className:"mt-6 text-center text-[14px] text-[#64748b] font-medium",children:"  ,      ."})]}),s.jsxs("button",{onClick:dr,className:"mt-4 w-full max-w-[500px] mx-auto bg-header-navy text-white text-base-app font-bold rounded-xl h-14 border-none flex items-center justify-center gap-2 cursor-pointer transition-transform active:scale-95 shadow-lg",children:[s.jsx(Cc,{className:"w-5 h-5"}),"PDF "]}),s.jsx("div",{ref:ce,className:"fixed left-[-10000px] top-0 w-[794px] bg-white text-[#111]",style:{fontFamily:"Pretendard Variable, Pretendard, -apple-system, BlinkMacSystemFont, system-ui, sans-serif"},children:s.jsxs("div",{className:"p-[56px]",children:[s.jsxs("div",{className:"flex justify-between items-end border-b-2 border-header-navy pb-6 mb-8",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-[36px] font-[800] text-header-navy tracking-tight leading-tight m-0",children:""}),s.jsx("span",{className:"text-[24px] font-bold text-header-navy",children:te.month})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-[16px] font-bold text-[#111]",children:""}),s.jsxs("div",{className:"text-[14px] text-[#64748b] font-medium",children:[te.rawDate,"-25 "]})]})]}),s.jsx("table",{className:"w-full border-collapse mb-6 border border-[#d1d5db]",children:s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("th",{className:"bg-[#f8fafc] text-header-navy font-bold text-[14px] p-2 border border-[#d1d5db] w-1/4 text-center",children:""}),s.jsx("td",{className:"font-medium text-[14px] p-2 border border-[#d1d5db] text-center",children:""}),s.jsx("th",{className:"bg-[#f8fafc] text-header-navy font-bold text-[14px] p-2 border border-[#d1d5db] w-1/4 text-center",children:""}),s.jsx("td",{className:"font-medium text-[14px] p-2 border border-[#d1d5db] text-center",children:""})]}),s.jsxs("tr",{children:[s.jsx("th",{className:"bg-[#f8fafc] text-header-navy font-bold text-[14px] p-2 border border-[#d1d5db] w-1/4 text-center",children:""}),s.jsx("td",{className:"font-medium text-[14px] p-2 border border-[#d1d5db] text-center",children:te.man.toFixed(1)}),s.jsx("th",{className:"bg-[#f8fafc] text-header-navy font-bold text-[14px] p-2 border border-[#d1d5db] w-1/4 text-center",children:""}),s.jsxs("td",{className:"font-medium text-[14px] p-2 border border-[#d1d5db] text-center",children:["",Ee(te.price)]})]})]})}),s.jsx("table",{className:"w-full border-collapse mb-0 border-t border-header-navy",children:s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("th",{colSpan:2,className:"bg-header-navy text-white text-[14px] font-bold text-center p-2 border border-[#556080] border-b-0",children:""}),s.jsx("th",{colSpan:2,className:"bg-header-navy text-white text-[14px] font-bold text-center p-2 border border-[#556080] border-b-0",children:""})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"bg-[#e0f2fe] text-header-navy font-bold text-[14px] text-center p-2 border border-[#d1d5db]",children:""}),s.jsx("td",{className:"bg-[#e0f2fe] text-header-navy font-bold text-[14px] text-center p-2 border border-[#d1d5db]",children:""}),s.jsx("td",{className:"bg-[#e0f2fe] text-header-navy font-bold text-[14px] text-center p-2 border border-[#d1d5db]",children:""}),s.jsx("td",{className:"bg-[#e0f2fe] text-header-navy font-bold text-[14px] text-center p-2 border border-[#d1d5db]",children:""})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"p-2 border border-[#d1d5db] text-[14px]",children:""}),s.jsxs("td",{className:"p-2 border border-[#d1d5db] text-[14px] text-right font-medium",children:["",Ee(jt)]}),s.jsx("td",{className:"p-2 border border-[#d1d5db] text-[14px]",children:""}),s.jsxs("td",{className:"p-2 border border-[#d1d5db] text-[14px] text-right font-medium",children:["",Ee(ft)]})]}),s.jsxs("tr",{className:"bg-[#f8fafc] font-[800]",children:[s.jsx("td",{className:"p-2 border border-[#d1d5db] text-[14px]",children:""}),s.jsxs("td",{className:"p-2 border border-[#d1d5db] text-[14px] text-right",children:["",Ee(jt)]}),s.jsx("td",{className:"p-2 border border-[#d1d5db] text-[14px]",children:""}),s.jsxs("td",{className:"p-2 border border-[#d1d5db] text-[14px] text-right",children:["",Ee(ft)]})]})]})}),s.jsxs("div",{className:"mt-6 bg-[#eff6ff] rounded-2xl p-6 flex justify-between items-center",children:[s.jsx("span",{className:"text-[16px] font-bold text-header-navy",children:""}),s.jsxs("span",{className:"text-[28px] font-[800] text-[#2563eb]",children:["",Ee(Ot)]})]}),s.jsx("table",{className:"w-full border-collapse mt-6",children:s.jsxs("tbody",{children:[s.jsx("tr",{className:"bg-header-navy text-white font-bold text-[14px]",children:s.jsx("td",{colSpan:5,className:"p-2 text-center",children:"  "})}),s.jsxs("tr",{children:[s.jsx("th",{className:"bg-header-navy text-white text-[13px] p-2 border border-[#556080] text-center",children:""}),s.jsx("th",{className:"bg-header-navy text-white text-[13px] p-2 border border-[#556080] text-center",children:""}),s.jsx("th",{className:"bg-header-navy text-white text-[13px] p-2 border border-[#556080] text-center",children:""}),s.jsx("th",{className:"bg-header-navy text-white text-[13px] p-2 border border-[#556080] text-center",children:""}),s.jsx("th",{className:"bg-header-navy text-white text-[13px] p-2 border border-[#556080] text-center",children:""})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"p-2 border border-[#d1d5db] text-[13px] text-center",children:te.man.toFixed(1)}),s.jsxs("td",{className:"p-2 border border-[#d1d5db] text-[13px] text-center",children:["",Ee(te.price)]}),s.jsxs("td",{className:"p-2 border border-[#d1d5db] text-[13px] text-center",children:["",Ee(jt)]}),s.jsxs("td",{className:"p-2 border border-[#d1d5db] text-[13px] text-center",children:["",Ee(ft)]}),s.jsxs("td",{className:"p-2 border border-[#d1d5db] text-[13px] text-center",children:["",Ee(Ot)]})]})]})}),s.jsx("p",{className:"mt-8 text-center text-[14px] text-[#64748b] font-medium",children:"  ,      ."})]})})]})]}),s.jsx("div",{ref:ue,className:"fixed left-[-10000px] top-0 w-[794px] min-h-[1123px] bg-white text-[#0f172a]",style:{fontFamily:"Pretendard Variable, Pretendard, -apple-system, BlinkMacSystemFont, system-ui, sans-serif"},children:s.jsxs("div",{className:"p-[56px]",children:[s.jsx("div",{className:"text-[36px] font-[800] text-[#1e2a57]",children:"  "}),s.jsxs("div",{className:"mt-2 text-[24px] font-[700] text-[#64748b]",children:[o," ",i,""]}),s.jsx("div",{className:"mt-4 h-[2px] bg-[#1e2a57]"}),s.jsxs("div",{className:"mt-8 flex justify-between items-start",children:[s.jsx("div",{}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-[18px] font-[700] text-[#64748b]",children:" "}),s.jsxs("div",{className:"mt-2 text-[42px] font-[800] text-[#3b82f6]",children:[Ee(le.netPay),""]})]})]}),s.jsxs("div",{className:"mt-6 rounded-[22px] bg-[#f8fafc] p-6 border border-[#e2e8f0]",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-[16px] font-[700] text-[#64748b]",children:" "}),s.jsxs("div",{className:"mt-2 text-[28px] font-[800] text-[#0f172a]",children:[le.totalMan.toFixed(1)," "]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[16px] font-[700] text-[#64748b]",children:" "}),s.jsxs("div",{className:"mt-2 text-[28px] font-[800] text-[#0f172a]",children:[Ee(le.totalPay),""]})]})]}),s.jsx("div",{className:"mt-4 border-t border-dashed border-[#cbd5e1]"}),s.jsxs("div",{className:"mt-4 flex justify-between items-center text-[18px] font-[700] text-[#64748b]",children:[s.jsx("span",{children:" (3.3%)"}),s.jsxs("span",{className:"text-[#ef4444]",children:["-",Ee(le.deduction),""]})]})]}),s.jsxs("div",{className:"mt-8 rounded-[24px] border border-[#e2e8f0] overflow-hidden",children:[s.jsx("div",{className:"grid grid-cols-7 bg-[#f8fafc] text-center text-[16px] font-[700] text-[#334155]",children:["","","","","","",""].map((J,pe)=>s.jsx("div",{className:U("py-3 border-b border-r border-[#e2e8f0]",pe===0?"text-[#ef4444]":pe===6?"text-[#2563eb]":"text-[#334155]",pe===6&&"border-r-0"),children:J},J))}),s.jsx("div",{className:"grid grid-cols-7",children:Ze.map((J,pe)=>{if(!J)return s.jsx("div",{className:U("h-[90px] border-b border-r border-[#e2e8f0]",(pe+1)%7===0&&"border-r-0")},`empty-${pe}`);const Se=J.entries.reduce((Pe,De)=>Pe+De.man,0),we=J.entries.reduce((Pe,De)=>Pe+De.price,0);let ze="";if(J.entries.length>0){const De=J.entries[0].site.replace(/\s+/g,"").slice(0,4);ze=J.entries.length>1?`${De}${J.entries.length-1}`:De}return s.jsxs("div",{className:U("h-[90px] border-b border-r border-[#e2e8f0] p-2 text-[#0f172a]",(pe+1)%7===0&&"border-r-0"),children:[s.jsx("div",{className:"text-[16px] font-[700]",children:J.day}),J.entries.length>0&&s.jsxs("div",{className:"mt-1 text-[12px] text-[#64748b] leading-tight",children:[s.jsxs("div",{className:"font-[700] text-[#0f172a]",children:[Se.toFixed(1),""]}),s.jsxs("div",{className:"font-[800] text-[#2563eb]",children:[(we/1e4).toFixed(0),""]}),s.jsx("div",{className:"truncate",children:ze})]})]},`day-${J.day}`)})})]}),s.jsx("div",{className:"mt-10 text-center text-[#94a3b8] text-[14px] font-[600]",children:"Generated by INOPNC App"})]})})]})}const gp=e=>{const t=((e==null?void 0:e.ext)||"").toLowerCase();return((e==null?void 0:e.mime)||"").startsWith("image/")||["jpg","jpeg","png","gif","webp","bmp"].includes(t)},Gy=e=>{const t=((e==null?void 0:e.ext)||"").toLowerCase();return((e==null?void 0:e.mime)||"").includes("pdf")||t==="pdf"};function V6({open:e,file:t,title:r,onClose:n}){return e?s.jsx("div",{className:"fixed inset-0 z-[10020] bg-black/70 backdrop-blur-sm",children:s.jsxs("div",{className:"mx-auto mt-8 flex h-[calc(100vh-4rem)] w-[min(96vw,1100px)] flex-col overflow-hidden rounded-xl border border-white/15 bg-[#111] text-white",children:[s.jsxs("div",{className:"flex items-center justify-between border-b border-white/15 px-4 py-3",children:[s.jsx("h3",{className:"truncate text-sm font-semibold",children:r||(t==null?void 0:t.name)||" "}),s.jsx("button",{type:"button",onClick:n,className:"rounded-full p-1.5 hover:bg-white/10","aria-label":"",children:s.jsx(Je,{className:"h-5 w-5"})})]}),s.jsxs("div",{className:"flex-1 overflow-auto p-3",children:[!(t!=null&&t.url)&&s.jsx("div",{className:"p-4 text-sm text-white/70",children:"  ."}),!!(t!=null&&t.url)&&gp(t)&&s.jsx("img",{src:t.url,alt:t.name,className:"mx-auto max-h-full max-w-full object-contain"}),!!(t!=null&&t.url)&&!gp(t)&&Gy(t)&&s.jsx("iframe",{src:t.url,title:t.name,className:"h-full min-h-[70vh] w-full rounded border border-white/10 bg-white"}),!!(t!=null&&t.url)&&!gp(t)&&!Gy(t)&&s.jsxs("div",{className:"p-4 text-sm text-white/80",children:["    .",s.jsx("a",{href:t.url,target:"_blank",rel:"noreferrer",className:"ml-2 underline",children:"  "})]})]})]})}):null}function W6(e){return new Promise((t,r)=>{const n=new FileReader;n.onload=()=>t(String(n.result||"")),n.onerror=()=>r(n.error||new Error("file_read_failed")),n.readAsDataURL(e)})}async function q6(e){const{site_id:t,site_name:r,work_date:n,files:o,badge:a=""}=e,i=new Date().toISOString();let l=0;for(let c=0;c<o.length;c++){const d=o[c];if(!d.type.startsWith("image/"))continue;const h=await W6(d);await Ym({type:"photo",dataUrl:h,siteValue:t,siteName:r,workDate:n,badge:a,createdAt:i}),await hu({action:"upload_photo",payload:{siteValue:t,workDate:n,data:{id:Date.now()+c,url:h,badge:a,type:"photo",version:1,timestamp:i,siteName:r,workDate:n}},createdAt:i,retryCount:0,status:"pending"}),l++}if(l>0&&navigator.onLine)try{await yN()}catch{}return{saved:l}}const H6="https://images.unsplash.com/photo-1504307651254-35680f356dfd?q=80&w=400&auto=format&fit=crop",O2="https://images.unsplash.com/photo-1503387762-592deb58ef4e?q=80&w=400&auto=format&fit=crop",Qd={"sys: ":{id:"sys: ",siteName:" ",siteSource:"system",affiliation:"",contractor:"",totalDrawings:2,currentVersion:1,lastUpdated:"2026-02-10",history:[{id:"bp_hist_1",date:"2026-02-10",time:"14:30",author:"",affiliation:"",contractor:"",component:"",process:"",files:[{id:"bp_f1",name:"_.pdf",type:"file",url:"",size:"2.1MB",ext:"PDF",version:"v1"},{id:"bp_f2",name:".jpg",type:"img",url:O2,size:"1.2MB",ext:"JPG",version:"v1"}],version:1}]},"custom: B":{id:"custom: B",siteName:" B",siteSource:"custom",affiliation:"",contractor:"GS",totalDrawings:1,currentVersion:1,lastUpdated:"2026-02-12",history:[{id:"bp_hist_2",date:"2026-02-12",time:"09:15",author:"",affiliation:"",contractor:"GS",component:"",process:"",files:[{id:"bp_f3",name:"_.pdf",type:"file",url:"",size:"3.4MB",ext:"PDF",version:"v1"}],version:1}]}},K6=["","","","",""];function Qy(e){return!e||typeof e!="object"?!1:"name"in e&&e.name==="AbortError"}const G6={:[{id:"md1",title:"  ",author:"",date:"2026-02-15",time:"09:10",files:[{id:"md1f1",name:"_1.jpg",type:"img",url:O2,size:"1.2MB",ext:"JPG",version:"v1"}]},{id:"md2",title:" ",author:"",date:"2026-02-16",time:"13:30",files:[]}],:[{id:"co1",title:" ",author:"",date:"2026-01-05",time:"10:00",files:[{id:"co1f1",name:".hwp",type:"file",url:"",size:"54KB",ext:"HWP",version:"v1"}]}],:[],:[{id:"ph1",title:" ",contractor:"",affiliation:"",author:"",date:"2026-02-18",time:"16:45",files:[{id:"ph1f1",name:"_2.jpg",type:"img",url:H6,size:"2.5MB",ext:"JPG",version:"v1"}]}],:[]},Al=[{key:"safetyEdu",label:"",acceptMime:"application/pdf,image/*",help:"   "},{key:"bankbook",label:"",acceptMime:"application/pdf,image/*",help:"   "},{key:"idCard",label:"",acceptMime:"application/pdf,image/*",help:"   "},{key:"medical",label:"",acceptMime:"application/pdf,image/*",help:"   "},{key:"carReg",label:"",acceptMime:"application/pdf,image/*",help:"   "},{key:"carIns",label:"",acceptMime:"application/pdf,image/*",help:"   "},{key:"senior",label:"",acceptMime:"application/pdf,image/*",help:"   "}],bp=e=>{const t=e.split("-");return t.length===3?`${t[0].slice(2)}.${t[1]}.${t[2]}`:e},Q6=["","","","","","","","","","","","","","","","","","",""];new Set(Q6);function Y6(){const{isPartner:e}=ls();return s.jsx(J6,{restrictCompanyDocs:e})}function J6({restrictCompanyDocs:e}){var $g,Lg;const t=Yr(),r=e?["","","",""]:K6,[n,o]=p.useState(0),[a,i]=p.useState(""),[l,c]=p.useState(new Set),[d,h]=p.useState(5),[u,f]=p.useState("all"),[m,g]=p.useState(""),[x,N]=p.useState("all"),[b,y]=p.useState(!1),[v,k]=p.useState(!1),[S,E]=p.useState(!1),[C,R]=p.useState({isOpen:!1}),[F,T]=p.useState({}),[V,Y]=p.useState(new Set),[W,X]=p.useState(null),[ne,te]=p.useState(null),[ie,B]=p.useState([]),$=p.useRef(null),K=p.useRef(null),ce=p.useMemo(()=>new Date().toISOString().split("T")[0],[]),{data:ue=[]}=BN(),[Z,fe]=p.useState(""),[ve,Oe]=p.useState(null),[le,Ze]=p.useState(!1),[gt,Ae]=p.useState(()=>new Date().toISOString().split("T")[0]),[rt,et]=p.useState(null),[je,_t]=p.useState(""),Ee=p.useMemo(()=>EA(ue,Z,2).slice(0,40),[ue,Z]),It=r[n]==="",ot=p.useMemo(()=>It?ie.length>0&&je.trim().length>0&&!!gt:ie.length>0&&!!ve&&!!gt,[ie.length,je,gt,It,ve]),[bt,yt]=p.useState({isOpen:!1});p.useState(new Set),p.useRef({});const[cr,dr]=p.useState(null),[jt,ft]=p.useState({siteName:"",siteIsCustom:!1,affiliation:"",contractorPreset:"",contractorCustom:"",componentPreset:"",componentCustom:"",processPreset:"",processCustom:""}),[Ot,J]=p.useState(!1),[pe,Se]=p.useState(!1),[we,ze]=p.useState(null),[Pe,De]=p.useState(!1),[he,vt]=p.useState(null),[Ke,Zt]=p.useState({}),Ct=p.useRef(null),Ht=p.useRef(null),de=p.useRef(null),[Ie,Ge]=p.useState(null),Me=$N({open:Pe,defaultMinScale:.5,defaultMaxScale:4}),[Qe,pt]=p.useState(0),[nt,ye]=p.useState(!1),[qe,He]=p.useState("width"),{data:Ve=[]}=IN(),{data:it=[]}=Kh(),w=qA(),I=HA(),H=KA(),se=GA(),re=p.useRef([]),[Le,_e]=p.useState({photos:[],drawings:[]}),Te=r[n],kt=Te==="",er=Te==="",Ye=Te===""||Te==="",ct=!1;p.useMemo(()=>{const _=["","GS","","",""],D=Object.values(Qd).map(G=>G.affiliation).filter(Boolean),M=Ve.map(G=>G.affiliation).filter(Boolean);return Array.from(new Set([..._,...D,...M]))},[Ve]),p.useMemo(()=>{const _=["","GS","","",""],D=Object.values(Qd).map(G=>G.contractor).filter(Boolean),M=Ve.map(G=>G.contractor).filter(Boolean);return Array.from(new Set([..._,...D,...M]))},[Ve]);const xt=p.useMemo(()=>{const _=new Map,D=(G,oe)=>{const ee=(G||"").trim(),Ue=(oe||"").trim();if(!ee||!Ue)return;_.has(ee)||_.set(ee,new Map);const ke=_.get(ee);ke.set(Ue,(ke.get(Ue)||0)+1)};Object.values(Qd).forEach(G=>D(G.affiliation,G.contractor)),Ve.forEach(G=>D(G.affiliation,G.contractor));const M={};for(const[G,oe]of _.entries()){let ee="",Ue=-1;for(const[ke,xe]of oe.entries())xe>Ue&&(ee=ke,Ue=xe);ee&&(M[G]=ee)}return M},[Ve]);p.useEffect(()=>{const _=(jt.affiliation||"").trim();if(!_)return;const D={:"",:""};if(_===""){ft(oe=>oe.contractorPreset===""?oe:{...oe,contractorPreset:"",contractorCustom:""});return}const M=D[_];if(M){ft(oe=>oe.contractorPreset===M?oe:{...oe,contractorPreset:M,contractorCustom:""});return}const G=xt[_];G&&ft(oe=>oe.contractorPreset?oe:{...oe,contractorPreset:G,contractorCustom:""})},[jt.affiliation,xt]);const tr=p.useMemo(()=>{const _=Ve.flatMap(D=>D.punchItems||[]);return{total:_.length,open:_.filter(D=>D.status!=="done").length,done:_.filter(D=>D.status==="done").length}},[Ve]);p.useEffect(()=>{let _=!1;const D=async(G,oe)=>{const ee=[],Ue=[];for(let ke=0;ke<G.length;ke+=1){const xe=G[ke];let ht=typeof(xe==null?void 0:xe.url)=="string"?xe.url:"";!ht&&(xe!=null&&xe.id)&&(ht=await fu(xe.id)||"",ht&&Ue.push(xe.id)),ht&&ee.push({id:xe.id||`${oe}_${ke}`,name:`${oe==="photo"?"":""}_${ke+1}.jpg`,type:"img",url:ht,size:"-",ext:"JPG",version:"v1",docType:oe})}return{files:ee,usedIds:Ue}};async function M(){const G=[],oe=[],ee=[];for(const xe of it){const lt=xe.siteName||xe.siteValue||" ",ht=(xe.updatedAt||xe.createdAt||"").slice(11,16),zt=xe.photos||[];if(zt.length>0){const{files:zo,usedIds:gl}=await D(zt,"photo");ee.push(...gl),zo.length>0&&G.push({id:`wl_photo_${xe.id}`,title:lt,author:"",date:xe.workDate||"",time:ht,contractor:xe.dept||"",affiliation:xe.dept||"",files:zo})}const Fr=xe.drawings||[];if(Fr.length>0){const{files:zo,usedIds:gl}=await D(Fr,"drawing");ee.push(...gl),zo.length>0&&oe.push({id:`wl_drawing_${xe.id}`,title:lt,author:"",date:xe.workDate||"",time:ht,contractor:xe.dept||"",affiliation:xe.dept||"",files:zo})}}if(_)return;re.current.forEach(xe=>{ee.includes(xe)||Ec(xe)}),re.current=ee;const ke=(xe,lt)=>{const ht=`${xe.date||""} ${xe.time||""}`;return`${lt.date||""} ${lt.time||""}`.localeCompare(ht)};_e({photos:G.sort(ke),drawings:oe.sort(ke)})}return M(),()=>{_=!0}},[it]),p.useEffect(()=>()=>{re.current.forEach(_=>Ec(_)),re.current=[]},[]);const zn=p.useMemo(()=>{const _={...G6},D=[...Le.photos],M=[...Le.drawings];return{..._,:D,:M}},[Le]),Zh=p.useMemo(()=>{if(!Ye)return[];const _=zn[Te]||[];return Array.from(new Set(_.map(D=>D.title).filter(Boolean))).sort((D,M)=>D.localeCompare(M,"ko"))},[zn,Ye,Te]),Is=p.useMemo(()=>{if(kt)return[];const _=a.toLowerCase();return(zn[Te]||[]).filter(D=>Ye&&x!=="all"&&D.title!==x?!1:D.title.toLowerCase().includes(_)||(D.contractor||"").toLowerCase().includes(_))},[a,Te,kt,zn,Ye,x]),Bt=p.useMemo(()=>{if(!kt)return[];const _=a.toLowerCase();return Ve.filter(D=>{var G,oe;if(m&&D.title!==m)return!1;const M=D.title.toLowerCase().includes(_)||D.contractor.toLowerCase().includes(_);return u==="all"?M:u==="open"?M&&((G=D.punchItems)==null?void 0:G.some(ee=>ee.status!=="done")):u==="done"?M&&((oe=D.punchItems)==null?void 0:oe.every(ee=>ee.status==="done")):M})},[kt,a,u,m,Ve]),Nr=!kt&&!ct?Is.slice(0,d):[],Yc=kt?Bt.slice(0,d):[],Jc=kt?Bt.length>d:Is.length>d,ef=kt?Bt.length:Is.length;p.useEffect(()=>{},[cr,ct]),p.useEffect(()=>{if(!v)return;const _=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=_}},[v]),p.useEffect(()=>{v&&Ye&&k(!1)},[Ye,v]);const Vn=_=>{c(D=>{const M=new Set(D);return M.has(_)?M.delete(_):M.add(_),M})},Ms=p.useMemo(()=>Ve.map(_=>_.title),[Ve]),$s=_=>{var M;return((M=_.punchItems)==null?void 0:M.some(G=>G.status!=="done"))?{text:"",cls:"bg-indigo-500 text-white"}:{text:"",cls:"bg-slate-500 text-white"}},cs=p.useMemo(()=>we&&Ve.find(_=>_.id===we)||null,[we,Ve]),Da=(($g=cs==null?void 0:cs.punchItems)==null?void 0:$g.every(_=>_.status==="done"))||!1,$o=p.useMemo(()=>he&&Ve.find(_=>_.id===he.groupId)||null,[he,Ve]),Xr=((Lg=$o==null?void 0:$o.punchItems)==null?void 0:Lg.every(_=>_.status==="done"))||!1,Xc=_=>{ze(_),c(new Set)},tf=()=>{ze(null),c(new Set)};p.useEffect(()=>{if(!Pe)return;ye(!1),He("width");const _=()=>{const G=Me.containerRef.current,oe=Me.contentRef.current;if(!G||!oe)return;const ee=window.getComputedStyle(G),Ue=(parseFloat(ee.paddingLeft||"0")||0)+(parseFloat(ee.paddingRight||"0")||0),xe=Math.max(0,G.clientWidth-Ue)/oe.offsetWidth;Number.isFinite(xe)&&xe>0&&(Me.reset(xe),He("width"))},D=()=>window.setTimeout(_,60),M=window.requestAnimationFrame(_);return window.addEventListener("resize",_),window.addEventListener("orientationchange",D),()=>{window.cancelAnimationFrame(M),window.removeEventListener("resize",_),window.removeEventListener("orientationchange",D)}},[Pe,Me.reset]);const rf=_=>_==="done"?"":_==="ing"?"":"",mr=p.useCallback(()=>{var Ue;const _=he==null?void 0:he.groupId,D=Ht.current;if(!_||!D)return;const M=Array.from(D.querySelectorAll("[data-report-edit='1']")),G={};for(const ke of M){const xe=ke.dataset.itemId||"",lt=ke.dataset.field;if(!xe||lt!=="location"&&lt!=="issue")continue;const ht=(ke.innerText||"").replace(/\u00A0/g," ").trim();G[xe]||(G[xe]={}),G[xe][lt]=ht}M.length>0&&Zt(ke=>{const lt={...ke[_]||{}};for(const[ht,zt]of Object.entries(G))lt[ht]={...lt[ht]||{},...zt};return{...ke,[_]:lt}});const oe=Array.from(((Ue=Ct.current)==null?void 0:Ue.querySelectorAll("[data-report-meta]"))||[]),ee={};for(const ke of oe){const xe=ke.dataset.reportMeta;if(!xe)continue;const lt=(ke.innerText||"").replace(/\u00A0/g," ").trim();ee[xe]=lt}vt(ke=>{if(!ke||ke.groupId!==_)return ke;const xe=M.length===0?ke.rows:ke.rows.map(lt=>{var ht,zt;return{...lt,location:((ht=G[lt.id])==null?void 0:ht.location)??lt.location,issue:((zt=G[lt.id])==null?void 0:zt.issue)??lt.issue}});return{...ke,...ee,rows:xe}})},[he==null?void 0:he.groupId]),Ia=p.useCallback((_,D,M)=>{vt(G=>G&&{...G,rows:G.rows.map(oe=>oe.id===_?{...oe,[D]:M}:oe)}),he!=null&&he.groupId&&I.mutate({groupId:he.groupId,itemId:_,field:D,value:M},{onSuccess:()=>q.success(M?" .":" .")})},[he==null?void 0:he.groupId,I]),Zc=p.useCallback((_,D)=>{var M;if(he){if(Xr){q.error("    .");return}mr(),Ge({itemId:_,field:D}),(M=de.current)==null||M.click()}},[mr,Xr,he]),nf=p.useCallback(_=>{var G;const D=(G=_.target.files)==null?void 0:G[0];if(!D||!Ie){_.currentTarget.value="";return}const M=new FileReader;M.onload=oe=>{var ee;Ia(Ie.itemId,Ie.field,((ee=oe.target)==null?void 0:ee.result)||""),Ge(null)},M.readAsDataURL(D),_.currentTarget.value=""},[Ie,Ia]),Wn=p.useCallback((_,D)=>{if(Xr){q.error("    .");return}mr(),Ia(_,D,"")},[mr,Xr,Ia]),ds=p.useCallback(_=>{const D=_||we||(l.size===1?Array.from(l)[0]:null);if(!D||!_&&!we&&l.size!==1){q.error("    ");return}const M=Ve.find(ee=>ee.id===D);if(!M){q.error("    .");return}const G=Ke[M.id]||{},oe=(M.punchItems||[]).map(ee=>{var Ue,ke;return{id:ee.id,location:((Ue=G[ee.id])==null?void 0:Ue.location)??ee.location??"",issue:((ke=G[ee.id])==null?void 0:ke.issue)??ee.issue??"",status:ee.status,beforePhoto:ee.beforePhoto,afterPhoto:ee.afterPhoto}});vt({groupId:M.id,title:"   ",siteName:M.title,date:M.date,rows:oe}),pt(ee=>ee+1),ye(!1),He("width"),De(!0)},[we,l,Ve,Ke]),Lo=p.useCallback(()=>{mr(),De(!1),vt(null),Ge(null),ye(!1),He("width")},[mr]);p.useCallback(()=>{if(mr(),!he)return;const _=Ve.find(M=>M.id===he.groupId);if(!_)return;Zt(M=>{const G={...M};return delete G[he.groupId],G});const D=(_.punchItems||[]).map(M=>({id:M.id,location:M.location??"",issue:M.issue??"",status:M.status,beforePhoto:M.beforePhoto,afterPhoto:M.afterPhoto}));vt({groupId:_.id,title:"   ",siteName:_.title,date:_.date,rows:D}),pt(M=>M+1),Ge(null),ye(!1),He("width"),q.success(" .")},[mr,Ve,he]);const ul=p.useCallback(()=>{const _=Me.containerRef.current,D=Me.contentRef.current;if(!_||!D)return;const M=window.getComputedStyle(_),G=(parseFloat(M.paddingLeft||"0")||0)+(parseFloat(M.paddingRight||"0")||0),ee=Math.max(0,_.clientWidth-G)/D.offsetWidth;Number.isFinite(ee)&&ee>0&&(Me.reset(ee),He("width"))},[Me]),hl=p.useCallback(()=>{Me.reset(),He("page")},[Me]);p.useCallback(()=>{if(qe==="width"){hl();return}ul()},[hl,ul,qe]),p.useCallback(()=>{ye(_=>!_)},[]),p.useCallback(_=>{!_.ctrlKey&&!_.metaKey||Me.onWheel(_)},[Me]),p.useCallback(_=>{!nt&&_.touches.length===1||Me.onTouchStart(_)},[nt,Me]),p.useCallback(_=>{!nt&&_.touches.length===1||Me.onTouchMove(_)},[nt,Me]),p.useCallback(_=>{Me.onTouchEnd(_)},[Me]);const fl=p.useCallback(_=>new Promise((D,M)=>{const G=document.querySelector(`script[src="${_}"]`);if(G){if(G.dataset.loaded==="true"){D();return}G.addEventListener("load",()=>D(),{once:!0}),G.addEventListener("error",()=>M(new Error(`Failed to load ${_}`)),{once:!0});return}const oe=document.createElement("script");oe.src=_,oe.async=!0,oe.onload=()=>{oe.dataset.loaded="true",D()},oe.onerror=()=>M(new Error(`Failed to load ${_}`)),document.head.appendChild(oe)}),[]),Fo=p.useCallback(async()=>{const _=window;_.html2canvas||await fl("https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"),_.jspdf||await fl("https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js")},[fl]),us=p.useCallback(async()=>{var D;if(mr(),!he)return;const _=Ct.current;if(!_){q.error("    .");return}try{await Fo();const M=window,G=M.html2canvas,oe=(D=M.jspdf)==null?void 0:D.jsPDF;if(!G||!oe){q.error("PDF   .");return}const ee=_.cloneNode(!0);ee.style.position="fixed",ee.style.left="0",ee.style.top="-10000px",ee.style.transform="none",ee.style.width="210mm",ee.style.minHeight="297mm",ee.style.background="#ffffff",ee.style.margin="0",ee.style.padding="20mm 10mm",ee.style.boxSizing="border-box",ee.style.fontFamily="Arial, sans-serif",ee.style.pointerEvents="none",document.body.appendChild(ee);try{ee.querySelectorAll("table").forEach(Kt=>{const dt=Kt;dt.style.tableLayout="fixed",dt.style.width="100%",dt.style.borderCollapse="collapse"}),ee.querySelectorAll("td, th").forEach(Kt=>{const dt=Kt;dt.style.verticalAlign="top",dt.style.lineHeight="1.4",dt.style.paddingTop="6px",dt.style.paddingBottom="10px",dt.style.paddingLeft="4px",dt.style.paddingRight="4px",dt.style.whiteSpace="normal",dt.style.wordBreak="break-word",dt.style.overflowWrap="anywhere",dt.style.boxSizing="border-box"}),ee.querySelectorAll("[contenteditable='true']").forEach(Kt=>{const dt=Kt;dt.style.whiteSpace="pre-wrap",dt.style.wordBreak="break-word"}),ee.querySelectorAll("[data-report-remove='1']").forEach(Kt=>{Kt.style.display="none"});const Ue=new Set([0,5]);ee.querySelectorAll("tr").forEach(Kt=>{const dt=Kt.querySelectorAll("th, td");Ue.forEach($a=>{const Us=dt[$a];Us&&(Us.style.textAlign="center",Us.style.verticalAlign="middle")})}),ee.querySelectorAll("img").forEach(Kt=>{const dt=Kt;dt.style.display="block",dt.style.maxWidth="100%",dt.setAttribute("crossorigin","anonymous")});const ke=2,xe=Array.from(ee.querySelectorAll("img"));await Promise.all(xe.map(Kt=>Kt.complete?Promise.resolve():new Promise(dt=>{Kt.addEventListener("load",()=>dt(),{once:!0}),Kt.addEventListener("error",()=>dt(),{once:!0})})));const lt=ee.getBoundingClientRect(),ht=Array.from(ee.querySelectorAll("tbody tr")).map(Kt=>(Kt.getBoundingClientRect().bottom-lt.top)*ke),zt=await G(ee,{scale:ke,useCORS:!0,backgroundColor:"#ffffff",logging:!1,windowWidth:ee.scrollWidth||794,windowHeight:ee.scrollHeight||ee.getBoundingClientRect().height}),Fr=new oe("p","mm","a4"),zo=210,gl=297,Fg=0,Ug=0,Bg=zo-Fg*2,B2=gl-Ug*2,zg=Bg/zt.width,Vg=Math.floor(B2/zg);let Fs=0,Wg=0;for(;Fs<zt.height-1;){Wg>0&&Fr.addPage();const Kt=Math.min(Fs+Vg,zt.height);let dt=Kt;for(let uf=ht.length-1;uf>=0;uf--){const hf=ht[uf];if(hf>Fs+40&&hf<=Kt){dt=hf;break}}dt<=Fs+10&&(dt=Kt),(zt.height-dt<=8||zt.height-Fs<=Vg+8)&&(dt=zt.height);const $a=dt-Fs,Us=document.createElement("canvas");Us.width=zt.width,Us.height=$a;const qg=Us.getContext("2d");qg&&qg.drawImage(zt,0,Fs,zt.width,$a,0,0,zt.width,$a);const W2=$a*zg;Fr.addImage(Us.toDataURL("image/jpeg",.95),"JPEG",Fg,Ug,Bg,W2),Wg++,Fs=dt}const z2=(he.date||new Date().toISOString().split("T")[0]).slice(0,10),V2=(he.siteName||"").replace(/[\\/:*?"<>|]+/g,"_").trim()||"";Fr.save(`${z2}-${V2}-.pdf`)}finally{ee.remove()}}catch(M){console.error(M),q.error("PDF    .")}},[Fo,mr,he]),sf=p.useCallback(async()=>{var D;if(mr(),!he)return;const _=Ct.current;if(!_){q.error("     .");return}if(!navigator.share){await us();return}try{await Fo();const G=window.html2canvas;if(!G){await us();return}const oe=await G(_,{scale:2,useCORS:!0,backgroundColor:"#ffffff",logging:!1}),ee=await new Promise(ht=>oe.toBlob(ht,"image/png",.95));if(!ee){await us();return}const Ue=(he.date||new Date().toISOString().split("T")[0]).slice(0,10),ke=(he.siteName||"").replace(/[\\/:*?"<>|]+/g,"_").trim()||"",xe=`${Ue}-${ke}-.png`,lt=new File([ee],xe,{type:"image/png"});if((D=navigator.canShare)!=null&&D.call(navigator,{files:[lt]})){await navigator.share({title:" ",files:[lt]}),q.success(".");return}await us()}catch(M){if(Qy(M))return;await us()}},[Fo,mr,us,he]),pl=(_,D,M)=>{we&&I.mutate({groupId:we,itemId:_,field:D,value:M})},of=_=>{we&&confirm("   ?")&&H.mutate({groupId:we,itemId:_},{onSuccess:()=>q.success(" .")})},af=()=>{if(!we)return;const _={id:`pi_${Date.now()}`,location:"",issue:"",priority:"",status:"open",assignee:"",dueDate:"",date:new Date().toISOString().split("T")[0],beforePhoto:"",afterPhoto:""};w.mutate({groupId:we,item:_},{onSuccess:()=>q.success("  .")})},lf=(_,D)=>{if(Da){q.error("    .");return}const M=document.createElement("input");M.type="file",M.accept="image/*",M.onchange=G=>{var ke;const oe=G.target,ee=(ke=oe==null?void 0:oe.files)==null?void 0:ke[0];if(!ee||!we)return;const Ue=new FileReader;Ue.onload=xe=>{var lt;I.mutate({groupId:we,itemId:_,field:D,value:(lt=xe.target)==null?void 0:lt.result},{onSuccess:()=>q.success(" .")})},Ue.readAsDataURL(ee)},M.click()},hs=()=>{if(l.size!==0&&confirm(`${l.size}  ?`)){if(kt&&!we){const _=Ve.filter(D=>!l.has(D.id));se.mutate(_),c(new Set),q.success(" ");return}if(er&&!we){const _=Al.filter(D=>l.has(`required-${D.key}`)).map(D=>D.key);_.length>0&&(Y(D=>{const M=new Set(D);return _.forEach(G=>M.add(G)),M}),T(D=>{const M={...D};return _.forEach(G=>{delete M[G]}),M})),c(new Set),q.success(" ");return}c(new Set),q.success(" ")}},ml=_=>{const D=(_||"").trim();return D?D.toLowerCase().startsWith("v")?D:`v${D}`:"v1"},fn=_=>{const D=_.currentView;return((D==="after"?_.url_after:D==="before"?_.url_before:void 0)||_.url_after||_.url_before||_.url||"").trim()},cf=(_,D)=>({id:D.id||`${_.id}-file`,name:D.name||_.title||"file",url:fn(D),mime:D.mime,ext:D.ext,size:D.size,createdAt:`${_.date||""} ${_.time||""}`.trim(),previewUrl:D.previewUrl}),Uo=(_,D)=>{if(!D){q.error("  .");return}const M=cf(_,D);if(!M.url){q.error("   .");return}R({isOpen:!0,file:M,title:_.title||M.name})},df=_=>_.startsWith("wl_photo_")?_.replace("wl_photo_",""):_.startsWith("wl_drawing_")?_.replace("wl_drawing_",""):"",xl=p.useCallback((_,D)=>{const M=`${(_==null?void 0:_.docType)||""} ${(_==null?void 0:_.name)||""} ${(D==null?void 0:D.title)||""}`.toLowerCase();if(M){if(M.includes("")||M.includes(""))return"safetyEdu";if(M.includes(""))return"bankbook";if(M.includes("")||M.includes("")||M.includes(""))return"idCard";if(M.includes(""))return"medical";if(M.includes(""))return"carReg";if(M.includes(""))return"carIns";if(M.includes(""))return"senior"}},[]),Ls=p.useMemo(()=>{const _={},D=zn.||[];for(const M of D){const G=[...M.files||[]].reverse();for(const oe of G){const ee=xl(oe,M);!ee||_[ee]||V.has(ee)||(_[ee]={doc:M,file:oe})}}for(const M of Al)V.has(M.key)||F[M.key]&&(_[M.key]={doc:{id:`required-${M.key}`,title:M.label,author:"",date:new Date().toISOString().slice(0,10),time:"",files:[F[M.key]]},file:F[M.key]});return _},[xl,V,F]),ed=p.useMemo(()=>Al.filter(_=>{var D;return!!((D=Ls[_.key])!=null&&D.file)}).length,[Ls]),Ma=p.useCallback(_=>{var D;te(_),(D=K.current)==null||D.click()},[]),td=p.useCallback(_=>{const D=Ls[_];if(D!=null&&D.file){Uo(D.doc,D.file);return}q.error(" "),X(_),window.setTimeout(()=>X(M=>M===_?null:M),700),Ma(_)},[Ls,Ma]),rd=p.useCallback(_=>{var ee,Ue;const D=(ee=_.target.files)==null?void 0:ee[0],M=ne;if(_.target.value="",!D||!M)return;const G=URL.createObjectURL(D),oe={id:`${M}-${Date.now()}`,name:D.name,type:D.type.startsWith("image/")?"img":"file",url:G,size:`${(D.size/1024/1024).toFixed(2)}MB`,ext:((Ue=D.name.split(".").pop())==null?void 0:Ue.toUpperCase())||"",mime:D.type,docType:M,version:"v1"};T(ke=>({...ke,[M]:oe})),Y(ke=>{if(!ke.has(M))return ke;const xe=new Set(ke);return xe.delete(M),xe}),te(null),q.success(" ")},[ne]),nd=_=>(_||"file").replace(/[\\/:*?"<>|]+/g,"_").trim()||"file",j=(_,D)=>{const M=nd(_);return D?/\.[a-z0-9]{1,6}$/i.test(M)?M:`${M}.${D.toLowerCase()}`:M},P=_=>{var M;const D=(M=_.split(".").pop())==null?void 0:M.toLowerCase();return D==="jpg"||D==="jpeg"?"image/jpeg":D==="png"?"image/png":D==="webp"?"image/webp":D==="pdf"?"application/pdf":D==="hwp"?"application/x-hwp":"application/octet-stream"},O=(_,D)=>{const M=URL.createObjectURL(_),G=document.createElement("a");G.href=M,G.download=D,document.body.appendChild(G),G.click(),G.remove(),setTimeout(()=>URL.revokeObjectURL(M),1e3)},L=()=>kt?Ve.filter(D=>l.has(D.id)).flatMap(D=>(D.files||[]).map(M=>({url:fn(M),name:j(M.name||`${D.title}_${M.id}`,M.ext||"")}))):er?Al.flatMap(D=>{const M=`required-${D.key}`;if(!l.has(M))return[];const G=Ls[D.key],oe=G==null?void 0:G.file;if(!oe)return[];const ee=fn(oe);return ee?[{url:ee,name:j(oe.name||D.label,oe.ext||"")}]:[]}):(zn[Te]||[]).filter(D=>l.has(D.id)).flatMap(D=>(D.files||[]).map(M=>({url:fn(M),name:j(M.name||D.title,M.ext||"")}))),z=async()=>{const _=L().filter(D=>!!D.url);if(_.length===0){q.error("  .");return}E(!0);try{for(const D of _){const M=await fetch(D.url);if(!M.ok)throw new Error("download_failed");const G=await M.blob();O(G,D.name),await new Promise(oe=>setTimeout(oe,200))}q.success(_.length===1?".":`${_.length}  .`)}catch{q.error("  .")}finally{E(!1)}},Ce=async()=>{var G;const _=L().filter(oe=>!!oe.url);if(_.length===0){q.error("  .");return}if(!navigator.share){q.error("     . ( )");return}const M=_.slice(0,10);E(!0);try{const oe=[];for(const ee of M){const Ue=await fetch(ee.url);if(!Ue.ok)throw new Error("share_fetch_failed");const ke=await Ue.blob();oe.push(new File([ke],ee.name,{type:ke.type||P(ee.name)}))}(G=navigator.canShare)!=null&&G.call(navigator,{files:oe})?(await navigator.share({title:" ",files:oe}),q.success(".")):q.error("     . ( )")}catch(oe){Qy(oe)||q.error(" .")}finally{E(!1)}},st=_=>{o(_),i(""),c(new Set),h(5),f("all"),g(""),ze(null),N("all"),y(!1),k(!1),B([]),fe(""),Oe(null),Ze(!1),Ae(ce),et(null),_t(""),J(!1),Se(!1),ft({siteName:"",siteIsCustom:!1,affiliation:"",contractorPreset:"",contractorCustom:"",componentPreset:"",componentCustom:"",processPreset:"",processCustom:""})},Fe=_=>{const D=Array.from(_.target.files||[]);B(M=>{const G=[...M];for(const oe of D)G.some(Ue=>Ue.name===oe.name&&Ue.size===oe.size&&Ue.lastModified===oe.lastModified)||G.push(oe);return G}),D.length>0&&q.success(`${D.length}  .`),_.target.value=""},Bo=_=>{B(D=>D.filter((M,G)=>G!==_))},sd=()=>{(async()=>{var D;if(Ye){q.error("/   .");return}if(ie.length===0){q.error("  .");return}if(er){E(!0);try{const M=je.trim();if(!M){q.error(" ");return}if(!gt){q.error(" ");return}const G={};for(const ee of ie){const Ue=xl({id:"",name:ee.name,type:ee.type.startsWith("image/")?"img":"file",url:"",size:"",ext:"",docType:M},{id:"",title:M,author:"",date:gt,time:"",files:[]});if(!Ue)continue;const ke=URL.createObjectURL(ee);G[Ue]={id:`${Ue}-${Date.now()}-${Math.random().toString(36).slice(2,7)}`,name:ee.name,type:ee.type.startsWith("image/")?"img":"file",url:ke,size:`${(ee.size/1024/1024).toFixed(2)}MB`,ext:((D=ee.name.split(".").pop())==null?void 0:D.toUpperCase())||"",mime:ee.type,docType:Ue,version:"v1"}}const oe=Object.keys(G);if(oe.length===0){q.error("/   ");return}T(ee=>({...ee,...G})),Y(ee=>{const Ue=new Set(ee);return oe.forEach(ke=>Ue.delete(ke)),Ue}),B([]),_t(""),Ae(ce),k(!1),q.success(oe.length===1?" ":`${oe.length}   `)}finally{E(!1)}return}if(!ve){et(" "),q.error(" ");return}if(!gt){q.error(" ");return}const _=ie.filter(M=>M.type.startsWith("image/"));if(_.length===0){q.error("    .");return}E(!0);try{const M=await q6({site_id:ve.site_id,site_name:ve.site_name,work_date:gt,files:_});q.success(M.saved===1?" .":`${M.saved}  .`),B([]),k(!1),fe(""),Oe(null),Ze(!1),et(null),Ae(ce),_t("")}catch{q.error(" .")}finally{E(!1)}})()},Mg=()=>{B([]),J(!1),Se(!1),ft({siteName:"",siteIsCustom:!1,affiliation:"",contractorPreset:"",contractorCustom:"",componentPreset:"",componentCustom:"",processPreset:"",processCustom:""})},fs=()=>{Mg(),fe(""),Oe(null),Ze(!1),et(null),Ae(ce),_t(""),k(!1)},Zr=bt.blueprintKey?Qd[bt.blueprintKey]:null;return s.jsxs("div",{className:"animate-fade-in",children:[s.jsx(V6,{open:C.isOpen,file:C.file,title:C.title||"",onClose:()=>R({isOpen:!1})}),s.jsx("div",{className:"flex border-b border-border mb-4 -mx-4 px-1 bg-card -mt-6 pt-6 overflow-x-auto scrollbar-none",children:r.map((_,D)=>s.jsx("button",{onClick:()=>st(D),className:U("flex-1 min-w-0 h-12 bg-transparent border-none text-[16px] font-semibold cursor-pointer border-b-[3px] transition-all whitespace-nowrap px-1",n===D?"text-sky-500 border-b-sky-500 font-bold":"text-muted-foreground border-b-transparent"),children:_},_))}),kt&&!we&&s.jsxs("div",{className:"relative mb-4",children:[s.jsx("input",{value:m,onChange:_=>{g(_.target.value),y(!0)},onFocus:()=>y(!0),placeholder:"   ",className:"w-full h-[50px] bg-card border border-border rounded-2xl px-5 pr-16 text-base font-medium text-foreground placeholder:text-muted-foreground transition-all outline-none hover:border-primary/50 focus:border-primary focus:shadow-[0_0_0_3px_rgba(49,163,250,0.15)]"}),m&&s.jsx("button",{onClick:()=>{g(""),y(!1)},className:"absolute right-12 top-1/2 -translate-y-1/2 w-5 h-5 rounded-full bg-muted flex items-center justify-center text-[12px] text-muted-foreground z-10",children:""}),s.jsx("button",{onClick:()=>y(!b),className:"absolute right-4 top-1/2 -translate-y-1/2",children:s.jsx(Lt,{className:"w-5 h-5 text-muted-foreground"})}),b&&s.jsx("ul",{className:"absolute z-50 w-full mt-1.5 max-h-60 overflow-auto bg-card border border-border rounded-xl shadow-lg",children:Ms.filter(_=>_.toLowerCase().includes(m.toLowerCase())).map(_=>s.jsx("li",{onClick:()=>{g(_),y(!1)},className:"px-4 py-3.5 cursor-pointer border-b border-border last:border-0 text-[15px] font-medium text-foreground hover:bg-muted",children:_},_))})]}),!we&&r[n]!==""&&s.jsxs("div",{className:"relative mb-4",children:[s.jsx("input",{value:a,onChange:_=>i(_.target.value),placeholder:["",""].includes(r[n])?" .":" .",className:"w-full h-[50px] bg-card border border-border rounded-2xl px-5 pr-12 text-base font-medium text-foreground placeholder:text-muted-foreground transition-all hover:bg-card hover:border-primary/50 focus:border-primary focus:shadow-[0_0_0_3px_rgba(49,163,250,0.15)] outline-none"}),a&&s.jsx("button",{onClick:()=>i(""),className:U("absolute top-1/2 -translate-y-1/2 w-5 h-5 rounded-full bg-muted flex items-center justify-center text-[12px] text-muted-foreground z-10",Te===""?"right-4":"right-12"),children:""}),Te!==""&&s.jsx(Jr,{className:"absolute right-[18px] top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"})]}),!we&&Ye&&s.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-2",children:[s.jsxs("select",{value:x,onChange:_=>N(_.target.value),className:"h-[46px] rounded-xl border border-border bg-card px-3 text-[14px] font-semibold text-foreground outline-none transition-all hover:border-primary/50 focus:border-primary",children:[s.jsx("option",{value:"all",children:" "}),Zh.map(_=>s.jsx("option",{value:_,children:_},_))]}),s.jsxs("div",{className:"h-[46px] rounded-xl border border-border bg-muted/40 px-3 text-[13px] font-semibold text-text-sub flex items-center justify-center",children:["  ",Is.length,""]})]}),kt&&!we&&s.jsx("div",{className:"flex gap-2 mb-4 overflow-x-auto pb-2",children:[{key:"all",label:"",count:tr.total,cls:"bg-header-navy"},{key:"open",label:"",count:tr.open,cls:"bg-indigo-500"},{key:"done",label:"",count:tr.done,cls:"bg-slate-500"}].map(_=>s.jsxs("button",{onClick:()=>f(_.key),className:U("h-10 px-3.5 rounded-full text-[15px] font-medium cursor-pointer transition-colors whitespace-nowrap shrink-0 border shadow-none focus:outline-none",u===_.key?`${_.cls} text-white border-transparent font-bold shadow-none`:"bg-white border-border text-[#64748b] hover:border-primary/50"),children:[_.label," ",_.count]},_.key))}),we&&cs&&s.jsx(s.Fragment,{children:s.jsx(X6,{group:cs,isApproved:Da,onBack:tf,onOpenReport:ds,onUpdateField:pl,onDeleteItem:of,onAddItem:af,onPhotoUpload:lf})}),!we&&s.jsxs(s.Fragment,{children:[kt&&s.jsx("div",{className:"space-y-3 max-[640px]:space-y-2.5",children:Yc.length===0?s.jsx(Yy,{}):Yc.map(_=>{var xe,lt,ht,zt;const D=l.has(_.id),M=$s(_),G=(xe=_.files)==null?void 0:xe.find(Fr=>Fr.type==="img"),oe=G?(G.currentView==="after"?G.url_after:G.url_before)||G.url:null,ee=((lt=_.punchItems)==null?void 0:lt.filter(Fr=>Fr.status!=="done").length)||0,Ue=((ht=_.punchItems)==null?void 0:ht.filter(Fr=>Fr.status==="done").length)||0,ke=((zt=_.punchItems)==null?void 0:zt.length)||0;return s.jsxs("div",{className:U("bg-card rounded-2xl p-4 max-[640px]:p-3.5 cursor-pointer transition-all shadow-soft relative overflow-hidden",D&&"border-2 border-primary bg-sky-50/50"),onClick:()=>Xc(_.id),children:[s.jsx("span",{className:U("absolute top-0 right-0 text-[11px] font-bold px-2.5 py-1 text-white rounded-bl-xl z-10",M.cls),children:M.text}),s.jsxs("div",{className:"flex gap-3 max-[640px]:gap-2.5 items-center",children:[s.jsx("div",{onClick:Fr=>{Fr.stopPropagation(),Vn(_.id)},className:U("w-[20px] h-[20px] rounded-full border-2 flex items-center justify-center shrink-0 transition-all",D?"bg-sky-500 border-sky-500 shadow-[0_2px_8px_rgba(14,165,233,0.3)]":"bg-card border-muted-foreground/30"),children:D&&s.jsx(po,{className:"w-3.5 h-3.5 text-white",strokeWidth:3})}),s.jsx("div",{className:"w-20 h-20 max-[640px]:w-16 max-[640px]:h-16 rounded-xl bg-muted border border-border overflow-hidden shrink-0",children:oe?s.jsx("img",{src:oe,alt:"",className:"w-full h-full object-cover"}):s.jsx(yr,{className:"w-8 h-8 max-[640px]:w-7 max-[640px]:h-7 text-muted-foreground m-auto mt-6 max-[640px]:mt-5"})}),s.jsxs("div",{className:"flex-1 min-w-0 flex flex-col gap-1 max-[640px]:gap-0.5 pt-0.5 leading-tight",children:[(_.contractor||_.affiliation)&&s.jsxs("div",{className:"flex gap-1.5 flex-wrap mb-1.5",children:[_.contractor&&s.jsx("span",{className:"text-[12px] px-2.5 py-0.5 rounded-md bg-indigo-50 text-indigo-500 border border-indigo-200 font-semibold",children:_.contractor}),_.affiliation&&s.jsx("span",{className:"text-[12px] px-2.5 py-0.5 rounded-md bg-[#e0f2fe] text-[#0284c7] border border-[#bae6fd] font-semibold",children:_.affiliation})]}),s.jsx("div",{className:"text-[16px] font-[800] text-header-navy truncate leading-tight",children:_.title}),s.jsxs("div",{className:"text-[13px] font-medium text-text-sub leading-tight",children:[_.author," ",s.jsx("span",{className:"text-muted-foreground",children:"|"})," ",bp(_.date)," ",s.jsx("span",{className:"text-muted-foreground",children:_.time})]}),s.jsxs("div",{className:"text-[13px] font-medium text-muted-foreground truncate leading-tight",children:[" ",ke," ( ",ee,",  ",Ue,")"]})]})]})]},_.id)})}),!kt&&!ct&&s.jsxs("div",{className:"space-y-3 max-[640px]:space-y-2.5",children:[er&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"rounded-2xl border border-rose-200 bg-rose-50 px-4 py-2.5",children:s.jsxs("div",{className:"flex items-center gap-2.5",children:[s.jsx("div",{className:"inline-flex h-5.5 w-5.5 shrink-0 items-center justify-center rounded-full border border-rose-300 bg-white text-rose-600",children:s.jsx(uN,{className:"h-3.5 w-3.5"})}),s.jsxs("div",{className:"min-w-0 text-[14px] font-semibold leading-none text-rose-800",children:[" 7  ",Math.max(0,7-ed)," ."]})]})}),Al.map(_=>{var ke;const D=Ls[_.key],M=D==null?void 0:D.file,G=!!M&&!!fn(M),oe=`required-${_.key}`,ee=l.has(oe),Ue=G&&(M==null?void 0:M.type)==="img"?fn(M):"";return s.jsxs("div",{className:U("bg-card rounded-2xl p-3 max-[640px]:p-2.5 transition-all shadow-soft relative border border-border",ee&&"border-2 border-primary bg-sky-50/50",W===_.key&&"ring-2 ring-indigo-300 scale-[1.01]"),children:[s.jsx("span",{className:U("status-badge absolute top-0 right-0 text-[11px] font-bold px-2.5 py-1 text-white rounded-tr-xl rounded-bl-xl z-10",G?"status-ok bg-slate-500":"status-none bg-indigo-500"),children:G?"":""}),s.jsxs("div",{className:"flex gap-2 max-[640px]:gap-1.5 items-center",children:[s.jsx("button",{type:"button",disabled:!G,onClick:xe=>{xe.stopPropagation(),G&&Vn(oe)},className:U("w-[20px] h-[20px] rounded-full border-2 flex items-center justify-center shrink-0 transition-all bg-transparent p-0",ee?"bg-sky-500 border-sky-500 shadow-[0_2px_8px_rgba(14,165,233,0.3)]":"bg-card border-muted-foreground/30",!G&&"opacity-40 cursor-not-allowed"),"aria-label":ee?" ":"",children:ee&&s.jsx(po,{className:"w-3.5 h-3.5 text-white",strokeWidth:3})}),s.jsx("div",{className:"w-[56px] h-[56px] max-[640px]:w-[52px] max-[640px]:h-[52px] rounded-xl bg-muted border border-border overflow-hidden shrink-0 flex items-center justify-center",children:Ue?s.jsx("img",{src:Ue,alt:_.label,className:"w-full h-full object-cover"}):((ke=M==null?void 0:M.ext)==null?void 0:ke.toLowerCase())==="pdf"?s.jsx(yr,{className:"w-7 h-7 text-red-500"}):s.jsx(yr,{className:"w-7 h-7 text-muted-foreground"})}),s.jsxs("div",{className:"flex-1 min-w-0 flex flex-col gap-0.5 pt-0.5 leading-tight",children:[s.jsx("div",{className:"text-[16px] font-[800] text-header-navy truncate leading-tight",children:_.label}),s.jsx("div",{className:"text-[13px] font-medium text-muted-foreground leading-tight",children:G?(M==null?void 0:M.name)||" ":" "}),s.jsxs("div",{className:"grid grid-cols-2 gap-1.5 max-[640px]:gap-1.5 items-center mt-1",children:[s.jsx("div",{className:"w-full",onClick:xe=>{G||(xe.stopPropagation(),td(_.key))},children:s.jsxs("button",{type:"button",className:U("action-btn icon-action h-[32px] max-[640px]:h-[30px] w-full rounded-[10px] border text-[12px] font-[800] flex items-center justify-center gap-1.5 max-[640px]:gap-1 transition-all duration-200 group",G?"has-file bg-indigo-50 border-indigo-200 text-indigo-500 font-bold shadow-[0_2px_4px_rgba(99,102,241,0.1)] hover:bg-indigo-100 hover:border-indigo-300 hover:shadow-md hover:scale-[1.02] active:scale-[0.98]":"no-file bg-muted border-border text-muted-foreground opacity-60 cursor-not-allowed"),disabled:!G,onClick:xe=>{xe.stopPropagation(),G&&(D!=null&&D.doc)&&(D!=null&&D.file)&&Uo(D.doc,D.file)},children:[s.jsx(on,{className:"w-3.5 h-3.5 transition-transform duration-200 group-hover:scale-110"}),""]})}),s.jsxs("button",{type:"button",className:"h-[32px] max-[640px]:h-[30px] w-full rounded-[10px] border border-[#bae6fd] bg-[#e0f2fe] px-2.5 text-[12px] font-[800] text-[#0284c7] flex items-center justify-center gap-1 transition-all duration-200 hover:bg-[#bae6fd] hover:border-[#7dd3fc] hover:shadow-md hover:scale-[1.02] active:scale-[0.98]",onClick:xe=>{xe.stopPropagation(),Ma(_.key)},children:[s.jsx(bg,{className:"w-3.5 h-3.5"}),G?"":""]})]})]})]})]},_.key)})]}),!er&&(Nr.length===0?Ye?s.jsxs("div",{className:"rounded-2xl border border-dashed border-border bg-card px-4 py-10 text-center",children:[s.jsx("p",{className:"text-[16px] font-semibold text-header-navy",children:"  ."}),s.jsx("p",{className:"mt-1 text-[13px] text-text-sub",children:" /   ."})]}):s.jsx(Yy,{}):Nr.map(_=>{var xe,lt;const D=l.has(_.id),M=!Ye,G=(xe=_.files)==null?void 0:xe[0],oe=!!G&&!!fn(G),ee=(lt=_.files)==null?void 0:lt.find(ht=>ht.type==="img"),Ue=ee?(ee.currentView==="after"?ee.url_after:ee.url_before)||ee.url:null,ke=df(_.id);return s.jsxs("div",{onClick:()=>{if(M){Vn(_.id);return}G&&Uo(_,G)},className:U("bg-card rounded-2xl p-3.5 max-[640px]:p-3 cursor-pointer transition-all shadow-soft flex gap-2.5 max-[640px]:gap-2 items-center",M&&D&&"border-2 border-primary bg-sky-50/50 shadow-[0_0_0_2px_rgba(49,163,250,0.1)]"),children:[M&&s.jsx("div",{className:U("w-[20px] h-[20px] rounded-full border-2 flex items-center justify-center shrink-0 transition-all",D?"bg-sky-500 border-sky-500 shadow-[0_2px_8px_rgba(14,165,233,0.3)]":"bg-card border-muted-foreground/30"),children:D&&s.jsx(po,{className:"w-3.5 h-3.5 text-white",strokeWidth:3})}),s.jsx("div",{className:"w-[64px] h-[64px] max-[640px]:w-[60px] max-[640px]:h-[60px] rounded-xl bg-muted border border-border overflow-hidden shrink-0 flex items-center justify-center",children:Ue?s.jsx("img",{src:Ue,alt:"",className:"w-full h-full object-cover"}):s.jsx(yr,{className:"w-7 h-7 text-muted-foreground"})}),s.jsxs("div",{className:"flex-1 min-w-0 flex flex-col gap-0.5 max-[640px]:gap-0.5 pt-0.5 leading-tight",children:[_.contractor&&s.jsxs("div",{className:"flex gap-1.5 flex-wrap mb-1.5 items-center",children:[_.affiliation&&s.jsx("span",{className:"text-[12px] px-2.5 py-1 rounded-md bg-[#e0f2fe] text-[#0284c7] border border-[#bae6fd] font-bold leading-none",children:_.affiliation}),s.jsx("span",{className:"text-[12px] px-2.5 py-1 rounded-md bg-slate-50 text-slate-600 border border-slate-200 font-bold leading-none",children:_.contractor})]}),_.contractor?s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(lr,{className:"w-4 h-4 text-text-sub shrink-0"}),s.jsx("div",{className:"text-[16px] font-[800] text-header-navy truncate flex-1 leading-tight",children:(G==null?void 0:G.name)||_.title})]}):s.jsxs("div",{className:"flex items-center gap-1.5",children:[Te!==""&&s.jsx(yr,{className:"w-4 h-4 text-text-sub shrink-0"}),s.jsx("div",{className:"text-[16px] font-[800] text-header-navy truncate flex-1 leading-tight",children:(G==null?void 0:G.name)||_.title})]}),s.jsxs("div",{className:"flex items-center gap-1.5 text-[13px] font-medium text-text-sub leading-tight",children:[s.jsx("span",{className:"font-semibold",children:_.author}),s.jsx("span",{className:"text-muted-foreground",children:"|"}),s.jsx("span",{className:"text-muted-foreground",children:bp(_.date)}),s.jsx("span",{className:"text-muted-foreground",children:"|"}),s.jsx("span",{className:"text-muted-foreground",children:ml((G==null?void 0:G.version)||_.version)})]}),Te===""&&s.jsx("div",{className:"mt-1.5 flex gap-2",children:s.jsxs("button",{type:"button",className:U("h-[32px] w-full rounded-[10px] border text-[12px] font-[800] flex items-center justify-center gap-1.5 transition-all duration-200",oe?"bg-indigo-50 border-indigo-200 text-indigo-500 hover:bg-indigo-100 hover:border-indigo-300":"bg-muted border-border text-muted-foreground opacity-60 cursor-not-allowed"),disabled:!oe,onClick:ht=>{ht.stopPropagation(),G&&Uo(_,G)},children:[s.jsx(on,{className:"w-3.5 h-3.5"}),""]})}),Ye&&s.jsxs("div",{className:"mt-1.5 grid grid-cols-2 gap-1.5",children:[s.jsxs("button",{type:"button",className:U("h-[32px] w-full rounded-[10px] border text-[12px] font-[800] flex items-center justify-center gap-1.5 transition-all duration-200",oe?"bg-indigo-50 border-indigo-200 text-indigo-500 hover:bg-indigo-100 hover:border-indigo-300":"bg-muted border-border text-muted-foreground opacity-60 cursor-not-allowed"),disabled:!oe,onClick:ht=>{ht.stopPropagation(),G&&Uo(_,G)},children:[s.jsx(on,{className:"w-3.5 h-3.5"}),""]}),s.jsxs("button",{type:"button",className:U("h-[32px] w-full rounded-[10px] border text-[12px] font-[800] flex items-center justify-center gap-1.5 transition-all duration-200",ke?"bg-sky-50 border-sky-200 text-sky-700 hover:bg-sky-100 hover:border-sky-300":"bg-muted border-border text-muted-foreground opacity-60 cursor-not-allowed"),disabled:!ke,onClick:ht=>{ht.stopPropagation(),ke&&t(`/worklog?focus=${encodeURIComponent(ke)}`)},children:[s.jsx(lr,{className:"w-3.5 h-3.5"})," "]})]})]})]},_.id)}))]}),ct,Jc&&s.jsxs("button",{onClick:()=>h(_=>_+5),className:"w-full h-12 flex items-center justify-center gap-1.5 text-text-sub text-[14px] font-semibold border border-border rounded-3xl bg-card shadow-soft mt-4 cursor-pointer hover:bg-muted transition-all",children:[s.jsx("span",{children:""}),s.jsx(Lt,{className:"w-[18px] h-[18px]"})]}),!Jc&&d>5&&ef>5&&s.jsxs("button",{onClick:()=>h(5),className:"w-full h-12 flex items-center justify-center gap-1.5 text-text-sub text-[14px] font-semibold border border-border rounded-3xl bg-card shadow-soft mt-4 cursor-pointer hover:bg-muted transition-all",children:[s.jsx("span",{children:""}),s.jsx(Ss,{className:"w-[18px] h-[18px]"})]})]}),l.size>0&&!we&&!Ye&&s.jsx("div",{className:"fixed bottom-[calc(65px+14px+env(safe-area-inset-bottom,0px))] left-1/2 -translate-x-1/2 z-[5000] w-[calc(100%-32px)] max-w-[420px] animate-fade-in",children:s.jsxs("div",{className:"bg-card rounded-xl px-2 py-2 grid grid-cols-3 gap-2 border border-gray-200",children:[s.jsxs("button",{type:"button",onClick:z,disabled:S,className:"flex-1 h-[44px] rounded-lg bg-header-navy text-[14px] font-bold text-white transition-all duration-200 hover:bg-header-navy/90 hover:shadow-sm active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[s.jsx(Cc,{className:"w-4 h-4 transition-transform duration-200 group-hover:scale-110"}),""]}),s.jsxs("button",{type:"button",onClick:Ce,disabled:S,className:"flex-1 h-[44px] rounded-lg bg-header-navy text-[14px] font-bold text-white transition-all duration-200 hover:bg-header-navy/90 hover:shadow-sm active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[s.jsx(oh,{className:"w-4 h-4 transition-transform duration-200 group-hover:scale-110"}),""]}),s.jsxs("button",{type:"button",onClick:hs,disabled:S,className:"flex-1 h-[44px] rounded-lg bg-red-500 text-[14px] font-bold text-white transition-all duration-200 hover:bg-red-600 hover:shadow-sm active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[s.jsx(ko,{className:"w-4 h-4 transition-transform duration-200 group-hover:scale-110",strokeWidth:2.5}),""]})]})}),!we&&Te!==""&&!Ye&&s.jsx("button",{onClick:()=>k(!0),className:"fixed bottom-6 right-[calc(50%-280px)] w-14 h-14 rounded-full bg-header-navy text-white shadow-lg flex items-center justify-center cursor-pointer z-30 active:scale-90 transition-transform max-[600px]:right-4",children:s.jsx(ga,{className:"w-6 h-6"})}),s.jsx("input",{ref:K,type:"file",accept:"application/pdf,image/*",onChange:rd,className:"hidden"}),v&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black/40 z-[2100]",onClick:fs}),s.jsxs("div",{className:"fixed bottom-0 left-0 right-0 w-full max-w-[600px] mx-auto bg-card border-t border-border z-[2200] rounded-t-3xl p-6 max-h-[85vh] overflow-y-auto overscroll-contain animate-fade-in",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h3",{className:"text-[20px] font-bold text-foreground",children:" "}),s.jsx("button",{onClick:fs,className:"bg-transparent border-none cursor-pointer text-foreground p-1",children:s.jsx(Je,{className:"w-6 h-6"})})]}),s.jsxs(s.Fragment,{children:[er?s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-[15px] font-semibold text-text-sub mb-2",children:" *"}),s.jsx("input",{type:"text",placeholder:" ",value:je,onChange:_=>_t(_.target.value),className:"w-full h-[50px] px-4 rounded-xl border border-border bg-card text-[18px] text-foreground placeholder:text-muted-foreground transition-all hover:bg-card hover:border-primary/50 focus:border-primary focus:shadow-[0_0_0_3px_rgba(49,163,250,0.15)] outline-none"})]}):s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-[15px] font-semibold text-text-sub mb-2",children:" *"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",placeholder:" ",value:Z,onChange:_=>{const D=_.target.value;fe(D),et(null),Ze(!0),ve&&D!==ve.site_name&&Oe(null)},onFocus:()=>Ze(!0),onBlur:()=>setTimeout(()=>Ze(!1),120),className:"w-full h-[50px] px-4 pr-14 rounded-xl border border-border bg-card text-[18px] text-foreground placeholder:text-muted-foreground transition-all hover:bg-card hover:border-primary/50 focus:border-primary focus:shadow-[0_0_0_3px_rgba(49,163,250,0.15)] outline-none","aria-invalid":!ve&&!!rt}),Z&&s.jsx("button",{type:"button",onMouseDown:_=>_.preventDefault(),onClick:()=>{fe(""),Oe(null),et(null),Ze(!1)},className:"absolute right-10 top-1/2 -translate-y-1/2 w-6 h-6 rounded-full bg-muted flex items-center justify-center text-[12px] text-muted-foreground z-10","aria-label":" ",children:""}),s.jsx("button",{type:"button",onMouseDown:_=>_.preventDefault(),onClick:()=>Ze(_=>!_),className:"absolute right-4 top-1/2 -translate-y-1/2","aria-label":"  ",children:s.jsx(Lt,{className:"w-5 h-5 text-muted-foreground"})}),le&&Z.trim().length>=2&&s.jsxs("ul",{className:"absolute z-50 left-0 right-0 top-full mt-1.5 max-h-60 overflow-auto bg-card border border-border rounded-xl shadow-lg",children:[Ee.map(_=>s.jsx("li",{onMouseDown:D=>{D.preventDefault(),Oe(_),fe(_.site_name),Ze(!1),et(null)},className:"px-4 py-3.5 cursor-pointer border-b border-border last:border-0 text-[15px] font-medium text-foreground hover:bg-muted",children:_.site_name},_.site_id)),Ee.length===0&&s.jsx("li",{className:"px-4 py-3 text-center text-sm text-muted-foreground",children:"  "})]})]}),!ve&&(Z.trim().length>0||!!rt)&&s.jsx("div",{className:"mt-2 text-[12px] font-semibold text-red-600",children:rt||" "})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-[15px] font-semibold text-text-sub mb-2",children:""}),s.jsx("input",{type:"date",value:gt,onChange:_=>Ae(_.target.value),className:"w-full h-[50px] px-4 rounded-xl border border-border bg-card text-[18px] text-foreground outline-none transition-all focus:border-sky-500"})]})]}),s.jsx("input",{ref:$,type:"file",multiple:!0,accept:"image/*,.pdf,.doc,.docx,.hwp,.xls,.xlsx,.ppt,.pptx",onChange:Fe,className:"hidden"}),s.jsxs("button",{type:"button",onClick:()=>{var _;return(_=$.current)==null?void 0:_.click()},className:"flex h-[50px] w-full items-center justify-center gap-2 rounded-xl border border-dashed border-sky-300 bg-sky-50 text-[15px] font-extrabold text-sky-700 transition-colors hover:bg-sky-100 active:scale-[0.98] mb-4",children:[s.jsx(lN,{className:"h-5 w-5"}),"  ( )"]}),ie.length>0&&s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"text-sm font-semibold text-text-sub mb-2",children:["  (",ie.length,")"]}),s.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:ie.map((_,D)=>s.jsxs("div",{className:"flex items-center justify-between bg-card border border-border rounded-lg p-2",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[s.jsx(yr,{className:"w-4 h-4 text-text-sub shrink-0"}),s.jsx("span",{className:"text-sm text-foreground truncate",children:_.name}),s.jsxs("span",{className:"text-xs text-text-sub shrink-0",children:[(_.size/1024/1024).toFixed(2)," MB"]})]}),s.jsx("button",{onClick:()=>Bo(D),className:"w-6 h-6 rounded-full bg-red-100 hover:bg-red-200 flex items-center justify-center transition-colors shrink-0",children:s.jsx(Je,{className:"w-3 h-3 text-red-600"})})]},D))})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:fs,className:"flex-1 h-[50px] rounded-xl bg-gray-200 text-[15px] font-bold text-gray-700 transition-all sm:text-base",children:""}),s.jsx("button",{onClick:sd,disabled:S||!ot,className:U("flex-1 h-[50px] rounded-xl bg-header-navy text-[15px] font-bold text-header-navy-foreground transition-all sm:text-base",(S||!ot)&&"opacity-50 cursor-not-allowed"),children:""})]})]})]}),bt.isOpen&&bt.blueprintKey&&Zr&&s.jsx(an.Root,{open:bt.isOpen,onOpenChange:_=>yt(_?bt:{isOpen:!1}),dismissible:!0,shouldScaleBackground:!0,children:s.jsxs(an.Portal,{children:[s.jsx(an.Overlay,{className:"fixed inset-0 z-[9999] bg-black/50 backdrop-blur-sm"}),s.jsxs(an.Content,{className:"fixed inset-x-0 bottom-0 z-[10000] mx-auto w-full max-w-[600px] rounded-t-3xl bg-card border border-border shadow-[0_-12px_40px_rgba(0,0,0,0.25)] outline-none",children:[s.jsx("div",{className:"pt-3 pb-2 flex items-center justify-center",children:s.jsx("div",{className:"h-1.5 w-12 rounded-full bg-muted-foreground/25"})}),s.jsxs("div",{className:"flex items-center justify-between px-5 pb-4 border-b border-border",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("h2",{className:"text-[18px] font-[800] text-foreground truncate",children:Zr.siteName}),s.jsx("p",{className:"text-[13px] text-muted-foreground mt-0.5",children:" "})]}),s.jsx("button",{type:"button",onClick:()=>yt({isOpen:!1}),className:"w-10 h-10 rounded-full bg-muted hover:bg-muted/80 flex items-center justify-center transition-colors shrink-0","aria-label":"",children:s.jsx(Je,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"px-5 py-4 border-b border-border bg-muted/20",children:s.jsxs("div",{className:"flex items-center justify-between gap-3",children:[s.jsxs("div",{className:"flex gap-1.5 flex-wrap items-center",children:[Zr.siteSource==="custom"&&s.jsxs("span",{className:"text-[12px] px-2.5 py-1 rounded-md bg-amber-50 text-amber-700 border border-amber-200 font-bold leading-none inline-flex items-center gap-1",children:[s.jsx(hN,{className:"w-3 h-3"}),""]}),Zr.affiliation&&s.jsx("span",{className:"text-[12px] px-2.5 py-1 rounded-md bg-[#e0f2fe] text-[#0284c7] border border-[#bae6fd] font-bold leading-none",children:Zr.affiliation}),Zr.contractor&&s.jsx("span",{className:"text-[12px] px-2.5 py-1 rounded-md bg-indigo-50 text-indigo-500 border border-indigo-200 font-bold leading-none",children:Zr.contractor})]}),s.jsxs("div",{className:"text-[12px] text-muted-foreground whitespace-nowrap",children:[" ",Zr.totalDrawings,"  v",Zr.currentVersion]})]})}),s.jsx("div",{className:"px-5 pb-6 pt-4 max-h-[70vh] overflow-y-auto",children:Zr.history.map((_,D)=>s.jsxs("div",{className:"relative",children:[D<Zr.history.length-1&&s.jsx("div",{className:"absolute left-6 top-12 w-0.5 h-full bg-border"}),s.jsxs("div",{className:"flex gap-4 pb-6",children:[s.jsxs("div",{className:"w-12 h-12 rounded-full bg-blue-500 flex items-center justify-center text-white font-bold text-sm shrink-0",children:["v",_.version]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"font-semibold text-foreground",children:_.author}),s.jsx("span",{className:"text-muted-foreground",children:""}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[bp(_.date)," ",_.time]})]}),s.jsxs("div",{className:"text-sm text-muted-foreground mb-3",children:[_.component,"  ",_.process]}),_.files.length>0&&s.jsx("div",{className:"grid grid-cols-2 gap-2 mb-3",children:_.files.map(M=>s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-muted rounded-lg",children:[s.jsx(yr,{className:"w-4 h-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm truncate",children:M.name})]},M.id))}),s.jsxs("div",{className:"flex gap-1",children:[s.jsxs("button",{className:"flex items-center gap-1 px-3 py-0.5 text-[14px] rounded-full bg-[#e0f2fe] text-[#0284c7] border border-[#bae6fd] font-semibold hover:bg-[#bae6fd] hover:border-[#7dd3fc] transition-colors",children:[s.jsx(cT,{className:"w-3.5 h-3.5"}),""]}),s.jsxs("button",{className:"flex items-center gap-1 px-3 py-0.5 text-[14px] rounded-full bg-indigo-50 text-indigo-500 border border-indigo-200 font-semibold hover:bg-indigo-100 hover:border-indigo-300 transition-colors",children:[s.jsx(on,{className:"w-3.5 h-3.5"}),""]}),s.jsxs("button",{className:"flex items-center gap-1 px-3 py-0.5 text-[14px] rounded-full bg-red-50 text-red-600 border border-red-200 font-semibold hover:bg-red-100 hover:border-red-300 transition-colors",children:[s.jsx(ko,{className:"w-3.5 h-3.5"}),""]})]})]})]})]},_.id))})]})]})}),Pe&&he&&s.jsxs(s.Fragment,{children:[s.jsx("input",{ref:de,type:"file",accept:"image/*",className:"hidden",onChange:nf}),s.jsx(MN,{open:Pe,title:`${he.title}  ${he.siteName}`,onBack:Lo,onClose:Lo,onSave:us,onShare:sf,zoom:Me,contentRef:Ct,titleClassName:"max-w-[150px] truncate sm:max-w-[320px]",maxWidthClassName:"max-w-[600px]",children:s.jsx("div",{className:"px-3 py-2",children:s.jsxs("div",{className:"bg-white shadow-lg",style:{width:"210mm",minHeight:"297mm",padding:"20mm 10mm",boxSizing:"border-box"},children:[s.jsxs("div",{className:"text-center border-b-2 border-[#1a254f] pb-3 mb-4",children:[s.jsx("div",{contentEditable:!0,suppressContentEditableWarning:!0,"data-report-meta":"title",onBlur:mr,className:"text-[24px] font-[800] text-[#1a254f] outline-none",children:he.title}),s.jsx("div",{contentEditable:!0,suppressContentEditableWarning:!0,"data-report-meta":"siteName",onBlur:mr,className:"text-[14px] text-[#666] mt-1 outline-none",children:he.siteName}),s.jsx("div",{contentEditable:!0,suppressContentEditableWarning:!0,"data-report-meta":"date",onBlur:mr,className:"text-[12px] text-[#666] mt-0.5 outline-none",children:he.date})]}),s.jsxs("table",{className:"w-full border-collapse text-[12px] [table-layout:fixed] [&_th]:align-middle [&_td]:align-middle [&_th]:box-border [&_td]:box-border [&_th]:leading-[1.4] [&_td]:leading-[1.45] [&_td]:whitespace-pre-wrap [&_td]:break-keep [&_td]:[overflow-wrap:anywhere] [&_td]:px-[10px]",children:[s.jsxs("colgroup",{children:[s.jsx("col",{style:{width:"40px"}}),s.jsx("col",{style:{width:"96px"}}),s.jsx("col",{style:{minWidth:"180px"}}),s.jsx("col",{style:{width:"88px"}}),s.jsx("col",{style:{width:"88px"}}),s.jsx("col",{style:{width:"64px"}})]}),s.jsx("thead",{children:s.jsxs("tr",{className:"bg-slate-100",children:[s.jsx("th",{className:"border border-slate-300 p-2 w-10",children:"NO"}),s.jsx("th",{className:"border border-slate-300 p-2 w-24",children:""}),s.jsx("th",{className:"border border-slate-300 p-2 min-w-[180px]",children:" "}),s.jsx("th",{className:"border border-slate-300 p-2 w-[88px]",children:" "}),s.jsx("th",{className:"border border-slate-300 p-2 w-[88px]",children:" "}),s.jsx("th",{className:"border border-slate-300 p-2 w-16",children:""})]})}),s.jsx("tbody",{ref:Ht,id:"reportTableBody",children:he.rows.map((_,D)=>s.jsxs("tr",{children:[s.jsx("td",{className:"border border-slate-300 p-2 text-center font-bold",children:D+1}),s.jsx("td",{className:"border border-slate-300 p-2 align-middle",children:s.jsx("div",{contentEditable:!0,suppressContentEditableWarning:!0,"data-report-edit":"1","data-item-id":_.id,"data-field":"location",className:"min-h-[18px] whitespace-pre-wrap break-keep [overflow-wrap:anywhere] [writing-mode:horizontal-tb] leading-[1.45] outline-none",children:_.location||""})}),s.jsx("td",{className:"border border-slate-300 p-2 align-middle",children:s.jsx("div",{contentEditable:!0,suppressContentEditableWarning:!0,"data-report-edit":"1","data-item-id":_.id,"data-field":"issue",className:"min-h-[18px] whitespace-pre-wrap break-keep [overflow-wrap:anywhere] [writing-mode:horizontal-tb] leading-[1.45] outline-none",children:_.issue||""})}),s.jsx("td",{className:"border border-slate-300 p-2 text-center align-middle",children:s.jsxs("div",{className:"relative",children:[s.jsx("button",{type:"button","data-no-pan":"1",disabled:Xr,onClick:()=>Zc(_.id,"beforePhoto"),className:U("w-full h-[64px] flex items-center justify-center bg-transparent border-none p-0",Xr?"opacity-60 cursor-not-allowed":"cursor-pointer"),children:_.beforePhoto?s.jsx("img",{src:_.beforePhoto,alt:"before",className:"w-full max-h-[64px] h-auto object-contain rounded"}):s.jsx("span",{className:"text-slate-400 text-[11px]",children:" "})}),_.beforePhoto&&!Xr&&s.jsx("button",{type:"button","data-no-pan":"1","data-report-remove":"1",onClick:M=>{M.stopPropagation(),Wn(_.id,"beforePhoto")},className:"absolute top-1 right-1 w-5 h-5 rounded-full bg-black/60 text-white flex items-center justify-center",children:s.jsx(Je,{className:"w-3 h-3"})})]})}),s.jsx("td",{className:"border border-slate-300 p-2 text-center align-middle",children:s.jsxs("div",{className:"relative",children:[s.jsx("button",{type:"button","data-no-pan":"1",disabled:Xr,onClick:()=>Zc(_.id,"afterPhoto"),className:U("w-full h-[64px] flex items-center justify-center bg-transparent border-none p-0",Xr?"opacity-60 cursor-not-allowed":"cursor-pointer"),children:_.afterPhoto?s.jsx("img",{src:_.afterPhoto,alt:"after",className:"w-full max-h-[64px] h-auto object-contain rounded"}):s.jsx("span",{className:"text-slate-400 text-[11px]",children:" "})}),_.afterPhoto&&!Xr&&s.jsx("button",{type:"button","data-no-pan":"1","data-report-remove":"1",onClick:M=>{M.stopPropagation(),Wn(_.id,"afterPhoto")},className:"absolute top-1 right-1 w-5 h-5 rounded-full bg-black/60 text-white flex items-center justify-center",children:s.jsx(Je,{className:"w-3 h-3"})})]})}),s.jsx("td",{className:"border border-slate-300 p-2 text-center font-bold",children:rf(_.status)})]},_.id))})]})]},`${he.groupId}-${Qe}`)})})]})]})}function Yy(){return s.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[s.jsx("div",{className:"w-20 h-20 rounded-full bg-muted flex items-center justify-center mb-5",children:s.jsx(Jr,{className:"w-8 h-8 text-muted-foreground opacity-60"})}),s.jsx("p",{className:"text-[16px] font-medium text-foreground mb-2",children:"  "})]})}function X6({group:e,isApproved:t,onBack:r,onOpenReport:n,onUpdateField:o,onDeleteItem:a,onAddItem:i,onPhotoUpload:l}){const c=e.punchItems||[],d=c.length,h=c.filter(f=>f.status!=="done").length,u=c.filter(f=>f.status==="done").length;return s.jsxs("div",{className:"animate-fade-in",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4 -mx-4 px-4 pb-3 border-b border-border",children:[s.jsxs("button",{onClick:r,className:"flex items-center gap-2 text-foreground font-semibold text-[16px] bg-transparent border-none cursor-pointer rounded-lg p-2 -ml-2 hover:bg-muted transition-colors",children:[s.jsx(Qi,{className:"w-6 h-6"}),s.jsx("span",{children:""})]}),s.jsx("h2",{className:"text-[18px] font-bold text-foreground flex-1 text-center px-4 truncate",children:e.title}),s.jsx("button",{className:"bg-muted text-text-sub border border-border rounded-lg px-3 py-1.5 text-[14px] font-bold cursor-pointer hover:bg-card transition-colors whitespace-nowrap",onClick:()=>n(e.id),children:""})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-2.5 mb-6",children:[s.jsxs("div",{className:"p-3 rounded-2xl text-center flex flex-col gap-1 shadow-soft bg-sky-50 text-sky-600 border border-sky-400",children:[s.jsx("span",{className:"text-[22px] font-[800] leading-tight tracking-tight",children:d}),s.jsx("span",{className:"text-[13px] font-bold opacity-90 text-sky-700",children:""})]}),s.jsxs("div",{className:"p-3 rounded-2xl text-center flex flex-col gap-1 shadow-soft bg-red-50 text-red-600 border border-red-400",children:[s.jsx("span",{className:"text-[22px] font-[800] leading-tight tracking-tight",children:h}),s.jsx("span",{className:"text-[13px] font-bold opacity-90 text-red-700",children:""})]}),s.jsxs("div",{className:"p-3 rounded-2xl text-center flex flex-col gap-1 shadow-soft bg-slate-50 text-slate-600 border border-slate-400",children:[s.jsx("span",{className:"text-[22px] font-[800] leading-tight tracking-tight",children:u}),s.jsx("span",{className:"text-[13px] font-bold opacity-90 text-slate-500",children:""})]})]}),s.jsxs("div",{className:"flex items-center gap-2 mb-4 px-1",children:[s.jsx(yr,{className:"w-[20px] h-[20px] text-header-navy"}),s.jsxs("h3",{className:"text-[20px] font-bold text-header-navy",children:["  (",d,")"]})]}),c.length===0?s.jsxs("div",{className:"p-10 text-center text-text-sub bg-card rounded-2xl border-2 border-dashed border-border",children:["   .",s.jsx("br",{}),s.jsx("small",{className:"text-[13px] mt-2 block",children:"      ."})]}):s.jsx("div",{className:"space-y-4",children:c.map(f=>s.jsx(Z6,{item:f,isApproved:t,onUpdateField:o,onDelete:a,onPhotoUpload:l},f.id))}),t?s.jsxs("div",{className:"w-full h-[50px] px-5 border border-dashed border-border rounded-xl bg-muted text-muted-foreground text-[16px] font-[800] flex items-center justify-center gap-2.5 mt-4 opacity-60",children:[s.jsx(hN,{className:"w-6 h-6"}),s.jsx("span",{children:" -  "})]}):s.jsxs("button",{onClick:i,className:"flex h-[50px] w-full items-center justify-center gap-2 rounded-xl border border-dashed border-sky-300 bg-sky-50 text-[15px] font-extrabold text-sky-700 transition-colors hover:bg-sky-100 active:scale-[0.98] mt-4",children:[s.jsx(lN,{className:"h-5 w-5"}),s.jsx("span",{children:"   "})]})]})}function Z6({item:e,isApproved:t,onUpdateField:r,onDelete:n,onPhotoUpload:o}){const a=p.useRef(null);p.useEffect(()=>{const c=a.current;c&&(c.style.height="auto",c.style.height=`${Math.min(c.scrollHeight,160)}px`)},[e.issue]);const i=[{key:"",activeBg:"bg-red-100",activeText:"text-red-600",inactiveBg:"bg-slate-50",inactiveText:"text-slate-400"},{key:"",activeBg:"bg-amber-100",activeText:"text-amber-600",inactiveBg:"bg-slate-50",inactiveText:"text-slate-400"},{key:"",activeBg:"bg-emerald-100",activeText:"text-emerald-600",inactiveBg:"bg-slate-50",inactiveText:"text-slate-400"}],l=[{key:"open",label:"",activeText:"text-red-500"},{key:"ing",label:"",activeText:"text-blue-500"},{key:"done",label:"",activeText:"text-slate-800"}];return s.jsxs("div",{className:"bg-white rounded-xl p-5 relative shadow-[0_4px_20px_rgba(0,0,0,0.08)] transition-all",children:[!t&&s.jsx("button",{onClick:()=>n(e.id),className:"absolute top-4 right-4 bg-transparent border-none text-slate-300 cursor-pointer p-1 transition-colors hover:text-destructive",children:s.jsx(ko,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex items-center gap-2 mb-3 pb-3 border-b border-slate-100",children:[s.jsx(lr,{className:"w-4 h-4 text-text-sub shrink-0"}),s.jsx("input",{type:"text",value:e.location||"",placeholder:" (: 101 302)",onChange:c=>r(e.id,"location",c.target.value),readOnly:t,className:U("text-[17px] font-bold text-text-sub bg-transparent p-0 border-none outline-none flex-1 min-w-0 truncate",t&&"pointer-events-none opacity-70")})]}),s.jsx("textarea",{ref:a,value:e.issue||"",placeholder:"   ...",onChange:c=>{r(e.id,"issue",c.target.value);const d=a.current;d&&(d.style.height="auto",d.style.height=`${Math.min(d.scrollHeight,160)}px`)},readOnly:t,rows:1,className:U("w-full text-[15px] font-medium text-foreground bg-transparent border-none outline-none resize-none leading-snug min-h-[28px] p-0 mb-3 overflow-y-auto transition-all",t&&"pointer-events-none opacity-70")}),s.jsxs("div",{className:"flex justify-between items-center mb-3 flex-wrap gap-2",children:[s.jsx("div",{className:"flex gap-1 flex-wrap w-[calc(50%-4px)] min-w-[120px]",children:i.map(c=>s.jsx("button",{onClick:()=>!t&&r(e.id,"priority",c.key),className:U("py-1.5 px-3 rounded-md text-[12px] font-bold border-none cursor-pointer transition-all min-h-[32px] flex-1",e.priority===c.key?`${c.activeBg} ${c.activeText}`:`${c.inactiveBg} ${c.inactiveText}`,t&&"pointer-events-none opacity-60"),children:c.key},c.key))}),s.jsx("div",{className:"flex bg-slate-100 rounded-full p-0.5 shrink-0 w-[calc(50%-4px)] min-w-[120px]",children:l.map(c=>s.jsx("button",{onClick:()=>!t&&r(e.id,"status",c.key),className:U("py-1 px-2 rounded-full text-[11px] font-bold border-none cursor-pointer transition-all min-h-[28px] flex-1 whitespace-nowrap",e.status===c.key?`bg-white ${c.activeText} shadow-sm`:"bg-transparent text-slate-400",t&&"pointer-events-none opacity-60"),children:c.label},c.key))})]}),s.jsx("div",{className:"flex gap-3 mt-3 w-full",children:["beforePhoto","afterPhoto"].map(c=>s.jsx("div",{onClick:()=>o(e.id,c),className:U("flex-1 aspect-square bg-slate-50 rounded-2xl border border-dashed border-slate-300 flex flex-col items-center justify-center cursor-pointer transition-all overflow-hidden relative hover:bg-slate-100 hover:border-slate-400",t&&"pointer-events-none opacity-60"),children:e[c]?s.jsxs(s.Fragment,{children:[s.jsx("img",{src:e[c],className:"w-full h-full object-cover absolute inset-0",alt:""}),s.jsx("div",{className:U("absolute top-2 left-2 text-white text-[11px] font-[800] px-2.5 py-1 rounded-md",c==="beforePhoto"?"bg-slate-800":"bg-sky-500"),children:c==="beforePhoto"?"":""})]}):s.jsxs(s.Fragment,{children:[s.jsx(Mr,{className:"w-7 h-7 text-slate-300 mb-1"}),s.jsx("span",{className:"text-[11px] font-[900] text-slate-400",children:c==="beforePhoto"?"":""})]})},c))})]})}const Jy=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Xy=cj,eI=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return Xy(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:o,defaultVariants:a}=t,i=Object.keys(o).map(d=>{const h=r==null?void 0:r[d],u=a==null?void 0:a[d];if(h===null)return null;const f=Jy(h)||Jy(u);return o[d][f]}),l=r&&Object.entries(r).reduce((d,h)=>{let[u,f]=h;return f===void 0||(d[u]=f),d},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((d,h)=>{let{class:u,className:f,...m}=h;return Object.entries(m).every(g=>{let[x,N]=g;return Array.isArray(N)?N.includes({...a,...l}[x]):{...a,...l}[x]===N})?[...d,u,f]:d},[]);return Xy(e,i,c,r==null?void 0:r.class,r==null?void 0:r.className)},tI=eI("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),_i=p.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...o},a)=>{const i=n?J_:"button";return s.jsx(i,{className:U(tI({variant:t,size:r,className:e})),ref:a,...o})});_i.displayName="Button";const Ig=p.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:U("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Ig.displayName="Card";const D2=p.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:U("flex flex-col space-y-1.5 p-6",e),...t}));D2.displayName="CardHeader";const I2=p.forwardRef(({className:e,...t},r)=>s.jsx("h3",{ref:r,className:U("text-2xl font-semibold leading-none tracking-tight",e),...t}));I2.displayName="CardTitle";const M2=p.forwardRef(({className:e,...t},r)=>s.jsx("p",{ref:r,className:U("text-sm text-muted-foreground",e),...t}));M2.displayName="CardDescription";const $2=p.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:U("p-6 pt-0",e),...t}));$2.displayName="CardContent";const rI=p.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:U("flex items-center p-6 pt-0",e),...t}));rI.displayName="CardFooter";const nI={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};function sI(){var o,a,i;const e=nI,t=((o=e.VITE_KAKAO_JS_KEY)==null?void 0:o.trim())||void 0,r=((a=e.VITE_KAKAO_CHANNEL_PUBLIC_ID)==null?void 0:a.trim())||"_xfgxdqX",n=((i=e.VITE_KAKAO_CHANNEL_URL)==null?void 0:i.trim())||"https://pf.kakao.com/_xfgxdqX";return{jsKey:t,channelPublicId:r,channelUrl:n}}const yp="   (  )",oI="https://pf.kakao.com/_xfgxdqX",aI="https://pf.kakao.com/_xfgxdqX/chat",iI="/request/external",lI="",cI="   (  )",Zy=" ()",ev="1:1 ";function dI(e){return e?`${e.replace(/\/$/,"")}/chat`:aI}function uI(e,t){const r=new URLSearchParams({target:e,title:t});return`${iI}?${r.toString()}`}function hI(){const e=Yr(),{isOnline:t}=vN(),{channelUrl:r}=sI(),n=()=>{t||q.warning(yp)},o=(l,c)=>{e(uI(l,c))},a=()=>{if(!t){q.warning(yp);return}o(r||oI,Zy)},i=()=>{if(!t){q.warning(yp);return}o(dI(r),ev)};return s.jsx("div",{className:"animate-fade-in",children:s.jsx("div",{className:"mt-3 mb-2",children:s.jsxs(Ig,{className:"rounded-2xl shadow-soft mb-0",children:[s.jsxs(D2,{className:"space-y-2 pb-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",className:"lucide lucide-phone-call text-header-navy",children:[s.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"}),s.jsx("path",{d:"M14.05 2a9 9 0 0 1 8 7.94"})]}),s.jsx(I2,{className:"text-xl font-bold text-header-navy",children:lI})]}),s.jsx(M2,{className:"text-base font-medium leading-relaxed text-text-sub",children:cI})]}),s.jsxs($2,{className:"space-y-3",children:[s.jsx("div",{className:"w-full",onClick:n,children:s.jsx(_i,{type:"button",variant:"outline",className:"h-[50px] w-full text-base font-semibold border-[#FEE500] text-[#3C1E1E] bg-[#FEE500]/10 hover:bg-[#FEE500]/20 transition-all",disabled:!t,onClick:a,children:Zy})}),s.jsx("div",{className:"w-full",onClick:n,children:s.jsx(_i,{type:"button",className:"h-[50px] w-full text-base font-semibold bg-[#FEE500] text-[#3C1E1E] hover:bg-[#FEE500]/90 transition-all shadow-sm",disabled:!t,onClick:i,children:ev})})]})]})})})}const vp="https://pf.kakao.com/_xfgxdqX",fI="",pI="",mI="",xI=" ",gI="     ";function bI(e){const t=e==null?void 0:e.trim();if(!t)return vp;try{const r=new URL(t);return r.protocol!=="http:"&&r.protocol!=="https:"?vp:r.toString()}catch{return vp}}function yI(){const e=Yr(),t=Aa(),{targetUrl:r,title:n}=p.useMemo(()=>{var d;const l=new URLSearchParams(t.search),c=((d=l.get("title"))==null?void 0:d.trim())||fI;return{targetUrl:bI(l.get("target")),title:c}},[t.search]),o=()=>{e("/request",{replace:!0})},a=()=>{window.close(),window.setTimeout(()=>{window.closed||(q.message(gI),o())},120)},i=()=>{window.open(r,"_blank","noopener,noreferrer")||(window.location.href=r)};return s.jsx("div",{className:"animate-fade-in",children:s.jsx("div",{className:"mt-3 mb-2",children:s.jsxs(Ig,{className:"overflow-hidden rounded-2xl shadow-soft mb-0",children:[s.jsxs("div",{className:"flex items-center gap-2 border-b border-border px-3 py-2.5",children:[s.jsx(_i,{type:"button",variant:"outline",className:"h-9 px-3 text-sm font-semibold",onClick:o,children:pI}),s.jsx("div",{className:"min-w-0 flex-1 truncate text-sm font-bold text-header-navy",children:n}),s.jsx(_i,{type:"button",variant:"outline",className:"h-9 px-3 text-sm font-semibold",onClick:i,children:xI}),s.jsx(_i,{type:"button",variant:"ghost",className:"h-9 px-3 text-sm font-semibold text-muted-foreground hover:text-foreground",onClick:a,children:mI})]}),s.jsx("div",{className:"h-[68vh] max-[640px]:h-[62vh] bg-white",children:s.jsx("iframe",{src:r,title:n,className:"h-full w-full border-0",loading:"eager",referrerPolicy:"strict-origin-when-cross-origin"})})]})})})}const L2="/assets/logo_b-VVYKj-ui.png";function vI(){const[e,t]=p.useState(!1),[r,n]=p.useState(!1),[o,a]=p.useState(!1),[i,l]=p.useState(!1),[c,d]=p.useState(!1),{setTestMode:h,setTestRole:u}=Qt(),f=Yr(),[m,g]=p.useState(""),[x,N]=p.useState(""),[b,y]=p.useState(""),[v,k]=p.useState(""),[S,E]=p.useState(""),[C,R]=p.useState(""),[F,T]=p.useState(!1),Y=(K=>{let ce=0;return K.length>=8&&ce++,/[A-Z]/.test(K)&&ce++,/[0-9]/.test(K)&&ce++,/[^A-Za-z0-9]/.test(K)&&ce++,ce})(x),W=Y===0?" ":Y===1?"":Y<=3?"":"",X=Y===0?"bg-border":Y===1?"bg-destructive":Y<=3?"bg-amber-500":"bg-emerald-500",ne=async()=>{if(!m||!x){q.error("  .");return}l(!0);const{error:K}=await me.auth.signInWithPassword({email:m,password:x});l(!1),K?q.error(K.message==="Invalid login credentials"?"    .":K.message):(q.success(" !"),f("/"))},te=async()=>{if(!v||!m||!C){q.error("   .");return}if(x.length<8){q.error(" 8  .");return}if(x!==b){q.error("  .");return}if(!F){q.error(" .");return}l(!0);const{error:K}=await me.auth.signUp({email:m,password:x,options:{emailRedirectTo:window.location.origin,data:{name:v,phone:S,affiliation:C}}});l(!1),K?q.error(K.message):(q.success(" !  ."),t(!0))},ie=async()=>{if(!m){q.error(" .");return}l(!0);const{error:K}=await me.auth.resetPasswordForEmail(m,{redirectTo:`${window.location.origin}/reset-password`});l(!1),K?q.error(K.message):(q.success("    ."),d(!1))},B=(K="worker",ce="/")=>{u(K),h(!0),f(ce)},$=()=>{c?ie():e?ne():te()};return s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center px-5 py-5",children:s.jsx("div",{className:"w-full max-w-app",children:s.jsxs("div",{className:"bg-card rounded-xl shadow-md p-8 max-[640px]:p-6 w-full",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsxs("div",{className:"mb-3 flex items-center justify-center gap-3 max-[640px]:gap-2 max-[420px]:gap-1.5",children:[s.jsx("img",{src:L2,alt:"INOPNC ",className:"h-auto w-[188px] max-[640px]:w-[138px] max-[420px]:w-[124px] shrink-0 object-contain"}),s.jsx("h1",{className:"whitespace-nowrap text-[26px] max-[640px]:text-[20px] max-[420px]:text-[18px] leading-none font-bold text-header-navy",children:c?" ":e?"":""})]}),s.jsx("p",{className:"text-[14px] text-text-sub",children:c?"  ":e?" ":"    "})]}),s.jsxs("div",{className:"flex flex-col gap-5",children:[!e&&!c&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex flex-col gap-1.5",children:[s.jsxs("label",{className:"text-[14px] font-semibold text-text-sub flex items-center gap-1",children:[" ",s.jsx("span",{className:"text-destructive text-[16px]",children:"*"})]}),s.jsxs("select",{value:C,onChange:K=>R(K.target.value),className:"h-12 max-[640px]:h-11 rounded-lg border border-border px-4 text-[16px] bg-card text-foreground appearance-none outline-none focus:border-primary bg-[length:16px] bg-[right_12px_center] bg-no-repeat",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23475569' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E")`},children:[s.jsx("option",{value:"",children:" "}),s.jsx("option",{value:"worker_inopnc",children:" ()"}),s.jsx("option",{value:"manager_inopnc",children:" ()"}),s.jsx("option",{value:"partner_company",children:""})]})]}),s.jsxs("div",{className:"flex gap-3 max-[640px]:flex-col max-[640px]:gap-5",children:[s.jsxs("div",{className:"flex-1 flex flex-col gap-1.5",children:[s.jsxs("label",{className:"text-[14px] font-semibold text-text-sub flex items-center gap-1",children:[" ",s.jsx("span",{className:"text-destructive text-[16px]",children:"*"})]}),s.jsx("input",{type:"text",value:v,onChange:K=>k(K.target.value),placeholder:" ",className:"h-12 max-[640px]:h-11 rounded-lg border border-border px-4 text-[16px] bg-card text-foreground placeholder:text-muted-foreground outline-none focus:border-primary"})]}),s.jsxs("div",{className:"flex-1 flex flex-col gap-1.5",children:[s.jsx("label",{className:"text-[14px] font-semibold text-text-sub flex items-center gap-1",children:""}),s.jsx("input",{type:"tel",value:S,onChange:K=>E(K.target.value),placeholder:"010-1234-5678",className:"h-12 max-[640px]:h-11 rounded-lg border border-border px-4 text-[16px] bg-card text-foreground placeholder:text-muted-foreground outline-none focus:border-primary"})]})]})]}),s.jsxs("div",{className:"flex flex-col gap-1.5",children:[s.jsxs("label",{className:"text-[14px] font-semibold text-text-sub flex items-center gap-1",children:[" ",s.jsx("span",{className:"text-destructive text-[16px]",children:"*"})]}),s.jsx("input",{type:"email",value:m,onChange:K=>g(K.target.value),placeholder:"example@email.com",className:"h-12 max-[640px]:h-11 rounded-lg border border-border px-4 text-[16px] bg-card text-foreground placeholder:text-muted-foreground outline-none focus:border-primary"})]}),!c&&s.jsxs("div",{className:"flex flex-col gap-1.5",children:[s.jsxs("label",{className:"text-[14px] font-semibold text-text-sub flex items-center gap-1",children:[" ",s.jsx("span",{className:"text-destructive text-[16px]",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:r?"text":"password",value:x,onChange:K=>N(K.target.value),placeholder:e?" ":", ,   8 ",className:"w-full h-12 max-[640px]:h-11 rounded-lg border border-border px-4 pr-12 text-[16px] bg-card text-foreground placeholder:text-muted-foreground outline-none focus:border-primary"}),s.jsx("button",{onClick:()=>n(!r),className:"absolute right-4 top-1/2 -translate-y-1/2 bg-transparent border-none cursor-pointer text-muted-foreground",children:r?s.jsx(rh,{className:"w-5 h-5"}):s.jsx(on,{className:"w-5 h-5"})})]}),!e&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex gap-1 mt-2",children:[0,1,2,3].map(K=>s.jsx("div",{className:U("h-1 flex-1 rounded-sm transition-colors",K<Y?X:"bg-border")},K))}),s.jsxs("span",{className:"text-[12px] text-text-sub mt-1",children:[" : ",W]})]}),e&&s.jsx("button",{onClick:()=>d(!0),className:"self-end text-[13px] text-primary bg-transparent border-none cursor-pointer hover:underline mt-1",children:" ?"})]}),!e&&!c&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex flex-col gap-1.5",children:[s.jsxs("label",{className:"text-[14px] font-semibold text-text-sub flex items-center gap-1",children:["  ",s.jsx("span",{className:"text-destructive text-[16px]",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:o?"text":"password",value:b,onChange:K=>y(K.target.value),placeholder:"  ",className:"w-full h-12 max-[640px]:h-11 rounded-lg border border-border px-4 pr-12 text-[16px] bg-card text-foreground placeholder:text-muted-foreground outline-none focus:border-primary"}),s.jsx("button",{onClick:()=>a(!o),className:"absolute right-4 top-1/2 -translate-y-1/2 bg-transparent border-none cursor-pointer text-muted-foreground",children:o?s.jsx(rh,{className:"w-5 h-5"}):s.jsx(on,{className:"w-5 h-5"})})]})]}),s.jsx("div",{className:"flex flex-col gap-2 mt-1",children:s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:F,onChange:K=>T(K.target.checked),className:"w-[18px] h-[18px] accent-primary"}),s.jsxs("span",{className:"text-[14px] max-[640px]:text-[13px] text-text-sub whitespace-nowrap",children:["  ",s.jsx("span",{className:"text-destructive",children:"*"})]})]})})]}),s.jsxs("button",{onClick:$,disabled:i,className:"w-full h-12 max-[640px]:h-11 bg-header-navy text-white rounded-lg border-none text-[16px] font-semibold cursor-pointer transition-all hover:opacity-90 active:scale-[0.98] disabled:opacity-50 flex items-center justify-center gap-2",children:[i&&s.jsx(Vh,{className:"w-5 h-5 animate-spin"}),c?"  ":e?"":""]}),s.jsx("div",{className:"text-center mt-4 text-[14px] text-text-sub",children:c?s.jsx("button",{onClick:()=>d(!1),className:"text-primary font-semibold bg-transparent border-none cursor-pointer hover:underline",children:"  "}):e?s.jsxs(s.Fragment,{children:[" ? ",s.jsx("button",{onClick:()=>t(!1),className:"text-primary font-semibold bg-transparent border-none cursor-pointer hover:underline",children:""})]}):s.jsxs(s.Fragment,{children:["  ? ",s.jsx("button",{onClick:()=>t(!0),className:"text-primary font-semibold bg-transparent border-none cursor-pointer hover:underline",children:""})]})}),s.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>B("worker"),className:"flex-1 h-10 bg-transparent border border-primary text-primary rounded-lg text-[14px] font-semibold cursor-pointer transition-all hover:bg-primary/5",children:" "}),s.jsx("button",{onClick:()=>B("admin"),className:"flex-1 h-10 bg-transparent border border-header-navy text-header-navy rounded-lg text-[14px] font-semibold cursor-pointer transition-all hover:bg-header-navy/5",children:" "}),s.jsx("button",{onClick:()=>B("partner"),className:"flex-1 h-10 bg-transparent border border-accent text-accent-foreground rounded-lg text-[14px] font-semibold cursor-pointer transition-all hover:bg-accent/10",children:" "})]}),s.jsx("button",{onClick:()=>B("admin","/admin"),className:"w-full h-10 bg-header-navy text-white rounded-lg text-[14px] font-semibold cursor-pointer transition-all hover:opacity-90 active:scale-[0.98] flex items-center justify-center gap-1.5",children:"   "})]})]})]})})})}function wI(){const[e,t]=p.useState(""),[r,n]=p.useState(""),[o,a]=p.useState(!1),[i,l]=p.useState(!1),[c,d]=p.useState(!1),h=Yr();p.useEffect(()=>{window.location.hash.includes("type=recovery")||(q.error("    ."),h("/auth"))},[h]);const u=async()=>{if(e.length<8){q.error(" 8  .");return}if(e!==r){q.error("  .");return}l(!0);const{error:f}=await me.auth.updateUser({password:e});l(!1),f?q.error(f.message):(d(!0),setTimeout(()=>h("/"),2e3))};return c?s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center px-5",children:s.jsxs("div",{className:"text-center",children:[s.jsx(aN,{className:"w-16 h-16 text-emerald-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-bold text-foreground",children:" "}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"   ..."})]})}):s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center px-5",children:s.jsx("div",{className:"w-full max-w-app",children:s.jsxs("div",{className:"bg-card rounded-xl shadow-md p-8 max-[640px]:p-6",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("img",{src:L2,alt:"INOPNC",className:"w-[200px] h-auto mx-auto mb-5 object-contain"}),s.jsx("h1",{className:"text-xl font-bold text-foreground",children:"  "})]}),s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsxs("div",{className:"flex flex-col gap-1.5",children:[s.jsx("label",{className:"text-sm font-semibold text-muted-foreground",children:" "}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:o?"text":"password",value:e,onChange:f=>t(f.target.value),placeholder:"8  ",className:"w-full h-12 rounded-lg border border-border px-4 pr-12 text-base bg-card text-foreground placeholder:text-muted-foreground outline-none focus:border-primary"}),s.jsx("button",{onClick:()=>a(!o),className:"absolute right-4 top-1/2 -translate-y-1/2 text-muted-foreground bg-transparent border-none cursor-pointer",children:o?s.jsx(rh,{className:"w-5 h-5"}):s.jsx(on,{className:"w-5 h-5"})})]})]}),s.jsxs("div",{className:"flex flex-col gap-1.5",children:[s.jsx("label",{className:"text-sm font-semibold text-muted-foreground",children:" "}),s.jsx("input",{type:"password",value:r,onChange:f=>n(f.target.value),placeholder:"  ",className:"w-full h-12 rounded-lg border border-border px-4 text-base bg-card text-foreground placeholder:text-muted-foreground outline-none focus:border-primary"})]}),s.jsx("button",{onClick:u,disabled:i,className:"w-full h-12 bg-header-navy text-white rounded-lg border-none text-base font-semibold cursor-pointer transition-all hover:opacity-90 disabled:opacity-50",children:i?" ...":" "})]})]})})})}const jI=()=>{const e=Aa();return p.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),s.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),s.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),s.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})},NI={sites:5,workers:12,partners:3,pending:4,totalWorklogs:28,docs:15,recentWorklogs:[{id:"m1",site_name:"  ",status:"submitted",work_date:"2026-02-23",created_at:""},{id:"m2",site_name:" ",status:"approved",work_date:"2026-02-22",created_at:""},{id:"m3",site_name:" ",status:"rejected",work_date:"2026-02-21",created_at:""},{id:"m4",site_name:" ",status:"submitted",work_date:"2026-02-21",created_at:""},{id:"m5",site_name:" T2 ",status:"draft",work_date:"2026-02-20",created_at:""}]};function kI({onNavigate:e}){const{isTestMode:t}=Qt(),{data:r,isLoading:n}=fr({queryKey:["admin-dashboard-stats",t],queryFn:async()=>{if(t)return NI;const[{count:a},{count:i},{count:l},{count:c},{count:d},{count:h},{data:u}]=await Promise.all([me.from("sites").select("*",{count:"exact",head:!0}),me.from("user_roles").select("*",{count:"exact",head:!0}).eq("role","worker"),me.from("user_roles").select("*",{count:"exact",head:!0}).eq("role","partner"),me.from("worklogs").select("*",{count:"exact",head:!0}).in("status",["submitted","pending","draft"]),me.from("worklogs").select("*",{count:"exact",head:!0}),me.from("documents").select("*",{count:"exact",head:!0}),me.from("worklogs").select("id, site_name, status, work_date, created_at").order("created_at",{ascending:!1}).limit(5)]);return{sites:a||0,workers:i||0,partners:l||0,pending:c||0,totalWorklogs:d||0,docs:h||0,recentWorklogs:u||[]}}}),o=p.useMemo(()=>[{key:"site",label:" ",value:(r==null?void 0:r.sites)??0,icon:lr,color:"text-blue-500",bg:"bg-blue-50",border:"border-blue-200",tab:"site"},{key:"worker",label:"",value:(r==null?void 0:r.workers)??0,icon:Ea,color:"text-emerald-600",bg:"bg-emerald-50",border:"border-emerald-200",tab:"user"},{key:"partner",label:"",value:(r==null?void 0:r.partners)??0,icon:sh,color:"text-violet-600",bg:"bg-violet-50",border:"border-violet-200",tab:"partner"},{key:"pending",label:"",value:(r==null?void 0:r.pending)??0,icon:bT,color:"text-amber-600",bg:"bg-amber-50",border:"border-amber-200",tab:"worklog"},{key:"worklogs",label:" ",value:(r==null?void 0:r.totalWorklogs)??0,icon:Pr,color:"text-primary",bg:"bg-primary/5",border:"border-primary/20",tab:"worklog"},{key:"docs",label:"",value:(r==null?void 0:r.docs)??0,icon:Yi,color:"text-text-sub",bg:"bg-muted",border:"border-border",tab:"doc"}],[r]);return n?s.jsx("div",{className:"flex items-center justify-center py-20",children:s.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):s.jsxs("div",{className:"animate-fade-in",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h1",{className:"text-xl-app font-[800] text-header-navy mb-1",children:""}),s.jsx("p",{className:"text-[15px] text-text-sub font-medium",children:"   "})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 mb-6",children:o.map(a=>s.jsxs("button",{onClick:()=>e(a.tab),className:U("p-4 rounded-2xl border flex flex-col gap-2 cursor-pointer transition-all active:scale-[0.98] hover:shadow-md text-left",a.bg,a.border),children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(a.icon,{className:U("w-5 h-5",a.color)}),s.jsx(dy,{className:"w-4 h-4 text-muted-foreground"})]}),s.jsx("span",{className:U("text-[28px] font-[800] leading-tight",a.color),children:a.value}),s.jsx("span",{className:"text-[13px] font-bold text-text-sub",children:a.label})]},a.key))}),s.jsxs("div",{className:"bg-card rounded-2xl shadow-soft p-5 mb-6",children:[s.jsxs("h3",{className:"text-[17px] font-[800] text-header-navy mb-4 flex items-center gap-2",children:[s.jsx(gT,{className:"w-5 h-5"}),"  "]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:[{label:" ",tab:"worklog",icon:Pr,cls:"bg-indigo-50 text-indigo-600 border-indigo-200"},{label:" ",tab:"site",icon:lr,cls:"bg-blue-50 text-blue-600 border-blue-200"},{label:" ",tab:"partner",icon:sh,cls:"bg-violet-50 text-violet-600 border-violet-200"},{label:" ",tab:"user",icon:Ea,cls:"bg-emerald-50 text-emerald-600 border-emerald-200"},{label:" ",tab:"doc",icon:Yi,cls:"bg-muted text-text-sub border-border"}].map(a=>s.jsxs("button",{onClick:()=>e(a.tab),className:U("h-[52px] rounded-xl border flex items-center justify-center gap-2 text-[14px] font-bold cursor-pointer transition-all active:scale-[0.98]",a.cls),children:[s.jsx(a.icon,{className:"w-4 h-4"}),a.label]},a.label))})]}),s.jsxs("div",{className:"bg-card rounded-2xl shadow-soft p-5",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-[17px] font-[800] text-header-navy flex items-center gap-2",children:[s.jsx(Pr,{className:"w-5 h-5"}),"  "]}),s.jsxs("button",{onClick:()=>e("worklog"),className:"text-[13px] font-bold text-primary bg-transparent border-none cursor-pointer flex items-center gap-1",children:[" ",s.jsx(dy,{className:"w-3.5 h-3.5"})]})]}),((r==null?void 0:r.recentWorklogs)||[]).length===0?s.jsx("p",{className:"text-[14px] text-muted-foreground text-center py-6",children:"  "}):s.jsx("div",{className:"space-y-2",children:((r==null?void 0:r.recentWorklogs)||[]).map(a=>s.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-dashed border-border last:border-0",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-[15px] font-bold text-foreground truncate",children:a.site_name}),s.jsx("div",{className:"text-[13px] text-text-sub font-medium",children:a.work_date})]}),s.jsx("span",{className:U("text-[12px] font-bold px-2.5 py-1 rounded-full",a.status==="approved"?"bg-muted text-muted-foreground":a.status==="rejected"?"bg-red-50 text-red-600":"bg-indigo-50 text-indigo-600"),children:a.status==="approved"?"":a.status==="rejected"?"":""})]},a.id))})]})]})}function SI(){const{isTestMode:e}=Qt(),[t,r]=p.useState(""),[n,o]=p.useState("latest"),[a,i]=p.useState("all"),[l,c]=p.useState(10),[d,h]=p.useState(()=>{try{return new Set(JSON.parse(localStorage.getItem("admin_pinned_ids")||"[]"))}catch{return new Set}}),[u,f]=p.useState(null),[m,g]=p.useState(""),x=pr(),N=[{id:"mw1",name:"",role:"",affiliation:"",site:"  ",siteId:"",member:"",process:"",workType:"",location:"A 3",man:8,cumDays:15,cumMan:120,task:"  ",status:"pending",latestDate:"2026-02-23T09:00:00",phone:"010-1234-5678",pinned:!1,worklogId:"mw1",materials:" D13 (50)"},{id:"mw2",name:"",role:"",affiliation:"",site:" ",siteId:"",member:"",process:"",workType:"",location:"B 1",man:12,cumDays:22,cumMan:264,task:"  ",status:"pending",latestDate:"2026-02-22T14:30:00",phone:"010-5678-1234",pinned:!1,worklogId:"mw2",materials:" (20kg)"},{id:"mw3",name:"",role:"",affiliation:"",site:" ",siteId:"",member:"",process:"",workType:"",location:"C",man:6,cumDays:8,cumMan:48,task:"  ",status:"approved",latestDate:"2026-02-21T16:00:00",phone:"010-9876-5432",pinned:!1,worklogId:"mw3",materials:" 25-21-15 (40)"},{id:"mw4",name:"",role:"",affiliation:"",site:" ",siteId:"",member:"",process:"",workType:"",location:"4",man:10,cumDays:30,cumMan:300,task:"  ",status:"rejected",latestDate:"2026-02-20T11:00:00",phone:"010-1111-2222",pinned:!1,worklogId:"mw4",materials:" D16 (30)   (5kg)"},{id:"mw5",name:"",role:"",affiliation:"",site:" T2 ",siteId:"",member:"",process:"",workType:"",location:" E",man:14,cumDays:45,cumMan:630,task:"  ",status:"pending",latestDate:"2026-02-23T08:00:00",phone:"",pinned:!1,worklogId:"mw5",materials:" (120)   (80)"}],{data:b=[],isLoading:y}=fr({queryKey:["admin-all-worklogs",e],queryFn:async()=>{if(e)return N;const{data:T,error:V}=await me.from("worklogs").select(`
          id, site_name, site_id, work_date, status, created_by, created_at, dept, weather,
          worklog_manpower(worker_name, work_hours),
          worklog_worksets(member, process, work_type, block, dong, floor),
          worklog_materials(name, qty)
        `).order("created_at",{ascending:!1}).limit(200);if(V)throw V;const Y=[...new Set((T||[]).map(ne=>ne.created_by))],{data:W}=await me.from("profiles").select("user_id, name, phone, affiliation").in("user_id",Y),X={};return W==null||W.forEach(ne=>{X[ne.user_id]=ne}),(T||[]).map(ne=>{const te=X[ne.created_by],ie=ne.worklog_manpower||[],B=ne.worklog_worksets||[],$=ne.worklog_materials||[],K=B[0],ce=ie.reduce((Z,fe)=>Z+(fe.work_hours||0),0),ue=K&&[K.block,K.dong,K.floor].filter(Boolean).join(" ")||"";return{id:ne.id,name:(te==null?void 0:te.name)||"",role:"",affiliation:(te==null?void 0:te.affiliation)||"",site:ne.site_name,siteId:ne.site_id,member:(K==null?void 0:K.member)||"-",process:(K==null?void 0:K.process)||"-",workType:(K==null?void 0:K.work_type)||"-",location:ue,man:ce,cumDays:0,cumMan:0,task:B.map(Z=>`${Z.member||""} ${Z.process||""}`).join(", ")||"  ",status:ne.status==="draft"||ne.status==="submitted"?"pending":ne.status,latestDate:ne.created_at,phone:(te==null?void 0:te.phone)||"",pinned:!1,worklogId:ne.id,materials:$.map(Z=>`${Z.name} (${Z.qty})`).join("  ")||"-"}})}}),v=wr({mutationFn:async({worklogId:T,newStatus:V})=>{const{error:Y}=await me.from("worklogs").update({status:V}).eq("id",T);if(Y)throw Y},onSuccess:()=>{x.invalidateQueries({queryKey:["admin-all-worklogs"]}),f(null),g(""),q.success(" ")}}),k=p.useCallback(T=>{h(V=>{const Y=new Set(V);return Y.has(T)?Y.delete(T):Y.add(T),localStorage.setItem("admin_pinned_ids",JSON.stringify([...Y])),Y})},[]),S=p.useMemo(()=>b.map(T=>({...T,pinned:d.has(T.id)})),[b,d]),E=p.useMemo(()=>{let T=S.filter(V=>{const Y=t.toLowerCase(),W=!Y||V.name.toLowerCase().includes(Y)||V.site.toLowerCase().includes(Y),X=a==="all"||V.status===a;return W&&X});return T.sort((V,Y)=>V.pinned!==Y.pinned?V.pinned?-1:1:n==="name"?V.name.localeCompare(Y.name,"ko"):new Date(Y.latestDate).getTime()-new Date(V.latestDate).getTime()),T},[S,t,a,n]),C=E.slice(0,l),R=p.useMemo(()=>({all:S.length,pending:S.filter(T=>T.status==="pending").length,approved:S.filter(T=>T.status==="approved").length,rejected:S.filter(T=>T.status==="rejected").length}),[S]),F=T=>{if(!T)return"";const V=new Date(T);return`${String(V.getMonth()+1).padStart(2,"0")}.${String(V.getDate()).padStart(2,"0")}`};return y?s.jsx("div",{className:"py-20 text-center text-muted-foreground",children:" ..."}):s.jsxs("div",{className:"animate-fade-in",children:[s.jsx("h1",{className:"text-xl-app font-[800] text-header-navy mb-1",children:" "}),s.jsx("p",{className:"text-[15px] text-text-sub font-medium mb-5",children:"   /"}),s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx("input",{value:t,onChange:T=>r(T.target.value),placeholder:"   ",className:"w-full h-[48px] bg-card border border-border rounded-xl pl-4 pr-10 text-[15px] font-medium text-foreground placeholder:text-muted-foreground outline-none transition-all focus:border-primary focus:shadow-input-focus"}),t?s.jsx("button",{onClick:()=>r(""),className:"absolute right-3 top-1/2 -translate-y-1/2",children:s.jsx(Je,{className:"w-4 h-4 text-muted-foreground"})}):s.jsx(Jr,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"})]}),s.jsxs("select",{value:n,onChange:T=>o(T.target.value),className:"w-[90px] h-[48px] bg-card border border-border rounded-xl px-3 text-[14px] font-semibold text-foreground appearance-none cursor-pointer outline-none",children:[s.jsx("option",{value:"latest",children:""}),s.jsx("option",{value:"name",children:""})]})]}),s.jsx("div",{className:"grid grid-cols-4 gap-2 mb-5",children:[{key:"all",label:"",val:R.all,cls:"bg-blue-50 text-blue-500 border-blue-200"},{key:"pending",label:"",val:R.pending,cls:"bg-indigo-50 text-indigo-600 border-indigo-200"},{key:"approved",label:"",val:R.approved,cls:"bg-muted text-text-sub border-border"},{key:"rejected",label:"",val:R.rejected,cls:"bg-red-50 text-red-600 border-red-200"}].map(T=>s.jsxs("button",{onClick:()=>i(T.key),className:U("p-3 rounded-xl text-center flex flex-col items-center gap-0.5 border cursor-pointer transition-all active:scale-[0.98]",T.cls,a===T.key&&"ring-2 ring-primary/30"),children:[s.jsx("span",{className:"text-[20px] font-[800]",children:T.val}),s.jsx("span",{className:"text-[12px] font-bold",children:T.label})]},T.key))}),E.length===0?s.jsx("div",{className:"text-center py-16 text-muted-foreground",children:" "}):s.jsx("div",{className:"space-y-3",children:C.map(T=>s.jsxs("div",{className:U("bg-card rounded-2xl shadow-soft overflow-hidden relative",T.pinned&&"border-2 border-primary"),children:[s.jsx("span",{className:U("absolute top-0 right-0 text-[11px] font-bold px-3 py-1.5 text-white rounded-bl-xl z-10",T.status==="pending"?"bg-indigo-500":T.status==="approved"?"bg-muted-foreground":"bg-destructive"),children:T.status==="pending"?"":T.status==="approved"?"":""}),s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"text-[18px] font-[800] text-header-navy",children:T.name}),s.jsx("span",{className:"text-[13px] font-semibold text-text-sub",children:T.affiliation}),s.jsx("button",{onClick:()=>k(T.id),className:U("ml-auto p-1",T.pinned?"text-primary":"text-border"),children:T.pinned?s.jsx(qh,{className:"w-4 h-4 fill-current"}):s.jsx(Wh,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"text-[15px] font-bold text-primary mb-1",children:T.site}),s.jsxs("div",{className:"text-[13px] text-text-sub font-medium mb-2",children:[F(T.latestDate),"  ",T.member,"  ",T.process,"  ",T.location]}),s.jsxs("div",{className:"grid grid-cols-3 bg-muted/50 rounded-xl p-2.5 border border-border/50 mb-3",children:[s.jsxs("div",{className:"text-center border-r border-border",children:[s.jsx("span",{className:"block text-[16px] font-[800] text-primary",children:T.man}),s.jsx("span",{className:"block text-[10px] font-bold text-text-sub",children:" "})]}),s.jsxs("div",{className:"text-center border-r border-border",children:[s.jsxs("span",{className:"block text-[16px] font-[800] text-primary",children:[T.cumDays,""]}),s.jsx("span",{className:"block text-[10px] font-bold text-text-sub",children:" "})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"block text-[16px] font-[800] text-primary",children:T.cumMan}),s.jsx("span",{className:"block text-[10px] font-bold text-text-sub",children:" "})]})]}),s.jsxs("div",{className:"flex gap-2",children:[T.status==="pending"&&s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:()=>v.mutate({worklogId:T.worklogId,newStatus:"approved"}),className:"flex-1 h-10 bg-emerald-50 text-emerald-700 border border-emerald-200 rounded-xl font-bold text-[13px] flex items-center justify-center gap-1 cursor-pointer active:scale-[0.98]",children:[s.jsx(po,{className:"w-3.5 h-3.5"})," "]}),s.jsxs("button",{onClick:()=>{f(T),g("")},className:"flex-1 h-10 bg-red-50 text-red-600 border border-red-200 rounded-xl font-bold text-[13px] flex items-center justify-center gap-1 cursor-pointer active:scale-[0.98]",children:[s.jsx(xN,{className:"w-3.5 h-3.5"})," "]})]}),T.phone&&s.jsx("a",{href:`tel:${T.phone}`,className:"h-10 px-4 bg-blue-50 text-blue-600 border border-blue-200 rounded-xl font-bold text-[13px] flex items-center justify-center gap-1 no-underline",children:s.jsx(Ro,{className:"w-3.5 h-3.5"})}),s.jsxs("button",{onClick:()=>f(T),className:"h-10 px-4 bg-muted text-text-sub border border-border rounded-xl font-bold text-[13px] flex items-center justify-center gap-1 cursor-pointer active:scale-[0.98]",children:[s.jsx(Yi,{className:"w-3.5 h-3.5"})," "]})]})]})]},T.id))}),l<E.length&&s.jsxs("button",{onClick:()=>c(T=>T+10),className:"w-full h-[48px] mt-4 bg-card border border-border rounded-full text-text-sub font-semibold text-[14px] flex items-center justify-center gap-1 cursor-pointer hover:bg-muted",children:["  ",s.jsx(Lt,{className:"w-4 h-4"})]}),u&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-[2000] flex items-end md:items-center justify-center",onClick:()=>f(null),children:s.jsxs("div",{className:"w-full max-w-[500px] bg-card rounded-t-[20px] md:rounded-2xl p-6 max-h-[85vh] overflow-y-auto animate-slide-up",onClick:T=>T.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between mb-5",children:[s.jsx("h3",{className:"text-[18px] font-[800] text-header-navy",children:" "}),s.jsx("button",{onClick:()=>f(null),className:"bg-transparent border-none cursor-pointer p-1",children:s.jsx(Je,{className:"w-5 h-5 text-text-sub"})})]}),s.jsxs("div",{className:"space-y-3 mb-4",children:[s.jsx(Ya,{label:"",value:`${u.name} (${u.affiliation})`}),s.jsx(Ya,{label:"",value:u.site}),s.jsx(Ya,{label:"",value:u.task}),s.jsx(Ya,{label:"",value:`${u.member}  ${u.process}  ${u.location}`}),s.jsx(Ya,{label:"",value:`${u.man} `}),s.jsx(Ya,{label:"",value:u.materials})]}),u.status==="pending"&&s.jsxs("div",{className:"border-t border-border pt-4",children:[s.jsx("textarea",{value:m,onChange:T=>g(T.target.value),placeholder:"   (  )",className:"w-full min-h-[80px] p-3 border border-border rounded-xl text-[14px] resize-none outline-none focus:border-primary mb-3"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>v.mutate({worklogId:u.worklogId,newStatus:"approved"}),className:"flex-1 h-12 bg-primary text-primary-foreground rounded-xl font-bold text-[15px] cursor-pointer active:scale-[0.98]",children:""}),s.jsx("button",{onClick:()=>{if(!m.trim()){q.error("  ");return}v.mutate({worklogId:u.worklogId,newStatus:"rejected"})},className:"flex-1 h-12 bg-destructive text-destructive-foreground rounded-xl font-bold text-[15px] cursor-pointer active:scale-[0.98]",children:""})]})]})]})})]})}function Ya({label:e,value:t}){return s.jsxs("div",{className:"bg-muted/50 rounded-xl p-3 border border-border/50",children:[s.jsx("div",{className:"text-[12px] font-bold text-text-sub mb-1",children:e}),s.jsx("div",{className:"text-[15px] font-bold text-foreground",children:t})]})}function _I(){const{user:e,isTestMode:t}=Qt(),{isAdmin:r}=ls(),n=pr(),[o,a]=p.useState(""),[i,l]=p.useState("all"),[c,d]=p.useState(!1),[h,u]=p.useState(null),[f,m]=p.useState(null),[g,x]=p.useState(""),[N,b]=p.useState(""),[y,v]=p.useState(""),[k,S]=p.useState(""),[E,C]=p.useState(""),R=[{id:"s1",name:"  ",address:"   123",status:"",manager_name:"",manager_phone:"010-1111-2222",created_at:"2026-01-15",memberCount:8},{id:"s2",name:" ",address:"    456",status:"",manager_name:"",manager_phone:"010-9999-0000",created_at:"2026-01-20",memberCount:12},{id:"s3",name:" ",address:"   789",status:"",manager_name:null,manager_phone:null,created_at:"2026-02-01",memberCount:0},{id:"s4",name:" ",address:"   101",status:"",manager_name:"",manager_phone:"010-9876-5432",created_at:"2025-11-01",memberCount:6},{id:"s5",name:" T2 ",address:"    272",status:"",manager_name:"",manager_phone:"010-3333-4444",created_at:"2025-10-15",memberCount:15}],{data:F=[],isLoading:T}=fr({queryKey:["admin-sites",t],queryFn:async()=>{if(t)return R;const{data:$,error:K}=await me.from("sites").select("*").order("created_at",{ascending:!1});if(K)throw K;const{data:ce}=await me.from("site_members").select("site_id"),ue={};return ce==null||ce.forEach(Z=>{ue[Z.site_id]=(ue[Z.site_id]||0)+1}),($||[]).map(Z=>({...Z,memberCount:ue[Z.id]||0}))}}),V=()=>r?!0:(q.error("  ."),!1),Y=wr({mutationFn:async $=>{if(!V())throw new Error("admin_only");const{error:K}=await me.from("sites").insert({...$,created_by:e==null?void 0:e.id});if(K)throw K},onSuccess:()=>{n.invalidateQueries({queryKey:["admin-sites"]}),d(!1),ne(),q.success(" ")},onError:()=>q.error(" ")}),W=wr({mutationFn:async({id:$,...K})=>{if(!V())throw new Error("admin_only");const{error:ce}=await me.from("sites").update(K).eq("id",$);if(ce)throw ce},onSuccess:()=>{n.invalidateQueries({queryKey:["admin-sites"]}),u(null),ne(),q.success("  ")}}),X=wr({mutationFn:async $=>{if(!V())throw new Error("admin_only");const{error:K}=await me.from("sites").delete().eq("id",$);if(K)throw K},onSuccess:()=>{n.invalidateQueries({queryKey:["admin-sites"]}),q.success(" ")}}),ne=()=>{x(""),b(""),v(""),S(""),C("")},te=$=>{u($),x($.name),b($.address||""),v($.status),S($.manager_name||""),C($.manager_phone||"")},ie=p.useMemo(()=>F.filter($=>{const K=o.toLowerCase(),ce=!K||$.name.toLowerCase().includes(K)||($.address||"").toLowerCase().includes(K),ue=i==="all"||$.status===i;return ce&&ue}),[F,o,i]),B=p.useMemo(()=>({total:F.length,ing:F.filter($=>$.status==="").length,wait:F.filter($=>$.status==="").length,done:F.filter($=>$.status==="").length}),[F]);return T?s.jsx("div",{className:"py-20 text-center text-muted-foreground",children:" ..."}):s.jsxs("div",{className:"animate-fade-in",children:[s.jsxs("div",{className:"flex items-center justify-between mb-5",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl-app font-[800] text-header-navy mb-1",children:" "}),s.jsx("p",{className:"text-[15px] text-text-sub font-medium",children:" , ,  "})]}),s.jsxs("button",{onClick:()=>{V()&&(ne(),d(!0))},className:"h-10 px-4 bg-primary text-primary-foreground rounded-xl font-bold text-[14px] flex items-center gap-1.5 cursor-pointer active:scale-[0.98]",children:[s.jsx(ga,{className:"w-4 h-4"})," "]})]}),s.jsx("div",{className:"grid grid-cols-4 gap-2 mb-4",children:[{key:"all",label:"",val:B.total,cls:"bg-blue-50 text-blue-500 border-blue-200"},{key:"",label:"",val:B.ing,cls:"bg-emerald-50 text-emerald-600 border-emerald-200"},{key:"",label:"",val:B.wait,cls:"bg-violet-50 text-violet-600 border-violet-200"},{key:"",label:"",val:B.done,cls:"bg-muted text-text-sub border-border"}].map($=>s.jsxs("button",{onClick:()=>l($.key),className:U("p-2.5 rounded-xl text-center border cursor-pointer transition-all active:scale-[0.98]",$.cls,i===$.key&&"ring-2 ring-primary/30"),children:[s.jsx("div",{className:"text-[18px] font-[800]",children:$.val}),s.jsx("div",{className:"text-[11px] font-bold",children:$.label})]},$.key))}),s.jsxs("div",{className:"relative mb-4",children:[s.jsx("input",{value:o,onChange:$=>a($.target.value),placeholder:"   ",className:"w-full h-[48px] bg-card border border-border rounded-xl pl-4 pr-10 text-[15px] font-medium outline-none focus:border-primary focus:shadow-input-focus"}),o?s.jsx("button",{onClick:()=>a(""),className:"absolute right-3 top-1/2 -translate-y-1/2",children:s.jsx(Je,{className:"w-4 h-4 text-muted-foreground"})}):s.jsx(Jr,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"})]}),s.jsx("div",{className:"space-y-3",children:ie.map($=>s.jsxs("div",{className:"bg-card rounded-2xl shadow-soft p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-[17px] font-[800] text-header-navy truncate",children:$.name}),$.address&&s.jsx("div",{className:"text-[13px] text-text-sub mt-0.5 truncate",children:$.address})]}),s.jsx("span",{className:U("text-[11px] font-bold px-2.5 py-1 rounded-full text-white ml-2 flex-shrink-0",$.status===""?"bg-blue-500":$.status===""?"bg-violet-500":"bg-muted-foreground"),children:$.status})]}),s.jsxs("div",{className:"flex items-center gap-3 text-[13px] text-text-sub font-medium mb-3",children:[$.manager_name&&s.jsxs("span",{children:[" ",$.manager_name]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Ea,{className:"w-3.5 h-3.5"})," ",$.memberCount,""]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>{V()&&te($)},className:"flex-1 h-9 bg-blue-50 text-blue-600 border border-blue-200 rounded-lg font-bold text-[13px] flex items-center justify-center gap-1 cursor-pointer active:scale-[0.98]",children:[s.jsx(dT,{className:"w-3.5 h-3.5"})," "]}),s.jsxs("button",{onClick:()=>m($.id),className:"flex-1 h-9 bg-violet-50 text-violet-600 border border-violet-200 rounded-lg font-bold text-[13px] flex items-center justify-center gap-1 cursor-pointer active:scale-[0.98]",children:[s.jsx(yg,{className:"w-3.5 h-3.5"})," "]}),s.jsx("button",{onClick:()=>{V()&&confirm(" ?")&&X.mutate($.id)},className:"h-9 px-3 bg-red-50 text-red-600 border border-red-200 rounded-lg cursor-pointer active:scale-[0.98]",children:s.jsx(ko,{className:"w-3.5 h-3.5"})})]})]},$.id))}),(c||h)&&s.jsx(CI,{title:h?" ":" ",name:g,setName:x,addr:N,setAddr:b,status:y,setStatus:v,manager:k,setManager:S,phone:E,setPhone:C,onClose:()=>{d(!1),u(null),ne()},onSubmit:()=>{if(V()){if(!g.trim()){q.error(" ");return}h?W.mutate({id:h.id,name:g,address:N,status:y,manager_name:k,manager_phone:E}):Y.mutate({name:g,address:N,status:y,manager_name:k,manager_phone:E})}},isEdit:!!h}),f&&s.jsx(EI,{siteId:f,onClose:()=>m(null)})]})}function CI({title:e,name:t,setName:r,addr:n,setAddr:o,status:a,setStatus:i,manager:l,setManager:c,phone:d,setPhone:h,onClose:u,onSubmit:f,isEdit:m}){return s.jsx("div",{className:"fixed inset-0 bg-black/50 z-[2000] flex items-end md:items-center justify-center",onClick:u,children:s.jsxs("div",{className:"w-full max-w-[500px] bg-card rounded-t-[20px] md:rounded-2xl p-6 animate-slide-up",onClick:g=>g.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between mb-5",children:[s.jsx("h3",{className:"text-[18px] font-[800] text-header-navy",children:e}),s.jsx("button",{onClick:u,className:"bg-transparent border-none cursor-pointer",children:s.jsx(Je,{className:"w-5 h-5 text-text-sub"})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(Yd,{label:" *",value:t,onChange:r,placeholder:" "}),s.jsx(Yd,{label:"",value:n,onChange:o,placeholder:" "}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[13px] font-bold text-text-sub mb-1",children:""}),s.jsxs("select",{value:a,onChange:g=>i(g.target.value),className:"w-full h-[44px] bg-card border border-border rounded-xl px-3 text-[14px] font-medium outline-none",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]})]}),s.jsx(Yd,{label:"",value:l,onChange:c,placeholder:""}),s.jsx(Yd,{label:"",value:d,onChange:h,placeholder:"010-0000-0000"})]}),s.jsx("button",{onClick:f,className:"w-full h-12 mt-5 bg-primary text-primary-foreground rounded-xl font-bold text-[15px] cursor-pointer active:scale-[0.98]",children:m?" ":""})]})})}function Yd({label:e,value:t,onChange:r,placeholder:n}){return s.jsxs("div",{children:[s.jsx("label",{className:"block text-[13px] font-bold text-text-sub mb-1",children:e}),s.jsx("input",{value:t,onChange:o=>r(o.target.value),placeholder:n,className:"w-full h-[44px] bg-card border border-border rounded-xl px-3 text-[14px] font-medium outline-none focus:border-primary"})]})}function EI({siteId:e,onClose:t}){const r=pr(),[n,o]=p.useState(""),{data:a=[]}=fr({queryKey:["site-members",e],queryFn:async()=>{const{data:u,error:f}=await me.from("site_members").select("*, profiles:user_id(name, affiliation, phone)").eq("site_id",e);if(f)throw f;return u||[]}}),{data:i=[]}=fr({queryKey:["all-users-for-assign"],queryFn:async()=>{const{data:u,error:f}=await me.from("profiles").select("user_id, name, affiliation, phone");if(f)throw f;return u||[]}}),l=new Set(a.map(u=>u.user_id)),c=i.filter(u=>!l.has(u.user_id)&&(!n||u.name.toLowerCase().includes(n.toLowerCase())||(u.affiliation||"").toLowerCase().includes(n.toLowerCase()))),d=wr({mutationFn:async u=>{const{error:f}=await me.from("site_members").insert({site_id:e,user_id:u,role:"worker"});if(f)throw f},onSuccess:()=>{r.invalidateQueries({queryKey:["site-members",e]}),r.invalidateQueries({queryKey:["admin-sites"]}),q.success(" ")}}),h=wr({mutationFn:async u=>{const{error:f}=await me.from("site_members").delete().eq("id",u);if(f)throw f},onSuccess:()=>{r.invalidateQueries({queryKey:["site-members",e]}),r.invalidateQueries({queryKey:["admin-sites"]}),q.success(" ")}});return s.jsx("div",{className:"fixed inset-0 bg-black/50 z-[2000] flex items-end md:items-center justify-center",onClick:t,children:s.jsxs("div",{className:"w-full max-w-[500px] bg-card rounded-t-[20px] md:rounded-2xl p-6 max-h-[85vh] overflow-y-auto animate-slide-up",onClick:u=>u.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-[18px] font-[800] text-header-navy",children:" "}),s.jsx("button",{onClick:t,className:"bg-transparent border-none cursor-pointer",children:s.jsx(Je,{className:"w-5 h-5 text-text-sub"})})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"text-[14px] font-bold text-text-sub mb-2",children:["   (",a.length,")"]}),a.length===0?s.jsx("p",{className:"text-[13px] text-muted-foreground",children:"  "}):s.jsx("div",{className:"space-y-2",children:a.map(u=>{var f,m;return s.jsxs("div",{className:"flex items-center justify-between bg-muted/50 rounded-xl p-3",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-[14px] font-bold text-foreground",children:((f=u.profiles)==null?void 0:f.name)||""}),s.jsx("span",{className:"text-[12px] text-text-sub ml-2",children:((m=u.profiles)==null?void 0:m.affiliation)||""})]}),s.jsx("button",{onClick:()=>h.mutate(u.id),className:"text-destructive bg-transparent border-none cursor-pointer p-1",children:s.jsx(ko,{className:"w-4 h-4"})})]},u.id)})})]}),s.jsxs("div",{className:"border-t border-border pt-4",children:[s.jsx("div",{className:"text-[14px] font-bold text-text-sub mb-2",children:" "}),s.jsx("input",{value:n,onChange:u=>o(u.target.value),placeholder:"   ",className:"w-full h-[44px] bg-card border border-border rounded-xl px-3 text-[14px] font-medium outline-none focus:border-primary mb-3"}),s.jsx("div",{className:"space-y-2 max-h-[200px] overflow-y-auto",children:c.slice(0,20).map(u=>s.jsxs("div",{className:"flex items-center justify-between bg-card border border-border rounded-xl p-3",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-[14px] font-bold text-foreground",children:u.name}),s.jsx("span",{className:"text-[12px] text-text-sub ml-2",children:u.affiliation||""})]}),s.jsx("button",{onClick:()=>d.mutate(u.user_id),className:"h-8 px-3 bg-primary/10 text-primary rounded-lg font-bold text-[12px] cursor-pointer active:scale-[0.98]",children:s.jsx(yg,{className:"w-3.5 h-3.5"})})]},u.user_id))})]})]})})}function PI(){const{isTestMode:e}=Qt(),[t,r]=p.useState(""),[n,o]=p.useState("all"),a=[{user_id:"u1",name:"",phone:"010-1234-5678",affiliation:"",role:"worker",siteCount:3,worklogCount:15},{user_id:"u2",name:"",phone:"010-5678-1234",affiliation:"",role:"worker",siteCount:2,worklogCount:22},{user_id:"u3",name:"",phone:"010-9876-5432",affiliation:"",role:"worker",siteCount:1,worklogCount:8},{user_id:"u4",name:"",phone:"010-1111-2222",affiliation:"",role:"admin",siteCount:5,worklogCount:0},{user_id:"u5",name:"",phone:"010-3333-4444",affiliation:"",role:"worker",siteCount:4,worklogCount:45},{user_id:"u6",name:"",phone:"010-5555-6666",affiliation:"",role:"partner",siteCount:2,worklogCount:0},{user_id:"u7",name:"",phone:"010-7777-8888",affiliation:"",role:"partner",siteCount:3,worklogCount:0},{user_id:"u8",name:"",phone:"010-9999-0000",affiliation:"",role:"admin",siteCount:5,worklogCount:0}],{data:i=[],isLoading:l}=fr({queryKey:["admin-users",e],queryFn:async()=>{if(e)return a;const{data:f,error:m}=await me.from("profiles").select("user_id, name, phone, affiliation");if(m)throw m;const{data:g,error:x}=await me.from("user_roles").select("user_id, role");if(x)throw x;const{data:N}=await me.from("site_members").select("user_id"),b={};N==null||N.forEach(S=>{b[S.user_id]=(b[S.user_id]||0)+1});const{data:y}=await me.from("worklogs").select("created_by"),v={};y==null||y.forEach(S=>{v[S.created_by]=(v[S.created_by]||0)+1});const k={};return g==null||g.forEach(S=>{k[S.user_id]=S.role}),(f||[]).map(S=>({user_id:S.user_id,name:S.name||"",phone:S.phone,affiliation:S.affiliation,role:k[S.user_id]||"worker",siteCount:b[S.user_id]||0,worklogCount:v[S.user_id]||0}))}}),c=p.useMemo(()=>i.filter(f=>{const m=t.toLowerCase(),g=!m||f.name.toLowerCase().includes(m)||(f.affiliation||"").toLowerCase().includes(m),x=n==="all"||f.role===n;return g&&x}),[i,t,n]),d=p.useMemo(()=>({total:i.length,worker:i.filter(f=>f.role==="worker").length,admin:i.filter(f=>f.role==="admin").length,partner:i.filter(f=>f.role==="partner").length}),[i]),h={admin:"",worker:"",partner:""},u={admin:"bg-amber-50 text-amber-700 border-amber-200",worker:"bg-blue-50 text-blue-600 border-blue-200",partner:"bg-violet-50 text-violet-600 border-violet-200"};return l?s.jsx("div",{className:"py-20 text-center text-muted-foreground",children:" ..."}):s.jsxs("div",{className:"animate-fade-in",children:[s.jsx("h1",{className:"text-xl-app font-[800] text-header-navy mb-1",children:" "}),s.jsx("p",{className:"text-[15px] text-text-sub font-medium mb-5",children:"     "}),s.jsx("div",{className:"grid grid-cols-4 gap-2 mb-4",children:[{key:"all",label:"",val:d.total,cls:"bg-blue-50 text-blue-500 border-blue-200"},{key:"worker",label:"",val:d.worker,cls:"bg-emerald-50 text-emerald-600 border-emerald-200"},{key:"admin",label:"",val:d.admin,cls:"bg-amber-50 text-amber-700 border-amber-200"},{key:"partner",label:"",val:d.partner,cls:"bg-violet-50 text-violet-600 border-violet-200"}].map(f=>s.jsxs("button",{onClick:()=>o(f.key),className:U("p-2.5 rounded-xl text-center border cursor-pointer transition-all active:scale-[0.98]",f.cls,n===f.key&&"ring-2 ring-primary/30"),children:[s.jsx("div",{className:"text-[18px] font-[800]",children:f.val}),s.jsx("div",{className:"text-[11px] font-bold",children:f.label})]},f.key))}),s.jsxs("div",{className:"relative mb-4",children:[s.jsx("input",{value:t,onChange:f=>r(f.target.value),placeholder:"   ",className:"w-full h-[48px] bg-card border border-border rounded-xl pl-4 pr-10 text-[15px] font-medium outline-none focus:border-primary focus:shadow-input-focus"}),t?s.jsx("button",{onClick:()=>r(""),className:"absolute right-3 top-1/2 -translate-y-1/2",children:s.jsx(Je,{className:"w-4 h-4 text-muted-foreground"})}):s.jsx(Jr,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"})]}),c.length===0?s.jsx("div",{className:"text-center py-16 text-muted-foreground",children:" "}):s.jsx("div",{className:"space-y-2",children:c.map(f=>s.jsxs("div",{className:"bg-card rounded-2xl shadow-soft p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center text-[16px] font-[800] text-primary",children:f.name.charAt(0)}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[16px] font-[800] text-header-navy",children:f.name}),s.jsx("div",{className:"text-[13px] text-text-sub font-medium",children:f.affiliation||" "})]})]}),s.jsx("span",{className:U("text-[11px] font-bold px-2.5 py-1 rounded-full border",u[f.role]||u.worker),children:h[f.role]||f.role})]}),s.jsxs("div",{className:"flex items-center gap-4 text-[13px] text-text-sub font-medium",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(lr,{className:"w-3.5 h-3.5"}),"  ",f.siteCount,""]}),s.jsxs("span",{children:[" ",f.worklogCount,""]}),f.phone&&s.jsxs("a",{href:`tel:${f.phone}`,className:"flex items-center gap-1 text-blue-500 no-underline ml-auto",children:[s.jsx(Ro,{className:"w-3.5 h-3.5"})," ",f.phone]})]})]},f.user_id))})]})}function RI(){const{isTestMode:e}=Qt();pr();const[t,r]=p.useState(""),[n,o]=p.useState(null),[a,i]=p.useState(null),l=[{user_id:"p1",name:"",affiliation:"",phone:"010-5555-6666",siteCount:2,deploymentCount:8},{user_id:"p2",name:"",affiliation:"",phone:"010-7777-8888",siteCount:3,deploymentCount:15},{user_id:"p3",name:"",affiliation:"",phone:"010-4444-3333",siteCount:1,deploymentCount:5}],{data:c=[],isLoading:d}=fr({queryKey:["admin-partners",e],queryFn:async()=>{if(e)return l;const{data:u,error:f}=await me.from("user_roles").select("user_id").eq("role","partner");if(f)throw f;const m=(u||[]).map(k=>k.user_id);if(m.length===0)return[];const{data:g,error:x}=await me.from("profiles").select("user_id, name, affiliation, phone").in("user_id",m);if(x)throw x;const{data:N}=await me.from("site_members").select("user_id").in("user_id",m),b={};N==null||N.forEach(k=>{b[k.user_id]=(b[k.user_id]||0)+1});const{data:y}=await me.from("partner_deployments").select("partner_user_id").in("partner_user_id",m),v={};return y==null||y.forEach(k=>{v[k.partner_user_id]=(v[k.partner_user_id]||0)+1}),(g||[]).map(k=>({user_id:k.user_id,name:k.name||"",affiliation:k.affiliation,phone:k.phone,siteCount:b[k.user_id]||0,deploymentCount:v[k.user_id]||0}))}}),h=p.useMemo(()=>{const u=t.toLowerCase();return c.filter(f=>!u||f.name.toLowerCase().includes(u)||(f.affiliation||"").toLowerCase().includes(u))},[c,t]);return d?s.jsx("div",{className:"py-20 text-center text-muted-foreground",children:" ..."}):s.jsxs("div",{className:"animate-fade-in",children:[s.jsx("h1",{className:"text-xl-app font-[800] text-header-navy mb-1",children:" "}),s.jsx("p",{className:"text-[15px] text-text-sub font-medium mb-5",children:"     "}),s.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[s.jsxs("div",{className:"p-3.5 rounded-xl text-center bg-violet-50 border border-violet-200",children:[s.jsx("div",{className:"text-[22px] font-[800] text-violet-600",children:c.length}),s.jsx("div",{className:"text-[12px] font-bold text-violet-600",children:""})]}),s.jsxs("div",{className:"p-3.5 rounded-xl text-center bg-blue-50 border border-blue-200",children:[s.jsx("div",{className:"text-[22px] font-[800] text-blue-500",children:c.reduce((u,f)=>u+f.siteCount,0)}),s.jsx("div",{className:"text-[12px] font-bold text-blue-500",children:" "})]}),s.jsxs("div",{className:"p-3.5 rounded-xl text-center bg-emerald-50 border border-emerald-200",children:[s.jsx("div",{className:"text-[22px] font-[800] text-emerald-600",children:c.reduce((u,f)=>u+f.deploymentCount,0)}),s.jsx("div",{className:"text-[12px] font-bold text-emerald-600",children:" "})]})]}),s.jsxs("div",{className:"relative mb-4",children:[s.jsx("input",{value:t,onChange:u=>r(u.target.value),placeholder:"    ",className:"w-full h-[48px] bg-card border border-border rounded-xl pl-4 pr-10 text-[15px] font-medium outline-none focus:border-primary focus:shadow-input-focus"}),t?s.jsx("button",{onClick:()=>r(""),className:"absolute right-3 top-1/2 -translate-y-1/2",children:s.jsx(Je,{className:"w-4 h-4 text-muted-foreground"})}):s.jsx(Jr,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"})]}),h.length===0?s.jsxs("div",{className:"text-center py-16 text-muted-foreground flex flex-col items-center gap-2",children:[s.jsx(sh,{className:"w-10 h-10 opacity-50"}),s.jsx("p",{children:"  "})]}):s.jsx("div",{className:"space-y-3",children:h.map(u=>s.jsxs("div",{className:"bg-card rounded-2xl shadow-soft p-4",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-violet-100 flex items-center justify-center text-[18px] font-[800] text-violet-600",children:u.name.charAt(0)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-[17px] font-[800] text-header-navy",children:u.name}),s.jsx("div",{className:"text-[13px] text-text-sub font-medium",children:u.affiliation||""})]}),s.jsx("span",{className:"text-[11px] font-bold px-2.5 py-1 rounded-full bg-violet-50 text-violet-600 border border-violet-200",children:""})]}),s.jsxs("div",{className:"grid grid-cols-3 bg-muted/50 rounded-xl p-2.5 border border-border/50 mb-3",children:[s.jsxs("div",{className:"text-center border-r border-border",children:[s.jsx("span",{className:"block text-[16px] font-[800] text-primary",children:u.siteCount}),s.jsx("span",{className:"block text-[10px] font-bold text-text-sub",children:" "})]}),s.jsxs("div",{className:"text-center border-r border-border",children:[s.jsx("span",{className:"block text-[16px] font-[800] text-primary",children:u.deploymentCount}),s.jsx("span",{className:"block text-[10px] font-bold text-text-sub",children:" "})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"block text-[16px] font-[800] text-primary",children:u.phone?"":"-"}),s.jsx("span",{className:"block text-[10px] font-bold text-text-sub",children:""})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>i(u.user_id),className:"flex-1 h-10 bg-violet-50 text-violet-600 border border-violet-200 rounded-xl font-bold text-[13px] flex items-center justify-center gap-1 cursor-pointer active:scale-[0.98]",children:[s.jsx(yg,{className:"w-3.5 h-3.5"}),"  "]}),s.jsxs("button",{onClick:()=>o(u),className:"flex-1 h-10 bg-blue-50 text-blue-600 border border-blue-200 rounded-xl font-bold text-[13px] flex items-center justify-center gap-1 cursor-pointer active:scale-[0.98]",children:[s.jsx(on,{className:"w-3.5 h-3.5"}),"  "]})]})]},u.user_id))}),a&&s.jsx(TI,{partnerId:a,onClose:()=>i(null)}),n&&s.jsx(AI,{partner:n,onClose:()=>o(null)})]})}function TI({partnerId:e,onClose:t}){const r=pr(),[n,o]=p.useState(""),{data:a=[]}=fr({queryKey:["partner-sites",e],queryFn:async()=>{const{data:u}=await me.from("site_members").select("id, site_id, sites:site_id(name, status)").eq("user_id",e);return u||[]}}),{data:i=[]}=fr({queryKey:["all-sites-for-assign"],queryFn:async()=>{const{data:u}=await me.from("sites").select("id, name, status");return u||[]}}),l=new Set(a.map(u=>u.site_id)),c=i.filter(u=>!l.has(u.id)&&(!n||u.name.toLowerCase().includes(n.toLowerCase()))),d=wr({mutationFn:async u=>{const{error:f}=await me.from("site_members").insert({site_id:u,user_id:e,role:"partner"});if(f)throw f},onSuccess:()=>{r.invalidateQueries({queryKey:["partner-sites",e]}),r.invalidateQueries({queryKey:["admin-partners"]}),q.success(" ")}}),h=wr({mutationFn:async u=>{const{error:f}=await me.from("site_members").delete().eq("id",u);if(f)throw f},onSuccess:()=>{r.invalidateQueries({queryKey:["partner-sites",e]}),r.invalidateQueries({queryKey:["admin-partners"]}),q.success(" ")}});return s.jsx("div",{className:"fixed inset-0 bg-black/50 z-[2000] flex items-end md:items-center justify-center",onClick:t,children:s.jsxs("div",{className:"w-full max-w-[500px] bg-card rounded-t-[20px] md:rounded-2xl p-6 max-h-[85vh] overflow-y-auto animate-slide-up",onClick:u=>u.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-[18px] font-[800] text-header-navy",children:"  "}),s.jsx("button",{onClick:t,className:"bg-transparent border-none cursor-pointer",children:s.jsx(Je,{className:"w-5 h-5 text-text-sub"})})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"text-[14px] font-bold text-text-sub mb-2",children:["  (",a.length,")"]}),a.length===0?s.jsx("p",{className:"text-[13px] text-muted-foreground",children:"  "}):s.jsx("div",{className:"space-y-2",children:a.map(u=>{var f,m,g,x;return s.jsxs("div",{className:"flex items-center justify-between bg-muted/50 rounded-xl p-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(lr,{className:"w-4 h-4 text-primary"}),s.jsx("span",{className:"text-[14px] font-bold text-foreground",children:((f=u.sites)==null?void 0:f.name)||""}),s.jsx("span",{className:U("text-[10px] font-bold px-1.5 py-0.5 rounded-full text-white",((m=u.sites)==null?void 0:m.status)===""?"bg-blue-500":((g=u.sites)==null?void 0:g.status)===""?"bg-violet-500":"bg-muted-foreground"),children:(x=u.sites)==null?void 0:x.status})]}),s.jsx("button",{onClick:()=>h.mutate(u.id),className:"text-destructive text-[12px] font-bold bg-transparent border-none cursor-pointer",children:""})]},u.id)})})]}),s.jsxs("div",{className:"border-t border-border pt-4",children:[s.jsx("div",{className:"text-[14px] font-bold text-text-sub mb-2",children:"  "}),s.jsx("input",{value:n,onChange:u=>o(u.target.value),placeholder:" ",className:"w-full h-[44px] bg-card border border-border rounded-xl px-3 text-[14px] font-medium outline-none focus:border-primary mb-3"}),s.jsx("div",{className:"space-y-2 max-h-[200px] overflow-y-auto",children:c.map(u=>s.jsxs("div",{className:"flex items-center justify-between bg-card border border-border rounded-xl p-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(lr,{className:"w-4 h-4 text-text-sub"}),s.jsx("span",{className:"text-[14px] font-bold text-foreground",children:u.name})]}),s.jsx("button",{onClick:()=>d.mutate(u.id),className:"h-8 px-3 bg-violet-100 text-violet-600 rounded-lg font-bold text-[12px] cursor-pointer active:scale-[0.98]",children:""})]},u.id))})]})]})})}function AI({partner:e,onClose:t}){const{data:r=[]}=fr({queryKey:["partner-deployments-detail",e.user_id],queryFn:async()=>{const{data:n}=await me.from("partner_deployments").select("*").eq("partner_user_id",e.user_id).order("deploy_date",{ascending:!1}).limit(20);return n||[]}});return s.jsx("div",{className:"fixed inset-0 bg-black/50 z-[2000] flex items-end md:items-center justify-center",onClick:t,children:s.jsxs("div",{className:"w-full max-w-[500px] bg-card rounded-t-[20px] md:rounded-2xl p-6 max-h-[85vh] overflow-y-auto animate-slide-up",onClick:n=>n.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-[18px] font-[800] text-header-navy",children:[e.name," "]}),s.jsx("button",{onClick:t,className:"bg-transparent border-none cursor-pointer",children:s.jsx(Je,{className:"w-5 h-5 text-text-sub"})})]}),s.jsx("div",{className:"bg-muted/50 rounded-xl p-4 mb-4 border border-border/50",children:s.jsxs("div",{className:"grid grid-cols-2 gap-3 text-[14px]",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-text-sub font-medium",children:""}),s.jsx("div",{className:"font-bold text-foreground",children:e.name})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-text-sub font-medium",children:""}),s.jsx("div",{className:"font-bold text-foreground",children:e.affiliation||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-text-sub font-medium",children:""}),s.jsx("div",{className:"font-bold text-foreground",children:e.phone||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-text-sub font-medium",children:" "}),s.jsxs("div",{className:"font-bold text-foreground",children:[e.siteCount,""]})]})]})}),s.jsxs("div",{className:"text-[14px] font-bold text-text-sub mb-2",children:["   (",r.length,")"]}),r.length===0?s.jsx("p",{className:"text-[13px] text-muted-foreground text-center py-4",children:"  "}):s.jsx("div",{className:"space-y-2",children:r.map(n=>s.jsxs("div",{className:"bg-card border border-border rounded-xl p-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"text-[14px] font-bold text-foreground",children:n.site_name}),s.jsx("span",{className:"text-[12px] text-text-sub",children:n.deploy_date})]}),s.jsxs("div",{className:"text-[13px] text-text-sub font-medium",children:[" ",n.people_count," ",n.note&&` ${n.note}`]})]},n.id))})]})})}function OI(){const{isTestMode:e}=Qt(),[t,r]=p.useState(""),[n,o]=p.useState("all"),a=[{id:"d1",title:"  3   ",doc_type:"photo",file_ext:"jpg",site_name:"  ",work_date:"2026-02-23",created_at:"2026-02-23T10:00:00Z",file_url:null},{id:"d2",title:"    v3",doc_type:"drawing",file_ext:"pdf",site_name:" ",work_date:"2026-02-22",created_at:"2026-02-22T14:00:00Z",file_url:null},{id:"d3",title:"    ",doc_type:"cert",file_ext:"pdf",site_name:" ",work_date:"2026-02-21",created_at:"2026-02-21T16:30:00Z",file_url:null},{id:"d4",title:"2026  ",doc_type:"company",file_ext:"pdf",site_name:null,work_date:null,created_at:"2026-02-20T09:00:00Z",file_url:null},{id:"d5",title:"    ",doc_type:"photo",file_ext:"jpg",site_name:" ",work_date:"2026-02-20",created_at:"2026-02-20T11:00:00Z",file_url:null},{id:"d6",title:" T2   ",doc_type:"photo",file_ext:"png",site_name:" T2 ",work_date:"2026-02-19",created_at:"2026-02-19T15:00:00Z",file_url:null},{id:"d7",title:"   ",doc_type:"drawing",file_ext:"dwg",site_name:" ",work_date:"2026-02-18",created_at:"2026-02-18T10:00:00Z",file_url:null},{id:"d8",title:"  ",doc_type:"cert",file_ext:"pdf",site_name:"  ",work_date:"2026-02-17",created_at:"2026-02-17T17:00:00Z",file_url:null}],{data:i=[],isLoading:l}=fr({queryKey:["admin-docs",e],queryFn:async()=>{if(e)return a;const{data:u,error:f}=await me.from("documents").select("id, title, doc_type, file_ext, site_name, work_date, created_at, file_url").order("created_at",{ascending:!1}).limit(200);if(f)throw f;return u||[]}}),c=p.useMemo(()=>i.filter(u=>{const f=t.toLowerCase(),m=!f||u.title.toLowerCase().includes(f)||(u.site_name||"").toLowerCase().includes(f),g=n==="all"||u.doc_type===n;return m&&g}),[i,t,n]),d=p.useMemo(()=>({total:i.length,photo:i.filter(u=>u.doc_type==="photo").length,drawing:i.filter(u=>u.doc_type==="drawing").length,cert:i.filter(u=>u.doc_type==="cert"||u.doc_type==="completion").length,company:i.filter(u=>u.doc_type==="company").length}),[i]),h={photo:"",drawing:"",cert:"",completion:"",company:"",other:""};return l?s.jsx("div",{className:"py-20 text-center text-muted-foreground",children:" ..."}):s.jsxs("div",{className:"animate-fade-in",children:[s.jsx("h1",{className:"text-xl-app font-[800] text-header-navy mb-1",children:" "}),s.jsx("p",{className:"text-[15px] text-text-sub font-medium mb-5",children:"   "}),s.jsx("div",{className:"grid grid-cols-5 gap-1.5 mb-4",children:[{key:"all",label:"",val:d.total},{key:"photo",label:"",val:d.photo},{key:"drawing",label:"",val:d.drawing},{key:"cert",label:"",val:d.cert},{key:"company",label:"",val:d.company}].map(u=>s.jsxs("button",{onClick:()=>o(u.key),className:U("p-2 rounded-xl text-center border cursor-pointer transition-all active:scale-[0.98]","bg-card border-border",n===u.key&&"ring-2 ring-primary/30 bg-primary/5"),children:[s.jsx("div",{className:"text-[16px] font-[800] text-primary",children:u.val}),s.jsx("div",{className:"text-[10px] font-bold text-text-sub",children:u.label})]},u.key))}),s.jsxs("div",{className:"relative mb-4",children:[s.jsx("input",{value:t,onChange:u=>r(u.target.value),placeholder:"   ",className:"w-full h-[48px] bg-card border border-border rounded-xl pl-4 pr-10 text-[15px] font-medium outline-none focus:border-primary focus:shadow-input-focus"}),t?s.jsx("button",{onClick:()=>r(""),className:"absolute right-3 top-1/2 -translate-y-1/2",children:s.jsx(Je,{className:"w-4 h-4 text-muted-foreground"})}):s.jsx(Jr,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"})]}),c.length===0?s.jsx("div",{className:"text-center py-16 text-muted-foreground",children:" "}):s.jsx("div",{className:"space-y-2",children:c.map(u=>s.jsxs("div",{className:"bg-card rounded-xl shadow-soft p-4 flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0",children:s.jsx(yr,{className:"w-5 h-5 text-primary"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-[14px] font-bold text-foreground truncate",children:u.title}),s.jsxs("div",{className:"text-[12px] text-text-sub font-medium flex items-center gap-2",children:[s.jsx("span",{className:"bg-muted px-1.5 py-0.5 rounded text-[10px] font-bold",children:h[u.doc_type]||u.doc_type}),u.site_name&&s.jsx("span",{className:"truncate",children:u.site_name}),s.jsx("span",{children:new Date(u.created_at).toLocaleDateString("ko-KR")})]})]}),u.file_ext&&s.jsx("span",{className:"text-[10px] font-bold text-muted-foreground bg-muted px-2 py-1 rounded uppercase flex-shrink-0",children:u.file_ext})]},u.id))})]})}const wp=[{key:"dashboard",label:"",icon:aT},{key:"worklog",label:"",icon:Pr},{key:"site",label:"",icon:lr},{key:"user",label:"",icon:Ea},{key:"partner",label:"",icon:sh},{key:"doc",label:"",icon:yr}];function DI(){const{isAdmin:e,loading:t}=ls(),r=Yr(),[n,o]=p.useState("dashboard"),[a,i]=p.useState(!1);if(t)return s.jsx("div",{className:"flex items-center justify-center min-h-screen bg-background",children:s.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})});if(!e)return s.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-background gap-4 p-6",children:[s.jsx("div",{className:"text-[48px]",children:""}),s.jsx("h2",{className:"text-xl-app font-[800] text-header-navy",children:"  "}),s.jsx("p",{className:"text-text-sub text-center",children:"  ."}),s.jsx("button",{onClick:()=>r("/"),className:"mt-4 h-12 px-6 bg-primary text-primary-foreground rounded-xl font-bold cursor-pointer",children:" "})]});const l=()=>{switch(n){case"dashboard":return s.jsx(kI,{onNavigate:c=>o(c)});case"worklog":return s.jsx(SI,{});case"site":return s.jsx(_I,{});case"user":return s.jsx(PI,{});case"partner":return s.jsx(RI,{});case"doc":return s.jsx(OI,{})}};return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsxs("aside",{className:"hidden md:flex fixed left-0 top-0 bottom-0 w-[240px] bg-card border-r border-border flex-col z-50",children:[s.jsxs("div",{className:"h-[60px] px-5 flex items-center border-b border-border",children:[s.jsx("button",{onClick:()=>r("/"),className:"flex items-center gap-2 bg-transparent border-none cursor-pointer",children:s.jsx(Qi,{className:"w-5 h-5 text-text-sub"})}),s.jsx("span",{className:"text-lg-app font-[800] text-header-navy ml-2",children:" "})]}),s.jsx("nav",{className:"flex-1 py-3 px-3 space-y-1 overflow-y-auto",children:wp.map(c=>s.jsxs("button",{onClick:()=>o(c.key),className:U("w-full h-[46px] flex items-center gap-3 px-4 rounded-xl text-[15px] font-semibold border-none cursor-pointer transition-all",n===c.key?"bg-primary/10 text-primary font-[800]":"bg-transparent text-text-sub hover:bg-muted"),children:[s.jsx(c.icon,{className:"w-5 h-5 flex-shrink-0"}),c.label]},c.key))}),s.jsx("div",{className:"p-4 border-t border-border",children:s.jsx("div",{className:"text-[12px] text-muted-foreground text-center",children:"INOPNC  v1.0"})})]}),s.jsxs("header",{className:"md:hidden fixed top-0 left-0 right-0 bg-card border-b border-border z-50",children:[s.jsxs("div",{className:"h-[56px] px-4 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>r("/"),className:"bg-transparent border-none cursor-pointer p-1",children:s.jsx(Qi,{className:"w-5 h-5 text-text-sub"})}),s.jsx("span",{className:"text-lg-app font-[800] text-header-navy",children:" "})]}),s.jsx("button",{onClick:()=>i(!a),className:"bg-transparent border-none cursor-pointer p-1",children:a?s.jsx(Je,{className:"w-6 h-6 text-text-sub"}):s.jsx(fN,{className:"w-6 h-6 text-text-sub"})})]}),s.jsx("nav",{className:"h-[48px] flex items-center gap-0 overflow-x-auto no-scrollbar border-t border-border/50 px-2",children:wp.map(c=>s.jsxs("button",{onClick:()=>{o(c.key),i(!1)},className:U("h-full flex items-center gap-1.5 px-3 whitespace-nowrap text-[14px] font-bold border-none bg-transparent cursor-pointer transition-colors border-b-2 flex-shrink-0",n===c.key?"text-primary border-b-primary":"text-text-sub border-b-transparent"),children:[s.jsx(c.icon,{className:"w-4 h-4"}),c.label]},c.key))})]}),a&&s.jsxs("div",{className:"md:hidden fixed inset-0 z-[60]",onClick:()=>i(!1),children:[s.jsx("div",{className:"absolute inset-0 bg-black/30"}),s.jsxs("div",{className:"absolute top-0 right-0 w-[260px] h-full bg-card shadow-lg animate-slide-in-right",onClick:c=>c.stopPropagation(),children:[s.jsxs("div",{className:"h-[56px] px-5 flex items-center justify-between border-b border-border",children:[s.jsx("span",{className:"text-lg-app font-[800] text-header-navy",children:""}),s.jsx("button",{onClick:()=>i(!1),className:"bg-transparent border-none cursor-pointer",children:s.jsx(Je,{className:"w-5 h-5 text-text-sub"})})]}),s.jsx("nav",{className:"py-3 px-3 space-y-1",children:wp.map(c=>s.jsxs("button",{onClick:()=>{o(c.key),i(!1)},className:U("w-full h-[46px] flex items-center gap-3 px-4 rounded-xl text-[15px] font-semibold border-none cursor-pointer transition-all",n===c.key?"bg-primary/10 text-primary font-[800]":"bg-transparent text-text-sub hover:bg-muted"),children:[s.jsx(c.icon,{className:"w-5 h-5 flex-shrink-0"}),c.label]},c.key))})]})]}),s.jsx("main",{className:U("min-h-screen pt-[104px] md:pt-0 md:ml-[240px]","px-4 md:px-8 pb-8 md:py-8"),children:s.jsx("div",{className:"max-w-[960px] mx-auto",children:l()})})]})}const II=new o4,MI=()=>s.jsx(d4,{client:II,children:s.jsxs(zE,{children:[s.jsx(G_,{}),s.jsx(xP,{children:s.jsx(YR,{children:s.jsxs(hP,{children:[s.jsx(_r,{path:"/auth",element:s.jsx(vI,{})}),s.jsx(_r,{path:"/reset-password",element:s.jsx(wI,{})}),s.jsx(_r,{path:"/admin",element:s.jsx(cy,{children:s.jsx(DI,{})})}),s.jsx(_r,{path:"/home",element:s.jsx(uu,{to:"/",replace:!0})}),s.jsx(_r,{path:"/home/*",element:s.jsx(uu,{to:"/",replace:!0})}),s.jsx(_r,{path:"/home.html",element:s.jsx(uu,{to:"/",replace:!0})}),s.jsxs(_r,{element:s.jsx(cy,{children:s.jsx(eA,{})}),children:[s.jsx(_r,{path:"/",element:s.jsx(FA,{})}),s.jsx(_r,{path:"/site",element:s.jsx(gO,{})}),s.jsx(_r,{path:"/worklog",element:s.jsx(O6,{})}),s.jsx(_r,{path:"/output",element:s.jsx(B6,{})}),s.jsx(_r,{path:"/doc",element:s.jsx(Y6,{})}),s.jsx(_r,{path:"/request",element:s.jsx(hI,{})}),s.jsx(_r,{path:"/request/external",element:s.jsx(yI,{})})]}),s.jsx(_r,{path:"*",element:s.jsx(jI,{})})]})})})]})}),$I={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},tx=$I??{},F2=String(tx.VERCEL_GIT_COMMIT_SHA??Date.now()),U2=new Date().toISOString(),LI=tx.PROD===!0||tx.MODE==="production",FI=()=>{if(typeof document>"u")return;const e=`BUILD_SHA=${F2} BUILD_TIME=${U2}`,t=document.getElementById("__inopnc_build_meta");if(t){t.textContent=e;return}const r=document.createElement("div");r.id="__inopnc_build_meta",r.setAttribute("aria-hidden","true"),r.textContent=e,Object.assign(r.style,{position:"fixed",left:"0",bottom:"0",padding:"2px 4px",fontSize:"10px",lineHeight:"1",whiteSpace:"nowrap",color:"#000",opacity:"0",pointerEvents:"none",userSelect:"text",zIndex:"2147483647"}),document.body.appendChild(r)},UI=async()=>{if(!(typeof window>"u"||!LI)){try{if("caches"in window){const e=await caches.keys();await Promise.all(e.map(t=>caches.delete(t)))}}catch(e){console.warn("[cache-cleanup] failed to clear caches",e)}if("serviceWorker"in navigator){try{const e=await navigator.serviceWorker.getRegistrations();await Promise.all(e.map(t=>t.unregister()))}catch(e){console.warn("[sw-cleanup] failed to unregister old workers",e)}try{await navigator.serviceWorker.register("/sw.js")}catch(e){console.warn("[sw-register] failed",e)}}}};console.info("[build-meta]",{BUILD_SHA:F2,BUILD_TIME:U2});UI();S1(document.getElementById("root")).render(s.jsx(MI,{}));FI();
